require=function t(e,i,r){function s(o,a){if(!i[o]){if(!e[o]){var p=typeof require=="function"&&require;if(!a&&p)return p(o,!0);if(n)return n(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[o]={exports:{}};e[o][0].call(h.exports,function(t){var i=e[o][1][t];return s(i?i:t)},h,h.exports,t,e,i,r)}return i[o].exports}var n=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({"awayjs-display/lib/animators/IAnimationSet":[function(t,e,i){},{}],"awayjs-display/lib/animators/IAnimator":[function(t,e,i){},{}],"awayjs-display/lib/animators/nodes/AnimationNodeBase":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/library/AssetType");var n=t("awayjs-core/lib/library/NamedAssetBase");var o=function(t){r(e,t);function e(){t.call(this)}Object.defineProperty(e.prototype,"stateClass",{get:function(){return this._pStateClass},enumerable:true,configurable:true});e.prototype.dispose=function(){};Object.defineProperty(e.prototype,"assetType",{get:function(){return s.ANIMATION_NODE},enumerable:true,configurable:true});return e}(n);e.exports=o},{"awayjs-core/lib/library/AssetType":undefined,"awayjs-core/lib/library/NamedAssetBase":undefined}],"awayjs-display/lib/base/AlignmentMode":[function(t,e,i){var r=function(){function t(){}t.REGISTRATION_POINT="registrationPoint";t.PIVOT_POINT="pivot";return t}();e.exports=r},{}],"awayjs-display/lib/base/CapsStyle":[function(t,e,i){var r=function(){function t(){}t.ROUND="round";t.NONE="none";t.SQUARE="square";return t}();e.exports=r},{}],"awayjs-display/lib/base/CurveSubGeometry":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/geom/Vector3D");var n=t("awayjs-display/lib/base/SubGeometryBase");var o=t("awayjs-display/lib/base/CurveSubMesh");var a=t("awayjs-display/lib/events/SubGeometryEvent");var p=function(t){r(e,t);function e(e){t.call(this,e);this._positionsDirty=true;this._curvesDirty=true;this._faceNormalsDirty=true;this._faceTangentsDirty=true;this._vertexNormalsDirty=true;this._vertexTangentsDirty=true;this._uvsDirty=true;this._secondaryUVsDirty=true;this._jointIndicesDirty=true;this._jointWeightsDirty=true;this._concatenateArrays=true;this._autoDeriveNormals=false;this._useFaceWeights=false;this._autoDeriveUVs=false;this._scaleU=1;this._scaleV=1;this._pSubMeshClass=o}Object.defineProperty(e.prototype,"scaleU",{get:function(){return this._scaleU},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"scaleV",{get:function(){return this._scaleV},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"useCondensedIndices",{get:function(){return this._useCondensedIndices},set:function(t){if(this._useCondensedIndices==t)return;this._useCondensedIndices=t},enumerable:true,configurable:true});e.prototype._pUpdateStrideOffset=function(){if(this._concatenateArrays){this._pOffset[e.VERTEX_DATA]=0;this._pOffset[e.POSITION_DATA]=0;var t=3;if(this._curves!=null){this._pOffset[e.CURVE_DATA]=t;t+=2}if(this._uvs!=null){this._pOffset[e.UV_DATA]=t;t+=2}this._pStride[e.VERTEX_DATA]=t;this._pStride[e.POSITION_DATA]=t;this._pStride[e.CURVE_DATA]=t;this._pStride[e.UV_DATA]=t;var i=this._pNumVertices*t;if(this._pVertices==null)this._pVertices=new Array(i);else if(this._pVertices.length!=i)this._pVertices.length=i}else{this._pOffset[e.POSITION_DATA]=0;this._pOffset[e.CURVE_DATA]=0;this._pOffset[e.UV_DATA]=0;this._pStride[e.POSITION_DATA]=3;this._pStride[e.CURVE_DATA]=2;this._pStride[e.UV_DATA]=2}this._pStrideOffsetDirty=false};Object.defineProperty(e.prototype,"autoDeriveUVs",{get:function(){return false},set:function(t){return;if(t)this.notifyUVsUpdate()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"autoDeriveNormals",{get:function(){return this._autoDeriveNormals},set:function(t){if(this._autoDeriveNormals==t)return;this._autoDeriveNormals=t},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"vertices",{get:function(){if(this._positionsDirty)this.updatePositions(this._positions);if(this._curvesDirty)this.updateCurves(this._curves);if(this._uvsDirty)this.updateUVs(this._uvs);return this._pVertices},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"positions",{get:function(){if(this._positionsDirty)this.updatePositions(this._positions);return this._positions},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"curves",{get:function(){if(this._curvesDirty)this.updateCurves(this._curves);return this._curves},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"faceNormals",{get:function(){if(this._faceNormalsDirty)this.updateFaceNormals();return this._faceNormals},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"uvs",{get:function(){if(this._uvsDirty)this.updateUVs(this._uvs);return this._uvs},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"useFaceWeights",{get:function(){return this._useFaceWeights},set:function(t){if(this._useFaceWeights==t)return;this._useFaceWeights=t;this._faceNormalsDirty=true},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"condensedIndexLookUp",{get:function(){return this._condensedIndexLookUp},enumerable:true,configurable:true});e.prototype.getBoundingPositions=function(){if(this._positionsDirty)this.updatePositions(this._positions);return this._positions};e.prototype.updatePositions=function(t){var i;var r;var s;var n;this._positions=t;if(this._positions==null)this._positions=new Array;this._pNumVertices=this._positions.length/3;if(this._concatenateArrays){var o=this._pNumVertices*this.getStride(e.VERTEX_DATA);if(this._pVertices==null)this._pVertices=new Array(o);else if(this._pVertices.length!=o)this._pVertices.length=o;i=0;r=this.getOffset(e.POSITION_DATA);s=this.getStride(e.POSITION_DATA);n=this._pVertices;while(i<t.length){n[r]=t[i++];n[r+1]=t[i++];n[r+2]=t[i++];r+=s}}this.pInvalidateBounds();this.notifyPositionsUpdate();this._positionsDirty=false};e.prototype.updateCurves=function(t){var i;var r;var s;var n;var o;if(true){if((this._curves==null||t==null)&&(this._curves!=null||t!=null)){if(this._concatenateArrays)true;else this._pStrideOffsetDirty=true}this._curves=t;if(t!=null&&this._concatenateArrays){i=0;r=this.getOffset(e.CURVE_DATA);n=this.getStride(e.CURVE_DATA);o=this._pVertices;while(i<t.length){o[r]=t[i++];o[r+1]=t[i++];r+=n}}}this.notifyCurvesUpdate();this._curvesDirty=false};e.prototype.updateUVs=function(t){var i;var r;var s;var n;var o;if(!this._autoDeriveUVs){if((this._uvs==null||t==null)&&(this._uvs!=null||t!=null)){if(this._concatenateArrays)this._pNotifyVerticesUpdate();else this._pStrideOffsetDirty=true}this._uvs=t;if(t!=null&&this._concatenateArrays){i=0;r=this.getOffset(e.UV_DATA);n=this.getStride(e.UV_DATA);o=this._pVertices;while(i<t.length){o[r]=t[i++];o[r+1]=t[i++];r+=n}}}else{if(this._uvs==null){this._uvs=new Array(this._positions.length*2/3);if(this._concatenateArrays)this._pNotifyVerticesUpdate();else this._pStrideOffsetDirty=true}s=this.getOffset(e.UV_DATA);n=this.getStride(e.UV_DATA);o=this._concatenateArrays?this._pVertices:this._uvs;i=0;r=s;var a=0;var p=o.length;while(r<p){if(this._concatenateArrays){this._uvs[i++]=o[r]=a*.5;this._uvs[i++]=o[r+1]=1-(a&1)}else{o[r]=a*.5;o[r+1]=1-(a&1)}if(++a==3)a=0;r+=n}}this.notifyUVsUpdate();this._uvsDirty=false};e.prototype.dispose=function(){t.prototype.dispose.call(this);this._positions=null;this._curves=null;this._uvs=null;this._faceNormals=null;this._faceWeights=null;this._faceTangents=null};e.prototype.updateIndices=function(e){t.prototype.updateIndices.call(this,e);this._faceNormalsDirty=true;if(this._autoDeriveNormals)this._vertexNormalsDirty=true};e.prototype.clone=function(){var t=new e(this._concatenateArrays);t.updateIndices(this._pIndices.concat());t.updatePositions(this._positions.concat());if(this._curves)t.updateCurves(this._curves.concat());else t.updateCurves(null);if(this._uvs&&!this._autoDeriveUVs)t.updateUVs(this._uvs.concat());else t.updateUVs(null);return t};e.prototype.scaleUV=function(t,e){if(t===void 0){t=1}if(e===void 0){e=1}var i;var r;var s;var n;n=this._uvs;var o=t/this._scaleU;var a=e/this._scaleV;this._scaleU=t;this._scaleV=e;var p=n.length;r=0;s=2;i=r;while(i<p){n[i]*=o;n[i+1]*=a;i+=s}this.notifyUVsUpdate()};e.prototype.scale=function(t){var e;var i;var r;var s;var n;n=this._positions;var o=n.length;r=0;s=3;e=0;i=r;while(e<o){n[i]*=t;n[i+1]*=t;n[i+2]*=t;e+=3;i+=s}this.notifyPositionsUpdate()};e.prototype.applyTransformation=function(t){var i;if(this._concatenateArrays){i=this._pVertices}else{i=this._positions}var r=this._positions.length/3;var n;var o;var a;var p=new s;var l;var h=this.getOffset(e.POSITION_DATA);var u=this.getStride(e.POSITION_DATA);for(n=0;n<r;++n){o=h+1;a=h+2;p.x=i[h];p.y=i[o];p.z=i[a];p=t.transformVector(p);i[h]=p.x;i[o]=p.y;i[a]=p.z;h+=u}this.notifyPositionsUpdate()};e.prototype.updateFaceNormals=function(){var t=0;var e=0;var i=0;var r;var s;var n;var o,a,p;var l,h,u;var c,f,_;var d,y,b;var m,g,v;var w,j,P;var A;var O=this._positions;var D=this._pIndices.length;if(this._faceNormals==null)this._faceNormals=new Array(D);if(this._useFaceWeights&&this._faceWeights==null)this._faceWeights=new Array(D/3);while(t<D){r=this._pIndices[t++]*3;o=O[r];l=O[r+1];c=O[r+2];r=this._pIndices[t++]*3;a=O[r];h=O[r+1];f=O[r+2];r=this._pIndices[t++]*3;p=O[r];u=O[r+1];_=O[r+2];d=p-o;y=u-l;b=_-c;m=a-o;g=h-l;v=f-c;w=b*g-y*v;j=d*v-b*m;P=y*m-d*g;A=Math.sqrt(w*w+j*j+P*P);if(this._useFaceWeights){var E=A*1e4;if(E<1)E=1;this._faceWeights[i++]=E}A=1/A;this._faceNormals[e++]=w*A;this._faceNormals[e++]=j*A;this._faceNormals[e++]=P*A}this._faceNormalsDirty=false};e.prototype._pNotifyVerticesUpdate=function(){this._pStrideOffsetDirty=true;this.notifyPositionsUpdate();this.notifyCurvesUpdate();this.notifyUVsUpdate()};e.prototype.notifyPositionsUpdate=function(){if(this._positionsDirty)return;this._positionsDirty=true;if(!this._positionsUpdated)this._positionsUpdated=new a(a.VERTICES_UPDATED,e.POSITION_DATA);this.dispatchEvent(this._positionsUpdated)};e.prototype.notifyCurvesUpdate=function(){if(this._curvesDirty)return;this._curvesDirty=true;if(!this._curvesUpdated)this._curvesUpdated=new a(a.VERTICES_UPDATED,e.CURVE_DATA);this.dispatchEvent(this._curvesUpdated)};e.prototype.notifyUVsUpdate=function(){if(this._uvsDirty)return;this._uvsDirty=true;if(!this._uvsUpdated)this._uvsUpdated=new a(a.VERTICES_UPDATED,e.UV_DATA);this.dispatchEvent(this._uvsUpdated)};e.POSITION_DATA="positions";e.CURVE_DATA="curves";e.UV_DATA="uvs";e.POSITION_FORMAT="float3";e.CURVE_FORMAT="float2";e.UV_FORMAT="float2";return e}(n);e.exports=p},{"awayjs-core/lib/geom/Vector3D":undefined,"awayjs-display/lib/base/CurveSubMesh":"awayjs-display/lib/base/CurveSubMesh","awayjs-display/lib/base/SubGeometryBase":"awayjs-display/lib/base/SubGeometryBase","awayjs-display/lib/events/SubGeometryEvent":"awayjs-display/lib/events/SubGeometryEvent"}],"awayjs-display/lib/base/CurveSubMesh":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/library/AssetType");var n=t("awayjs-display/lib/base/SubMeshBase");var o=function(t){r(e,t);function e(e,i,r){if(r===void 0){r=null}t.call(this);this._pParentMesh=i;this._subGeometry=e;this.material=r}Object.defineProperty(e.prototype,"assetType",{get:function(){return s.CURVE_SUB_MESH},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"subGeometry",{get:function(){return this._subGeometry},enumerable:true,configurable:true});e.prototype.dispose=function(){t.prototype.dispose.call(this)};e.prototype._iCollectRenderable=function(t){t.applyCurveSubMesh(this)};return e}(n);e.exports=o},{"awayjs-core/lib/library/AssetType":undefined,"awayjs-display/lib/base/SubMeshBase":"awayjs-display/lib/base/SubMeshBase"}],"awayjs-display/lib/base/DisplayObject":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/geom/Box");var n=t("awayjs-core/lib/geom/Sphere");var o=t("awayjs-core/lib/geom/MathConsts");var a=t("awayjs-core/lib/geom/Matrix3D");var p=t("awayjs-core/lib/geom/Matrix3DUtils");var l=t("awayjs-core/lib/geom/Point");var h=t("awayjs-core/lib/geom/Vector3D");var u=t("awayjs-core/lib/library/NamedAssetBase");var c=t("awayjs-core/lib/errors/AbstractMethodError");var f=t("awayjs-display/lib/base/AlignmentMode");var _=t("awayjs-display/lib/base/OrientationMode");var d=t("awayjs-display/lib/base/Transform");var y=t("awayjs-display/lib/pick/PickingCollisionVO");var b=t("awayjs-display/lib/events/DisplayObjectEvent");var m=t("awayjs-display/lib/events/SceneEvent");var g=function(t){r(e,t);function e(){t.call(this);this._boxBoundsInvalid=true;this._sphereBoundsInvalid=true;this._pSceneTransform=new a;this._pSceneTransformDirty=true;this._matrix3D=new a;this._matrix3DDirty=true;this._inverseSceneTransform=new a;this._inverseSceneTransformDirty=true;this._scenePosition=new h;this._scenePositionDirty=true;this._explicitVisibility=true;this._pImplicitVisibility=true;this._explicitMouseEnabled=true;this._pImplicitMouseEnabled=true;this._positionDirty=true;this._rotationDirty=true;this._scaleDirty=true;this._rotationX=0;this._rotationY=0;this._rotationZ=0;this._eulers=new h;this._flipY=new a;this._zOffset=0;this._pScaleX=1;this._pScaleY=1;this._pScaleZ=1;this._x=0;this._y=0;this._z=0;this._pivot=new h;this._orientationMatrix=new a;this._pivotZero=true;this._pivotDirty=true;this._pos=new h;this._rot=new h;this._sca=new h;this._pIgnoreTransform=false;this._pRenderables=new Array;this._entityNodes=new Array;this.alignmentMode=f.REGISTRATION_POINT;this.castsShadows=true;this.orientationMode=_.DEFAULT;this._transformComponents=new Array(3);this._transformComponents[0]=this._pos;this._transformComponents[1]=this._rot;this._transformComponents[2]=this._sca;this._transform=new d(this);this._matrix3D.identity();this._flipY.appendScale(1,-1,1)}Object.defineProperty(e.prototype,"boundsType",{get:function(){return this._boundsType},set:function(t){if(this._boundsType==t)return;this._boundsType=t;this._pInvalidateBounds();var e=this._entityNodes.length;for(var i=0;i<e;i++)this._entityNodes[i].updateBounds()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"depth",{get:function(){if(this._boxBoundsInvalid)this._pUpdateBoxBounds();return this._pBoxBounds.depth*this._pScaleZ},set:function(t){var e=t/this.getBox().depth;if(this._pScaleZ==e)return;this._pScaleZ=e;this.invalidateScale()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"eulers",{get:function(){this._eulers.x=this._rotationX*o.RADIANS_TO_DEGREES;this._eulers.y=this._rotationY*o.RADIANS_TO_DEGREES;this._eulers.z=this._rotationZ*o.RADIANS_TO_DEGREES;return this._eulers},set:function(t){this._rotationX=t.x*o.DEGREES_TO_RADIANS;this._rotationY=t.y*o.DEGREES_TO_RADIANS;this._rotationZ=t.z*o.DEGREES_TO_RADIANS;this.invalidateRotation()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){if(this._boxBoundsInvalid)this._pUpdateBoxBounds();return this._pBoxBounds.height*this._pScaleY},set:function(t){var e=t/this.getBox().height;if(this._pScaleY==e)return;this._pScaleY=e;this.invalidateScale()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"index",{get:function(){if(this._pParent)return this._pParent.getChildIndex(this);return 0},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"inverseSceneTransform",{get:function(){if(this._inverseSceneTransformDirty){this._inverseSceneTransform.copyFrom(this.sceneTransform);this._inverseSceneTransform.invert();this._inverseSceneTransformDirty=false}return this._inverseSceneTransform},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"ignoreTransform",{get:function(){return this._pIgnoreTransform},set:function(t){if(this._pIgnoreTransform==t)return;this._pIgnoreTransform=t;if(t){this._pSceneTransform.identity();this._scenePosition.setTo(0,0,0)}this.pInvalidateSceneTransform()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"isEntity",{get:function(){return this._pIsEntity},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"loaderInfo",{get:function(){return this._loaderInfo},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"mouseEnabled",{get:function(){return this._explicitMouseEnabled},set:function(t){if(this._explicitMouseEnabled==t)return;this._explicitMouseEnabled=t;this._pUpdateImplicitMouseEnabled(this._pParent?this._pParent.mouseChildren:true)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"mouseX",{get:function(){return this._mouseX},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"mouseY",{get:function(){return this._mouseY},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"parent",{get:function(){return this._pParent},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"partition",{get:function(){return this._explicitPartition},set:function(t){if(this._explicitPartition==t)return;this._explicitPartition=t;this._pUpdateImplicitPartition(this._pParent?this._pParent._iAssignedPartition:null,this._pScene)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"pickingCollider",{get:function(){return this._pPickingCollider},set:function(t){this._pPickingCollider=t},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"pivot",{get:function(){return this._pivot},set:function(t){this._pivot=t.clone();this.invalidatePivot()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"rotationX",{get:function(){return this._rotationX*o.RADIANS_TO_DEGREES},set:function(t){if(this.rotationX==t)return;this._rotationX=t*o.DEGREES_TO_RADIANS;this.invalidateRotation()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"rotationY",{get:function(){return this._rotationY*o.RADIANS_TO_DEGREES},set:function(t){if(this.rotationY==t)return;this._rotationY=t*o.DEGREES_TO_RADIANS;this.invalidateRotation()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"rotationZ",{get:function(){return this._rotationZ*o.RADIANS_TO_DEGREES},set:function(t){if(this.rotationZ==t)return;this._rotationZ=t*o.DEGREES_TO_RADIANS;this.invalidateRotation()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"scaleX",{get:function(){return this._pScaleX},set:function(t){if(this._pScaleX==t)return;this._pScaleX=t;this.invalidateScale()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"scaleY",{get:function(){return this._pScaleY},set:function(t){if(this._pScaleY==t)return;this._pScaleY=t;this.invalidateScale()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"scaleZ",{get:function(){return this._pScaleZ},set:function(t){if(this._pScaleZ==t)return;this._pScaleZ=t;this.invalidateScale()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"scene",{get:function(){return this._pScene},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"scenePosition",{get:function(){if(this._scenePositionDirty){if(!this._pivotZero&&this.alignmentMode==f.PIVOT_POINT){var t=new h(this._pivot.x/this._pScaleX,this._pivot.y/this._pScaleY,this._pivot.z/this._pScaleZ);this._scenePosition=this.sceneTransform.transformVector(t)}else{this.sceneTransform.copyColumnTo(3,this._scenePosition)}this._scenePositionDirty=false}return this._scenePosition},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"sceneTransform",{get:function(){if(this._pSceneTransformDirty)this.pUpdateSceneTransform();return this._pSceneTransform},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"shaderPickingDetails",{get:function(){return this._shaderPickingDetails},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"debugVisible",{get:function(){return this._debugVisible},set:function(t){if(t==this._debugVisible)return;this._debugVisible=t;var e=this._entityNodes.length;for(var i=0;i<e;i++)this._entityNodes[i].debugVisible=this._debugVisible},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"transform",{get:function(){return this._transform},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"visible",{get:function(){return this._explicitVisibility},set:function(t){if(this._explicitVisibility==t)return;this._explicitVisibility=t;this._pUpdateImplicitVisibility(this._pParent?this._pParent._iIsVisible():true)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"width",{get:function(){if(this._boxBoundsInvalid)this._pUpdateBoxBounds();return this._pBoxBounds.width*this._pScaleX},set:function(t){var e=t/this.getBox().width;if(this._pScaleX==e)return;this._pScaleX=e;this.invalidateScale()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){if(this._x==t)return;this._x=t;this.invalidatePosition()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){if(this._y==t)return;this._y=t;this.invalidatePosition()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"z",{get:function(){return this._z},set:function(t){if(this._z==t)return;this._z=t;this.invalidatePosition()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"zOffset",{get:function(){return this._zOffset},set:function(t){this._zOffset=t},enumerable:true,configurable:true});e.prototype.addEventListener=function(e,i){t.prototype.addEventListener.call(this,e,i);switch(e){case b.POSITION_CHANGED:this._listenToPositionChanged=true;break;case b.ROTATION_CHANGED:this._listenToRotationChanged=true;break;case b.SCALE_CHANGED:this._listenToScaleChanged=true;break;case b.SCENE_CHANGED:this._listenToSceneChanged=true;break;case b.SCENETRANSFORM_CHANGED:this._listenToSceneTransformChanged=true;break}};e.prototype.clone=function(){var t=new e;t.pivot=this.pivot;t._iMatrix3D=this._iMatrix3D;t.name=name;return t};e.prototype.dispose=function(){if(this.parent)this.parent.removeChild(this);while(this._pRenderables.length)this._pRenderables[0].dispose()};e.prototype.disposeAsset=function(){this.dispose()};e.prototype.getBounds=function(t){return this._bounds};e.prototype.getRect=function(t){if(t===void 0){t=null}return this._bounds};e.prototype.getBox=function(t){if(t===void 0){t=null}if(this._iSourcePrefab)this._iSourcePrefab._iValidate();if(this._boxBoundsInvalid)this._pUpdateBoxBounds();return this._pBoxBounds};e.prototype.getSphere=function(t){if(t===void 0){t=null}if(this._iSourcePrefab)this._iSourcePrefab._iValidate();if(this._sphereBoundsInvalid)this._pUpdateSphereBounds();return this._pSphereBounds};e.prototype.globalToLocal=function(t){return t};e.prototype.globalToLocal3D=function(t){return this.inverseSceneTransform.transformVector(t)};e.prototype.hitTestObject=function(t){return false};e.prototype.hitTestPoint=function(t,e,i){if(i===void 0){i=false}return false};e.prototype.lookAt=function(t,e){if(e===void 0){e=null}var i;var r;var s;var n;if(e==null)e=h.Y_AXIS;else e.normalize();r=t.subtract(this._iMatrix3D.position);r.normalize();s=e.crossProduct(r);s.normalize();if(s.length<.05){s.x=e.y;s.y=e.x;s.z=0;s.normalize()}i=r.crossProduct(s);n=p.RAW_DATA_CONTAINER;n[0]=s.x;n[1]=s.y;n[2]=s.z;n[3]=0;n[4]=i.x;n[5]=i.y;n[6]=i.z;n[7]=0;n[8]=r.x;n[9]=r.y;n[10]=r.z;n[11]=0;var o=new a;o.copyRawDataFrom(n);var l=o.decompose()[1];this._rotationX=l.x;this._rotationY=l.y;this._rotationZ=l.z;this.invalidateRotation()};e.prototype.localToGlobal=function(t){return new l};e.prototype.localToGlobal3D=function(t){return this.sceneTransform.transformVector(t)};e.prototype.moveTo=function(t,e,i){if(this._x==t&&this._y==e&&this._z==i)return;this._x=t;this._y=e;this._z=i;this.invalidatePosition()};e.prototype.movePivot=function(t,e,i){if(this._pivot==null)this._pivot=new h;this._pivot.x+=t;this._pivot.y+=e;this._pivot.z+=i;this.invalidatePivot()};e.prototype.pitch=function(t){this.rotate(h.X_AXIS,t)};e.prototype.getRenderSceneTransform=function(t){if(this.orientationMode==_.CAMERA_PLANE){var e=t.sceneTransform.decompose();var i=e[2];e[0]=this.scenePosition;i.x=this._pScaleX;i.y=this._pScaleY;i.z=this._pScaleZ;this._orientationMatrix.recompose(e);if(!this._pivotZero&&this.alignmentMode==f.PIVOT_POINT)this._orientationMatrix.prependTranslation(-this._pivot.x/this._pScaleX,-this._pivot.y/this._pScaleY,-this._pivot.z/this._pScaleZ);return this._orientationMatrix}return this.sceneTransform};e.prototype.roll=function(t){this.rotate(h.Z_AXIS,t)};e.prototype.rotate=function(t,e){var i=new a;i.prependRotation(e,t);var r=i.decompose()[1];this._rotationX+=r.x;this._rotationY+=r.y;this._rotationZ+=r.z;this.invalidateRotation()};e.prototype.rotateTo=function(t,e,i){this._rotationX=t*o.DEGREES_TO_RADIANS;this._rotationY=e*o.DEGREES_TO_RADIANS;this._rotationZ=i*o.DEGREES_TO_RADIANS;this.invalidateRotation()};e.prototype.removeEventListener=function(e,i){t.prototype.removeEventListener.call(this,e,i);if(this.hasEventListener(e,i))return;switch(e){case b.POSITION_CHANGED:this._listenToPositionChanged=false;break;case b.ROTATION_CHANGED:this._listenToRotationChanged=false;break;case b.SCALE_CHANGED:this._listenToScaleChanged=false;break}};e.prototype.translate=function(t,e){var i=t.x,r=t.y,s=t.z;var n=e/Math.sqrt(i*i+r*r+s*s);this._x+=i*n;this._y+=r*n;this._z+=s*n;this.invalidatePosition()};e.prototype.translateLocal=function(t,e){var i=t.x,r=t.y,s=t.z;var n=e/Math.sqrt(i*i+r*r+s*s);this._iMatrix3D.prependTranslation(i*n,r*n,s*n);this._matrix3D.copyColumnTo(3,this._pos);this._x=this._pos.x;this._y=this._pos.y;this._z=this._pos.z;this.invalidatePosition()};e.prototype.yaw=function(t){this.rotate(h.Y_AXIS,t)};Object.defineProperty(e.prototype,"_iAssignedPartition",{get:function(){return this._pImplicitPartition},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"_iMatrix3D",{get:function(){if(this._matrix3DDirty)this._pUpdateMatrix3D();return this._matrix3D},set:function(t){var e=t.decompose();var i;i=e[0];if(this._x!=i.x||this._y!=i.y||this._z!=i.z){this._x=i.x;this._y=i.y;this._z=i.z;this.invalidatePosition()}i=e[1];if(this._rotationX!=i.x||this._rotationY!=i.y||this._rotationZ!=i.z){this._rotationX=i.x;this._rotationY=i.y;this._rotationZ=i.z;this.invalidateRotation()}i=e[2];if(this._pScaleX!=i.x||this._pScaleY!=i.y||this._pScaleZ!=i.z){this._pScaleX=i.x;this._pScaleY=i.y;this._pScaleZ=i.z;this.invalidateScale()}},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"_iPickingCollisionVO",{get:function(){if(!this._pPickingCollisionVO)this._pPickingCollisionVO=new y(this);return this._pPickingCollisionVO},enumerable:true,configurable:true});e.prototype.iSetParent=function(t){this._pParent=t;if(t){this._pUpdateImplicitMouseEnabled(t.mouseChildren);this._pUpdateImplicitVisibility(t._iIsVisible());this._pUpdateImplicitPartition(t._iAssignedPartition,t._pScene)}else{this._pUpdateImplicitMouseEnabled(true);this._pUpdateImplicitVisibility(true);this._pUpdateImplicitPartition(null,null)}};e.prototype.pInvalidateSceneTransform=function(){this._pSceneTransformDirty=!this._pIgnoreTransform;this._inverseSceneTransformDirty=!this._pIgnoreTransform;this._scenePositionDirty=!this._pIgnoreTransform;if(this.isEntity)this.invalidatePartition();if(this._listenToSceneTransformChanged)this.notifySceneTransformChange()};e.prototype._pUpdateImplicitMouseEnabled=function(t){this._pImplicitMouseEnabled=this._explicitMouseEnabled&&t;if(this._pImplicitMouseEnabled&&this._pParent&&!this._pPickingCollider)this._pPickingCollider=this._pParent._pPickingCollider};e.prototype._pUpdateImplicitPartition=function(t,e){var i=this._pScene!=e;if(i&&this._pScene)this._pScene.dispatchEvent(new m(m.REMOVED_FROM_SCENE,this));if(this._pScene&&this._pImplicitPartition){this._pScene._iUnregisterPartition(this._pImplicitPartition);if(this._pIsEntity)this._pUnregisterEntity(this._pImplicitPartition)}this._pImplicitPartition=this._explicitPartition||t;if(i)this._pScene=e;if(this._pScene&&this._pImplicitPartition){this._pScene._iRegisterPartition(this._pImplicitPartition);if(this._pIsEntity)this._pRegisterEntity(this._pImplicitPartition)}if(i&&this._pScene)this._pScene.dispatchEvent(new m(m.ADDED_TO_SCENE,this));if(i){if(!this._pSceneTransformDirty&&!this._pIgnoreTransform)this.pInvalidateSceneTransform();if(this._listenToSceneChanged)this.notifySceneChange()}};e.prototype._pUpdateImplicitVisibility=function(t){this._pImplicitVisibility=this._explicitVisibility&&t};e.prototype._pUpdateMatrix3D=function(){this._pos.x=this._x;this._pos.y=this._y;this._pos.z=this._z;this._rot.x=this._rotationX;this._rot.y=this._rotationY;this._rot.z=this._rotationZ;this._sca.x=this._pScaleX;this._sca.y=this._pScaleY;this._sca.z=this._pScaleZ;this._matrix3D.recompose(this._transformComponents);if(!this._pivotZero){this._matrix3D.prependTranslation(-this._pivot.x/this._pScaleX,-this._pivot.y/this._pScaleY,-this._pivot.z/this._pScaleZ);if(this.alignmentMode!=f.PIVOT_POINT)this._matrix3D.appendTranslation(this._pivot.x,this._pivot.y,this._pivot.z)}this._matrix3DDirty=false;this._positionDirty=false;this._rotationDirty=false;this._scaleDirty=false;this._pivotDirty=false};e.prototype.pUpdateSceneTransform=function(){if(this._pParent&&!this._pParent._iIsRoot){this._pSceneTransform.copyFrom(this._pParent.sceneTransform);this._pSceneTransform.prepend(this._iMatrix3D)}else{this._pSceneTransform.copyFrom(this._iMatrix3D)}this._pSceneTransformDirty=false};e.prototype._iAddRenderable=function(t){this._pRenderables.push(t);return t};e.prototype._iRemoveRenderable=function(t){var e=this._pRenderables.indexOf(t);this._pRenderables.splice(e,1);return t};e.prototype._iTestCollision=function(t,e){return false};e.prototype._iInternalUpdate=function(){if(this._iController)this._iController.update()};e.prototype._iIsVisible=function(){return this._pImplicitVisibility};e.prototype._iIsMouseEnabled=function(){return this._pImplicitMouseEnabled};e.prototype._iSetScene=function(t){if(this._pScene==t)return;this._pUpdateImplicitPartition(this._pParent?this._pParent._iAssignedPartition:null,t)};e.prototype.notifyPositionChanged=function(){if(!this._positionChanged)this._positionChanged=new b(b.POSITION_CHANGED,this);this.dispatchEvent(this._positionChanged)};e.prototype.notifyRotationChanged=function(){if(!this._rotationChanged)this._rotationChanged=new b(b.ROTATION_CHANGED,this);this.dispatchEvent(this._rotationChanged)};e.prototype.notifyScaleChanged=function(){if(!this._scaleChanged)this._scaleChanged=new b(b.SCALE_CHANGED,this);this.dispatchEvent(this._scaleChanged)};e.prototype.notifySceneChange=function(){if(!this._scenechanged)this._scenechanged=new b(b.SCENE_CHANGED,this);this.dispatchEvent(this._scenechanged)};e.prototype.notifySceneTransformChange=function(){if(!this._sceneTransformChanged)this._sceneTransformChanged=new b(b.SCENETRANSFORM_CHANGED,this);this.dispatchEvent(this._sceneTransformChanged)};e.prototype.invalidateMatrix3D=function(){if(this._matrix3DDirty)return;this._matrix3DDirty=true;if(!this._pSceneTransformDirty&&!this._pIgnoreTransform)this.pInvalidateSceneTransform()};e.prototype.invalidatePartition=function(){var t=this._entityNodes.length;for(var e=0;e<t;e++)this._entityNodes[e].invalidatePartition()
};e.prototype.invalidatePivot=function(){this._pivotZero=this._pivot.x==0&&this._pivot.y==0&&this._pivot.z==0;if(this._pivotDirty)return;this._pivotDirty=true;this.invalidateMatrix3D()};e.prototype.invalidatePosition=function(){if(this._positionDirty)return;this._positionDirty=true;this.invalidateMatrix3D();if(this._listenToPositionChanged)this.notifyPositionChanged()};e.prototype.invalidateRotation=function(){if(this._rotationDirty)return;this._rotationDirty=true;this.invalidateMatrix3D();if(this._listenToRotationChanged)this.notifyRotationChanged()};e.prototype.invalidateScale=function(){if(this._scaleDirty)return;this._scaleDirty=true;this.invalidateMatrix3D();if(this._listenToScaleChanged)this.notifyScaleChanged()};e.prototype._iAddEntityNode=function(t){this._entityNodes.push(t);return t};e.prototype._iRemoveEntityNode=function(t){var e=this._entityNodes.indexOf(t);this._entityNodes.splice(e,1);return t};e.prototype._pRegisterEntity=function(t){throw new c};e.prototype._pUnregisterEntity=function(t){throw new c};e.prototype._pInvalidateBounds=function(){this._boxBoundsInvalid=true;this._sphereBoundsInvalid=true;if(this.isEntity)this.invalidatePartition()};e.prototype._pUpdateBoxBounds=function(){this._boxBoundsInvalid=false;if(this._pBoxBounds==null)this._pBoxBounds=new s};e.prototype._pUpdateSphereBounds=function(){this._sphereBoundsInvalid=false;if(this._pSphereBounds==null)this._pSphereBounds=new n};return e}(u);e.exports=g},{"awayjs-core/lib/errors/AbstractMethodError":undefined,"awayjs-core/lib/geom/Box":undefined,"awayjs-core/lib/geom/MathConsts":undefined,"awayjs-core/lib/geom/Matrix3D":undefined,"awayjs-core/lib/geom/Matrix3DUtils":undefined,"awayjs-core/lib/geom/Point":undefined,"awayjs-core/lib/geom/Sphere":undefined,"awayjs-core/lib/geom/Vector3D":undefined,"awayjs-core/lib/library/NamedAssetBase":undefined,"awayjs-display/lib/base/AlignmentMode":"awayjs-display/lib/base/AlignmentMode","awayjs-display/lib/base/OrientationMode":"awayjs-display/lib/base/OrientationMode","awayjs-display/lib/base/Transform":"awayjs-display/lib/base/Transform","awayjs-display/lib/events/DisplayObjectEvent":"awayjs-display/lib/events/DisplayObjectEvent","awayjs-display/lib/events/SceneEvent":"awayjs-display/lib/events/SceneEvent","awayjs-display/lib/pick/PickingCollisionVO":"awayjs-display/lib/pick/PickingCollisionVO"}],"awayjs-display/lib/base/Geometry":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/library/AssetType");var n=t("awayjs-core/lib/library/NamedAssetBase");var o=t("awayjs-display/lib/events/GeometryEvent");var a=function(t){r(e,t);function e(){t.call(this);this._subGeometries=new Array}Object.defineProperty(e.prototype,"assetType",{get:function(){return s.GEOMETRY},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"subGeometries",{get:function(){return this._subGeometries},enumerable:true,configurable:true});e.prototype.getSubGeometries=function(){return this._subGeometries};e.prototype.applyTransformation=function(t){var e=this._subGeometries.length;for(var i=0;i<e;++i)this._subGeometries[i].applyTransformation(t)};e.prototype.addSubGeometry=function(t){this._subGeometries.push(t);t.parentGeometry=this;if(this.hasEventListener(o.SUB_GEOMETRY_ADDED))this.dispatchEvent(new o(o.SUB_GEOMETRY_ADDED,t));this.iInvalidateBounds(t)};e.prototype.removeSubGeometry=function(t){this._subGeometries.splice(this._subGeometries.indexOf(t),1);t.parentGeometry=null;if(this.hasEventListener(o.SUB_GEOMETRY_REMOVED))this.dispatchEvent(new o(o.SUB_GEOMETRY_REMOVED,t));this.iInvalidateBounds(t)};e.prototype.clone=function(){var t=new e;var i=this._subGeometries.length;for(var r=0;r<i;++r)t.addSubGeometry(this._subGeometries[r].clone());return t};e.prototype.scale=function(t){var e=this._subGeometries.length;for(var i=0;i<e;++i)this._subGeometries[i].scale(t)};e.prototype.dispose=function(){var t=this._subGeometries.length;for(var e=0;e<t;++e){var i=this._subGeometries[0];this.removeSubGeometry(i);i.dispose()}};e.prototype.scaleUV=function(t,e){if(t===void 0){t=1}if(e===void 0){e=1}var i=this._subGeometries.length;for(var r=0;r<i;++r)this._subGeometries[r].scaleUV(t,e)};e.prototype.iInvalidateBounds=function(t){if(this.hasEventListener(o.BOUNDS_INVALID))this.dispatchEvent(new o(o.BOUNDS_INVALID,t))};return e}(n);e.exports=a},{"awayjs-core/lib/library/AssetType":undefined,"awayjs-core/lib/library/NamedAssetBase":undefined,"awayjs-display/lib/events/GeometryEvent":"awayjs-display/lib/events/GeometryEvent"}],"awayjs-display/lib/base/GradientType":[function(t,e,i){var r=function(){function t(){}t.LINEAR="linear";t.RADIAL="radial";return t}();e.exports=r},{}],"awayjs-display/lib/base/GraphicsPathWinding":[function(t,e,i){var r=function(){function t(){}t.EVEN_ODD="evenOdd";t.NON_ZERO="nonZero";return t}();e.exports=r},{}],"awayjs-display/lib/base/Graphics":[function(t,e,i){var r=function(){function t(){}t.prototype.beginBitmapFill=function(t,e,i,r){if(e===void 0){e=null}if(i===void 0){i=true}if(r===void 0){r=false}};t.prototype.beginFill=function(t,e){if(e===void 0){e=1}};t.prototype.beginGradientFill=function(t,e,i,r,s,n,o,a){if(s===void 0){s=null}if(n===void 0){n="pad"}if(o===void 0){o="rgb"}if(a===void 0){a=0}};t.prototype.clear=function(){};t.prototype.copyFrom=function(t){};t.prototype.cubicCurveTo=function(t,e,i,r,s,n){};t.prototype.curveTo=function(t,e,i,r){};t.prototype.drawCircle=function(t,e,i){};t.prototype.drawEllipse=function(t,e,i,r){};t.prototype.drawGraphicsData=function(t){};t.prototype.drawPath=function(t,e,i){};t.prototype.drawRect=function(t,e,i,r){};t.prototype.drawRoundRect=function(t,e,i,r,s,n){if(n===void 0){n=NaN}};t.prototype.drawTriangles=function(t,e,i,r){if(e===void 0){e=null}if(i===void 0){i=null}if(r===void 0){r=null}};t.prototype.endFill=function(){};t.prototype.lineBitmapStyle=function(t,e,i,r){if(e===void 0){e=null}if(i===void 0){i=true}if(r===void 0){r=false}};t.prototype.lineGradientStyle=function(t,e,i,r,s,n,o,a){if(s===void 0){s=null}if(n===void 0){n=null}if(o===void 0){o=null}if(a===void 0){a=0}};t.prototype.lineStyle=function(t,e,i,r,s,n,o,a){if(t===void 0){t=0}if(e===void 0){e=0}if(i===void 0){i=1}if(r===void 0){r=false}if(s===void 0){s=null}if(n===void 0){n=null}if(o===void 0){o=null}if(a===void 0){a=3}};t.prototype.lineTo=function(t,e){};t.prototype.moveTo=function(t,e){};return t}();e.exports=r},{}],"awayjs-display/lib/base/IBitmapDrawable":[function(t,e,i){},{}],"awayjs-display/lib/base/IGraphicsData":[function(t,e,i){},{}],"awayjs-display/lib/base/IMaterialOwner":[function(t,e,i){},{}],"awayjs-display/lib/base/IRenderObjectOwner":[function(t,e,i){},{}],"awayjs-display/lib/base/IRenderableOwner":[function(t,e,i){},{}],"awayjs-display/lib/base/ISubMeshClass":[function(t,e,i){},{}],"awayjs-display/lib/base/ISubMesh":[function(t,e,i){},{}],"awayjs-display/lib/base/InterpolationMethod":[function(t,e,i){var r=function(){function t(){}t.LINEAR_RGB="linearRGB";t.RGB="rgb";return t}();e.exports=r},{}],"awayjs-display/lib/base/JointStyle":[function(t,e,i){var r=function(){function t(){}t.BEVEL="bevel";t.MITER="miter";t.ROUND="round";return t}();e.exports=r},{}],"awayjs-display/lib/base/LightBase":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/library/AssetType");var n=t("awayjs-core/lib/errors/AbstractMethodError");var o=t("awayjs-display/lib/containers/DisplayObjectContainer");var a=t("awayjs-display/lib/events/LightEvent");var p=function(t){r(e,t);function e(){t.call(this);this._color=16777215;this._colorR=1;this._colorG=1;this._colorB=1;this._ambientColor=16777215;this._ambient=0;this._iAmbientR=0;this._iAmbientG=0;this._iAmbientB=0;this._specular=1;this._iSpecularR=1;this._iSpecularG=1;this._iSpecularB=1;this._diffuse=1;this._iDiffuseR=1;this._iDiffuseG=1;this._iDiffuseB=1;this._castsShadows=false}Object.defineProperty(e.prototype,"castsShadows",{get:function(){return this._castsShadows},set:function(t){if(this._castsShadows==t)return;this._castsShadows=t;if(t){if(this._shadowMapper==null)this._shadowMapper=this.pCreateShadowMapper();this._shadowMapper.light=this}else{this._shadowMapper.dispose();this._shadowMapper=null}this.dispatchEvent(new a(a.CASTS_SHADOW_CHANGE))},enumerable:true,configurable:true});e.prototype.pCreateShadowMapper=function(){throw new n};Object.defineProperty(e.prototype,"specular",{get:function(){return this._specular},set:function(t){if(t<0)t=0;this._specular=t;this.updateSpecular()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"diffuse",{get:function(){return this._diffuse},set:function(t){if(t<0)t=0;this._diffuse=t;this.updateDiffuse()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t;this._colorR=(this._color>>16&255)/255;this._colorG=(this._color>>8&255)/255;this._colorB=(this._color&255)/255;this.updateDiffuse();this.updateSpecular()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"ambient",{get:function(){return this._ambient},set:function(t){if(t<0)t=0;else if(t>1)t=1;this._ambient=t;this.updateAmbient()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"ambientColor",{get:function(){return this._ambientColor},set:function(t){this._ambientColor=t;this.updateAmbient()},enumerable:true,configurable:true});e.prototype.updateAmbient=function(){this._iAmbientR=(this._ambientColor>>16&255)/255*this._ambient;this._iAmbientG=(this._ambientColor>>8&255)/255*this._ambient;this._iAmbientB=(this._ambientColor&255)/255*this._ambient};e.prototype.iGetObjectProjectionMatrix=function(t,e,i){if(i===void 0){i=null}throw new n};Object.defineProperty(e.prototype,"assetType",{get:function(){return s.LIGHT},enumerable:true,configurable:true});e.prototype.updateSpecular=function(){this._iSpecularR=this._colorR*this._specular;this._iSpecularG=this._colorG*this._specular;this._iSpecularB=this._colorB*this._specular};e.prototype.updateDiffuse=function(){this._iDiffuseR=this._colorR*this._diffuse;this._iDiffuseG=this._colorG*this._diffuse;this._iDiffuseB=this._colorB*this._diffuse};Object.defineProperty(e.prototype,"shadowMapper",{get:function(){return this._shadowMapper},set:function(t){this._shadowMapper=t;this._shadowMapper.light=this},enumerable:true,configurable:true});return e}(o);e.exports=p},{"awayjs-core/lib/errors/AbstractMethodError":undefined,"awayjs-core/lib/library/AssetType":undefined,"awayjs-display/lib/containers/DisplayObjectContainer":"awayjs-display/lib/containers/DisplayObjectContainer","awayjs-display/lib/events/LightEvent":"awayjs-display/lib/events/LightEvent"}],"awayjs-display/lib/base/LineScaleMode":[function(t,e,i){var r=function(){function t(){}t.HORIZONTAL="horizontal";t.NONE="none";t.NORMAL="normal";t.VERTICAL="vertical";return t}();e.exports=r},{}],"awayjs-display/lib/base/LineSubGeometry":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/base/LineSubMesh");var n=t("awayjs-display/lib/base/SubGeometryBase");var o=t("awayjs-display/lib/base/TriangleSubGeometry");var a=t("awayjs-display/lib/events/SubGeometryEvent");var p=function(t){r(e,t);function e(){t.call(this,true);this._positionsDirty=true;this._boundingPositionDirty=true;this._thicknessDirty=true;this._colorsDirty=true;this._pSubMeshClass=s}e.prototype._pUpdateStrideOffset=function(){this._pOffset[e.VERTEX_DATA]=0;var t=0;this._pOffset[e.START_POSITION_DATA]=t;t+=3;this._pOffset[e.END_POSITION_DATA]=t;t+=3;this._pOffset[e.THICKNESS_DATA]=t;t+=1;this._pOffset[e.COLOR_DATA]=t;t+=4;this._pStride[e.VERTEX_DATA]=t;this._pStride[e.START_POSITION_DATA]=t;this._pStride[e.END_POSITION_DATA]=t;this._pStride[e.THICKNESS_DATA]=t;this._pStride[e.COLOR_DATA]=t;var i=this._pNumVertices*t;if(this._pVertices==null)this._pVertices=new Array(i);else if(this._pVertices.length!=i)this._pVertices.length=i;this._pStrideOffsetDirty=false};Object.defineProperty(e.prototype,"vertices",{get:function(){if(this._positionsDirty)this.updatePositions(this._startPositions,this._endPositions);if(this._thicknessDirty)this.updateThickness(this._thickness);if(this._colorsDirty)this.updateColors(this._startColors,this._endColors);return this._pVertices},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"startPositions",{get:function(){if(this._positionsDirty)this.updatePositions(this._startPositions,this._endPositions);return this._startPositions},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"endPositions",{get:function(){if(this._positionsDirty)this.updatePositions(this._startPositions,this._endPositions);return this._endPositions},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"thickness",{get:function(){if(this._thicknessDirty)this.updateThickness(this._thickness);return this._thickness},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"startColors",{get:function(){if(this._colorsDirty)this.updateColors(this._startColors,this._endColors);return this._startColors},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"endColors",{get:function(){if(this._colorsDirty)this.updateColors(this._startColors,this._endColors);return this._endColors},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numSegments",{get:function(){return this._numSegments},enumerable:true,configurable:true});e.prototype.getBoundingPositions=function(){if(this._boundingPositionDirty)this._boundingPositions=this.startPositions.concat(this.endPositions);return this._boundingPositions};e.prototype.updatePositions=function(t,i){var r;var s;var n;var o;var a;var p;var l;this._startPositions=t;if(this._startPositions==null)this._startPositions=new Array;this._endPositions=i;if(this._endPositions==null)this._endPositions=new Array;this._boundingPositionDirty=true;this._numSegments=this._startPositions.length/3;this._pNumVertices=this._numSegments*4;var h=this._pNumVertices*this.getStride(e.VERTEX_DATA);if(this._pVertices==null)this._pVertices=new Array(h);else if(this._pVertices.length!=h)this._pVertices.length=h;r=0;s=0;o=this.getOffset(e.START_POSITION_DATA);a=this.getStride(e.START_POSITION_DATA);p=this._pVertices;l=new Array;while(r<t.length){n=o/a&1?i:t;p[o]=n[r];p[o+1]=n[r+1];p[o+2]=n[r+2];n=o/a&1?t:i;p[o+3]=n[r];p[o+4]=n[r+1];p[o+5]=n[r+2];if(++s==4){var u=o/a-3;l.push(u,u+1,u+2,u+3,u+2,u+1);s=0;r+=3}o+=a}this.updateIndices(l);this.pInvalidateBounds();this.notifyPositionsUpdate();this._positionsDirty=false};e.prototype.updateThickness=function(t){var i;var r;var s;var n;var o;var a;this._thickness=t;if(t!=null){i=0;r=0;n=this.getOffset(e.THICKNESS_DATA);o=this.getStride(e.THICKNESS_DATA);a=this._pVertices;s=n;while(i<t.length){a[s]=Math.floor(.5*(s-n)/o+.5)&1?-t[i]:t[i];if(++r==4){r=0;i++}s+=o}}this.notifyThicknessUpdate();this._thicknessDirty=false};e.prototype.updateColors=function(t,i){var r;var s;var n;var o;var a;var p;var l;this._startColors=t;this._endColors=i;if(this._startColors==null){this._startColors=new Array(this._numSegments*4);r=0;while(r<this._startColors.length)this._startColors[r++]=1}if(this._endColors==null){this._endColors=new Array(this._numSegments*4);r=0;while(r<this._endColors.length)this._endColors[r++]=1}r=0;s=0;a=this.getOffset(e.COLOR_DATA);p=this.getStride(e.COLOR_DATA);l=this._pVertices;o=a;while(r<this._startColors.length){n=(o-a)/p&1?this._endColors:this._startColors;l[o]=n[r];l[o+1]=n[r+1];l[o+2]=n[r+2];l[o+3]=n[r+3];if(++s==4){s=0;r+=4}o+=p}this.notifyColorsUpdate();this._colorsDirty=false};e.prototype.dispose=function(){t.prototype.dispose.call(this);this._startPositions=null;this._endPositions=null;this._thickness=null;this._startColors=null;this._endColors=null};e.prototype.pInvalidateBounds=function(){if(this.parentGeometry)this.parentGeometry.iInvalidateBounds(this)};e.prototype.clone=function(){var t=new e;t.updateIndices(this._pIndices.concat());t.updatePositions(this._startPositions.concat(),this._endPositions.concat());t.updateThickness(this._thickness.concat());t.updatePositions(this._startPositions.concat(),this._endPositions.concat());return t};e.prototype._pNotifyVerticesUpdate=function(){this._pStrideOffsetDirty=true;this.notifyPositionsUpdate();this.notifyThicknessUpdate();this.notifyColorsUpdate()};e.prototype.notifyPositionsUpdate=function(){if(this._positionsDirty)return;this._positionsDirty=true;if(!this._positionsUpdated)this._positionsUpdated=new a(a.VERTICES_UPDATED,o.POSITION_DATA);this.dispatchEvent(this._positionsUpdated)};e.prototype.notifyThicknessUpdate=function(){if(this._thicknessDirty)return;this._thicknessDirty=true;if(!this._thicknessUpdated)this._thicknessUpdated=new a(a.VERTICES_UPDATED,e.THICKNESS_DATA);this.dispatchEvent(this._thicknessUpdated)};e.prototype.notifyColorsUpdate=function(){if(this._colorsDirty)return;this._colorsDirty=true;if(!this._colorUpdated)this._colorUpdated=new a(a.VERTICES_UPDATED,e.COLOR_DATA);this.dispatchEvent(this._colorUpdated)};e.VERTEX_DATA="vertices";e.START_POSITION_DATA="startPositions";e.END_POSITION_DATA="endPositions";e.THICKNESS_DATA="thickness";e.COLOR_DATA="colors";e.POSITION_FORMAT="float3";e.COLOR_FORMAT="float4";e.THICKNESS_FORMAT="float1";return e}(n);e.exports=p},{"awayjs-display/lib/base/LineSubMesh":"awayjs-display/lib/base/LineSubMesh","awayjs-display/lib/base/SubGeometryBase":"awayjs-display/lib/base/SubGeometryBase","awayjs-display/lib/base/TriangleSubGeometry":"awayjs-display/lib/base/TriangleSubGeometry","awayjs-display/lib/events/SubGeometryEvent":"awayjs-display/lib/events/SubGeometryEvent"}],"awayjs-display/lib/base/LineSubMesh":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/library/AssetType");var n=t("awayjs-display/lib/base/SubMeshBase");var o=function(t){r(e,t);function e(e,i,r){if(r===void 0){r=null}t.call(this);this._pParentMesh=i;this._subGeometry=e;this.material=r}Object.defineProperty(e.prototype,"assetType",{get:function(){return s.LINE_SUB_MESH},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"subGeometry",{get:function(){return this._subGeometry},enumerable:true,configurable:true});e.prototype.dispose=function(){this.material=null;t.prototype.dispose.call(this)};e.prototype._iCollectRenderable=function(t){t.applyLineSubMesh(this)};return e}(n);e.exports=o},{"awayjs-core/lib/library/AssetType":undefined,"awayjs-display/lib/base/SubMeshBase":"awayjs-display/lib/base/SubMeshBase"}],"awayjs-display/lib/base/LoaderInfo":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/events/EventDispatcher");var n=function(t){r(e,t);function e(){t.apply(this,arguments)}Object.defineProperty(e.prototype,"bytes",{get:function(){return this._bytes},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"bytesLoaded",{get:function(){return this._bytesLoaded},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"bytesTotal",{get:function(){return this._bytesTotal},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"content",{get:function(){return this._content},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"contentType",{get:function(){return this._contentType},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"loader",{get:function(){return this._loader},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:true,configurable:true});return e}(s);e.exports=n},{"awayjs-core/lib/events/EventDispatcher":undefined}],"awayjs-display/lib/base/OrientationMode":[function(t,e,i){var r=function(){function t(){}t.DEFAULT="default";t.CAMERA_PLANE="cameraPlane";t.CAMERA_POSITION="cameraPosition";return t}();e.exports=r},{}],"awayjs-display/lib/base/PixelSnapping":[function(t,e,i){var r=function(){function t(){}t.ALWAYS="always";t.AUTO="auto";t.NEVER="never";return t}();e.exports=r},{}],"awayjs-display/lib/base/SpreadMethod":[function(t,e,i){var r=function(){function t(){}t.PAD="pad";t.REFLECT="reflect";t.REPEAT="repeat";return t}();e.exports=r},{}],"awayjs-display/lib/base/SubGeometryBase":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/library/NamedAssetBase");var n=t("awayjs-core/lib/errors/AbstractMethodError");var o=t("awayjs-display/lib/events/SubGeometryEvent");var a=function(t){r(e,t);function e(e){t.call(this);this._pStrideOffsetDirty=true;this._pConcatenateArrays=true;this._pStride=new Object;this._pOffset=new Object;this._pConcatenateArrays=e}e.prototype._pUpdateStrideOffset=function(){throw new n};Object.defineProperty(e.prototype,"subMeshClass",{get:function(){return this._pSubMeshClass},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"concatenateArrays",{get:function(){return this._pConcatenateArrays},set:function(t){if(this._pConcatenateArrays==t)return;this._pConcatenateArrays=t;this._pStrideOffsetDirty=true;if(t)this._pNotifyVerticesUpdate()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"indices",{get:function(){return this._pIndices},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"vertices",{get:function(){this.updateVertices();return this._pVertices},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numTriangles",{get:function(){return this._numTriangles},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numVertices",{get:function(){return this._pNumVertices},enumerable:true,configurable:true});e.prototype.getStride=function(t){if(this._pStrideOffsetDirty)this._pUpdateStrideOffset();return this._pStride[t]};e.prototype.getOffset=function(t){if(this._pStrideOffsetDirty)this._pUpdateStrideOffset();return this._pOffset[t]};e.prototype.updateVertices=function(){throw new n};e.prototype.dispose=function(){this._pIndices=null;this._pVertices=null};e.prototype.updateIndices=function(t){this._pIndices=t;this._numIndices=t.length;this._numTriangles=this._numIndices/3;this.notifyIndicesUpdate()};e.prototype.pInvalidateBounds=function(){if(this.parentGeometry)this.parentGeometry.iInvalidateBounds(this)};e.prototype.clone=function(){throw new n};e.prototype.applyTransformation=function(t){};e.prototype.scale=function(t){};e.prototype.scaleUV=function(t,e){if(t===void 0){t=1}if(e===void 0){e=1}};e.prototype.getBoundingPositions=function(){throw new n};e.prototype.notifyIndicesUpdate=function(){if(!this._indicesUpdated)this._indicesUpdated=new o(o.INDICES_UPDATED);this.dispatchEvent(this._indicesUpdated)};e.prototype._pNotifyVerticesUpdate=function(){throw new n};e.VERTEX_DATA="vertices";return e}(s);e.exports=a},{"awayjs-core/lib/errors/AbstractMethodError":undefined,"awayjs-core/lib/library/NamedAssetBase":undefined,"awayjs-display/lib/events/SubGeometryEvent":"awayjs-display/lib/events/SubGeometryEvent"}],"awayjs-display/lib/base/SubMeshBase":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/errors/AbstractMethodError");var n=t("awayjs-core/lib/library/NamedAssetBase");var o=function(t){r(e,t);function e(){t.call(this);this._iIndex=0;this._renderables=new Array}Object.defineProperty(e.prototype,"animator",{get:function(){return this._pParentMesh.animator},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"material",{get:function(){return this._material||this._pParentMesh.material},set:function(t){if(this.material)this.material.iRemoveOwner(this);this._material=t;if(this.material)this.material.iAddOwner(this)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"sceneTransform",{get:function(){return this._pParentMesh.sceneTransform},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"parentMesh",{get:function(){return this._pParentMesh},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"uvTransform",{get:function(){return this._uvTransform||this._pParentMesh.uvTransform},set:function(t){this._uvTransform=t},enumerable:true,configurable:true});e.prototype.dispose=function(){this.material=null;var t=this._renderables.length;for(var e=0;e<t;e++)this._renderables[e].dispose();this._renderables=new Array};e.prototype.getRenderSceneTransform=function(t){return this._pParentMesh.getRenderSceneTransform(t)};e.prototype._iAddRenderable=function(t){this._renderables.push(t);return t};e.prototype._iRemoveRenderable=function(t){var e=this._renderables.indexOf(t);this._renderables.splice(e,1);return t};e.prototype._iInvalidateRenderableGeometry=function(){var t=this._renderables.length;for(var e=0;e<t;e++)this._renderables[e].invalidateGeometry()};e.prototype._iCollectRenderable=function(t){throw new s};e.prototype._iGetExplicitMaterial=function(){return this._material};return e}(n);e.exports=o},{"awayjs-core/lib/errors/AbstractMethodError":undefined,"awayjs-core/lib/library/NamedAssetBase":undefined}],"awayjs-display/lib/base/Transform":[function(t,e,i){var r=t("awayjs-core/lib/geom/Matrix3D");var s=t("awayjs-core/lib/geom/Matrix3DUtils");var n=t("awayjs-core/lib/geom/Vector3D");var o=function(){function t(t){this._position=new n;this._displayObject=t}Object.defineProperty(t.prototype,"backVector",{get:function(){var t=s.getForward(this._displayObject._iMatrix3D);t.negate();return t},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"concatenatedColorTransform",{get:function(){return this._concatenatedColorTransform},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"concatenatedMatrix",{get:function(){return this._concatenatedMatrix},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"downVector",{get:function(){var t=s.getUp(this._displayObject._iMatrix3D);t.negate();return t},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"forwardVector",{get:function(){return s.getForward(this._displayObject._iMatrix3D)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"leftVector",{get:function(){var t=s.getRight(this._displayObject._iMatrix3D);t.negate();return t},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"matrix3D",{get:function(){return this._displayObject._iMatrix3D},set:function(t){this._displayObject._iMatrix3D=t},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pixelBounds",{get:function(){return this._pixelBounds},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"position",{get:function(){return this._displayObject._iMatrix3D.position},set:function(t){this._displayObject.x=t.x;this._displayObject.y=t.y;this._displayObject.z=t.z},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rightVector",{get:function(){return s.getRight(this._displayObject._iMatrix3D)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rotation",{get:function(){return new n(this._displayObject.rotationX,this._displayObject.rotationY,this._displayObject.rotationZ)},set:function(t){this._displayObject.rotationX=t.x;this._displayObject.rotationY=t.y;this._displayObject.rotationZ=t.z},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"scale",{get:function(){return new n(this._displayObject.scaleX,this._displayObject.scaleY,this._displayObject.scaleZ)},set:function(t){this._displayObject.scaleX=t.x;this._displayObject.scaleY=t.y;this._displayObject.scaleZ=t.z},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"upVector",{get:function(){return s.getUp(this._displayObject._iMatrix3D)},enumerable:true,configurable:true});t.prototype.getRelativeMatrix3D=function(t){return new r};t.prototype.moveForward=function(t){this._displayObject.translateLocal(n.Z_AXIS,t)};t.prototype.moveBackward=function(t){this._displayObject.translateLocal(n.Z_AXIS,-t)};t.prototype.moveLeft=function(t){this._displayObject.translateLocal(n.X_AXIS,-t)};t.prototype.moveRight=function(t){this._displayObject.translateLocal(n.X_AXIS,t)};t.prototype.moveUp=function(t){this._displayObject.translateLocal(n.Y_AXIS,t)};t.prototype.moveDown=function(t){this._displayObject.translateLocal(n.Y_AXIS,-t)};return t}();e.exports=o},{"awayjs-core/lib/geom/Matrix3D":undefined,"awayjs-core/lib/geom/Matrix3DUtils":undefined,"awayjs-core/lib/geom/Vector3D":undefined}],"awayjs-display/lib/base/TriangleCulling":[function(t,e,i){var r=function(){function t(){}t.NEGATIVE="negative";t.NONE="none";t.POSITIVE="positive";return t}();e.exports=r},{}],"awayjs-display/lib/base/TriangleSubGeometry":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/geom/Vector3D");var n=t("awayjs-display/lib/base/SubGeometryBase");var o=t("awayjs-display/lib/base/TriangleSubMesh");var a=t("awayjs-display/lib/events/SubGeometryEvent");var p=function(t){r(e,t);function e(e){t.call(this,e);this._positionsDirty=true;this._faceNormalsDirty=true;this._faceTangentsDirty=true;this._vertexNormalsDirty=true;this._vertexTangentsDirty=true;this._uvsDirty=true;this._secondaryUVsDirty=true;this._jointIndicesDirty=true;this._jointWeightsDirty=true;this._concatenateArrays=true;this._autoDeriveNormals=true;this._autoDeriveTangents=true;this._autoDeriveUVs=false;this._useFaceWeights=false;this._scaleU=1;this._scaleV=1;this._pSubMeshClass=o}Object.defineProperty(e.prototype,"scaleU",{get:function(){return this._scaleU},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"scaleV",{get:function(){return this._scaleV},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"useCondensedIndices",{get:function(){return this._useCondensedIndices},set:function(t){if(this._useCondensedIndices==t)return;this._useCondensedIndices=t;this.notifyJointIndicesUpdate()},enumerable:true,configurable:true});e.prototype._pUpdateStrideOffset=function(){if(this._concatenateArrays){this._pOffset[e.VERTEX_DATA]=0;this._pOffset[e.POSITION_DATA]=0;var t=3;if(this._vertexNormals!=null){this._pOffset[e.NORMAL_DATA]=t;t+=3}if(this._vertexTangents!=null){this._pOffset[e.TANGENT_DATA]=t;t+=3}if(this._uvs!=null){this._pOffset[e.UV_DATA]=t;t+=2}if(this._secondaryUVs!=null){this._pOffset[e.SECONDARY_UV_DATA]=t;t+=2}if(this._jointIndices!=null){this._pOffset[e.JOINT_INDEX_DATA]=t;t+=this._jointsPerVertex}if(this._jointWeights!=null){this._pOffset[e.JOINT_WEIGHT_DATA]=t;t+=this._jointsPerVertex}this._pStride[e.VERTEX_DATA]=t;this._pStride[e.POSITION_DATA]=t;this._pStride[e.NORMAL_DATA]=t;this._pStride[e.TANGENT_DATA]=t;this._pStride[e.UV_DATA]=t;this._pStride[e.SECONDARY_UV_DATA]=t;this._pStride[e.JOINT_INDEX_DATA]=t;this._pStride[e.JOINT_WEIGHT_DATA]=t;var i=this._pNumVertices*t;if(this._pVertices==null)this._pVertices=new Array(i);else if(this._pVertices.length!=i)this._pVertices.length=i}else{this._pOffset[e.POSITION_DATA]=0;this._pOffset[e.NORMAL_DATA]=0;this._pOffset[e.TANGENT_DATA]=0;this._pOffset[e.UV_DATA]=0;this._pOffset[e.SECONDARY_UV_DATA]=0;this._pOffset[e.JOINT_INDEX_DATA]=0;this._pOffset[e.JOINT_WEIGHT_DATA]=0;this._pStride[e.POSITION_DATA]=3;this._pStride[e.NORMAL_DATA]=3;
this._pStride[e.TANGENT_DATA]=3;this._pStride[e.UV_DATA]=2;this._pStride[e.SECONDARY_UV_DATA]=2;this._pStride[e.JOINT_INDEX_DATA]=this._jointsPerVertex;this._pStride[e.JOINT_WEIGHT_DATA]=this._jointsPerVertex}this._pStrideOffsetDirty=false};Object.defineProperty(e.prototype,"jointsPerVertex",{get:function(){return this._jointsPerVertex},set:function(t){if(this._jointsPerVertex==t)return;this._jointsPerVertex=t;this._pStrideOffsetDirty=true;if(this._pConcatenateArrays)this._pNotifyVerticesUpdate()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"autoDeriveUVs",{get:function(){return this._autoDeriveUVs},set:function(t){if(this._autoDeriveUVs==t)return;this._autoDeriveUVs=t;if(t)this.notifyUVsUpdate()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"autoDeriveNormals",{get:function(){return this._autoDeriveNormals},set:function(t){if(this._autoDeriveNormals==t)return;this._autoDeriveNormals=t;if(t)this.notifyNormalsUpdate()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"autoDeriveTangents",{get:function(){return this._autoDeriveTangents},set:function(t){if(this._autoDeriveTangents==t)return;this._autoDeriveTangents=t;if(t)this.notifyTangentsUpdate()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"vertices",{get:function(){if(this._positionsDirty)this.updatePositions(this._positions);if(this._vertexNormalsDirty)this.updateVertexNormals(this._vertexNormals);if(this._vertexTangentsDirty)this.updateVertexTangents(this._vertexTangents);if(this._uvsDirty)this.updateUVs(this._uvs);if(this._secondaryUVsDirty)this.updateSecondaryUVs(this._secondaryUVs);if(this._jointIndicesDirty)this.updateJointIndices(this._jointIndices);if(this._jointWeightsDirty)this.updateJointWeights(this._jointWeights);return this._pVertices},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"positions",{get:function(){if(this._positionsDirty)this.updatePositions(this._positions);return this._positions},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"vertexNormals",{get:function(){if(this._vertexNormalsDirty)this.updateVertexNormals(this._vertexNormals);return this._vertexNormals},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"vertexTangents",{get:function(){if(this._vertexTangentsDirty)this.updateVertexTangents(this._vertexTangents);return this._vertexTangents},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"faceNormals",{get:function(){if(this._faceNormalsDirty)this.updateFaceNormals();return this._faceNormals},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"faceTangents",{get:function(){if(this._faceTangentsDirty)this.updateFaceTangents();return this._faceTangents},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"uvs",{get:function(){if(this._uvsDirty)this.updateUVs(this._uvs);return this._uvs},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"secondaryUVs",{get:function(){if(this._secondaryUVsDirty)this.updateSecondaryUVs(this._secondaryUVs);return this._secondaryUVs},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"jointIndices",{get:function(){if(this._jointIndicesDirty)this.updateJointIndices(this._jointIndices);if(this._useCondensedIndices)return this._condensedJointIndices;return this._jointIndices},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"jointWeights",{get:function(){if(this._jointWeightsDirty)this.updateJointWeights(this._jointWeights);return this._jointWeights},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"useFaceWeights",{get:function(){return this._useFaceWeights},set:function(t){if(this._useFaceWeights==t)return;this._useFaceWeights=t;if(this._autoDeriveNormals)this.notifyNormalsUpdate();if(this._autoDeriveTangents)this.notifyTangentsUpdate();this._faceNormalsDirty=true},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numCondensedJoints",{get:function(){if(this._jointIndicesDirty)this.updateJointIndices(this._jointIndices);return this._numCondensedJoints},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"condensedIndexLookUp",{get:function(){if(this._jointIndicesDirty)this.updateJointIndices(this._jointIndices);return this._condensedIndexLookUp},enumerable:true,configurable:true});e.prototype.getBoundingPositions=function(){if(this._positionsDirty)this.updatePositions(this._positions);return this._positions};e.prototype.updatePositions=function(t){var i;var r;var s;var n;this._positions=t;if(this._positions==null)this._positions=new Array;this._pNumVertices=this._positions.length/3;if(this._concatenateArrays){var o=this._pNumVertices*this.getStride(e.VERTEX_DATA);if(this._pVertices==null)this._pVertices=new Array(o);else if(this._pVertices.length!=o)this._pVertices.length=o;i=0;r=this.getOffset(e.POSITION_DATA);s=this.getStride(e.POSITION_DATA);n=this._pVertices;while(i<t.length){n[r]=t[i++];n[r+1]=t[i++];n[r+2]=t[i++];r+=s}}if(this._autoDeriveNormals)this.notifyNormalsUpdate();if(this._autoDeriveTangents)this.notifyTangentsUpdate();if(this._autoDeriveUVs)this.notifyUVsUpdate();this.pInvalidateBounds();this.notifyPositionsUpdate();this._positionsDirty=false};e.prototype.updateVertexNormals=function(t){var i;var r;var s;var n;var o;if(!this._autoDeriveNormals){if((this._vertexNormals==null||t==null)&&(this._vertexNormals!=null||t!=null)){if(this._concatenateArrays)this._pNotifyVerticesUpdate();else this._pStrideOffsetDirty=true}this._vertexNormals=t;if(t!=null&&this._concatenateArrays){i=0;r=this.getOffset(e.NORMAL_DATA);n=this.getStride(e.NORMAL_DATA);o=this._pVertices;while(i<t.length){o[r]=t[i++];o[r+1]=t[i++];o[r+2]=t[i++];r+=n}}}else{if(this._vertexNormals==null){this._vertexNormals=new Array(this._positions.length);if(this._concatenateArrays)this._pNotifyVerticesUpdate();else this._pStrideOffsetDirty=true}if(this._faceNormalsDirty)this.updateFaceNormals();s=this.getOffset(e.NORMAL_DATA);n=this.getStride(e.NORMAL_DATA);o=this._concatenateArrays?this._pVertices:this._vertexNormals;var a=0;var p=1;var l=2;r=s;var h=o.length;while(r<h){o[r]=0;o[r+1]=0;o[r+2]=0;r+=n}var u=0;var c=this._pIndices.length;var f;i=0;while(i<c){f=this._useFaceWeights?this._faceWeights[u++]:1;r=s+this._pIndices[i++]*n;o[r]+=this._faceNormals[a]*f;o[r+1]+=this._faceNormals[p]*f;o[r+2]+=this._faceNormals[l]*f;r=s+this._pIndices[i++]*n;o[r]+=this._faceNormals[a]*f;o[r+1]+=this._faceNormals[p]*f;o[r+2]+=this._faceNormals[l]*f;r=s+this._pIndices[i++]*n;o[r]+=this._faceNormals[a]*f;o[r+1]+=this._faceNormals[p]*f;o[r+2]+=this._faceNormals[l]*f;a+=3;p+=3;l+=3}i=0;r=s;while(r<h){var _=o[r];var d=o[r+1];var y=o[r+2];var b=1/Math.sqrt(_*_+d*d+y*y);if(this._concatenateArrays){this._vertexNormals[i++]=o[r]=_*b;this._vertexNormals[i++]=o[r+1]=d*b;this._vertexNormals[i++]=o[r+2]=y*b}else{o[r]=_*b;o[r+1]=d*b;o[r+2]=y*b}r+=n}}this.notifyNormalsUpdate();this._vertexNormalsDirty=false};e.prototype.updateVertexTangents=function(t){var i;var r;var s;var n;var o;if(!this._autoDeriveTangents){if((this._vertexTangents==null||t==null)&&(this._vertexTangents!=null||t!=null)){if(this._concatenateArrays)this._pNotifyVerticesUpdate();else this._pStrideOffsetDirty=true}this._vertexTangents=t;if(t!=null&&this._concatenateArrays){i=0;r=this.getOffset(e.TANGENT_DATA);n=this.getStride(e.TANGENT_DATA);o=this._pVertices;while(i<t.length){o[r]=t[i++];o[r+1]=t[i++];o[r+2]=t[i++];r+=n}}}else{if(this._vertexTangents==null){this._vertexTangents=new Array(this._positions.length);if(this._concatenateArrays)this._pNotifyVerticesUpdate();else this._pStrideOffsetDirty=true}if(this._faceTangentsDirty)this.updateFaceTangents();s=this.getOffset(e.TANGENT_DATA);n=this.getStride(e.TANGENT_DATA);o=this._concatenateArrays?this._pVertices:this._vertexTangents;r=s;var a=o.length;while(r<a){o[r]=0;o[r+1]=0;o[r+2]=0;r+=n}var p=0;var l;var h=0;var u=1;var c=2;i=0;var f=this._pIndices.length;while(i<f){l=this._useFaceWeights?this._faceWeights[p++]:1;r=s+this._pIndices[i++]*n;o[r++]+=this._faceTangents[h]*l;o[r++]+=this._faceTangents[u]*l;o[r]+=this._faceTangents[c]*l;r=s+this._pIndices[i++]*n;o[r++]+=this._faceTangents[h]*l;o[r++]+=this._faceTangents[u]*l;o[r]+=this._faceTangents[c]*l;r=s+this._pIndices[i++]*n;o[r++]+=this._faceTangents[h]*l;o[r++]+=this._faceTangents[u]*l;o[r]+=this._faceTangents[c]*l;h+=3;u+=3;c+=3}i=0;r=s;while(r<a){var _=o[r];var d=o[r+1];var y=o[r+2];var b=1/Math.sqrt(_*_+d*d+y*y);if(this._concatenateArrays){this._vertexTangents[i++]=o[r]=_*b;this._vertexTangents[i++]=o[r+1]=d*b;this._vertexTangents[i++]=o[r+2]=y*b}else{o[r]=_*b;o[r+1]=d*b;o[r+2]=y*b}r+=n}}this.notifyTangentsUpdate();this._vertexTangentsDirty=false};e.prototype.updateUVs=function(t){var i;var r;var s;var n;var o;if(!this._autoDeriveUVs){if((this._uvs==null||t==null)&&(this._uvs!=null||t!=null)){if(this._concatenateArrays)this._pNotifyVerticesUpdate();else this._pStrideOffsetDirty=true}this._uvs=t;if(t!=null&&this._concatenateArrays){i=0;r=this.getOffset(e.UV_DATA);n=this.getStride(e.UV_DATA);o=this._pVertices;while(i<t.length){o[r]=t[i++];o[r+1]=t[i++];r+=n}}}else{if(this._uvs==null){this._uvs=new Array(this._positions.length*2/3);if(this._concatenateArrays)this._pNotifyVerticesUpdate();else this._pStrideOffsetDirty=true}s=this.getOffset(e.UV_DATA);n=this.getStride(e.UV_DATA);o=this._concatenateArrays?this._pVertices:this._uvs;i=0;r=s;var a=0;var p=o.length;while(r<p){if(this._concatenateArrays){this._uvs[i++]=o[r]=a*.5;this._uvs[i++]=o[r+1]=1-(a&1)}else{o[r]=a*.5;o[r+1]=1-(a&1)}if(++a==3)a=0;r+=n}}if(this._autoDeriveTangents)this.notifyTangentsUpdate();this.notifyUVsUpdate();this._uvsDirty=false};e.prototype.updateSecondaryUVs=function(t){var i;var r;var s;var n;var o;if(this._concatenateArrays&&(this._secondaryUVs==null||t==null)&&(this._secondaryUVs!=null||t!=null))this._pNotifyVerticesUpdate();this._secondaryUVs=t;if(t!=null&&this._concatenateArrays){s=this.getOffset(e.SECONDARY_UV_DATA);n=this.getStride(e.SECONDARY_UV_DATA);i=0;r=s;o=this._pVertices;while(i<t.length){o[r]=t[i++];o[r+1]=t[i++];r+=n}}this.notifySecondaryUVsUpdate();this._secondaryUVsDirty=false};e.prototype.updateJointIndices=function(t){var i;var r;var s;var n;var o;var a;if(this._concatenateArrays&&(this._jointIndices==null||t==null)&&(this._jointIndices!=null||t!=null))this._pNotifyVerticesUpdate();this._jointIndices=t;if(t!=null){n=this.getOffset(e.JOINT_INDEX_DATA);o=this.getStride(e.JOINT_INDEX_DATA);if(this._useCondensedIndices){i=0;r=0;s=n;a=this._concatenateArrays?this._pVertices:this._condensedJointIndices;var p;var l=0;var h=new Object;if(!this._concatenateArrays)this._condensedJointIndices=new Array(t.length);this._condensedIndexLookUp=new Array;while(i<t.length){for(r=0;r<this._jointsPerVertex;r++){p=t[i++];if(h[p]==undefined){h[p]=l*3;this._condensedIndexLookUp[l++]=p}a[s+r]=h[p]}s+=o}this._numCondensedJoints=l}else if(this._concatenateArrays){i=0;s=n;a=this._pVertices;while(i<t.length){r=0;while(r<this._jointsPerVertex)a[s+r++]=t[i++];s+=o}}}this.notifyJointIndicesUpdate();this._jointIndicesDirty=false};e.prototype.updateJointWeights=function(t){var i;var r;var s;var n;var o;var a;if(this._concatenateArrays&&(this._jointWeights==null||t==null)&&(this._jointWeights!=null||t!=null))this._pNotifyVerticesUpdate();this._jointWeights=t;if(t!=null&&this._concatenateArrays){n=this.getOffset(e.JOINT_WEIGHT_DATA);o=this.getStride(e.JOINT_WEIGHT_DATA);i=0;s=n;a=this._pVertices;while(i<t.length){r=0;while(r<this._jointsPerVertex)a[s+r++]=t[i++];s+=o}}this.notifyJointWeightsUpdate();this._jointWeightsDirty=false};e.prototype.dispose=function(){t.prototype.dispose.call(this);this._positions=null;this._vertexNormals=null;this._vertexTangents=null;this._uvs=null;this._secondaryUVs=null;this._jointIndices=null;this._jointWeights=null;this._faceNormals=null;this._faceWeights=null;this._faceTangents=null};e.prototype.updateIndices=function(e){t.prototype.updateIndices.call(this,e);this._faceNormalsDirty=true;if(this._autoDeriveNormals)this._vertexNormalsDirty=true;if(this._autoDeriveTangents)this._vertexTangentsDirty=true;if(this._autoDeriveUVs)this._uvsDirty=true};e.prototype.clone=function(){var t=new e(this._concatenateArrays);t.updateIndices(this._pIndices.concat());t.updatePositions(this._positions.concat());if(this._vertexNormals&&!this._autoDeriveNormals)t.updateVertexNormals(this._vertexNormals.concat());else t.updateVertexNormals(null);if(this._uvs&&!this._autoDeriveUVs)t.updateUVs(this._uvs.concat());else t.updateUVs(null);if(this._vertexTangents&&!this._autoDeriveTangents)t.updateVertexTangents(this._vertexTangents.concat());else t.updateVertexTangents(null);if(this._secondaryUVs)t.updateSecondaryUVs(this._secondaryUVs.concat());if(this._jointIndices){t.jointsPerVertex=this._jointsPerVertex;t.updateJointIndices(this._jointIndices.concat())}if(this._jointWeights)t.updateJointWeights(this._jointWeights.concat());return t};e.prototype.scaleUV=function(t,e){if(t===void 0){t=1}if(e===void 0){e=1}var i;var r;var s;var n;n=this._uvs;var o=t/this._scaleU;var a=e/this._scaleV;this._scaleU=t;this._scaleV=e;var p=n.length;r=0;s=2;i=r;while(i<p){n[i]*=o;n[i+1]*=a;i+=s}this.notifyUVsUpdate()};e.prototype.scale=function(t){var e;var i;var r;var s;var n;n=this._positions;var o=n.length;r=0;s=3;e=0;i=r;while(e<o){n[i]*=t;n[i+1]*=t;n[i+2]*=t;e+=3;i+=s}this.notifyPositionsUpdate()};e.prototype.applyTransformation=function(t){var i;var r;var n;if(this._concatenateArrays){i=this._pVertices;r=this._pVertices;n=this._pVertices}else{i=this._positions;r=this._vertexNormals;n=this._vertexTangents}var o=this._positions.length/3;var a;var p;var l;var h=new s;var u=this._vertexNormals!=null;var c=this._vertexTangents!=null;var f;if(u||c){f=t.clone();f.invert();f.transpose()}var _=this.getOffset(e.POSITION_DATA);var d=this.getOffset(e.NORMAL_DATA);var y=this.getOffset(e.TANGENT_DATA);var b=this.getStride(e.POSITION_DATA);var m=this.getStride(e.NORMAL_DATA);var g=this.getStride(e.TANGENT_DATA);for(a=0;a<o;++a){p=_+1;l=_+2;h.x=i[_];h.y=i[p];h.z=i[l];h=t.transformVector(h);i[_]=h.x;i[p]=h.y;i[l]=h.z;_+=b;if(u){p=d+1;l=d+2;h.x=r[d];h.y=r[p];h.z=r[l];h=f.deltaTransformVector(h);h.normalize();r[d]=h.x;r[p]=h.y;r[l]=h.z;d+=m}if(c){p=y+1;l=y+2;h.x=n[y];h.y=n[p];h.z=n[l];h=f.deltaTransformVector(h);h.normalize();n[y]=h.x;n[p]=h.y;n[l]=h.z;y+=g}}this.notifyPositionsUpdate();this.notifyNormalsUpdate();this.notifyTangentsUpdate()};e.prototype.updateFaceTangents=function(){var t=0;var e;var i;var r;var s;var n;var o;var a;var p;var l,h,u;var c,f,_;var d,y,b;var m,g,v;var w=this._positions;var j=this._uvs;var P=this._pIndices.length;if(this._faceTangents==null)this._faceTangents=new Array(P);while(t<P){e=this._pIndices[t];i=this._pIndices[t+1];r=this._pIndices[t+2];n=j[e*2+1];o=j[i*2+1]-n;a=j[r*2+1]-n;s=e*3;l=w[s];h=w[s+1];u=w[s+2];s=i*3;c=w[s]-l;f=w[s+1]-h;_=w[s+2]-u;s=r*3;d=w[s]-l;y=w[s+1]-h;b=w[s+2]-u;m=a*c-o*d;g=a*f-o*y;v=a*_-o*b;p=1/Math.sqrt(m*m+g*g+v*v);this._faceTangents[t++]=p*m;this._faceTangents[t++]=p*g;this._faceTangents[t++]=p*v}this._faceTangentsDirty=false};e.prototype.updateFaceNormals=function(){var t=0;var e=0;var i=0;var r;var s;var n;var o,a,p;var l,h,u;var c,f,_;var d,y,b;var m,g,v;var w,j,P;var A;var O=this._positions;var D=this._pIndices.length;if(this._faceNormals==null)this._faceNormals=new Array(D);if(this._useFaceWeights&&this._faceWeights==null)this._faceWeights=new Array(D/3);while(t<D){r=this._pIndices[t++]*3;o=O[r];l=O[r+1];c=O[r+2];r=this._pIndices[t++]*3;a=O[r];h=O[r+1];f=O[r+2];r=this._pIndices[t++]*3;p=O[r];u=O[r+1];_=O[r+2];d=p-o;y=u-l;b=_-c;m=a-o;g=h-l;v=f-c;w=b*g-y*v;j=d*v-b*m;P=y*m-d*g;A=Math.sqrt(w*w+j*j+P*P);if(this._useFaceWeights){var E=A*1e4;if(E<1)E=1;this._faceWeights[i++]=E}A=1/A;this._faceNormals[e++]=w*A;this._faceNormals[e++]=j*A;this._faceNormals[e++]=P*A}this._faceNormalsDirty=false};e.prototype._pNotifyVerticesUpdate=function(){this._pStrideOffsetDirty=true;this.notifyPositionsUpdate();this.notifyNormalsUpdate();this.notifyTangentsUpdate();this.notifyUVsUpdate();this.notifySecondaryUVsUpdate();this.notifyJointIndicesUpdate();this.notifyJointWeightsUpdate()};e.prototype.notifyPositionsUpdate=function(){if(this._positionsDirty)return;this._positionsDirty=true;if(!this._positionsUpdated)this._positionsUpdated=new a(a.VERTICES_UPDATED,e.POSITION_DATA);this.dispatchEvent(this._positionsUpdated)};e.prototype.notifyNormalsUpdate=function(){if(this._vertexNormalsDirty)return;this._vertexNormalsDirty=true;if(!this._normalsUpdated)this._normalsUpdated=new a(a.VERTICES_UPDATED,e.NORMAL_DATA);this.dispatchEvent(this._normalsUpdated)};e.prototype.notifyTangentsUpdate=function(){if(this._vertexTangentsDirty)return;this._vertexTangentsDirty=true;if(!this._tangentsUpdated)this._tangentsUpdated=new a(a.VERTICES_UPDATED,e.TANGENT_DATA);this.dispatchEvent(this._tangentsUpdated)};e.prototype.notifyUVsUpdate=function(){if(this._uvsDirty)return;this._uvsDirty=true;if(!this._uvsUpdated)this._uvsUpdated=new a(a.VERTICES_UPDATED,e.UV_DATA);this.dispatchEvent(this._uvsUpdated)};e.prototype.notifySecondaryUVsUpdate=function(){if(this._secondaryUVsDirty)return;this._secondaryUVsDirty=true;if(!this._secondaryUVsUpdated)this._secondaryUVsUpdated=new a(a.VERTICES_UPDATED,e.SECONDARY_UV_DATA);this.dispatchEvent(this._secondaryUVsUpdated)};e.prototype.notifyJointIndicesUpdate=function(){if(this._jointIndicesDirty)return;this._jointIndicesDirty=true;if(!this._jointIndicesUpdated)this._jointIndicesUpdated=new a(a.VERTICES_UPDATED,e.JOINT_INDEX_DATA);this.dispatchEvent(this._jointIndicesUpdated)};e.prototype.notifyJointWeightsUpdate=function(){if(this._jointWeightsDirty)return;this._jointWeightsDirty=true;if(!this._jointWeightsUpdated)this._jointWeightsUpdated=new a(a.VERTICES_UPDATED,e.JOINT_WEIGHT_DATA);this.dispatchEvent(this._jointWeightsUpdated)};e.POSITION_DATA="positions";e.NORMAL_DATA="vertexNormals";e.TANGENT_DATA="vertexTangents";e.UV_DATA="uvs";e.SECONDARY_UV_DATA="secondaryUVs";e.JOINT_INDEX_DATA="jointIndices";e.JOINT_WEIGHT_DATA="jointWeights";e.POSITION_FORMAT="float3";e.NORMAL_FORMAT="float3";e.TANGENT_FORMAT="float3";e.UV_FORMAT="float2";e.SECONDARY_UV_FORMAT="float2";return e}(n);e.exports=p},{"awayjs-core/lib/geom/Vector3D":undefined,"awayjs-display/lib/base/SubGeometryBase":"awayjs-display/lib/base/SubGeometryBase","awayjs-display/lib/base/TriangleSubMesh":"awayjs-display/lib/base/TriangleSubMesh","awayjs-display/lib/events/SubGeometryEvent":"awayjs-display/lib/events/SubGeometryEvent"}],"awayjs-display/lib/base/TriangleSubMesh":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/library/AssetType");var n=t("awayjs-display/lib/base/SubMeshBase");var o=function(t){r(e,t);function e(e,i,r){if(r===void 0){r=null}t.call(this);this._pParentMesh=i;this._subGeometry=e;this.material=r}Object.defineProperty(e.prototype,"assetType",{get:function(){return s.TRIANGLE_SUB_MESH},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"subGeometry",{get:function(){return this._subGeometry},enumerable:true,configurable:true});e.prototype.dispose=function(){t.prototype.dispose.call(this)};e.prototype._iCollectRenderable=function(t){t.applyTriangleSubMesh(this)};return e}(n);e.exports=o},{"awayjs-core/lib/library/AssetType":undefined,"awayjs-display/lib/base/SubMeshBase":"awayjs-display/lib/base/SubMeshBase"}],"awayjs-display/lib/bounds/AxisAlignedBoundingBox":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/geom/Matrix3DUtils");var n=t("awayjs-core/lib/geom/PlaneClassification");var o=t("awayjs-display/lib/bounds/BoundingVolumeBase");var a=t("awayjs-display/lib/prefabs/PrimitiveCubePrefab");var p=function(t){r(e,t);function e(e){t.call(this,e);this._x=0;this._y=0;this._z=0;this._width=0;this._height=0;this._depth=0;this._centerX=0;this._centerY=0;this._centerZ=0;this._halfExtentsX=0;this._halfExtentsY=0;this._halfExtentsZ=0}e.prototype.nullify=function(){this._x=this._y=this._z=0;this._width=this._height=this._depth=0;this._centerX=this._centerY=this._centerZ=0;this._halfExtentsX=this._halfExtentsY=this._halfExtentsZ=0};e.prototype.isInFrustum=function(t,e){if(this._pInvalidated)this._pUpdate();for(var i=0;i<e;++i){var r=t[i];var s=r.a;var n=r.b;var o=r.c;var a=s<0?-this._halfExtentsX:this._halfExtentsX;var p=n<0?-this._halfExtentsY:this._halfExtentsY;var l=o<0?-this._halfExtentsZ:this._halfExtentsZ;var h=s*(this._centerX+a)+n*(this._centerY+p)+o*(this._centerZ+l)-r.d;if(h<0)return false}return true};e.prototype.rayIntersection=function(t,e,i){if(this._pInvalidated)this._pUpdate();return this._box.rayIntersection(t,e,i)};e.prototype.classifyToPlane=function(t){var e=t.a;var i=t.b;var r=t.c;var s=e*this._centerX+i*this._centerY+r*this._centerZ-t.d;if(e<0)e=-e;if(i<0)i=-i;if(r<0)r=-r;var o=e*this._halfExtentsX+i*this._halfExtentsY+r*this._halfExtentsZ;return s>o?n.FRONT:s<-o?n.BACK:n.INTERSECT};e.prototype._pUpdate=function(){t.prototype._pUpdate.call(this);this._box=this._pEntity.getBox();var e=this._pEntity.sceneTransform;var i=this._box.width/2;var r=this._box.height/2;var n=this._box.depth/2;var o=this._box.x+i;var a=this._box.y+r;var p=this._box.z+n;var l=s.RAW_DATA_CONTAINER;e.copyRawDataTo(l);var h=l[0],u=l[4],c=l[8],f=l[12];var _=l[1],d=l[5],y=l[9],b=l[13];var m=l[2],g=l[6],v=l[10],w=l[14];this._centerX=o*h+a*u+p*c+f;this._centerY=o*_+a*d+p*y+b;this._centerZ=o*m+a*g+p*v+w;this._halfExtentsX=Math.abs(i*h+r*u+n*c);this._halfExtentsY=Math.abs(i*_+r*d+n*y);this._halfExtentsZ=Math.abs(i*m+r*g+n*v);if(this._prefab){this._prefab.width=this._box.width;this._prefab.height=this._box.height;this._prefab.depth=this._box.depth;this._pBoundsPrimitive.transform.matrix3D=e}this._width=this._halfExtentsX*2;this._height=this._halfExtentsY*2;this._depth=this._halfExtentsZ*2;this._x=this._centerX-this._halfExtentsX;this._y=this._centerY-this._halfExtentsY;this._z=this._centerZ-this._halfExtentsZ};e.prototype._pCreateBoundsPrimitive=function(){this._prefab=new a;this._prefab.geometryType="lineSubGeometry";return this._prefab.getNewObject()};return e}(o);e.exports=p},{"awayjs-core/lib/geom/Matrix3DUtils":undefined,"awayjs-core/lib/geom/PlaneClassification":undefined,"awayjs-display/lib/bounds/BoundingVolumeBase":"awayjs-display/lib/bounds/BoundingVolumeBase","awayjs-display/lib/prefabs/PrimitiveCubePrefab":"awayjs-display/lib/prefabs/PrimitiveCubePrefab"}],"awayjs-display/lib/bounds/BoundingSphere":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/geom/PlaneClassification");var n=t("awayjs-display/lib/bounds/BoundingVolumeBase");var o=t("awayjs-display/lib/prefabs/PrimitiveSpherePrefab");var a=function(t){r(e,t);function e(e){t.call(this,e);this._radius=0;this._centerX=0;this._centerY=0;this._centerZ=0}e.prototype.nullify=function(){this._centerX=this._centerY=this._centerZ=0;this._radius=0};e.prototype.isInFrustum=function(t,e){if(this._pInvalidated)this._pUpdate();for(var i=0;i<e;++i){var r=t[i];var s=r.a<0?-this._radius:this._radius;var n=r.b<0?-this._radius:this._radius;var o=r.c<0?-this._radius:this._radius;var a=r.a*(this._centerX+s)+r.b*(this._centerY+n)+r.c*(this._centerZ+o)-r.d;if(a<0){return false}}return true};e.prototype.rayIntersection=function(t,e,i){if(this._pInvalidated)this._pUpdate();return this._sphere.rayIntersection(t,e,i)};e.prototype.classifyToPlane=function(t){var e=t.a;var i=t.b;var r=t.c;var n=e*this._centerX+i*this._centerY+r*this._centerZ-t.d;if(e<0)e=-e;if(i<0)i=-i;if(r<0)r=-r;var o=(e+i+r)*this._radius;return n>o?s.FRONT:n<-o?s.BACK:s.INTERSECT};e.prototype._pUpdate=function(){t.prototype._pUpdate.call(this);this._sphere=this._pEntity.getSphere();var e=this._pEntity.sceneTransform;var i=this._sphere.x;var r=this._sphere.y;var s=this._sphere.z;var n=this._sphere.radius;var o=new Array(16);e.copyRawDataTo(o);var a=o[0],p=o[4],l=o[8],h=o[12];var u=o[1],c=o[5],f=o[9],_=o[13];var d=o[2],y=o[6],b=o[10],m=o[14];this._centerX=i*a+r*p+s*l+h;this._centerY=i*u+r*c+s*f+_;this._centerZ=i*d+r*y+s*b+m;var g=a+p+l;var v=u+c+f;var w=d+y+b;this._radius=n*Math.sqrt((g*g+v*v+w*w)/3);if(this._prefab){this._prefab.radius=n;this._pBoundsPrimitive.x=i;this._pBoundsPrimitive.y=r;this._pBoundsPrimitive.z=s;this._pBoundsPrimitive.transform.matrix3D=e}};e.prototype._pCreateBoundsPrimitive=function(){this._prefab=new o;this._prefab.geometryType="lineSubGeometry";return this._prefab.getNewObject()};return e}(n);e.exports=a},{"awayjs-core/lib/geom/PlaneClassification":undefined,"awayjs-display/lib/bounds/BoundingVolumeBase":"awayjs-display/lib/bounds/BoundingVolumeBase","awayjs-display/lib/prefabs/PrimitiveSpherePrefab":"awayjs-display/lib/prefabs/PrimitiveSpherePrefab"}],"awayjs-display/lib/bounds/BoundingVolumeBase":[function(t,e,i){var r=t("awayjs-core/lib/errors/AbstractMethodError");var s=function(){function t(t){this._pInvalidated=true;this._pEntity=t}Object.defineProperty(t.prototype,"boundsPrimitive",{get:function(){if(this._pBoundsPrimitive==null){this._pBoundsPrimitive=this._pCreateBoundsPrimitive();this._pUpdate()}return this._pBoundsPrimitive},enumerable:true,configurable:true});t.prototype.nullify=function(){throw new r};t.prototype.isInFrustum=function(t,e){throw new r};t.prototype.clone=function(){throw new r};t.prototype.rayIntersection=function(t,e,i){return-1};t.prototype.classifyToPlane=function(t){throw new r};t.prototype._pUpdate=function(){this._pInvalidated=false};t.prototype.invalidate=function(){this._pInvalidated=true};t.prototype._pCreateBoundsPrimitive=function(){throw new r};return t}();e.exports=s},{"awayjs-core/lib/errors/AbstractMethodError":undefined}],"awayjs-display/lib/bounds/BoundsType":[function(t,e,i){var r=function(){function t(){}t.SPHERE="sphere";t.AXIS_ALIGNED_BOX="axisAlignedBox";t.NULL="null";return t}();e.exports=r},{}],"awayjs-display/lib/bounds/NullBounds":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/geom/PlaneClassification");var n=t("awayjs-display/lib/bounds/BoundingVolumeBase");var o=function(t){r(e,t);function e(e){if(e===void 0){e=true}t.call(this,null);this._alwaysIn=e}e.prototype.clone=function(){return new e(this._alwaysIn)};e.prototype.isInFrustum=function(t,e){return this._alwaysIn};e.prototype.classifyToPlane=function(t){return s.INTERSECT};return e}(n);e.exports=o},{"awayjs-core/lib/geom/PlaneClassification":undefined,"awayjs-display/lib/bounds/BoundingVolumeBase":"awayjs-display/lib/bounds/BoundingVolumeBase"}],"awayjs-display/lib/containers/DisplayObjectContainer":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/library/AssetType");var n=t("awayjs-core/lib/errors/ArgumentError");var o=t("awayjs-core/lib/errors/Error");var a=t("awayjs-core/lib/errors/RangeError");var p=t("awayjs-display/lib/base/DisplayObject");var l=function(t){r(e,t);function e(){t.call(this);this._mouseChildren=true;this._children=new Array}Object.defineProperty(e.prototype,"assetType",{get:function(){return s.CONTAINER},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"mouseChildren",{get:function(){return this._mouseChildren},set:function(t){if(this._mouseChildren==t)return;this._mouseChildren=t;this._pUpdateImplicitMouseEnabled(this._pParent?this._pParent.mouseChildren:true)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numChildren",{get:function(){return this._children.length},enumerable:true,configurable:true});e.prototype.addChild=function(t){if(t==null)throw new o("Parameter child cannot be null.");if(t._pParent)t._pParent.removeChildInternal(t);t.iSetParent(this);this._children.push(t);return t};e.prototype.addChildAt=function(t,e){return t};e.prototype.addChildren=function(){var t=[];for(var e=0;e<arguments.length;e++){t[e-0]=arguments[e]}var i=t.length;for(var r=0;r<i;r++)this.addChild(t[r])};e.prototype.clone=function(){var t=new e;t.pivot=this.pivot;t._iMatrix3D=this._iMatrix3D;t.partition=this.partition;t.name=name;var i=this._children.length;for(var r=0;r<i;++r)t.addChild(this._children[r].clone());return t};e.prototype.contains=function(t){return this._children.indexOf(t)>=0};e.prototype.disposeWithChildren=function(){this.dispose();while(this.numChildren>0)this.getChildAt(0).dispose()};e.prototype.getChildAt=function(t){var e=this._children[t];if(e==null)throw new a("Index does not exist in the child list of the caller");return e};e.prototype.getChildByName=function(t){var e=this._children.length;for(var i=0;i<e;++i)if(this._children[i].name==t)return this._children[i];return null};e.prototype.getChildIndex=function(t){var e=this._children.indexOf(t);if(e==-1)throw new n("Child parameter is not a child of the caller");return e};e.prototype.getObjectsUnderPoint=function(t){return new Array};e.prototype.removeChild=function(t){if(t==null)throw new o("Parameter child cannot be null");this.removeChildInternal(t);t.iSetParent(null);return t};e.prototype.removeChildAt=function(t){return this.removeChild(this._children[t])};e.prototype.removeChildren=function(t,e){if(t===void 0){t=0}if(e===void 0){e=2147483647}if(t<0)throw new a("beginIndex is out of range of the child list");if(e>this._children.length)throw new a("endIndex is out of range of the child list");for(var i=t;i<e;i++)this.removeChild(this._children[i])};e.prototype.setChildIndex=function(t,e){};e.prototype.swapChildren=function(t,e){};e.prototype.swapChildrenAt=function(t,e){};e.prototype.pInvalidateSceneTransform=function(){t.prototype.pInvalidateSceneTransform.call(this);var e=this._children.length;for(var i=0;i<e;++i)this._children[i].pInvalidateSceneTransform()};e.prototype._pUpdateImplicitMouseEnabled=function(e){t.prototype._pUpdateImplicitMouseEnabled.call(this,e);var i=this._children.length;for(var r=0;r<i;++r)this._children[r]._pUpdateImplicitMouseEnabled(this._mouseChildren)};e.prototype._pUpdateImplicitVisibility=function(e){t.prototype._pUpdateImplicitVisibility.call(this,e);var i=this._children.length;for(var r=0;r<i;++r)this._children[r]._pUpdateImplicitVisibility(this._pImplicitVisibility)};e.prototype._pUpdateImplicitPartition=function(e,i){t.prototype._pUpdateImplicitPartition.call(this,e,i);var r=this._children.length;for(var s=0;s<r;++s)this._children[s]._pUpdateImplicitPartition(this._pImplicitPartition,i)};e.prototype.removeChildInternal=function(t){this._children.splice(this.getChildIndex(t),1);return t};return e}(p);e.exports=l},{"awayjs-core/lib/errors/ArgumentError":undefined,"awayjs-core/lib/errors/Error":undefined,"awayjs-core/lib/errors/RangeError":undefined,"awayjs-core/lib/library/AssetType":undefined,"awayjs-display/lib/base/DisplayObject":"awayjs-display/lib/base/DisplayObject"}],"awayjs-display/lib/containers/Loader":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/library/AssetLibraryBundle");var n=t("awayjs-core/lib/library/AssetLoader");var o=t("awayjs-core/lib/events/AssetEvent");var a=t("awayjs-core/lib/events/IOErrorEvent");var p=t("awayjs-core/lib/events/LoaderEvent");var l=t("awayjs-core/lib/events/ParserEvent");var h=t("awayjs-display/lib/containers/DisplayObjectContainer");var u=function(t){r(e,t);function e(e,i){var r=this;if(e===void 0){e=true}if(i===void 0){i=null}t.call(this);this._loadingSessions=new Array;
this._useAssetLib=e;this._assetLibId=i;this._onResourceCompleteDelegate=function(t){return r.onResourceComplete(t)};this._onAssetCompleteDelegate=function(t){return r.onAssetComplete(t)}}Object.defineProperty(e.prototype,"content",{get:function(){return this._content},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"contentLoaderInfo",{get:function(){return this._contentLoaderInfo},enumerable:true,configurable:true});e.prototype.close=function(){if(this._useAssetLib){var t;t=s.getInstance(this._assetLibId);t.stopAllLoadingSessions();this._loadingSessions=null;return}var e;var i=this._loadingSessions.length;for(e=0;e<i;e++){this.removeListeners(this._loadingSessions[e]);this._loadingSessions[e].stop();this._loadingSessions[e]=null}this._loadingSessions=null};e.prototype.load=function(t,e,i,r){if(e===void 0){e=null}if(i===void 0){i=null}if(r===void 0){r=null}var a;if(this._useAssetLib){var l;l=s.getInstance(this._assetLibId);a=l.load(t,e,i,r)}else{var h=new n;this._loadingSessions.push(h);a=h.load(t,e,i,r)}a.addEventListener(p.RESOURCE_COMPLETE,this._onResourceCompleteDelegate);a.addEventListener(o.ASSET_COMPLETE,this._onAssetCompleteDelegate);a._iLoader._iAddErrorHandler(this.onLoadError);a._iLoader._iAddParseErrorHandler(this.onParseError);return a};e.prototype.loadData=function(t,e,i,r){if(e===void 0){e=null}if(i===void 0){i=null}if(r===void 0){r=null}var a;if(this._useAssetLib){var l;l=s.getInstance(this._assetLibId);a=l.loadData(t,e,i,r)}else{var h=new n;this._loadingSessions.push(h);a=h.loadData(t,"",e,i,r)}a.addEventListener(p.RESOURCE_COMPLETE,this._onResourceCompleteDelegate);a.addEventListener(o.ASSET_COMPLETE,this._onAssetCompleteDelegate);a._iLoader._iAddErrorHandler(this.onLoadError);a._iLoader._iAddParseErrorHandler(this.onParseError);return a};e.prototype.unload=function(){};e.enableParser=function(t){n.enableParser(t)};e.enableParsers=function(t){n.enableParsers(t)};e.prototype.removeListeners=function(t){t.removeEventListener(p.RESOURCE_COMPLETE,this._onResourceCompleteDelegate);t.removeEventListener(o.ASSET_COMPLETE,this._onAssetCompleteDelegate)};e.prototype.onAssetComplete=function(t){this.dispatchEvent(t)};e.prototype.onLoadError=function(t){if(this.hasEventListener(a.IO_ERROR)){this.dispatchEvent(t);return true}else{return false}};e.prototype.onParseError=function(t){if(this.hasEventListener(l.PARSE_ERROR)){this.dispatchEvent(t);return true}else{return false}};e.prototype.onResourceComplete=function(t){this._content=t.content;if(this._content)this.addChild(this._content);this.dispatchEvent(t)};return e}(h);e.exports=u},{"awayjs-core/lib/events/AssetEvent":undefined,"awayjs-core/lib/events/IOErrorEvent":undefined,"awayjs-core/lib/events/LoaderEvent":undefined,"awayjs-core/lib/events/ParserEvent":undefined,"awayjs-core/lib/library/AssetLibraryBundle":undefined,"awayjs-core/lib/library/AssetLoader":undefined,"awayjs-display/lib/containers/DisplayObjectContainer":"awayjs-display/lib/containers/DisplayObjectContainer"}],"awayjs-display/lib/containers/Scene":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/events/EventDispatcher");var n=t("awayjs-display/lib/containers/DisplayObjectContainer");var o=t("awayjs-display/lib/events/SceneEvent");var a=t("awayjs-display/lib/partition/NodeBase");var p=t("awayjs-display/lib/partition/Partition");var l=function(t){r(e,t);function e(){t.call(this);this._expandedPartitions=new Array;this._partitions=new Array;this._iCollectionMark=0;this._partition=new p(new a);this._iSceneGraphRoot=new n;this._iSceneGraphRoot._iSetScene(this);this._iSceneGraphRoot._iIsRoot=true;this._iSceneGraphRoot.partition=this._partition}e.prototype.traversePartitions=function(t){var e=0;var i=this._partitions.length;t.scene=this;this._iCollectionMark++;while(e<i)this._partitions[e++].traverse(t)};Object.defineProperty(e.prototype,"partition",{get:function(){return this._iSceneGraphRoot.partition},set:function(t){this._iSceneGraphRoot.partition=t;this.dispatchEvent(new o(o.PARTITION_CHANGED,this._iSceneGraphRoot))},enumerable:true,configurable:true});e.prototype.contains=function(t){return this._iSceneGraphRoot.contains(t)};e.prototype.addChild=function(t){return this._iSceneGraphRoot.addChild(t)};e.prototype.removeChild=function(t){this._iSceneGraphRoot.removeChild(t)};e.prototype.removeChildAt=function(t){this._iSceneGraphRoot.removeChildAt(t)};e.prototype.getChildAt=function(t){return this._iSceneGraphRoot.getChildAt(t)};Object.defineProperty(e.prototype,"numChildren",{get:function(){return this._iSceneGraphRoot.numChildren},enumerable:true,configurable:true});e.prototype._iRegisterPartition=function(t){this._expandedPartitions.push(t);if(this._partitions.indexOf(t)==-1)this._partitions.push(t)};e.prototype._iUnregisterPartition=function(t){this._expandedPartitions.splice(this._expandedPartitions.indexOf(t),1);if(this._expandedPartitions.indexOf(t)==-1)this._partitions.splice(this._partitions.indexOf(t),1)};return e}(s);e.exports=l},{"awayjs-core/lib/events/EventDispatcher":undefined,"awayjs-display/lib/containers/DisplayObjectContainer":"awayjs-display/lib/containers/DisplayObjectContainer","awayjs-display/lib/events/SceneEvent":"awayjs-display/lib/events/SceneEvent","awayjs-display/lib/partition/NodeBase":"awayjs-display/lib/partition/NodeBase","awayjs-display/lib/partition/Partition":"awayjs-display/lib/partition/Partition"}],"awayjs-display/lib/containers/View":[function(t,e,i){var r=t("awayjs-core/lib/utils/getTimer");var s=t("awayjs-display/lib/containers/Scene");var n=t("awayjs-display/lib/pick/RaycastPicker");var o=t("awayjs-display/lib/entities/Camera");var a=t("awayjs-display/lib/events/CameraEvent");var p=t("awayjs-display/lib/events/SceneEvent");var l=t("awayjs-display/lib/events/RendererEvent");var h=t("awayjs-display/lib/managers/MouseManager");var u=function(){function t(t,e,i){var r=this;if(e===void 0){e=null}if(i===void 0){i=null}this._width=0;this._height=0;this._time=0;this._deltaTime=0;this._backgroundColor=0;this._backgroundAlpha=1;this._viewportDirty=true;this._scissorDirty=true;this._mousePicker=new n;this._onScenePartitionChangedDelegate=function(t){return r.onScenePartitionChanged(t)};this._onProjectionChangedDelegate=function(t){return r.onProjectionChanged(t)};this._onViewportUpdatedDelegate=function(t){return r.onViewportUpdated(t)};this._onScissorUpdatedDelegate=function(t){return r.onScissorUpdated(t)};this.scene=e||new s;this.camera=i||new o;this.renderer=t;document.body.style.margin="0px";this._htmlElement=document.createElement("div");this._htmlElement.style.position="absolute";document.body.appendChild(this._htmlElement);this._mouseManager=h.getInstance();this._mouseManager.registerView(this)}t.prototype.onScenePartitionChanged=function(t){if(this._pCamera)this._pScene.partition._iRegisterCamera(this._pCamera)};Object.defineProperty(t.prototype,"mouseX",{get:function(){return this._pMouseX},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mouseY",{get:function(){return this._pMouseY},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"htmlElement",{get:function(){return this._htmlElement},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"renderer",{get:function(){return this._pRenderer},set:function(t){if(this._pRenderer==t)return;if(this._pRenderer){this._pRenderer.dispose();this._pRenderer.removeEventListener(l.VIEWPORT_UPDATED,this._onViewportUpdatedDelegate);this._pRenderer.removeEventListener(l.SCISSOR_UPDATED,this._onScissorUpdatedDelegate)}this._pRenderer=t;this._pRenderer.addEventListener(l.VIEWPORT_UPDATED,this._onViewportUpdatedDelegate);this._pRenderer.addEventListener(l.SCISSOR_UPDATED,this._onScissorUpdatedDelegate);this._pEntityCollector=this._pRenderer._iCreateEntityCollector();if(this._pCamera)this._pEntityCollector.camera=this._pCamera;this._pRenderer._iBackgroundR=(this._backgroundColor>>16&255)/255;this._pRenderer._iBackgroundG=(this._backgroundColor>>8&255)/255;this._pRenderer._iBackgroundB=(this._backgroundColor&255)/255;this._pRenderer._iBackgroundAlpha=this._backgroundAlpha;this._pRenderer.width=this._width;this._pRenderer.height=this._height;this._pRenderer.shareContext=this._shareContext},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"shareContext",{get:function(){return this._shareContext},set:function(t){if(this._shareContext==t)return;this._shareContext=t;if(this._pRenderer)this._pRenderer.shareContext=this._shareContext},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){if(this._backgroundColor==t)return;this._backgroundColor=t;this._pRenderer._iBackgroundR=(t>>16&255)/255;this._pRenderer._iBackgroundG=(t>>8&255)/255;this._pRenderer._iBackgroundB=(t&255)/255},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundAlpha},set:function(t){if(t>1)t=1;else if(t<0)t=0;if(this._backgroundAlpha==t)return;this._pRenderer._iBackgroundAlpha=this._backgroundAlpha=t},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"camera",{get:function(){return this._pCamera},set:function(t){if(this._pCamera==t)return;if(this._pCamera)this._pCamera.removeEventListener(a.PROJECTION_CHANGED,this._onProjectionChangedDelegate);this._pCamera=t;if(this._pEntityCollector)this._pEntityCollector.camera=this._pCamera;if(this._pScene)this._pScene.partition._iRegisterCamera(this._pCamera);this._pCamera.addEventListener(a.PROJECTION_CHANGED,this._onProjectionChangedDelegate);this._scissorDirty=true;this._viewportDirty=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"scene",{get:function(){return this._pScene},set:function(t){if(this._pScene==t)return;if(this._pScene)this._pScene.removeEventListener(p.PARTITION_CHANGED,this._onScenePartitionChangedDelegate);this._pScene=t;this._pScene.addEventListener(p.PARTITION_CHANGED,this._onScenePartitionChangedDelegate);if(this._pCamera)this._pScene.partition._iRegisterCamera(this._pCamera)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"deltaTime",{get:function(){return this._deltaTime},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){if(this._width==t)return;this._width=t;this._aspectRatio=this._width/this._height;this._pCamera.projection._iAspectRatio=this._aspectRatio;this._pRenderer.width=t;this._htmlElement.style.width=t+"px"},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){if(this._height==t)return;this._height=t;this._aspectRatio=this._width/this._height;this._pCamera.projection._iAspectRatio=this._aspectRatio;this._pRenderer.height=t;this._htmlElement.style.height=t+"px"},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mousePicker",{get:function(){return this._mousePicker},set:function(t){if(this._mousePicker==t)return;if(t==null)this._mousePicker=new n;else this._mousePicker=t},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"x",{get:function(){return this._pRenderer.x},set:function(t){if(this._pRenderer.x==t)return;this._pRenderer.x==t;this._htmlElement.style.left=t+"px"},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"y",{get:function(){return this._pRenderer.y},set:function(t){if(this._pRenderer.y==t)return;this._pRenderer.y==t;this._htmlElement.style.top=t+"px"},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"visible",{get:function(){return this._htmlElement.style.visibility=="visible"},set:function(t){this._htmlElement.style.visibility=t?"visible":"hidden"},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"renderedFacesCount",{get:function(){return 0},enumerable:true,configurable:true});t.prototype.render=function(){this.pUpdateTime();this._pCamera.projection._iAspectRatio=this._aspectRatio;if(this._scissorDirty){this._scissorDirty=false;this._pCamera.projection._iUpdateScissorRect(this._pRenderer.scissorRect.x,this._pRenderer.scissorRect.y,this._pRenderer.scissorRect.width,this._pRenderer.scissorRect.height)}if(this._viewportDirty){this._viewportDirty=false;this._pCamera.projection._iUpdateViewport(this._pRenderer.viewPort.x,this._pRenderer.viewPort.y,this._pRenderer.viewPort.width,this._pRenderer.viewPort.height)}if(!this._shareContext){if(this.forceMouseMove&&this._htmlElement==this._mouseManager._iActiveDiv&&!this._mouseManager._iUpdateDirty)this._mouseManager._iCollidingObject=this.mousePicker.getViewCollision(this._pMouseX,this._pMouseY,this);this._mouseManager.fireMouseEvents(this.forceMouseMove)}this._pEntityCollector.clear();this._pScene.traversePartitions(this._pEntityCollector);this._pRenderer.render(this._pEntityCollector)};t.prototype.pUpdateTime=function(){var t=r();if(this._time==0)this._time=t;this._deltaTime=t-this._time;this._time=t};t.prototype.dispose=function(){this._pRenderer.dispose();this._mouseManager.unregisterView(this);this._mouseManager=null;this._pRenderer=null;this._pEntityCollector=null};Object.defineProperty(t.prototype,"iEntityCollector",{get:function(){return this._pEntityCollector},enumerable:true,configurable:true});t.prototype.onProjectionChanged=function(t){this._scissorDirty=true;this._viewportDirty=true};t.prototype.onViewportUpdated=function(t){this._viewportDirty=true};t.prototype.onScissorUpdated=function(t){this._scissorDirty=true};t.prototype.project=function(t){var e=this._pCamera.project(t);e.x=e.x*this._pRenderer.viewPort.width/2+this._width*this._pCamera.projection.originX;e.y=e.y*this._pRenderer.viewPort.height/2+this._height*this._pCamera.projection.originY;return e};t.prototype.unproject=function(t,e,i){return this._pCamera.unproject(2*(t-this._width*this._pCamera.projection.originX)/this._pRenderer.viewPort.width,2*(e-this._height*this._pCamera.projection.originY)/this._pRenderer.viewPort.height,i)};t.prototype.getRay=function(t,e,i){return this._pCamera.getRay((t*2-this._width)/this._width,(e*2-this._height)/this._height,i)};t.prototype.updateCollider=function(){if(!this._shareContext){if(this._htmlElement==this._mouseManager._iActiveDiv)this._mouseManager._iCollidingObject=this.mousePicker.getViewCollision(this._pMouseX,this._pMouseY,this)}else{var t=this.mousePicker.getViewCollision(this._pMouseX,this._pMouseY,this);if(this.layeredView||this._mouseManager._iCollidingObject==null||t.rayEntryDistance<this._mouseManager._iCollidingObject.rayEntryDistance)this._mouseManager._iCollidingObject=t}};return t}();e.exports=u},{"awayjs-core/lib/utils/getTimer":undefined,"awayjs-display/lib/containers/Scene":"awayjs-display/lib/containers/Scene","awayjs-display/lib/entities/Camera":"awayjs-display/lib/entities/Camera","awayjs-display/lib/events/CameraEvent":"awayjs-display/lib/events/CameraEvent","awayjs-display/lib/events/RendererEvent":"awayjs-display/lib/events/RendererEvent","awayjs-display/lib/events/SceneEvent":"awayjs-display/lib/events/SceneEvent","awayjs-display/lib/managers/MouseManager":"awayjs-display/lib/managers/MouseManager","awayjs-display/lib/pick/RaycastPicker":"awayjs-display/lib/pick/RaycastPicker"}],"awayjs-display/lib/controllers/ControllerBase":[function(t,e,i){var r=t("awayjs-core/lib/errors/AbstractMethodError");var s=function(){function t(t){if(t===void 0){t=null}this._pAutoUpdate=true;this.targetObject=t}t.prototype.pNotifyUpdate=function(){if(this._pTargetObject&&this._pAutoUpdate){this._pTargetObject.invalidatePartition()}};Object.defineProperty(t.prototype,"targetObject",{get:function(){return this._pTargetObject},set:function(t){if(this._pTargetObject==t){return}if(this._pTargetObject&&this._pAutoUpdate){this._pTargetObject._iController=null}this._pTargetObject=t;if(this._pTargetObject&&this._pAutoUpdate){this._pTargetObject._iController=this}this.pNotifyUpdate()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._pAutoUpdate},set:function(t){if(this._pAutoUpdate==t){return}this._pAutoUpdate=t;if(this._pTargetObject){if(this._pTargetObject){this._pTargetObject._iController=this}else{this._pTargetObject._iController=null}}},enumerable:true,configurable:true});t.prototype.update=function(t){if(t===void 0){t=true}throw new r};return t}();e.exports=s},{"awayjs-core/lib/errors/AbstractMethodError":undefined}],"awayjs-display/lib/controllers/FirstPersonController":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/geom/MathConsts");var n=t("awayjs-display/lib/controllers/ControllerBase");var o=function(t){r(e,t);function e(e,i,r,s,n,o,a){if(e===void 0){e=null}if(i===void 0){i=0}if(r===void 0){r=90}if(s===void 0){s=-90}if(n===void 0){n=90}if(o===void 0){o=8}if(a===void 0){a=false}t.call(this,e);this._iCurrentPanAngle=0;this._iCurrentTiltAngle=90;this._panAngle=0;this._tiltAngle=90;this._minTiltAngle=-90;this._maxTiltAngle=90;this._steps=8;this._walkIncrement=0;this._strafeIncrement=0;this._wrapPanAngle=false;this.fly=false;this.panAngle=i;this.tiltAngle=r;this.minTiltAngle=s;this.maxTiltAngle=n;this.steps=o;this.wrapPanAngle=a;this._iCurrentPanAngle=this._panAngle;this._iCurrentTiltAngle=this._tiltAngle}Object.defineProperty(e.prototype,"steps",{get:function(){return this._steps},set:function(t){t=t<1?1:t;if(this._steps==t)return;this._steps=t;this.pNotifyUpdate()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"panAngle",{get:function(){return this._panAngle},set:function(t){if(this._panAngle==t)return;this._panAngle=t;this.pNotifyUpdate()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"tiltAngle",{get:function(){return this._tiltAngle},set:function(t){t=Math.max(this._minTiltAngle,Math.min(this._maxTiltAngle,t));if(this._tiltAngle==t)return;this._tiltAngle=t;this.pNotifyUpdate()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"minTiltAngle",{get:function(){return this._minTiltAngle},set:function(t){if(this._minTiltAngle==t)return;this._minTiltAngle=t;this.tiltAngle=Math.max(this._minTiltAngle,Math.min(this._maxTiltAngle,this._tiltAngle))},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"maxTiltAngle",{get:function(){return this._maxTiltAngle},set:function(t){if(this._maxTiltAngle==t)return;this._maxTiltAngle=t;this.tiltAngle=Math.max(this._minTiltAngle,Math.min(this._maxTiltAngle,this._tiltAngle))},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"wrapPanAngle",{get:function(){return this._wrapPanAngle},set:function(t){if(this._wrapPanAngle==t)return;this._wrapPanAngle=t;this.pNotifyUpdate()},enumerable:true,configurable:true});e.prototype.update=function(t){if(t===void 0){t=true}if(this._tiltAngle!=this._iCurrentTiltAngle||this._panAngle!=this._iCurrentPanAngle){this.pNotifyUpdate();if(this._wrapPanAngle){if(this._panAngle<0){this._iCurrentPanAngle+=this._panAngle%360+360-this._panAngle;this._panAngle=this._panAngle%360+360}else{this._iCurrentPanAngle+=this._panAngle%360-this._panAngle;this._panAngle=this._panAngle%360}while(this._panAngle-this._iCurrentPanAngle<-180)this._iCurrentPanAngle-=360;while(this._panAngle-this._iCurrentPanAngle>180)this._iCurrentPanAngle+=360}if(t){this._iCurrentTiltAngle+=(this._tiltAngle-this._iCurrentTiltAngle)/(this.steps+1);this._iCurrentPanAngle+=(this._panAngle-this._iCurrentPanAngle)/(this.steps+1)}else{this._iCurrentTiltAngle=this._tiltAngle;this._iCurrentPanAngle=this._panAngle}if(Math.abs(this.tiltAngle-this._iCurrentTiltAngle)<.01&&Math.abs(this._panAngle-this._iCurrentPanAngle)<.01){this._iCurrentTiltAngle=this._tiltAngle;this._iCurrentPanAngle=this._panAngle}}this.targetObject.rotationX=this._iCurrentTiltAngle;this.targetObject.rotationY=this._iCurrentPanAngle;if(this._walkIncrement){if(this.fly){this.targetObject.transform.moveForward(this._walkIncrement)}else{this.targetObject.x+=this._walkIncrement*Math.sin(this._panAngle*s.DEGREES_TO_RADIANS);this.targetObject.z+=this._walkIncrement*Math.cos(this._panAngle*s.DEGREES_TO_RADIANS)}this._walkIncrement=0}if(this._strafeIncrement){this.targetObject.transform.moveRight(this._strafeIncrement);this._strafeIncrement=0}};e.prototype.incrementWalk=function(t){if(t==0)return;this._walkIncrement+=t;this.pNotifyUpdate()};e.prototype.incrementStrafe=function(t){if(t==0)return;this._strafeIncrement+=t;this.pNotifyUpdate()};return e}(n);e.exports=o},{"awayjs-core/lib/geom/MathConsts":undefined,"awayjs-display/lib/controllers/ControllerBase":"awayjs-display/lib/controllers/ControllerBase"}],"awayjs-display/lib/controllers/FollowController":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/controllers/HoverController");var n=function(t){r(e,t);function e(e,i,r,s){if(e===void 0){e=null}if(i===void 0){i=null}if(r===void 0){r=45}if(s===void 0){s=700}t.call(this,e,i,0,r,s)}e.prototype.update=function(e){if(e===void 0){e=true}e=e;if(!this.lookAtObject)return;this.panAngle=this._pLookAtObject.rotationY-180;t.prototype.update.call(this)};return e}(s);e.exports=n},{"awayjs-display/lib/controllers/HoverController":"awayjs-display/lib/controllers/HoverController"}],"awayjs-display/lib/controllers/HoverController":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/geom/MathConsts");var n=t("awayjs-core/lib/geom/Vector3D");var o=t("awayjs-display/lib/controllers/LookAtController");var a=function(t){r(e,t);function e(e,i,r,s,o,a,p,l,h,u,c,f){if(e===void 0){e=null}if(i===void 0){i=null}if(r===void 0){r=0}if(s===void 0){s=90}if(o===void 0){o=1e3}if(a===void 0){a=-90}if(p===void 0){p=90}if(l===void 0){l=null}if(h===void 0){h=null}if(u===void 0){u=8}if(c===void 0){c=2}if(f===void 0){f=false}t.call(this,e,i);this._iCurrentPanAngle=0;this._iCurrentTiltAngle=90;this._panAngle=0;this._tiltAngle=90;this._distance=1e3;this._minPanAngle=-Infinity;this._maxPanAngle=Infinity;this._minTiltAngle=-90;this._maxTiltAngle=90;this._steps=8;this._yFactor=2;this._wrapPanAngle=false;this._upAxis=new n;this.distance=o;this.panAngle=r;this.tiltAngle=s;this.minPanAngle=l!=null?l:-Infinity;this.maxPanAngle=h!=null?h:Infinity;this.minTiltAngle=a;this.maxTiltAngle=p;this.steps=u;this.yFactor=c;this.wrapPanAngle=f;this._iCurrentPanAngle=this._panAngle;this._iCurrentTiltAngle=this._tiltAngle}Object.defineProperty(e.prototype,"steps",{get:function(){return this._steps},set:function(t){t=t<1?1:t;if(this._steps==t)return;this._steps=t;this.pNotifyUpdate()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"panAngle",{get:function(){return this._panAngle},set:function(t){t=Math.max(this._minPanAngle,Math.min(this._maxPanAngle,t));if(this._panAngle==t)return;this._panAngle=t;this.pNotifyUpdate()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"tiltAngle",{get:function(){return this._tiltAngle},set:function(t){t=Math.max(this._minTiltAngle,Math.min(this._maxTiltAngle,t));if(this._tiltAngle==t)return;this._tiltAngle=t;this.pNotifyUpdate()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},set:function(t){if(this._distance==t)return;this._distance=t;this.pNotifyUpdate()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"minPanAngle",{get:function(){return this._minPanAngle},set:function(t){if(this._minPanAngle==t)return;this._minPanAngle=t;this.panAngle=Math.max(this._minPanAngle,Math.min(this._maxPanAngle,this._panAngle))},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"maxPanAngle",{get:function(){return this._maxPanAngle},set:function(t){if(this._maxPanAngle==t)return;this._maxPanAngle=t;this.panAngle=Math.max(this._minPanAngle,Math.min(this._maxPanAngle,this._panAngle))},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"minTiltAngle",{get:function(){return this._minTiltAngle},set:function(t){if(this._minTiltAngle==t)return;this._minTiltAngle=t;this.tiltAngle=Math.max(this._minTiltAngle,Math.min(this._maxTiltAngle,this._tiltAngle))},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"maxTiltAngle",{get:function(){return this._maxTiltAngle},set:function(t){if(this._maxTiltAngle==t)return;this._maxTiltAngle=t;this.tiltAngle=Math.max(this._minTiltAngle,Math.min(this._maxTiltAngle,this._tiltAngle))},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"yFactor",{get:function(){return this._yFactor},set:function(t){if(this._yFactor==t)return;this._yFactor=t;this.pNotifyUpdate()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"wrapPanAngle",{get:function(){return this._wrapPanAngle},set:function(t){if(this._wrapPanAngle==t)return;this._wrapPanAngle=t;this.pNotifyUpdate()},enumerable:true,configurable:true});e.prototype.update=function(t){if(t===void 0){t=true}if(this._tiltAngle!=this._iCurrentTiltAngle||this._panAngle!=this._iCurrentPanAngle){this.pNotifyUpdate();if(this._wrapPanAngle){if(this._panAngle<0){this._iCurrentPanAngle+=this._panAngle%360+360-this._panAngle;this._panAngle=this._panAngle%360+360}else{this._iCurrentPanAngle+=this._panAngle%360-this._panAngle;this._panAngle=this._panAngle%360}while(this._panAngle-this._iCurrentPanAngle<-180)this._iCurrentPanAngle-=360;while(this._panAngle-this._iCurrentPanAngle>180)this._iCurrentPanAngle+=360}if(t){this._iCurrentTiltAngle+=(this._tiltAngle-this._iCurrentTiltAngle)/(this.steps+1);this._iCurrentPanAngle+=(this._panAngle-this._iCurrentPanAngle)/(this.steps+1)}else{this._iCurrentPanAngle=this._panAngle;this._iCurrentTiltAngle=this._tiltAngle}if(Math.abs(this.tiltAngle-this._iCurrentTiltAngle)<.01&&Math.abs(this._panAngle-this._iCurrentPanAngle)<.01){this._iCurrentTiltAngle=this._tiltAngle;this._iCurrentPanAngle=this._panAngle}}var e=this.lookAtObject?this.lookAtObject.transform.position:this.lookAtPosition?this.lookAtPosition:this._pOrigin;this.targetObject.x=e.x+this.distance*Math.sin(this._iCurrentPanAngle*s.DEGREES_TO_RADIANS)*Math.cos(this._iCurrentTiltAngle*s.DEGREES_TO_RADIANS);this.targetObject.y=e.y+this.distance*Math.sin(this._iCurrentTiltAngle*s.DEGREES_TO_RADIANS)*this.yFactor;this.targetObject.z=e.z+this.distance*Math.cos(this._iCurrentPanAngle*s.DEGREES_TO_RADIANS)*Math.cos(this._iCurrentTiltAngle*s.DEGREES_TO_RADIANS);this._upAxis.x=-Math.sin(this._iCurrentPanAngle*s.DEGREES_TO_RADIANS)*Math.sin(this._iCurrentTiltAngle*s.DEGREES_TO_RADIANS);this._upAxis.y=Math.cos(this._iCurrentTiltAngle*s.DEGREES_TO_RADIANS);this._upAxis.z=-Math.cos(this._iCurrentPanAngle*s.DEGREES_TO_RADIANS)*Math.sin(this._iCurrentTiltAngle*s.DEGREES_TO_RADIANS);if(this._pTargetObject){if(this._pLookAtPosition)this._pTargetObject.lookAt(this._pLookAtPosition,this._upAxis);else if(this._pLookAtObject)this._pTargetObject.lookAt(this._pLookAtObject.scene?this._pLookAtObject.scenePosition:this._pLookAtObject.transform.position,this._upAxis)}};return e}(o);e.exports=a},{"awayjs-core/lib/geom/MathConsts":undefined,"awayjs-core/lib/geom/Vector3D":undefined,"awayjs-display/lib/controllers/LookAtController":"awayjs-display/lib/controllers/LookAtController"}],"awayjs-display/lib/controllers/LookAtController":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/geom/Vector3D");var n=t("awayjs-display/lib/controllers/ControllerBase");var o=t("awayjs-display/lib/events/DisplayObjectEvent");var a=function(t){r(e,t);function e(e,i){var r=this;if(e===void 0){e=null}if(i===void 0){i=null}t.call(this,e);this._pOrigin=new s(0,0,0);this._onLookAtObjectChangedDelegate=function(t){return r.onLookAtObjectChanged(t)};if(i)this.lookAtObject=i;else this.lookAtPosition=new s}Object.defineProperty(e.prototype,"lookAtPosition",{get:function(){return this._pLookAtPosition},set:function(t){if(this._pLookAtObject){this._pLookAtObject.removeEventListener(o.SCENETRANSFORM_CHANGED,this._onLookAtObjectChangedDelegate);this._pLookAtObject=null}this._pLookAtPosition=t;this.pNotifyUpdate()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"lookAtObject",{get:function(){return this._pLookAtObject},set:function(t){if(this._pLookAtPosition)this._pLookAtPosition=null;if(this._pLookAtObject==t)return;if(this._pLookAtObject)this._pLookAtObject.removeEventListener(o.SCENETRANSFORM_CHANGED,this._onLookAtObjectChangedDelegate);this._pLookAtObject=t;if(this._pLookAtObject)this._pLookAtObject.addEventListener(o.SCENETRANSFORM_CHANGED,this._onLookAtObjectChangedDelegate);this.pNotifyUpdate()},enumerable:true,configurable:true});e.prototype.update=function(t){if(t===void 0){t=true}if(this._pTargetObject){if(this._pLookAtPosition)this._pTargetObject.lookAt(this._pLookAtPosition);else if(this._pLookAtObject)this._pTargetObject.lookAt(this._pLookAtObject.scene?this._pLookAtObject.scenePosition:this._pLookAtObject.transform.position)}};e.prototype.onLookAtObjectChanged=function(t){this.pNotifyUpdate()};return e}(n);e.exports=a},{"awayjs-core/lib/geom/Vector3D":undefined,"awayjs-display/lib/controllers/ControllerBase":"awayjs-display/lib/controllers/ControllerBase","awayjs-display/lib/events/DisplayObjectEvent":"awayjs-display/lib/events/DisplayObjectEvent"}],"awayjs-display/lib/controllers/SpringController":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/geom/Vector3D");var n=t("awayjs-display/lib/controllers/LookAtController");var o=function(t){r(e,t);function e(e,i,r,n,o){if(e===void 0){e=null}if(i===void 0){i=null}if(r===void 0){r=1}if(n===void 0){n=40}if(o===void 0){o=4}t.call(this,e,i);this.positionOffset=new s(0,500,-1e3);this.stiffness=r;this.damping=o;this.mass=n;this._velocity=new s;this._dv=new s;this._stretch=new s;this._force=new s;this._acceleration=new s;this._desiredPosition=new s}e.prototype.update=function(e){if(e===void 0){e=true}var i;if(!this._pLookAtObject||!this._pTargetObject)return;i=this._pLookAtObject.transform.matrix3D.deltaTransformVector(this.positionOffset);this._desiredPosition.x=this._pLookAtObject.x+i.x;this._desiredPosition.y=this._pLookAtObject.y+i.y;this._desiredPosition.z=this._pLookAtObject.z+i.z;this._stretch=this._pTargetObject.transform.position.add(this._desiredPosition);this._stretch.scaleBy(-this.stiffness);this._dv.copyFrom(this._velocity);this._dv.scaleBy(this.damping);this._force.x=this._stretch.x-this._dv.x;this._force.y=this._stretch.y-this._dv.y;this._force.z=this._stretch.z-this._dv.z;this._acceleration.copyFrom(this._force);this._acceleration.scaleBy(1/this.mass);this._velocity.incrementBy(this._acceleration);this._pTargetObject.transform.position=this._pTargetObject.transform.position.add(this._velocity);t.prototype.update.call(this)};return e}(n);e.exports=o},{"awayjs-core/lib/geom/Vector3D":undefined,"awayjs-display/lib/controllers/LookAtController":"awayjs-display/lib/controllers/LookAtController"}],"awayjs-display/lib/display/ContextMode":[function(t,e,i){var r=function(){function t(){}t.AUTO="auto";t.WEBGL="webgl";t.FLASH="flash";t.NATIVE="native";return t}();e.exports=r},{}],"awayjs-display/lib/display/IContext":[function(t,e,i){},{}],"awayjs-display/lib/entities/Billboard":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];
function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/library/AssetType");var n=t("awayjs-display/lib/base/DisplayObject");var o=t("awayjs-display/lib/bounds/BoundsType");var a=t("awayjs-display/lib/events/MaterialEvent");var p=function(t){r(e,t);function e(e,i,r){var s=this;if(i===void 0){i="auto"}if(r===void 0){r=false}t.call(this);this._pIsEntity=true;this.onSizeChangedDelegate=function(t){return s.onSizeChanged(t)};this.material=e;this._billboardWidth=e.width;this._billboardHeight=e.height;this._boundsType=o.AXIS_ALIGNED_BOX}Object.defineProperty(e.prototype,"animator",{get:function(){return this._animator},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"assetType",{get:function(){return s.BILLBOARD},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"billboardHeight",{get:function(){return this._billboardHeight},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"billboardWidth",{get:function(){return this._billboardWidth},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"material",{get:function(){return this._material},set:function(t){if(t==this._material)return;if(this._material){this._material.iRemoveOwner(this);this._material.removeEventListener(a.SIZE_CHANGED,this.onSizeChangedDelegate)}this._material=t;if(this._material){this._material.iAddOwner(this);this._material.addEventListener(a.SIZE_CHANGED,this.onSizeChangedDelegate)}},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"uvTransform",{get:function(){return this._uvTransform},set:function(t){this._uvTransform=t},enumerable:true,configurable:true});e.prototype._pUpdateBoxBounds=function(){t.prototype._pUpdateBoxBounds.call(this);this._pBoxBounds.width=this._billboardWidth;this._pBoxBounds.height=this._billboardHeight};e.prototype._iTestCollision=function(t,e){return this._pPickingCollider.testBillboardCollision(this,this._pPickingCollisionVO,t)};e.prototype.onSizeChanged=function(t){this._billboardWidth=this._material.width;this._billboardHeight=this._material.height;this._pInvalidateBounds();var e=this._pRenderables.length;for(var i=0;i<e;i++)this._pRenderables[i].invalidateGeometry()};e.prototype._iCollectRenderables=function(t){if(this._iSourcePrefab)this._iSourcePrefab._iValidate();this._iCollectRenderable(t)};e.prototype._iCollectRenderable=function(t){t.applyBillboard(this)};e.prototype._pRegisterEntity=function(t){t._iRegisterEntity(this)};e.prototype._pUnregisterEntity=function(t){t._iUnregisterEntity(this)};return e}(n);e.exports=p},{"awayjs-core/lib/library/AssetType":undefined,"awayjs-display/lib/base/DisplayObject":"awayjs-display/lib/base/DisplayObject","awayjs-display/lib/bounds/BoundsType":"awayjs-display/lib/bounds/BoundsType","awayjs-display/lib/events/MaterialEvent":"awayjs-display/lib/events/MaterialEvent"}],"awayjs-display/lib/entities/Camera":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/geom/Matrix3D");var n=t("awayjs-core/lib/geom/Plane3D");var o=t("awayjs-core/lib/library/AssetType");var a=t("awayjs-core/lib/events/ProjectionEvent");var p=t("awayjs-core/lib/projections/PerspectiveProjection");var l=t("awayjs-display/lib/bounds/BoundsType");var h=t("awayjs-display/lib/containers/DisplayObjectContainer");var u=t("awayjs-display/lib/events/CameraEvent");var c=function(t){r(e,t);function e(e){var i=this;if(e===void 0){e=null}t.call(this);this._viewProjection=new s;this._viewProjectionDirty=true;this._frustumPlanesDirty=true;this._pIsEntity=true;this._onProjectionMatrixChangedDelegate=function(t){return i.onProjectionMatrixChanged(t)};this._projection=e||new p;this._projection.addEventListener(a.MATRIX_CHANGED,this._onProjectionMatrixChangedDelegate);this._frustumPlanes=[];for(var r=0;r<6;++r)this._frustumPlanes[r]=new n;this.z=-1e3;this._boundsType=l.NULL}Object.defineProperty(e.prototype,"assetType",{get:function(){return o.CAMERA},enumerable:true,configurable:true});e.prototype.onProjectionMatrixChanged=function(t){this._viewProjectionDirty=true;this._frustumPlanesDirty=true;this.dispatchEvent(t)};Object.defineProperty(e.prototype,"frustumPlanes",{get:function(){if(this._frustumPlanesDirty)this.updateFrustum();return this._frustumPlanes},enumerable:true,configurable:true});e.prototype.updateFrustum=function(){var t,e,i;var r,s,n,o;var a,p,l,h;var u,c,f,_;var d,y,b,m;var g;var v=new Array(16);var w;this.viewProjection.copyRawDataTo(v);r=v[0];s=v[4];n=v[8];o=v[12];a=v[1];p=v[5];l=v[9];h=v[13];u=v[2];c=v[6];f=v[10];_=v[14];d=v[3];y=v[7];b=v[11];m=v[15];g=this._frustumPlanes[0];t=d+r;e=y+s;i=b+n;w=1/Math.sqrt(t*t+e*e+i*i);g.a=t*w;g.b=e*w;g.c=i*w;g.d=-(m+o)*w;g=this._frustumPlanes[1];t=d-r;e=y-s;i=b-n;w=1/Math.sqrt(t*t+e*e+i*i);g.a=t*w;g.b=e*w;g.c=i*w;g.d=(o-m)*w;g=this._frustumPlanes[2];t=d+a;e=y+p;i=b+l;w=1/Math.sqrt(t*t+e*e+i*i);g.a=t*w;g.b=e*w;g.c=i*w;g.d=-(m+h)*w;g=this._frustumPlanes[3];t=d-a;e=y-p;i=b-l;w=1/Math.sqrt(t*t+e*e+i*i);g.a=t*w;g.b=e*w;g.c=i*w;g.d=(h-m)*w;g=this._frustumPlanes[4];t=u;e=c;i=f;w=1/Math.sqrt(t*t+e*e+i*i);g.a=t*w;g.b=e*w;g.c=i*w;g.d=-_*w;g=this._frustumPlanes[5];t=d-u;e=y-c;i=b-f;w=1/Math.sqrt(t*t+e*e+i*i);g.a=t*w;g.b=e*w;g.c=i*w;g.d=(_-m)*w;this._frustumPlanesDirty=false};e.prototype.pInvalidateSceneTransform=function(){t.prototype.pInvalidateSceneTransform.call(this);this._viewProjectionDirty=true;this._frustumPlanesDirty=true};Object.defineProperty(e.prototype,"projection",{get:function(){return this._projection},set:function(t){if(this._projection==t)return;if(!t)throw new Error("Projection cannot be null!");this._projection.removeEventListener(a.MATRIX_CHANGED,this._onProjectionMatrixChangedDelegate);this._projection=t;this._projection.addEventListener(a.MATRIX_CHANGED,this._onProjectionMatrixChangedDelegate);this.dispatchEvent(new u(u.PROJECTION_CHANGED,this))},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"viewProjection",{get:function(){if(this._viewProjectionDirty){this._viewProjection.copyFrom(this.inverseSceneTransform);this._viewProjection.append(this._projection.matrix);this._viewProjectionDirty=false}return this._viewProjection},enumerable:true,configurable:true});e.prototype.getRay=function(t,e,i){return this.sceneTransform.deltaTransformVector(this._projection.unproject(t,e,i))};e.prototype.project=function(t){return this._projection.project(this.inverseSceneTransform.transformVector(t))};e.prototype.unproject=function(t,e,i){return this.sceneTransform.transformVector(this._projection.unproject(t,e,i))};e.prototype._iCollectRenderables=function(t){if(this._iSourcePrefab)this._iSourcePrefab._iValidate();this._iCollectRenderable(t)};e.prototype._iCollectRenderable=function(t){};e.prototype._pRegisterEntity=function(t){t._iRegisterCamera(this)};e.prototype._pUnregisterEntity=function(t){t._iUnregisterCamera(this)};return e}(h);e.exports=c},{"awayjs-core/lib/events/ProjectionEvent":undefined,"awayjs-core/lib/geom/Matrix3D":undefined,"awayjs-core/lib/geom/Plane3D":undefined,"awayjs-core/lib/library/AssetType":undefined,"awayjs-core/lib/projections/PerspectiveProjection":undefined,"awayjs-display/lib/bounds/BoundsType":"awayjs-display/lib/bounds/BoundsType","awayjs-display/lib/containers/DisplayObjectContainer":"awayjs-display/lib/containers/DisplayObjectContainer","awayjs-display/lib/events/CameraEvent":"awayjs-display/lib/events/CameraEvent"}],"awayjs-display/lib/entities/DirectionalLight":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/geom/Matrix3D");var n=t("awayjs-core/lib/geom/Vector3D");var o=t("awayjs-display/lib/base/LightBase");var a=t("awayjs-display/lib/bounds/BoundsType");var p=t("awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper");var l=function(t){r(e,t);function e(e,i,r){if(e===void 0){e=0}if(i===void 0){i=-1}if(r===void 0){r=1}t.call(this);this._pAabbPoints=new Array(24);this._pIsEntity=true;this.direction=new n(e,i,r);this._sceneDirection=new n;this._boundsType=a.NULL}Object.defineProperty(e.prototype,"sceneDirection",{get:function(){if(this._pSceneTransformDirty)this.pUpdateSceneTransform();return this._sceneDirection},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=t;if(!this._tmpLookAt)this._tmpLookAt=new n;this._tmpLookAt.x=this.x+this._direction.x;this._tmpLookAt.y=this.y+this._direction.y;this._tmpLookAt.z=this.z+this._direction.z;this.lookAt(this._tmpLookAt)},enumerable:true,configurable:true});e.prototype.pUpdateSceneTransform=function(){t.prototype.pUpdateSceneTransform.call(this);this.sceneTransform.copyColumnTo(2,this._sceneDirection);this._sceneDirection.normalize()};e.prototype.pCreateShadowMapper=function(){return new p};e.prototype.iGetObjectProjectionMatrix=function(t,e,i){if(i===void 0){i=null}var r=new Array;var n=new s;n.copyFrom(t.getRenderSceneTransform(e));n.append(this.inverseSceneTransform);if(!this._projAABBPoints)this._projAABBPoints=[];n.transformVectors(this._pAabbPoints,this._projAABBPoints);var o=Infinity,a=-Infinity;var p=Infinity,l=-Infinity;var h=Infinity,u=-Infinity;var c;for(var f=0;f<24;){c=this._projAABBPoints[f++];if(c<o)o=c;if(c>a)a=c;c=this._projAABBPoints[f++];if(c<p)p=c;if(c>l)l=c;c=this._projAABBPoints[f++];if(c<h)h=c;if(c>u)u=c}var _=1/(a-o);var d=1/(l-p);var y=1/(u-h);r[0]=2*_;r[5]=2*d;r[10]=y;r[12]=-(a+o)*_;r[13]=-(l+p)*d;r[14]=-h*y;r[1]=r[2]=r[3]=r[4]=r[6]=r[7]=r[8]=r[9]=r[11]=0;r[15]=1;if(!i)i=new s;i.copyRawDataFrom(r);i.prepend(n);return i};e.prototype._iCollectRenderables=function(t){};e.prototype._pRegisterEntity=function(t){t._iRegisterDirectionalLight(this)};e.prototype._pUnregisterEntity=function(t){t._iUnregisterDirectionalLight(this)};e.prototype._pUpdateBoxBounds=function(){t.prototype._pUpdateBoxBounds.call(this);var e=this._pBoxBounds.x;var i=this._pBoxBounds.y-this._pBoxBounds.height;var r=this._pBoxBounds.z;var s=this._pBoxBounds.x+this._pBoxBounds.width;var n=this._pBoxBounds.y;var o=this._pBoxBounds.z+this._pBoxBounds.depth;this._pAabbPoints[0]=e;this._pAabbPoints[1]=i;this._pAabbPoints[2]=r;this._pAabbPoints[3]=s;this._pAabbPoints[4]=i;this._pAabbPoints[5]=r;this._pAabbPoints[6]=e;this._pAabbPoints[7]=n;this._pAabbPoints[8]=r;this._pAabbPoints[9]=s;this._pAabbPoints[10]=n;this._pAabbPoints[11]=r;this._pAabbPoints[12]=e;this._pAabbPoints[13]=i;this._pAabbPoints[14]=o;this._pAabbPoints[15]=s;this._pAabbPoints[16]=i;this._pAabbPoints[17]=o;this._pAabbPoints[18]=e;this._pAabbPoints[19]=n;this._pAabbPoints[20]=o;this._pAabbPoints[21]=s;this._pAabbPoints[22]=n;this._pAabbPoints[23]=o};return e}(o);e.exports=l},{"awayjs-core/lib/geom/Matrix3D":undefined,"awayjs-core/lib/geom/Vector3D":undefined,"awayjs-display/lib/base/LightBase":"awayjs-display/lib/base/LightBase","awayjs-display/lib/bounds/BoundsType":"awayjs-display/lib/bounds/BoundsType","awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper":"awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper"}],"awayjs-display/lib/entities/IEntity":[function(t,e,i){},{}],"awayjs-display/lib/entities/LightProbe":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/errors/Error");var n=t("awayjs-display/lib/base/LightBase");var o=t("awayjs-display/lib/bounds/BoundsType");var a=function(t){r(e,t);function e(e,i){if(i===void 0){i=null}t.call(this);this._pIsEntity=true;this._diffuseMap=e;this._specularMap=i;this._boundsType=o.NULL}Object.defineProperty(e.prototype,"diffuseMap",{get:function(){return this._diffuseMap},set:function(t){this._diffuseMap=t},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"specularMap",{get:function(){return this._specularMap},set:function(t){this._specularMap=t},enumerable:true,configurable:true});e.prototype.iGetObjectProjectionMatrix=function(t,e,i){if(i===void 0){i=null}throw new s("Object projection matrices are not supported for LightProbe objects!")};e.prototype._iCollectRenderables=function(t){};e.prototype._pRegisterEntity=function(t){t._iRegisterLightProbe(this)};e.prototype._pUnregisterEntity=function(t){t._iUnregisterLightProbe(this)};return e}(n);e.exports=a},{"awayjs-core/lib/errors/Error":undefined,"awayjs-display/lib/base/LightBase":"awayjs-display/lib/base/LightBase","awayjs-display/lib/bounds/BoundsType":"awayjs-display/lib/bounds/BoundsType"}],"awayjs-display/lib/entities/LineSegment":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/library/AssetType");var n=t("awayjs-display/lib/base/DisplayObject");var o=t("awayjs-display/lib/bounds/BoundsType");var a=function(t){r(e,t);function e(e,i,r,s){if(s===void 0){s=1}t.call(this);this._pIsEntity=true;this.material=e;this._startPosition=i;this._endPosition=r;this._halfThickness=s*.5;this._boundsType=o.AXIS_ALIGNED_BOX}Object.defineProperty(e.prototype,"animator",{get:function(){return this._animator},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"assetType",{get:function(){return s.LINE_SEGMENT},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"startPostion",{get:function(){return this._startPosition},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"startPosition",{set:function(t){if(this._startPosition==t)return;this._startPosition=t;this.notifyRenderableUpdate()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"endPosition",{get:function(){return this._endPosition},set:function(t){if(this._endPosition==t)return;this._endPosition=t;this.notifyRenderableUpdate()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"material",{get:function(){return this._material},set:function(t){if(this.material)this.material.iRemoveOwner(this);this._material=t;if(this.material)this.material.iAddOwner(this)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"thickness",{get:function(){return this._halfThickness*2},set:function(t){if(this._halfThickness==t)return;this._halfThickness=t*.5;this.notifyRenderableUpdate()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"uvTransform",{get:function(){return this._uvTransform},set:function(t){this._uvTransform=t},enumerable:true,configurable:true});e.prototype.dispose=function(){this._startPosition=null;this._endPosition=null};e.prototype._pUpdateBoxBounds=function(){t.prototype._pUpdateBoxBounds.call(this);this._pBoxBounds.x=Math.min(this._startPosition.x,this._endPosition.x);this._pBoxBounds.y=Math.min(this._startPosition.y,this._endPosition.y);this._pBoxBounds.z=Math.min(this._startPosition.z,this._endPosition.z);this._pBoxBounds.width=Math.abs(this._startPosition.x-this._endPosition.x);this._pBoxBounds.height=Math.abs(this._startPosition.y-this._endPosition.y);this._pBoxBounds.depth=Math.abs(this._startPosition.z-this._endPosition.z)};e.prototype._pUpdateSphereBounds=function(){t.prototype._pUpdateSphereBounds.call(this);this._pUpdateBoxBounds();var e=(this._endPosition.x-this._startPosition.x)/2;var i=(this._endPosition.y-this._startPosition.y)/2;var r=(this._endPosition.z-this._startPosition.z)/2;this._pSphereBounds.x=this._startPosition.x+e;this._pSphereBounds.y=this._startPosition.y+i;this._pSphereBounds.z=this._startPosition.z+r;this._pSphereBounds.radius=Math.sqrt(e*e+i*i+r*r)};e.prototype.notifyRenderableUpdate=function(){var t=this._pRenderables.length;for(var e=0;e<t;e++)this._pRenderables[e].invalidateGeometry()};e.prototype._iCollectRenderables=function(t){if(this._iSourcePrefab)this._iSourcePrefab._iValidate();this._iCollectRenderable(t)};e.prototype._iCollectRenderable=function(t){t.applyLineSegment(this)};e.prototype._pRegisterEntity=function(t){t._iRegisterEntity(this)};e.prototype._pUnregisterEntity=function(t){t._iUnregisterEntity(this)};return e}(n);e.exports=a},{"awayjs-core/lib/library/AssetType":undefined,"awayjs-display/lib/base/DisplayObject":"awayjs-display/lib/base/DisplayObject","awayjs-display/lib/bounds/BoundsType":"awayjs-display/lib/bounds/BoundsType"}],"awayjs-display/lib/entities/Mesh":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/library/AssetType");var n=t("awayjs-display/lib/base/Geometry");var o=t("awayjs-display/lib/bounds/BoundsType");var a=t("awayjs-display/lib/containers/DisplayObjectContainer");var p=t("awayjs-display/lib/events/GeometryEvent");var l=function(t){r(e,t);function e(e,i){var r=this;if(i===void 0){i=null}t.call(this);this._castsShadows=true;this._shareAnimationGeometry=true;this._pIsEntity=true;this._subMeshes=new Array;this._onGeometryBoundsInvalidDelegate=function(t){return r.onGeometryBoundsInvalid(t)};this._onSubGeometryAddedDelegate=function(t){return r.onSubGeometryAdded(t)};this._onSubGeometryRemovedDelegate=function(t){return r.onSubGeometryRemoved(t)};this.geometry=e||new n;this.material=i;this._boundsType=o.AXIS_ALIGNED_BOX}Object.defineProperty(e.prototype,"animator",{get:function(){return this._animator},set:function(t){if(this._animator)this._animator.removeOwner(this);this._animator=t;var e=this._subMeshes.length;var i;for(var r=0;r<e;++r){i=this._subMeshes[r];if(i.material){i.material.iRemoveOwner(i);i.material.iAddOwner(i)}i._iInvalidateRenderableGeometry()}if(this._animator)this._animator.addOwner(this)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"assetType",{get:function(){return s.MESH},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"castsShadows",{get:function(){return this._castsShadows},set:function(t){this._castsShadows=t},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"geometry",{get:function(){if(this._iSourcePrefab)this._iSourcePrefab._iValidate();return this._geometry},set:function(t){var e;if(this._geometry){this._geometry.removeEventListener(p.BOUNDS_INVALID,this._onGeometryBoundsInvalidDelegate);this._geometry.removeEventListener(p.SUB_GEOMETRY_ADDED,this._onSubGeometryAddedDelegate);this._geometry.removeEventListener(p.SUB_GEOMETRY_REMOVED,this._onSubGeometryRemovedDelegate);for(e=0;e<this._subMeshes.length;++e)this._subMeshes[e].dispose();this._subMeshes.length=0}this._geometry=t;if(this._geometry){this._geometry.addEventListener(p.BOUNDS_INVALID,this._onGeometryBoundsInvalidDelegate);this._geometry.addEventListener(p.SUB_GEOMETRY_ADDED,this._onSubGeometryAddedDelegate);this._geometry.addEventListener(p.SUB_GEOMETRY_REMOVED,this._onSubGeometryRemovedDelegate);var i=this._geometry.subGeometries;for(e=0;e<i.length;++e)this.addSubMesh(i[e])}},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"material",{get:function(){return this._material},set:function(t){if(t==this._material)return;var e;var i=this._subMeshes.length;var r;for(e=0;e<i;e++)if(this._material&&(r=this._subMeshes[e]).material==this._material)this._material.iRemoveOwner(r);this._material=t;for(e=0;e<i;e++)if(this._material&&(r=this._subMeshes[e]).material==this._material)this._material.iAddOwner(r)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"shareAnimationGeometry",{get:function(){return this._shareAnimationGeometry},set:function(t){this._shareAnimationGeometry=t},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"subMeshes",{get:function(){if(this._iSourcePrefab)this._iSourcePrefab._iValidate();return this._subMeshes},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"uvTransform",{get:function(){return this._uvTransform},set:function(t){this._uvTransform=t},enumerable:true,configurable:true});e.prototype.bakeTransformations=function(){this.geometry.applyTransformation(this._iMatrix3D);this._iMatrix3D.identity()};e.prototype.dispose=function(){t.prototype.dispose.call(this);this.material=null;this.geometry=null};e.prototype.disposeWithAnimatorAndChildren=function(){this.disposeWithChildren();if(this._animator)this._animator.dispose()};e.prototype.clone=function(){var t=new e(this._geometry,this._material);t._iMatrix3D=this._iMatrix3D;t.pivot=this.pivot;t.partition=this.partition;t.boundsType=this.boundsType;t.name=this.name;t.castsShadows=this.castsShadows;t.shareAnimationGeometry=this.shareAnimationGeometry;t.mouseEnabled=this.mouseEnabled;t.mouseChildren=this.mouseChildren;t.extra=this.extra;var i=this._subMeshes.length;for(var r=0;r<i;++r)t._subMeshes[r].material=this._subMeshes[r]._iGetExplicitMaterial();i=this.numChildren;var s;for(r=0;r<i;++r){s=this.getChildAt(r).clone();t.addChild(s)}if(this._animator)t.animator=this._animator.clone();return t};e.prototype.getSubMeshFromSubGeometry=function(t){return this._subMeshes[this._geometry.subGeometries.indexOf(t)]};e.prototype._pUpdateBoxBounds=function(){t.prototype._pUpdateBoxBounds.call(this);var e,i,r,s;var n=this._geometry.subGeometries;var o;var a;var p=n.length;var l,h,u;var c,f,_;if(p>0){e=0;o=n[0];a=o.getBoundingPositions();l=c=a[e];h=f=a[e+1];u=_=a[e+2];for(i=0;i<p;i++){o=n[i];a=o.getBoundingPositions();s=a.length;for(e=0;e<s;e+=3){r=a[e];if(r<l)l=r;else if(r>c)c=r;r=a[e+1];if(r<h)h=r;else if(r>f)f=r;r=a[e+2];if(r<u)u=r;else if(r>_)_=r}}this._pBoxBounds.width=c-(this._pBoxBounds.x=l);this._pBoxBounds.height=f-(this._pBoxBounds.y=h);this._pBoxBounds.depth=_-(this._pBoxBounds.z=u)}else{this._pBoxBounds.setEmpty()}};e.prototype._pUpdateSphereBounds=function(){t.prototype._pUpdateSphereBounds.call(this);var e=this.getBox();var i=e.x+e.width/2;var r=e.y+e.height/2;var s=e.z+e.depth/2;var n,o,a,p;var l=this._geometry.subGeometries;var h;var u;var c=l.length;var f=0;var _;var d;var y;var b;if(c>0){n=0;h=l[0];u=h.getBoundingPositions();for(o=0;o<c;o++){h=l[o];u=h.getBoundingPositions();p=u.length;for(n=0;n<p;n+=3){d=u[n]-i;y=u[n+1]-r;b=u[n+2]-s;_=d*d+y*y+b*b;if(f<_)f=_}}}this._pSphereBounds.x=i;this._pSphereBounds.y=r;this._pSphereBounds.z=s;this._pSphereBounds.radius=Math.sqrt(f)};e.prototype.onGeometryBoundsInvalid=function(t){this._pInvalidateBounds()};e.prototype.onSubGeometryAdded=function(t){this.addSubMesh(t.subGeometry)};e.prototype.onSubGeometryRemoved=function(t){var e;var i=t.subGeometry;var r=this._subMeshes.length;var s;for(s=0;s<r;++s){e=this._subMeshes[s];if(e.subGeometry==i){e.dispose();this._subMeshes.splice(s,1);break}}--r;for(;s<r;++s)this._subMeshes[s]._iIndex=s};e.prototype.addSubMesh=function(t){var e=t.subMeshClass;var i=new e(t,this,null);var r=this._subMeshes.length;i._iIndex=r;this._subMeshes[r]=i;this._pInvalidateBounds()};e.prototype._iTestCollision=function(t,e){return this._pPickingCollider.testMeshCollision(this,this._pPickingCollisionVO,t,e)};e.prototype._iCollectRenderables=function(t){if(this._iSourcePrefab)this._iSourcePrefab._iValidate();var e=this._subMeshes.length;for(var i=0;i<e;i++)this._subMeshes[i]._iCollectRenderable(t)};e.prototype._iInvalidateRenderableGeometries=function(){var t=this._subMeshes.length;for(var e=0;e<t;++e)this._subMeshes[e]._iInvalidateRenderableGeometry()};e.prototype._pRegisterEntity=function(t){t._iRegisterEntity(this)};e.prototype._pUnregisterEntity=function(t){t._iUnregisterEntity(this)};return e}(a);e.exports=l},{"awayjs-core/lib/library/AssetType":undefined,"awayjs-display/lib/base/Geometry":"awayjs-display/lib/base/Geometry","awayjs-display/lib/bounds/BoundsType":"awayjs-display/lib/bounds/BoundsType","awayjs-display/lib/containers/DisplayObjectContainer":"awayjs-display/lib/containers/DisplayObjectContainer","awayjs-display/lib/events/GeometryEvent":"awayjs-display/lib/events/GeometryEvent"}],"awayjs-display/lib/entities/PointLight":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/geom/Matrix3D");var n=t("awayjs-core/lib/geom/Vector3D");var o=t("awayjs-display/lib/base/LightBase");var a=t("awayjs-display/lib/bounds/BoundsType");var p=t("awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper");var l=function(t){r(e,t);function e(){t.call(this);this._pRadius=9e4;this._pFallOff=1e5;this._pIsEntity=true;this._pFallOffFactor=1/(this._pFallOff*this._pFallOff-this._pRadius*this._pRadius);this._boundsType=a.SPHERE}e.prototype.pCreateShadowMapper=function(){return new p};Object.defineProperty(e.prototype,"radius",{get:function(){return this._pRadius},set:function(t){this._pRadius=t;if(this._pRadius<0){this._pRadius=0}else if(this._pRadius>this._pFallOff){this._pFallOff=this._pRadius;this._pInvalidateBounds()}this._pFallOffFactor=1/(this._pFallOff*this._pFallOff-this._pRadius*this._pRadius)},enumerable:true,configurable:true});e.prototype.iFallOffFactor=function(){return this._pFallOffFactor};Object.defineProperty(e.prototype,"fallOff",{get:function(){return this._pFallOff},set:function(t){this._pFallOff=t;if(this._pFallOff<0)this._pFallOff=0;if(this._pFallOff<this._pRadius)this._pRadius=this._pFallOff;this._pFallOffFactor=1/(this._pFallOff*this._pFallOff-this._pRadius*this._pRadius);this._pInvalidateBounds()},enumerable:true,configurable:true});e.prototype._pUpdateSphereBounds=function(){t.prototype._pUpdateSphereBounds.call(this);this._pSphereBounds.radius=this._pFallOff};e.prototype.iGetObjectProjectionMatrix=function(t,e,i){if(i===void 0){i=null}var r=new Array(16);var o=new s;o.copyFrom(t.getRenderSceneTransform(e));o.append(this._pParent.inverseSceneTransform);this.lookAt(o.position);o.copyFrom(t.getRenderSceneTransform(e));o.append(this.inverseSceneTransform);var a=t.getBox();var p=o.deltaTransformVector(new n(a.left,a.bottom,a.front));var l=o.deltaTransformVector(new n(a.right,a.top,a.back));var h=p.x*p.x+p.y*p.y+p.z*p.z;var u=l.x*l.x+l.y*l.y+l.z*l.z;var c=Math.sqrt(h>u?h:u);var f;var _;var d=o.rawData[14];f=d-c;_=d+c;r[5]=r[0]=f/c;r[10]=_/(_-f);r[11]=1;r[1]=r[2]=r[3]=r[4]=r[6]=r[7]=r[8]=r[9]=r[12]=r[13]=r[15]=0;r[14]=-f*r[10];if(!i)i=new s;i.copyRawDataFrom(r);i.prepend(o);return i};e.prototype._iCollectRenderables=function(t){};e.prototype._pRegisterEntity=function(t){t._iRegisterPointLight(this)};e.prototype._pUnregisterEntity=function(t){t._iUnregisterPointLight(this)};return e}(o);e.exports=l},{"awayjs-core/lib/geom/Matrix3D":undefined,"awayjs-core/lib/geom/Vector3D":undefined,"awayjs-display/lib/base/LightBase":"awayjs-display/lib/base/LightBase","awayjs-display/lib/bounds/BoundsType":"awayjs-display/lib/bounds/BoundsType","awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper":"awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper"}],"awayjs-display/lib/entities/Shape":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/base/DisplayObject");var n=function(t){r(e,t);function e(){t.call(this)}Object.defineProperty(e.prototype,"graphics",{get:function(){return this._graphics},enumerable:true,configurable:true});return e}(s);e.exports=n},{"awayjs-display/lib/base/DisplayObject":"awayjs-display/lib/base/DisplayObject"}],"awayjs-display/lib/entities/Skybox":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/base/BlendMode");var n=t("awayjs-core/lib/library/AssetType");var o=t("awayjs-display/lib/base/DisplayObject");var a=t("awayjs-display/lib/bounds/BoundsType");var p=function(t){r(e,t);function e(e){if(e===void 0){e=null}t.call(this);this._pAlphaThreshold=0;this._pBlendMode=s.NORMAL;this._renderObjects=new Array;this._renderables=new Array;this._mipmap=false;this._smooth=true;this._pIsEntity=true;this._owners=new Array(this);this.cubeMap=e;this._boundsType=a.NULL}Object.defineProperty(e.prototype,"alphaThreshold",{get:function(){return this._pAlphaThreshold},set:function(t){if(t<0)t=0;else if(t>1)t=1;if(this._pAlphaThreshold==t)return;this._pAlphaThreshold=t;this._pIinvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){if(this._mipmap==t)return;this._mipmap=t;this._pIinvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"smooth",{get:function(){return this._smooth},set:function(t){if(this._smooth==t)return;this._smooth=t;this._pIinvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"lightPicker",{get:function(){return this._pLightPicker},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"animationSet",{get:function(){return this._animationSet},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._pBlendMode},set:function(t){if(this._pBlendMode==t)return;this._pBlendMode=t;this._pInvalidateRenderObject()},enumerable:true,configurable:true});e.prototype._pInvalidateRenderObject=function(){var t=this._renderObjects.length;for(var e=0;e<t;e++)this._renderObjects[e].invalidateRenderObject()};e.prototype._pIinvalidatePasses=function(){var t=this._renderObjects.length;for(var e=0;e<t;e++)this._renderObjects[e].invalidatePasses()};Object.defineProperty(e.prototype,"iOwners",{get:function(){return this._owners},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"animator",{get:function(){return this._animator},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"uvTransform",{get:function(){return this._uvTransform},set:function(t){this._uvTransform=t},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"cubeMap",{get:function(){return this._cubeMap},set:function(t){if(t&&this._cubeMap&&t.format!=this._cubeMap.format)this._pInvalidateRenderObject();this._cubeMap=t},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"assetType",{get:function(){return n.SKYBOX},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"castsShadows",{get:function(){return false},enumerable:true,configurable:true});e.prototype.dispose=function(){var t;var e;e=this._renderObjects.length;for(t=0;t<e;t++)this._renderObjects[t].dispose();this._renderObjects=new Array;var e=this._renderables.length;for(var t=0;t<e;t++)this._renderables[t].dispose();this._renderables=new Array};e.prototype._iCollectRenderables=function(t){};e.prototype._iCollectRenderable=function(t){};e.prototype._iAddRenderObject=function(t){this._renderObjects.push(t);return t};e.prototype._iRemoveRenderObject=function(t){this._renderObjects.splice(this._renderObjects.indexOf(t),1);return t};e.prototype._iAddRenderable=function(t){this._renderables.push(t);return t};e.prototype._iRemoveRenderable=function(t){var e=this._renderables.indexOf(t);this._renderables.splice(e,1);return t};e.prototype.getRenderObject=function(t){return t.getSkyboxRenderObject(this)};e.prototype._pRegisterEntity=function(t){t._iRegisterSkybox(this)};e.prototype._pUnregisterEntity=function(t){t._iUnregisterSkybox(this)};return e}(o);e.exports=p},{"awayjs-core/lib/base/BlendMode":undefined,"awayjs-core/lib/library/AssetType":undefined,"awayjs-display/lib/base/DisplayObject":"awayjs-display/lib/base/DisplayObject","awayjs-display/lib/bounds/BoundsType":"awayjs-display/lib/bounds/BoundsType"}],"awayjs-display/lib/entities/TextField":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;
t.prototype=new r};var s=t("awayjs-display/lib/base/DisplayObject");var n=function(t){r(e,t);function e(){t.call(this);this._text=""}Object.defineProperty(e.prototype,"bottomScrollV",{get:function(){return this._bottomScrollV},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"caretIndex",{get:function(){return this._caretIndex},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:true,configurable:true});e.prototype.maxScrollH=function(){return this._maxScrollH};e.prototype.maxScrollV=function(){return this._maxScrollV};Object.defineProperty(e.prototype,"numLines",{get:function(){return this._numLines},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"selectionBeginIndex",{get:function(){return this._selectionBeginIndex},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"selectionEndIndex",{get:function(){return this._selectionEndIndex},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){if(this._text==t)return;this._text=t},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"textHeight",{get:function(){return this._textHeight},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"textInteractionMode",{get:function(){return this._textInteractionMode},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"textWidth",{get:function(){return this._textWidth},enumerable:true,configurable:true});e.prototype.appendText=function(t){};e.prototype.getCharBoundaries=function(t){return this._charBoundaries};e.prototype.getCharIndexAtPoint=function(t,e){return this._charIndexAtPoint};e.prototype.getFirstCharInParagraph=function(t){return this._firstCharInParagraph};e.prototype.getImageReference=function(t){return this._imageReference};e.prototype.getLineIndexAtPoint=function(t,e){return this._lineIndexAtPoint};e.prototype.getLineIndexOfChar=function(t){return this._lineIndexOfChar};e.prototype.getLineLength=function(t){return this._lineLength};e.prototype.getLineMetrics=function(t){return this._lineMetrics};e.prototype.getLineOffset=function(t){return this._lineOffset};e.prototype.getLineText=function(t){return this._lineText};e.prototype.getParagraphLength=function(t){return this._paragraphLength};e.prototype.getTextFormat=function(t,e){if(t===void 0){t=-1}if(e===void 0){e=-1}return this._textFormat};e.prototype.replaceSelectedText=function(t){};e.prototype.replaceText=function(t,e,i){};e.prototype.setSelection=function(t,e){};e.prototype.setTextFormat=function(t,e,i){if(e===void 0){e=-1}if(i===void 0){i=-1}};e.isFontCompatible=function(t,e){return false};return e}(s);e.exports=n},{"awayjs-display/lib/base/DisplayObject":"awayjs-display/lib/base/DisplayObject"}],"awayjs-display/lib/errors/CastError":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/errors/Error");var n=function(t){r(e,t);function e(e){t.call(this,e)}return e}(s);e.exports=n},{"awayjs-core/lib/errors/Error":undefined}],"awayjs-display/lib/events/CameraEvent":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/events/Event");var n=function(t){r(e,t);function e(e,i){t.call(this,e);this._camera=i}Object.defineProperty(e.prototype,"camera",{get:function(){return this._camera},enumerable:true,configurable:true});e.PROJECTION_CHANGED="projectionChanged";return e}(s);e.exports=n},{"awayjs-core/lib/events/Event":undefined}],"awayjs-display/lib/events/DisplayObjectEvent":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/events/Event");var n=function(t){r(e,t);function e(e,i){t.call(this,e);this.object=i}e.VISIBLITY_UPDATED="visiblityUpdated";e.SCENETRANSFORM_CHANGED="scenetransformChanged";e.SCENE_CHANGED="sceneChanged";e.POSITION_CHANGED="positionChanged";e.ROTATION_CHANGED="rotationChanged";e.SCALE_CHANGED="scaleChanged";return e}(s);e.exports=n},{"awayjs-core/lib/events/Event":undefined}],"awayjs-display/lib/events/GeometryEvent":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/events/Event");var n=function(t){r(e,t);function e(e,i){if(i===void 0){i=null}t.call(this,e);this._subGeometry=i}Object.defineProperty(e.prototype,"subGeometry",{get:function(){return this._subGeometry},enumerable:true,configurable:true});e.prototype.clone=function(){return new e(this.type,this._subGeometry)};e.SUB_GEOMETRY_ADDED="SubGeometryAdded";e.SUB_GEOMETRY_REMOVED="SubGeometryRemoved";e.BOUNDS_INVALID="BoundsInvalid";return e}(s);e.exports=n},{"awayjs-core/lib/events/Event":undefined}],"awayjs-display/lib/events/LightEvent":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/events/Event");var n=function(t){r(e,t);function e(e){t.call(this,e)}e.prototype.clone=function(){return new e(this.type)};e.CASTS_SHADOW_CHANGE="castsShadowChange";return e}(s);e.exports=n},{"awayjs-core/lib/events/Event":undefined}],"awayjs-display/lib/events/MaterialEvent":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/events/Event");var n=function(t){r(e,t);function e(e){t.call(this,e)}e.SIZE_CHANGED="sizeChanged";return e}(s);e.exports=n},{"awayjs-core/lib/events/Event":undefined}],"awayjs-display/lib/events/MouseEvent":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/events/Event");var n=function(t){r(e,t);function e(e){t.call(this,e);this._iAllowedToPropagate=true}Object.defineProperty(e.prototype,"bubbles",{get:function(){var t=this._iAllowedToPropagate;this._iAllowedToPropagate=true;return t},enumerable:true,configurable:true});e.prototype.stopPropagation=function(){this._iAllowedToPropagate=false;if(this._iParentEvent)this._iParentEvent.stopPropagation()};e.prototype.stopImmediatePropagation=function(){this._iAllowedToPropagate=false;if(this._iParentEvent)this._iParentEvent.stopImmediatePropagation()};e.prototype.clone=function(){var t=new e(this.type);t.screenX=this.screenX;t.screenY=this.screenY;t.view=this.view;t.object=this.object;t.renderableOwner=this.renderableOwner;t.material=this.material;t.uv=this.uv;t.localPosition=this.localPosition;t.localNormal=this.localNormal;t.index=this.index;t.subGeometryIndex=this.subGeometryIndex;t.delta=this.delta;t.ctrlKey=this.ctrlKey;t.shiftKey=this.shiftKey;t._iParentEvent=this;t._iAllowedToPropagate=this._iAllowedToPropagate;return t};Object.defineProperty(e.prototype,"scenePosition",{get:function(){return this.object.sceneTransform.transformVector(this.localPosition)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"sceneNormal",{get:function(){var t=this.object.sceneTransform.deltaTransformVector(this.localNormal);t.normalize();return t},enumerable:true,configurable:true});e.MOUSE_OVER="mouseOver3d";e.MOUSE_OUT="mouseOut3d";e.MOUSE_UP="mouseUp3d";e.MOUSE_DOWN="mouseDown3d";e.MOUSE_MOVE="mouseMove3d";e.CLICK="click3d";e.DOUBLE_CLICK="doubleClick3d";e.MOUSE_WHEEL="mouseWheel3d";return e}(s);e.exports=n},{"awayjs-core/lib/events/Event":undefined}],"awayjs-display/lib/events/RenderableOwnerEvent":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/events/Event");var n=function(t){r(e,t);function e(e,i){t.call(this,e);this._renderObjectOwner=i}Object.defineProperty(e.prototype,"renderObjectOwner",{get:function(){return this._renderObjectOwner},enumerable:true,configurable:true});e.prototype.clone=function(){return new e(this.type,this._renderObjectOwner)};e.RENDER_OBJECT_OWNER_UPDATED="renderObjectOwnerUpdated";return e}(s);e.exports=n},{"awayjs-core/lib/events/Event":undefined}],"awayjs-display/lib/events/RendererEvent":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/events/Event");var n=function(t){r(e,t);function e(e){t.call(this,e)}e.VIEWPORT_UPDATED="viewportUpdated";e.SCISSOR_UPDATED="scissorUpdated";return e}(s);e.exports=n},{"awayjs-core/lib/events/Event":undefined}],"awayjs-display/lib/events/ResizeEvent":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/events/Event");var n=function(t){r(e,t);function e(e,i,r){if(i===void 0){i=NaN}if(r===void 0){r=NaN}t.call(this,e);this._oldHeight=i;this._oldWidth=r}Object.defineProperty(e.prototype,"oldHeight",{get:function(){return this._oldHeight},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"oldWidth",{get:function(){return this._oldWidth},enumerable:true,configurable:true});e.RESIZE="resize";return e}(s);e.exports=n},{"awayjs-core/lib/events/Event":undefined}],"awayjs-display/lib/events/SceneEvent":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/events/Event");var n=function(t){r(e,t);function e(e,i){t.call(this,e);this.displayObject=i}e.ADDED_TO_SCENE="addedToScene";e.REMOVED_FROM_SCENE="removedFromScene";e.PARTITION_CHANGED="partitionChanged";return e}(s);e.exports=n},{"awayjs-core/lib/events/Event":undefined}],"awayjs-display/lib/events/StageEvent":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/events/Event");var n=function(t){r(e,t);function e(e){t.call(this,e)}e.CONTEXT_CREATED="contextCreated";e.CONTEXT_DISPOSED="contextDisposed";e.CONTEXT_RECREATED="contextRecreated";e.VIEWPORT_UPDATED="viewportUpdated";return e}(s);e.exports=n},{"awayjs-core/lib/events/Event":undefined}],"awayjs-display/lib/events/SubGeometryEvent":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/events/Event");var n=function(t){r(e,t);function e(e,i){if(i===void 0){i=""}t.call(this,e);this._dataType=i}Object.defineProperty(e.prototype,"dataType",{get:function(){return this._dataType},enumerable:true,configurable:true});e.prototype.clone=function(){return new e(this.type,this._dataType)};e.INDICES_UPDATED="indicesUpdated";e.VERTICES_UPDATED="verticesUpdated";return e}(s);e.exports=n},{"awayjs-core/lib/events/Event":undefined}],"awayjs-display/lib/managers/DefaultMaterialManager":[function(t,e,i){var r=t("awayjs-core/lib/base/BitmapData");var s=t("awayjs-core/lib/library/AssetType");var n=t("awayjs-core/lib/textures/BitmapTexture");var o=t("awayjs-display/lib/materials/BasicMaterial");var a=function(){function t(){}t.getDefaultMaterial=function(e){if(e===void 0){e=null}if(e!=null&&e.assetType==s.LINE_SUB_MESH){if(!t._defaultLineMaterial)t.createDefaultLineMaterial();return t._defaultLineMaterial}else{if(!t._defaultTriangleMaterial)t.createDefaultTriangleMaterial();return t._defaultTriangleMaterial}};t.getDefaultTexture=function(e){if(e===void 0){e=null}if(!t._defaultTexture)t.createDefaultTexture();return t._defaultTexture};t.createDefaultTexture=function(){t._defaultBitmapData=t.createCheckeredBitmapData();t._defaultTexture=new n(t._defaultBitmapData);t._defaultTexture.name="defaultTexture"};t.createCheckeredBitmapData=function(){var t=new r(8,8,false,0);var e,i;for(e=0;e<8;e++){for(i=0;i<8;i++){if(i&1^e&1){t.setPixel(e,i,16777215)}}}return t};t.createDefaultTriangleMaterial=function(){if(!t._defaultTexture)t.createDefaultTexture();t._defaultTriangleMaterial=new o(t._defaultTexture);t._defaultTriangleMaterial.mipmap=false;t._defaultTriangleMaterial.smooth=false;t._defaultTriangleMaterial.name="defaultTriangleMaterial"};t.createDefaultLineMaterial=function(){t._defaultLineMaterial=new o;t._defaultLineMaterial.name="defaultLineMaterial"};return t}();e.exports=a},{"awayjs-core/lib/base/BitmapData":undefined,"awayjs-core/lib/library/AssetType":undefined,"awayjs-core/lib/textures/BitmapTexture":undefined,"awayjs-display/lib/materials/BasicMaterial":"awayjs-display/lib/materials/BasicMaterial"}],"awayjs-display/lib/managers/MouseManager":[function(t,e,i){var r=t("awayjs-core/lib/geom/Vector3D");var s=t("awayjs-display/lib/events/MouseEvent");var n=function(){function t(){var t=this;this._viewLookup=new Array;this._nullVector=new r;this._queuedEvents=new Array;this._mouseUp=new s(s.MOUSE_UP);this._mouseClick=new s(s.CLICK);this._mouseOut=new s(s.MOUSE_OUT);this._mouseDown=new s(s.MOUSE_DOWN);this._mouseMove=new s(s.MOUSE_MOVE);this._mouseOver=new s(s.MOUSE_OVER);this._mouseWheel=new s(s.MOUSE_WHEEL);this._mouseDoubleClick=new s(s.DOUBLE_CLICK);this.onClickDelegate=function(e){return t.onClick(e)};this.onDoubleClickDelegate=function(e){return t.onDoubleClick(e)};this.onMouseDownDelegate=function(e){return t.onMouseDown(e)};this.onMouseMoveDelegate=function(e){return t.onMouseMove(e)};this.onMouseUpDelegate=function(e){return t.onMouseUp(e)};this.onMouseWheelDelegate=function(e){return t.onMouseWheel(e)};this.onMouseOverDelegate=function(e){return t.onMouseOver(e)};this.onMouseOutDelegate=function(e){return t.onMouseOut(e)}}t.getInstance=function(){if(this._instance)return this._instance;return this._instance=new t};t.prototype.fireMouseEvents=function(t){if(this._iCollidingObject!=this._previousCollidingObject){if(this._previousCollidingObject)this.queueDispatch(this._mouseOut,this._mouseMoveEvent,this._previousCollidingObject);if(this._iCollidingObject)this.queueDispatch(this._mouseOver,this._mouseMoveEvent)}if(t&&this._iCollidingObject)this.queueDispatch(this._mouseMove,this._mouseMoveEvent);var e;var i;var r=this._queuedEvents.length;for(var s=0;s<r;++s){e=this._queuedEvents[s];i=e.object;while(i&&!i._iIsMouseEnabled())i=i.parent;if(i)i.dispatchEvent(e)}this._queuedEvents.length=0;this._previousCollidingObject=this._iCollidingObject;this._iUpdateDirty=false};t.prototype.registerView=function(t){t.htmlElement.addEventListener("click",this.onClickDelegate);t.htmlElement.addEventListener("dblclick",this.onDoubleClickDelegate);t.htmlElement.addEventListener("mousedown",this.onMouseDownDelegate);t.htmlElement.addEventListener("mousemove",this.onMouseMoveDelegate);t.htmlElement.addEventListener("mouseup",this.onMouseUpDelegate);t.htmlElement.addEventListener("mousewheel",this.onMouseWheelDelegate);t.htmlElement.addEventListener("mouseover",this.onMouseOverDelegate);t.htmlElement.addEventListener("mouseout",this.onMouseOutDelegate);this._viewLookup.push(t)};t.prototype.unregisterView=function(t){t.htmlElement.removeEventListener("click",this.onClickDelegate);t.htmlElement.removeEventListener("dblclick",this.onDoubleClickDelegate);t.htmlElement.removeEventListener("mousedown",this.onMouseDownDelegate);t.htmlElement.removeEventListener("mousemove",this.onMouseMoveDelegate);t.htmlElement.removeEventListener("mouseup",this.onMouseUpDelegate);t.htmlElement.removeEventListener("mousewheel",this.onMouseWheelDelegate);t.htmlElement.removeEventListener("mouseover",this.onMouseOverDelegate);t.htmlElement.removeEventListener("mouseout",this.onMouseOutDelegate);this._viewLookup.slice(this._viewLookup.indexOf(t),1)};t.prototype.queueDispatch=function(t,e,i){if(i===void 0){i=null}if(e){t.ctrlKey=e.ctrlKey;t.altKey=e.altKey;t.shiftKey=e.shiftKey;t.screenX=e.clientX;t.screenY=e.clientY}if(i==null)i=this._iCollidingObject;if(i){t.object=i.displayObject;t.renderableOwner=i.renderableOwner;t.uv=i.uv;t.localPosition=i.localPosition?i.localPosition.clone():null;t.localNormal=i.localNormal?i.localNormal.clone():null;t.index=i.index}else{t.uv=null;t.object=null;t.localPosition=this._nullVector;t.localNormal=this._nullVector;t.index=0;t.subGeometryIndex=0}this._queuedEvents.push(t)};t.prototype.onMouseMove=function(t){this.updateColliders(t);if(this._iCollidingObject)this.queueDispatch(this._mouseMove,this._mouseMoveEvent=t)};t.prototype.onMouseOut=function(t){this._iActiveDiv=null;this.updateColliders(t);if(this._iCollidingObject)this.queueDispatch(this._mouseOut,t)};t.prototype.onMouseOver=function(t){this._iActiveDiv=t.target;this.updateColliders(t);if(this._iCollidingObject)this.queueDispatch(this._mouseOver,t)};t.prototype.onClick=function(t){this.updateColliders(t);if(this._iCollidingObject)this.queueDispatch(this._mouseClick,t)};t.prototype.onDoubleClick=function(t){this.updateColliders(t);if(this._iCollidingObject)this.queueDispatch(this._mouseDoubleClick,t)};t.prototype.onMouseDown=function(t){this._iActiveDiv=t.target;this.updateColliders(t);if(this._iCollidingObject)this.queueDispatch(this._mouseDown,t)};t.prototype.onMouseUp=function(t){this.updateColliders(t);if(this._iCollidingObject)this.queueDispatch(this._mouseUp,t)};t.prototype.onMouseWheel=function(t){this.updateColliders(t);if(this._iCollidingObject)this.queueDispatch(this._mouseWheel,t)};t.prototype.updateColliders=function(t){if(this._iUpdateDirty)return;var e;var i;var r=t.clientX;var s=t.clientY;var n=this._viewLookup.length;for(var o=0;o<n;o++){e=this._viewLookup[o];i=e.htmlElement.getBoundingClientRect();if(r<i.left||r>i.right||s<i.top||s>i.bottom){e._pMouseX=null;e._pMouseY=null}else{e._pMouseX=r+i.left;e._pMouseY=s+i.top;e.updateCollider();if(e.layeredView&&this._iCollidingObject)break}}this._iUpdateDirty=true};return t}();e.exports=n},{"awayjs-core/lib/geom/Vector3D":undefined,"awayjs-display/lib/events/MouseEvent":"awayjs-display/lib/events/MouseEvent"}],"awayjs-display/lib/materials/BasicMaterial":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/textures/Texture2DBase");var n=t("awayjs-display/lib/materials/MaterialBase");var o=function(t){r(e,t);function e(e,i,r,n){if(e===void 0){e=null}if(i===void 0){i=null}if(r===void 0){r=false}if(n===void 0){n=false}t.call(this);this._preserveAlpha=false;if(e instanceof s){this.texture=e;this.smooth=i==null?true:false;this.repeat=r;this.mipmap=n}else{this.color=e?Number(e):13421772;this.alpha=i==null?1:Number(i)}}Object.defineProperty(e.prototype,"preserveAlpha",{get:function(){return this._preserveAlpha},set:function(t){if(this._preserveAlpha==t)return;this._preserveAlpha=t;this._pInvalidateRenderObject()},enumerable:true,configurable:true});e.prototype.getRenderObject=function(t){return t.getMaterialRenderObject(this)};return e}(n);e.exports=o},{"awayjs-core/lib/textures/Texture2DBase":undefined,"awayjs-display/lib/materials/MaterialBase":"awayjs-display/lib/materials/MaterialBase"}],"awayjs-display/lib/materials/CSSMaterialBase":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/materials/MaterialBase");var n=t("awayjs-core/lib/textures/ImageTexture");var o=function(t){r(e,t);function e(e,i,r){if(e===void 0){e=null}if(i===void 0){i=true}if(r===void 0){r=false}t.call(this);this._iMaterialId=Number(this.id);this.texture=e;this.smooth=i;this.repeat=r}Object.defineProperty(e.prototype,"imageElement",{get:function(){return this._imageElement},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"imageStyle",{get:function(){return this._imageStyle},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"texture",{get:function(){return this._pTexture},set:function(t){if(this._pTexture==t)return;this._pTexture=t;if(t instanceof n){this._imageElement=t.htmlImageElement;var e=document.createElement("style");e.type="text/css";document.getElementsByTagName("head")[0].appendChild(e);var i=document.styleSheets[document.styleSheets.length-1];i.insertRule(".material"+this.id+"{ }",0);var r=i.cssRules[0].style;r.backgroundImage="url("+this._imageElement.src+")";r.backgroundSize="100% 100%";r.position="absolute";r.width=this._imageElement.width+"px";r.height=this._imageElement.height+"px";r.transformOrigin=r["-webkit-transform-origin"]=r["-moz-transform-origin"]=r["-o-transform-origin"]=r["-ms-transform-origin"]="0% 0%";this._pHeight=this._imageElement.height;this._pWidth=this._imageElement.width;this._pNotifySizeChanged()}},enumerable:true,configurable:true});return e}(s);e.exports=o},{"awayjs-core/lib/textures/ImageTexture":undefined,"awayjs-display/lib/materials/MaterialBase":"awayjs-display/lib/materials/MaterialBase"}],"awayjs-display/lib/materials/CurveMaterial":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/textures/Texture2DBase");var n=t("awayjs-display/lib/materials/MaterialBase");var o=function(t){r(e,t);function e(e,i,r,n){if(e===void 0){e=null}if(i===void 0){i=null}if(r===void 0){r=false}if(n===void 0){n=false}t.call(this);this._preserveAlpha=false;if(e instanceof s){this.texture=e;this.smooth=i==null?true:false;this.repeat=r;this.mipmap=n}else{this.color=e?Number(e):13421772;this.alpha=i==null?1:Number(i)}}Object.defineProperty(e.prototype,"preserveAlpha",{get:function(){return this._preserveAlpha},set:function(t){if(this._preserveAlpha==t)return;this._preserveAlpha=t;this._pInvalidateRenderObject()},enumerable:true,configurable:true});e.prototype.getRenderObject=function(t){return t.getMaterialRenderObject(this)};return e}(n);e.exports=o},{"awayjs-core/lib/textures/Texture2DBase":undefined,"awayjs-display/lib/materials/MaterialBase":"awayjs-display/lib/materials/MaterialBase"}],"awayjs-display/lib/materials/LightSources":[function(t,e,i){var r=function(){function t(){}t.LIGHTS=1;t.PROBES=2;t.ALL=3;return t}();e.exports=r},{}],"awayjs-display/lib/materials/MaterialBase":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/base/BlendMode");var n=t("awayjs-core/lib/geom/ColorTransform");var o=t("awayjs-core/lib/errors/AbstractMethodError");var a=t("awayjs-core/lib/events/Event");var p=t("awayjs-core/lib/library/AssetType");var l=t("awayjs-core/lib/library/NamedAssetBase");var h=t("awayjs-display/lib/events/MaterialEvent");var u=t("awayjs-display/lib/events/RenderableOwnerEvent");var c=function(t){r(e,t);function e(){var e=this;t.call(this);this._alphaBlending=false;this._alpha=1;this._renderObjects=new Array;this._pAlphaThreshold=0;this._pAnimateUVs=false;this._enableLightFallOff=true;this._specularLightSources=1;this._diffuseLightSources=3;this._iMaterialId=0;this._iBaseScreenPassIndex=0;this._bothSides=false;this._pBlendMode=s.NORMAL;this._mipmap=true;this._smooth=true;this._repeat=false;this._color=16777215;this._pHeight=1;this._pWidth=1;this._iMaterialId=Number(this.id);this._owners=new Array;this._onLightChangeDelegate=function(t){return e.onLightsChange(t)};this.alphaPremultiplied=false}Object.defineProperty(e.prototype,"assetType",{get:function(){return p.MATERIAL},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){if(t>1)t=1;else if(t<0)t=0;if(this._alpha==t)return;this._alpha=t;if(this._colorTransform==null)this._colorTransform=new n;this._colorTransform.alphaMultiplier=t;this._pInvalidateRenderObject()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"colorTransform",{get:function(){return this._colorTransform},set:function(t){this._colorTransform=t;this._pInvalidateRenderObject()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"alphaBlending",{get:function(){return this._alphaBlending},set:function(t){if(this._alphaBlending==t)return;this._alphaBlending=t;this._pInvalidateRenderObject()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){return this._pHeight},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"animationSet",{get:function(){return this._animationSet},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"lightPicker",{get:function(){return this._pLightPicker},set:function(t){if(this._pLightPicker==t)return;if(this._pLightPicker)this._pLightPicker.removeEventListener(a.CHANGE,this._onLightChangeDelegate);this._pLightPicker=t;if(this._pLightPicker)this._pLightPicker.addEventListener(a.CHANGE,this._onLightChangeDelegate);this._pInvalidateRenderObject()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){if(this._mipmap==t)return;this._mipmap=t;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"smooth",{get:function(){return this._smooth},set:function(t){if(this._smooth==t)return;this._smooth=t;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"repeat",{get:function(){return this._repeat},set:function(t){if(this._repeat==t)return;this._repeat=t;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){if(this._color==t)return;this._color=t;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"texture",{get:function(){return this._pTexture},set:function(t){if(this._pTexture==t)return;this._pTexture=t;this._pInvalidatePasses();this._pHeight=this._pTexture.height;this._pWidth=this._pTexture.width;this._pNotifySizeChanged()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"animateUVs",{get:function(){return this._pAnimateUVs},set:function(t){if(this._pAnimateUVs==t)return;this._pAnimateUVs=t;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"enableLightFallOff",{get:function(){return this._enableLightFallOff},set:function(t){if(this._enableLightFallOff==t)return;this._enableLightFallOff=t;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"diffuseLightSources",{get:function(){return this._diffuseLightSources},set:function(t){if(this._diffuseLightSources==t)return;this._diffuseLightSources=t;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"specularLightSources",{get:function(){return this._specularLightSources},set:function(t){if(this._specularLightSources==t)return;this._specularLightSources=t;this._pInvalidatePasses()},enumerable:true,configurable:true});e.prototype.dispose=function(){var t;var e;e=this._renderObjects.length;for(t=0;t<e;t++)this._renderObjects[t].dispose();this._renderObjects=new Array};Object.defineProperty(e.prototype,"bothSides",{get:function(){return this._bothSides},set:function(t){if(this._bothSides=t)return;this._bothSides=t;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._pBlendMode},set:function(t){if(this._pBlendMode==t)return;this._pBlendMode=t;this._pInvalidateRenderObject()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"alphaPremultiplied",{get:function(){return this._alphaPremultiplied},set:function(t){if(this._alphaPremultiplied==t)return;this._alphaPremultiplied=t;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"alphaThreshold",{get:function(){return this._pAlphaThreshold},set:function(t){if(t<0)t=0;else if(t>1)t=1;if(this._pAlphaThreshold==t)return;this._pAlphaThreshold=t;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"width",{get:function(){return this._pWidth},enumerable:true,configurable:true});e.prototype.iAddOwner=function(t){this._owners.push(t);var e;var i=t.animator;if(i)e=i.animationSet;if(t.animator){if(this._animationSet&&e!=this._animationSet){throw new Error("A Material instance cannot be shared across material owners with different animation sets")}else{if(this._animationSet!=e){this._animationSet=e;this.invalidateAnimation()}}}t.dispatchEvent(new u(u.RENDER_OBJECT_OWNER_UPDATED,this))};e.prototype.iRemoveOwner=function(t){this._owners.splice(this._owners.indexOf(t),1);if(this._owners.length==0){this._animationSet=null;this.invalidateAnimation()}t.dispatchEvent(new u(u.RENDER_OBJECT_OWNER_UPDATED,this))};Object.defineProperty(e.prototype,"iOwners",{get:function(){return this._owners},enumerable:true,configurable:true});e.prototype._pInvalidatePasses=function(){var t=this._renderObjects.length;for(var e=0;e<t;e++)this._renderObjects[e].invalidatePasses()};e.prototype.invalidateAnimation=function(){var t=this._renderObjects.length;for(var e=0;e<t;e++)this._renderObjects[e].invalidateAnimation()};e.prototype._pInvalidateRenderObject=function(){var t=this._renderObjects.length;for(var e=0;e<t;e++)this._renderObjects[e].invalidateRenderObject()};e.prototype.onLightsChange=function(t){this._pInvalidateRenderObject()};e.prototype._pNotifySizeChanged=function(){if(!this._sizeChanged)this._sizeChanged=new h(h.SIZE_CHANGED);this.dispatchEvent(this._sizeChanged)};e.prototype._iAddRenderObject=function(t){this._renderObjects.push(t);return t};e.prototype._iRemoveRenderObject=function(t){this._renderObjects.splice(this._renderObjects.indexOf(t),1);return t};e.prototype.getRenderObject=function(t){throw new o};return e}(l);e.exports=c},{"awayjs-core/lib/base/BlendMode":undefined,"awayjs-core/lib/errors/AbstractMethodError":undefined,"awayjs-core/lib/events/Event":undefined,"awayjs-core/lib/geom/ColorTransform":undefined,"awayjs-core/lib/library/AssetType":undefined,"awayjs-core/lib/library/NamedAssetBase":undefined,"awayjs-display/lib/events/MaterialEvent":"awayjs-display/lib/events/MaterialEvent","awayjs-display/lib/events/RenderableOwnerEvent":"awayjs-display/lib/events/RenderableOwnerEvent"}],"awayjs-display/lib/materials/lightpickers/LightPickerBase":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/library/AssetType");var n=t("awayjs-core/lib/library/NamedAssetBase");var o=function(t){r(e,t);function e(){t.call(this);this._pNumPointLights=0;this._pNumDirectionalLights=0;this._pNumCastingPointLights=0;this._pNumCastingDirectionalLights=0;this._pNumLightProbes=0}e.prototype.dispose=function(){};Object.defineProperty(e.prototype,"assetType",{get:function(){return s.LIGHT_PICKER},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numDirectionalLights",{get:function(){return this._pNumDirectionalLights},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numPointLights",{get:function(){return this._pNumPointLights},enumerable:true,configurable:true});
Object.defineProperty(e.prototype,"numCastingDirectionalLights",{get:function(){return this._pNumCastingDirectionalLights},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numCastingPointLights",{get:function(){return this._pNumCastingPointLights},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numLightProbes",{get:function(){return this._pNumLightProbes},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"pointLights",{get:function(){return this._pPointLights},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"directionalLights",{get:function(){return this._pDirectionalLights},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"castingPointLights",{get:function(){return this._pCastingPointLights},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"castingDirectionalLights",{get:function(){return this._pCastingDirectionalLights},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"lightProbes",{get:function(){return this._pLightProbes},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"lightProbeWeights",{get:function(){return this._pLightProbeWeights},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"allPickedLights",{get:function(){return this._pAllPickedLights},enumerable:true,configurable:true});e.prototype.collectLights=function(t){this.updateProbeWeights(t)};e.prototype.updateProbeWeights=function(t){var e=t.sourceEntity.scenePosition;var i;var r=e.x,s=e.y,n=e.z;var o,a,p;var l,h=0;var u;for(u=0;u<this._pNumLightProbes;++u){i=this._pLightProbes[u].scenePosition;o=r-i.x;a=s-i.y;p=n-i.z;l=o*o+a*a+p*p;l=l>1e-5?1/l:5e7;this._pLightProbeWeights[u]=l;h+=l}h=1/h;for(u=0;u<this._pNumLightProbes;++u)this._pLightProbeWeights[u]*=h};return e}(n);e.exports=o},{"awayjs-core/lib/library/AssetType":undefined,"awayjs-core/lib/library/NamedAssetBase":undefined}],"awayjs-display/lib/materials/lightpickers/StaticLightPicker":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/events/Event");var n=t("awayjs-display/lib/entities/DirectionalLight");var o=t("awayjs-display/lib/entities/LightProbe");var a=t("awayjs-display/lib/entities/PointLight");var p=t("awayjs-display/lib/events/LightEvent");var l=t("awayjs-display/lib/materials/lightpickers/LightPickerBase");var h=function(t){r(e,t);function e(e){var i=this;t.call(this);this._onCastShadowChangeDelegate=function(t){return i.onCastShadowChange(t)};this.lights=e}Object.defineProperty(e.prototype,"lights",{get:function(){return this._lights},set:function(t){var e=0;var i=0;var r=0;var l=0;var h=0;var u;if(this._lights)this.clearListeners();this._lights=t;this._pAllPickedLights=t;this._pPointLights=new Array;this._pCastingPointLights=new Array;this._pDirectionalLights=new Array;this._pCastingDirectionalLights=new Array;this._pLightProbes=new Array;var c=t.length;for(var f=0;f<c;++f){u=t[f];u.addEventListener(p.CASTS_SHADOW_CHANGE,this._onCastShadowChangeDelegate);if(u instanceof a){if(u.castsShadows)this._pCastingPointLights[r++]=u;else this._pPointLights[e++]=u}else if(u instanceof n){if(u.castsShadows)this._pCastingDirectionalLights[l++]=u;else this._pDirectionalLights[i++]=u}else if(u instanceof o){this._pLightProbes[h++]=u}}if(this._pNumDirectionalLights==i&&this._pNumPointLights==e&&this._pNumLightProbes==h&&this._pNumCastingPointLights==r&&this._pNumCastingDirectionalLights==l)return;this._pNumDirectionalLights=i;this._pNumCastingDirectionalLights=l;this._pNumPointLights=e;this._pNumCastingPointLights=r;this._pNumLightProbes=h;this._pLightProbeWeights=new Array(Math.ceil(h/4)*4);this.dispatchEvent(new s(s.CHANGE))},enumerable:true,configurable:true});e.prototype.clearListeners=function(){var t=this._lights.length;for(var e=0;e<t;++e)this._lights[e].removeEventListener(p.CASTS_SHADOW_CHANGE,this._onCastShadowChangeDelegate)};e.prototype.onCastShadowChange=function(t){var e=t.target;if(e instanceof a)this.updatePointCasting(e);else if(e instanceof n)this.updateDirectionalCasting(e);this.dispatchEvent(new s(s.CHANGE))};e.prototype.updateDirectionalCasting=function(t){var e=t;if(t.castsShadows){--this._pNumDirectionalLights;++this._pNumCastingDirectionalLights;this._pDirectionalLights.splice(this._pDirectionalLights.indexOf(e),1);this._pCastingDirectionalLights.push(t)}else{++this._pNumDirectionalLights;--this._pNumCastingDirectionalLights;this._pCastingDirectionalLights.splice(this._pCastingDirectionalLights.indexOf(e),1);this._pDirectionalLights.push(t)}};e.prototype.updatePointCasting=function(t){var e=t;if(t.castsShadows){--this._pNumPointLights;++this._pNumCastingPointLights;this._pPointLights.splice(this._pPointLights.indexOf(e),1);this._pCastingPointLights.push(t)}else{++this._pNumPointLights;--this._pNumCastingPointLights;this._pCastingPointLights.splice(this._pCastingPointLights.indexOf(e),1);this._pPointLights.push(t)}};return e}(l);e.exports=h},{"awayjs-core/lib/events/Event":undefined,"awayjs-display/lib/entities/DirectionalLight":"awayjs-display/lib/entities/DirectionalLight","awayjs-display/lib/entities/LightProbe":"awayjs-display/lib/entities/LightProbe","awayjs-display/lib/entities/PointLight":"awayjs-display/lib/entities/PointLight","awayjs-display/lib/events/LightEvent":"awayjs-display/lib/events/LightEvent","awayjs-display/lib/materials/lightpickers/LightPickerBase":"awayjs-display/lib/materials/lightpickers/LightPickerBase"}],"awayjs-display/lib/materials/shadowmappers/CascadeShadowMapper":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/geom/Matrix3DUtils");var n=t("awayjs-core/lib/geom/Rectangle");var o=t("awayjs-core/lib/events/Event");var a=t("awayjs-core/lib/events/EventDispatcher");var p=t("awayjs-core/lib/projections/FreeMatrixProjection");var l=t("awayjs-display/lib/entities/Camera");var h=t("awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper");var u=function(t){r(e,t);function e(e){if(e===void 0){e=3}t.call(this);this._pScissorRectsInvalid=true;if(e<1||e>4)throw new Error("numCascades must be an integer between 1 and 4");this._numCascades=e;this._changeDispatcher=new a(this);this.init()}e.prototype.getSplitRatio=function(t){return this._splitRatios[t]};e.prototype.setSplitRatio=function(t,e){if(e<0)e=0;else if(e>1)e=1;if(t>=this._numCascades)throw new Error("index must be smaller than the number of cascades!");this._splitRatios[t]=e};e.prototype.getDepthProjections=function(t){return this._depthCameras[t].viewProjection};e.prototype.init=function(){this._splitRatios=new Array(this._numCascades);this._nearPlaneDistances=new Array(this._numCascades);var t=1;for(var e=this._numCascades-1;e>=0;--e){this._splitRatios[e]=t;t*=.4}this._texOffsetsX=Array(-1,1,-1,1);this._texOffsetsY=Array(1,1,-1,-1);this._pScissorRects=new Array(4);this._depthLenses=new Array;this._depthCameras=new Array;for(e=0;e<this._numCascades;++e){this._depthLenses[e]=new p;this._depthCameras[e]=new l(this._depthLenses[e])}};e.prototype._pSetDepthMapSize=function(e){t.prototype._pSetDepthMapSize.call(this,e);this.invalidateScissorRects()};e.prototype.invalidateScissorRects=function(){this._pScissorRectsInvalid=true};Object.defineProperty(e.prototype,"numCascades",{get:function(){return this._numCascades},set:function(t){if(t==this._numCascades)return;if(t<1||t>4)throw new Error("numCascades must be an integer between 1 and 4");this._numCascades=t;this.invalidateScissorRects();this.init();this.dispatchEvent(new o(o.CHANGE))},enumerable:true,configurable:true});e.prototype.pDrawDepthMap=function(t,e,i){if(this._pScissorRectsInvalid)this.updateScissorRects();this._pCasterCollector.cullPlanes=this._pCullPlanes;this._pCasterCollector.camera=this._pOverallDepthCamera;this._pCasterCollector.clear();e.traversePartitions(this._pCasterCollector);i._iRenderCascades(this._pCasterCollector,t,this._numCascades,this._pScissorRects,this._depthCameras)};e.prototype.updateScissorRects=function(){var t=this._pDepthMapSize*.5;this._pScissorRects[0]=new n(0,0,t,t);this._pScissorRects[1]=new n(t,0,t,t);this._pScissorRects[2]=new n(0,t,t,t);this._pScissorRects[3]=new n(t,t,t,t);this._pScissorRectsInvalid=false};e.prototype.pUpdateDepthProjection=function(t){var e;var i=t.projection;var r=i.near;var s=i.far-r;this.pUpdateProjectionFromFrustumCorners(t,t.projection.frustumCorners,this._pMatrix);this._pMatrix.appendScale(.96,.96,1);this._pOverallDepthProjection.matrix=this._pMatrix;this.pUpdateCullPlanes(t);for(var n=0;n<this._numCascades;++n){e=this._depthLenses[n].matrix;this._nearPlaneDistances[n]=r+this._splitRatios[n]*s;this._depthCameras[n].transform=this._pOverallDepthCamera.transform;this.updateProjectionPartition(e,this._splitRatios[n],this._texOffsetsX[n],this._texOffsetsY[n]);this._depthLenses[n].matrix=e}};e.prototype.updateProjectionPartition=function(t,e,i,r){var n=s.RAW_DATA_CONTAINER;var o,a,p;var l,h,u;var c=Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY,_;var d=Number.NEGATIVE_INFINITY,y=Number.NEGATIVE_INFINITY,b=Number.NEGATIVE_INFINITY;var m=0;while(m<12){o=this._pLocalFrustum[m];a=this._pLocalFrustum[m+1];p=this._pLocalFrustum[m+2];l=o+(this._pLocalFrustum[m+12]-o)*e;h=a+(this._pLocalFrustum[m+13]-a)*e;u=p+(this._pLocalFrustum[m+14]-p)*e;if(o<c)c=o;if(o>d)d=o;if(a<f)f=a;if(a>y)y=a;if(p>b)b=p;if(l<c)c=l;if(l>d)d=l;if(h<f)f=h;if(h>y)y=h;if(u>b)b=u;m+=3}_=1;var g=d-c;var v=y-f;var w=1/(b-_);if(c<0)c-=this._pSnap;if(f<0)f-=this._pSnap;c=Math.floor(c/this._pSnap)*this._pSnap;f=Math.floor(f/this._pSnap)*this._pSnap;var j=2*this._pSnap;g=Math.floor(g/j+1)*j;v=Math.floor(v/j+1)*j;d=c+g;y=f+v;g=1/g;v=1/v;n[0]=2*g;n[5]=2*v;n[10]=w;n[12]=-(d+c)*g;n[13]=-(y+f)*v;n[14]=-_*w;n[15]=1;n[1]=n[2]=n[3]=n[4]=n[6]=n[7]=n[8]=n[9]=n[11]=0;t.copyRawDataFrom(n);t.appendScale(.96,.96,1);t.appendTranslation(i,r,0);t.appendScale(.5,.5,1)};e.prototype.addEventListener=function(t,e){this._changeDispatcher.addEventListener(t,e)};e.prototype.removeEventListener=function(t,e){this._changeDispatcher.removeEventListener(t,e)};e.prototype.dispatchEvent=function(t){return this._changeDispatcher.dispatchEvent(t)};e.prototype.hasEventListener=function(t){return this._changeDispatcher.hasEventListener(t)};Object.defineProperty(e.prototype,"_iNearPlaneDistances",{get:function(){return this._nearPlaneDistances},enumerable:true,configurable:true});return e}(h);e.exports=u},{"awayjs-core/lib/events/Event":undefined,"awayjs-core/lib/events/EventDispatcher":undefined,"awayjs-core/lib/geom/Matrix3DUtils":undefined,"awayjs-core/lib/geom/Rectangle":undefined,"awayjs-core/lib/projections/FreeMatrixProjection":undefined,"awayjs-display/lib/entities/Camera":"awayjs-display/lib/entities/Camera","awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper":"awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper"}],"awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/errors/PartialImplementationError");var n=t("awayjs-display/lib/entities/Camera");var o=t("awayjs-display/lib/materials/shadowmappers/ShadowMapperBase");var a=function(t){r(e,t);function e(){t.call(this);this._pDepthMapSize=512;this._needsRender=new Array;this.initCameras()}e.prototype.initCameras=function(){this._depthCameras=new Array;this._projections=new Array;this.addCamera(0,90,0);this.addCamera(0,-90,0);this.addCamera(-90,0,0);this.addCamera(90,0,0);this.addCamera(0,0,0);this.addCamera(0,180,0)};e.prototype.addCamera=function(t,e,i){var r=new n;r.rotationX=t;r.rotationY=e;r.rotationZ=i;r.projection.near=.01;var s=r.projection;s.fieldOfView=90;this._projections.push(s);r.projection._iAspectRatio=1;this._depthCameras.push(r)};e.prototype.pCreateDepthTexture=function(){throw new s};e.prototype.pUpdateDepthProjection=function(t){var e=this._pLight;var i=e._pFallOff;var r=this._pLight.scenePosition;for(var s=0;s<6;++s){this._projections[s].far=i;this._depthCameras[s].transform.position=r;this._needsRender[s]=true}};e.prototype.pDrawDepthMap=function(t,e,i){for(var r=0;r<6;++r){if(this._needsRender[r]){this._pCasterCollector.camera=this._depthCameras[r];this._pCasterCollector.clear();e.traversePartitions(this._pCasterCollector);i._iRender(this._pCasterCollector,t,null,r)}}};return e}(o);e.exports=a},{"awayjs-core/lib/errors/PartialImplementationError":undefined,"awayjs-display/lib/entities/Camera":"awayjs-display/lib/entities/Camera","awayjs-display/lib/materials/shadowmappers/ShadowMapperBase":"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase"}],"awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/geom/Matrix3D");var n=t("awayjs-core/lib/projections/FreeMatrixProjection");var o=t("awayjs-display/lib/entities/Camera");var a=t("awayjs-display/lib/materials/shadowmappers/ShadowMapperBase");var p=function(t){r(e,t);function e(){t.call(this);this._pLightOffset=1e4;this._pSnap=64;this._pCullPlanes=[];this._pOverallDepthProjection=new n;this._pOverallDepthCamera=new o(this._pOverallDepthProjection);this._pLocalFrustum=[];this._pMatrix=new s}Object.defineProperty(e.prototype,"snap",{get:function(){return this._pSnap},set:function(t){this._pSnap=t},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"lightOffset",{get:function(){return this._pLightOffset},set:function(t){this._pLightOffset=t},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"iDepthProjection",{get:function(){return this._pOverallDepthCamera.viewProjection},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"depth",{get:function(){return this._pMaxZ-this._pMinZ},enumerable:true,configurable:true});e.prototype.pDrawDepthMap=function(t,e,i){this._pCasterCollector.camera=this._pOverallDepthCamera;this._pCasterCollector.cullPlanes=this._pCullPlanes;this._pCasterCollector.clear();e.traversePartitions(this._pCasterCollector);i._iRender(this._pCasterCollector,t)};e.prototype.pUpdateCullPlanes=function(t){var e=this._pOverallDepthCamera.frustumPlanes;var i=t.frustumPlanes;this._pCullPlanes.length=4;this._pCullPlanes[0]=e[0];this._pCullPlanes[1]=e[1];this._pCullPlanes[2]=e[2];this._pCullPlanes[3]=e[3];var r=this._pLight;var s=r.sceneDirection;var n=s.x;var o=s.y;var a=s.z;var p=4;for(var l=0;l<6;++l){var h=i[l];if(h.a*n+h.b*o+h.c*a<0)this._pCullPlanes[p++]=h}};e.prototype.pUpdateDepthProjection=function(t){this.pUpdateProjectionFromFrustumCorners(t,t.projection.frustumCorners,this._pMatrix);this._pOverallDepthProjection.matrix=this._pMatrix;this.pUpdateCullPlanes(t)};e.prototype.pUpdateProjectionFromFrustumCorners=function(t,e,i){var r=new Array;var s;var n,o,a;var p,l;var h,u;var c;var f=this._pLight;s=f.sceneDirection;this._pOverallDepthCamera.transform.matrix3D=this._pLight.sceneTransform;n=Math.floor((t.x-s.x*this._pLightOffset)/this._pSnap)*this._pSnap;o=Math.floor((t.y-s.y*this._pLightOffset)/this._pSnap)*this._pSnap;a=Math.floor((t.z-s.z*this._pLightOffset)/this._pSnap)*this._pSnap;this._pOverallDepthCamera.x=n;this._pOverallDepthCamera.y=o;this._pOverallDepthCamera.z=a;this._pMatrix.copyFrom(this._pOverallDepthCamera.inverseSceneTransform);this._pMatrix.prepend(t.sceneTransform);this._pMatrix.transformVectors(e,this._pLocalFrustum);p=h=this._pLocalFrustum[0];l=u=this._pLocalFrustum[1];this._pMaxZ=this._pLocalFrustum[2];c=3;while(c<24){n=this._pLocalFrustum[c];o=this._pLocalFrustum[c+1];a=this._pLocalFrustum[c+2];if(n<p)p=n;if(n>h)h=n;if(o<l)l=o;if(o>u)u=o;if(a>this._pMaxZ)this._pMaxZ=a;c+=3}this._pMinZ=1;var _=h-p;var d=u-l;var y=1/(this._pMaxZ-this._pMinZ);if(p<0)p-=this._pSnap;if(l<0)l-=this._pSnap;p=Math.floor(p/this._pSnap)*this._pSnap;l=Math.floor(l/this._pSnap)*this._pSnap;var b=2*this._pSnap;_=Math.floor(_/b+2)*b;d=Math.floor(d/b+2)*b;h=p+_;u=l+d;_=1/_;d=1/d;r[0]=2*_;r[5]=2*d;r[10]=y;r[12]=-(h+p)*_;r[13]=-(u+l)*d;r[14]=-this._pMinZ*y;r[15]=1;r[1]=r[2]=r[3]=r[4]=r[6]=r[7]=r[8]=r[9]=r[11]=0;i.copyRawDataFrom(r)};return e}(a);e.exports=p},{"awayjs-core/lib/geom/Matrix3D":undefined,"awayjs-core/lib/projections/FreeMatrixProjection":undefined,"awayjs-display/lib/entities/Camera":"awayjs-display/lib/entities/Camera","awayjs-display/lib/materials/shadowmappers/ShadowMapperBase":"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase"}],"awayjs-display/lib/materials/shadowmappers/NearDirectionalShadowMapper":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper");var n=function(t){r(e,t);function e(e){if(e===void 0){e=.5}t.call(this);this.coverageRatio=e}Object.defineProperty(e.prototype,"coverageRatio",{get:function(){return this._coverageRatio},set:function(t){if(t>1)t=1;else if(t<0)t=0;this._coverageRatio=t},enumerable:true,configurable:true});e.prototype.pUpdateDepthProjection=function(t){var e=t.projection.frustumCorners;for(var i=0;i<12;++i){var r=e[i];this._pLocalFrustum[i]=r;this._pLocalFrustum[i+12]=r+(e[i+12]-r)*this._coverageRatio}this.pUpdateProjectionFromFrustumCorners(t,this._pLocalFrustum,this._pMatrix);this._pOverallDepthProjection.matrix=this._pMatrix};return e}(s);e.exports=n},{"awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper":"awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper"}],"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase":[function(t,e,i){var r=t("awayjs-core/lib/errors/AbstractMethodError");var s=t("awayjs-display/lib/traverse/ShadowCasterCollector");var n=t("awayjs-core/lib/textures/RenderTexture");var o=function(){function t(){this._pDepthMapSize=2048;this._autoUpdateShadows=true;this._pCasterCollector=this.pCreateCasterCollector()}t.prototype.pCreateCasterCollector=function(){return new s};Object.defineProperty(t.prototype,"autoUpdateShadows",{get:function(){return this._autoUpdateShadows},set:function(t){this._autoUpdateShadows=t},enumerable:true,configurable:true});t.prototype.updateShadows=function(){this._iShadowsInvalid=true};t.prototype.iSetDepthMap=function(t){if(this._depthMap==t)return;if(this._depthMap&&!this._explicitDepthMap)this._depthMap.dispose();this._depthMap=t;if(this._depthMap){this._explicitDepthMap=true;this._pDepthMapSize=this._depthMap.size}else{this._explicitDepthMap=false}};Object.defineProperty(t.prototype,"light",{get:function(){return this._pLight},set:function(t){this._pLight=t},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"depthMap",{get:function(){if(!this._depthMap)this._depthMap=this.pCreateDepthTexture();return this._depthMap},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"depthMapSize",{get:function(){return this._pDepthMapSize},set:function(t){if(t==this._pDepthMapSize)return;this._pSetDepthMapSize(t)},enumerable:true,configurable:true});t.prototype.dispose=function(){this._pCasterCollector=null;if(this._depthMap&&!this._explicitDepthMap)this._depthMap.dispose();this._depthMap=null};t.prototype.pCreateDepthTexture=function(){return new n(this._pDepthMapSize,this._pDepthMapSize)};t.prototype.iRenderDepthMap=function(t,e){this._iShadowsInvalid=false;this.pUpdateDepthProjection(t.camera);if(!this._depthMap)this._depthMap=this.pCreateDepthTexture();this.pDrawDepthMap(this._depthMap,t.scene,e)};t.prototype.pUpdateDepthProjection=function(t){throw new r};t.prototype.pDrawDepthMap=function(t,e,i){throw new r};t.prototype._pSetDepthMapSize=function(t){this._pDepthMapSize=t;if(this._explicitDepthMap){throw Error("Cannot set depth map size for the current renderer.")}else if(this._depthMap){this._depthMap.dispose();this._depthMap=null}};return t}();e.exports=o},{"awayjs-core/lib/errors/AbstractMethodError":undefined,"awayjs-core/lib/textures/RenderTexture":undefined,"awayjs-display/lib/traverse/ShadowCasterCollector":"awayjs-display/lib/traverse/ShadowCasterCollector"}],"awayjs-display/lib/partition/CameraNode":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/partition/EntityNode");var n=function(t){r(e,t);function e(e,i,r){t.call(this,e,i,r)}e.prototype.acceptTraverser=function(t){};e.id="cameraNode";return e}(s);e.exports=n},{"awayjs-display/lib/partition/EntityNode":"awayjs-display/lib/partition/EntityNode"}],"awayjs-display/lib/partition/DirectionalLightNode":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/partition/EntityNode");var n=function(t){r(e,t);function e(e,i,r){t.call(this,e,i,r);this._directionalLight=i}e.prototype.acceptTraverser=function(t){if(t.enterNode(this))t.applyDirectionalLight(this._directionalLight)};e.prototype.isCastingShadow=function(){return false};e.id="directionalLightNode";return e}(s);e.exports=n},{"awayjs-display/lib/partition/EntityNode":"awayjs-display/lib/partition/EntityNode"}],"awayjs-display/lib/partition/EntityNode":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/geom/Vector3D");var n=t("awayjs-display/lib/bounds/AxisAlignedBoundingBox");var o=t("awayjs-display/lib/bounds/BoundingSphere");var a=t("awayjs-display/lib/bounds/BoundsType");var p=t("awayjs-display/lib/bounds/NullBounds");var l=t("awayjs-display/lib/partition/NodeBase");var h=function(t){r(e,t);function e(e,i,r){t.call(this);this._pool=e;this._entity=i;this._partition=r;this._iNumEntities=1;this.updateBounds();this.debugVisible=this._entity.debugVisible}Object.defineProperty(e.prototype,"entity",{get:function(){return this._entity},enumerable:true,configurable:true});e.prototype.removeFromParent=function(){if(this._iParent)this._iParent.iRemoveNode(this);this._iParent=null};e.prototype.isCastingShadow=function(){return this.entity.castsShadows};e.prototype.isInFrustum=function(t,e){if(!this._entity._iIsVisible())return false;return this._bounds.isInFrustum(t,e)};e.prototype.acceptTraverser=function(t){if(t.enterNode(this)){t.applyEntity(this._entity);if(this._pImplicitDebugVisible&&t.isEntityCollector)t.applyEntity(this._pDebugEntity)}};e.prototype.isIntersectingRay=function(t,e){if(!this._entity._iIsVisible())return false;var i=this._entity._iPickingCollisionVO;i.localRayPosition=this._entity.inverseSceneTransform.transformVector(t);i.localRayDirection=this._entity.inverseSceneTransform.deltaTransformVector(e);if(!i.localNormal)i.localNormal=new s;var r=this._bounds.rayIntersection(i.localRayPosition,i.localRayDirection,i.localNormal);if(r<0)return false;i.rayEntryDistance=r;i.rayPosition=t;i.rayDirection=e;i.rayOriginIsInsideBounds=r==0;return true};e.prototype._pCreateDebugEntity=function(){return this._bounds.boundsPrimitive};e.prototype.invalidatePartition=function(){this._bounds.invalidate();this._partition.iMarkForUpdate(this)};e.prototype.updateBounds=function(){if(this._entity.boundsType==a.AXIS_ALIGNED_BOX)this._bounds=new n(this._entity);else if(this._entity.boundsType==a.SPHERE)this._bounds=new o(this._entity);else if(this._entity.boundsType==a.NULL)this._bounds=new p;this.updateDebugEntity()};e.id="entityNode";return e}(l);e.exports=h},{"awayjs-core/lib/geom/Vector3D":undefined,"awayjs-display/lib/bounds/AxisAlignedBoundingBox":"awayjs-display/lib/bounds/AxisAlignedBoundingBox","awayjs-display/lib/bounds/BoundingSphere":"awayjs-display/lib/bounds/BoundingSphere","awayjs-display/lib/bounds/BoundsType":"awayjs-display/lib/bounds/BoundsType","awayjs-display/lib/bounds/NullBounds":"awayjs-display/lib/bounds/NullBounds","awayjs-display/lib/partition/NodeBase":"awayjs-display/lib/partition/NodeBase"}],"awayjs-display/lib/partition/LightProbeNode":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/partition/EntityNode");var n=function(t){r(e,t);function e(e,i,r){t.call(this,e,i,r);this._lightProbe=i}e.prototype.acceptTraverser=function(t){if(t.enterNode(this))t.applyLightProbe(this._lightProbe)};e.prototype.isCastingShadow=function(){return false};e.id="lightProbeNode";return e}(s);e.exports=n},{"awayjs-display/lib/partition/EntityNode":"awayjs-display/lib/partition/EntityNode"}],"awayjs-display/lib/partition/NodeBase":[function(t,e,i){var r=t("awayjs-core/lib/errors/AbstractMethodError");var s=function(){function t(){this._pNumChildNodes=0;this._iNumEntities=0;this._pChildNodes=new Array}Object.defineProperty(t.prototype,"debugVisible",{get:function(){return this._explicitDebugVisible},set:function(t){if(this._explicitDebugVisible==t)return;this._explicitDebugVisible=t;this._iUpdateImplicitDebugVisible(this._iParent?this._iParent.debugChildrenVisible:false)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"debugChildrenVisible",{get:function(){return this._debugChildrenVisible},set:function(t){if(this._debugChildrenVisible==t)return;this._debugChildrenVisible=t;for(var e=0;e<this._pNumChildNodes;++e)this._pChildNodes[e]._iUpdateImplicitDebugVisible(this._debugChildrenVisible)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"parent",{get:function(){return this._iParent},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"_pNumEntities",{get:function(){return this._iNumEntities},enumerable:true,configurable:true});t.prototype.isInFrustum=function(t,e){return true};t.prototype.isIntersectingRay=function(t,e){return true};t.prototype.isCastingShadow=function(){return true};t.prototype.findPartitionForEntity=function(t){return this};t.prototype.acceptTraverser=function(t){if(this._pNumEntities==0&&!this._pImplicitDebugVisible)return;if(t.enterNode(this)){var e=0;while(e<this._pNumChildNodes)this._pChildNodes[e++].acceptTraverser(t);if(this._pImplicitDebugVisible&&t.isEntityCollector)t.applyEntity(this._pDebugEntity)}};t.prototype.applyDebugEntity=function(t){if(this._pDebugEntity==null)this._pDebugEntity=this._pCreateDebugEntity();t.applyEntity(this._pDebugEntity)};t.prototype.iAddNode=function(t){t._iParent=this;this._iNumEntities+=t._pNumEntities;this._pChildNodes[this._pNumChildNodes++]=t;t._iUpdateImplicitDebugVisible(this.debugChildrenVisible);var e=t._pNumEntities;t=this;do{t._iNumEntities+=e}while((t=t._iParent)!=null)};t.prototype.iRemoveNode=function(t){var e=this._pChildNodes.indexOf(t);this._pChildNodes[e]=this._pChildNodes[--this._pNumChildNodes];this._pChildNodes.pop();t._iUpdateImplicitDebugVisible(false);var i=t._pNumEntities;t=this;do{t._pNumEntities-=i}while((t=t._iParent)!=null)};t.prototype._iUpdateImplicitDebugVisible=function(t){if(this._pImplicitDebugVisible==this._explicitDebugVisible||t)return;this._pImplicitDebugVisible=this._explicitDebugVisible||t;for(var e=0;e<this._pNumChildNodes;++e)this._pChildNodes[e]._iUpdateImplicitDebugVisible(this._debugChildrenVisible);if(this._pImplicitDebugVisible){this._pDebugEntity=this._pCreateDebugEntity()}else{this._pDebugEntity=null}};t.prototype.updateDebugEntity=function(){if(this._pImplicitDebugVisible){this._pDebugEntity=this._pCreateDebugEntity()}};t.prototype._pCreateDebugEntity=function(){throw new r};return t}();e.exports=s},{"awayjs-core/lib/errors/AbstractMethodError":undefined}],"awayjs-display/lib/partition/NullNode":[function(t,e,i){var r=function(){function t(){}return t}();e.exports=r},{}],"awayjs-display/lib/partition/Partition":[function(t,e,i){var r=t("awayjs-display/lib/partition/CameraNode");var s=t("awayjs-display/lib/partition/DirectionalLightNode");var n=t("awayjs-display/lib/partition/EntityNode");var o=t("awayjs-display/lib/partition/LightProbeNode");var a=t("awayjs-display/lib/partition/PointLightNode");var p=t("awayjs-display/lib/partition/SkyboxNode");var l=t("awayjs-display/lib/partition/NullNode");var h=t("awayjs-display/lib/pool/EntityNodePool");var u=function(){function t(t){this._updatesMade=false;this._rootNode=t||new l;this._cameraNodePool=new h(r,this);this._directionalLightNodePool=new h(s,this);this._entityNodePool=new h(n,this);this._lightProbeNodePool=new h(o,this);this._pointLightNodePool=new h(a,this);this._skyboxNodePool=new h(p,this)}Object.defineProperty(t.prototype,"rootNode",{get:function(){return this._rootNode},enumerable:true,configurable:true});t.prototype.traverse=function(t){if(this._updatesMade)this.updateEntities();this._rootNode.acceptTraverser(t)};t.prototype.iMarkForUpdate=function(t){var e=this._updateQueue;while(e){if(t==e)return;e=e._iUpdateQueueNext}t._iUpdateQueueNext=this._updateQueue;this._updateQueue=t;this._updatesMade=true};t.prototype.iRemoveEntity=function(t){var e;t.removeFromParent();if(t==this._updateQueue){this._updateQueue=t._iUpdateQueueNext}else{e=this._updateQueue;while(e&&e._iUpdateQueueNext!=t)e=e._iUpdateQueueNext;if(e)e._iUpdateQueueNext=t._iUpdateQueueNext}t._iUpdateQueueNext=null;if(!this._updateQueue)this._updatesMade=false};t.prototype.updateEntities=function(){var t=this._updateQueue;var e;var i;this._updateQueue=null;this._updatesMade=false;do{e=this._rootNode.findPartitionForEntity(t.entity);if(t.parent!=e){if(t)t.removeFromParent();e.iAddNode(t)}i=t._iUpdateQueueNext;t._iUpdateQueueNext=null;t.entity._iInternalUpdate()}while((t=i)!=null)};t.prototype._iRegisterCamera=function(t){this.iMarkForUpdate(this._cameraNodePool.getItem(t))};t.prototype._iRegisterDirectionalLight=function(t){this.iMarkForUpdate(this._directionalLightNodePool.getItem(t))};t.prototype._iRegisterEntity=function(t){this.iMarkForUpdate(this._entityNodePool.getItem(t))};t.prototype._iRegisterLightProbe=function(t){this.iMarkForUpdate(this._lightProbeNodePool.getItem(t))};t.prototype._iRegisterPointLight=function(t){this.iMarkForUpdate(this._pointLightNodePool.getItem(t))};t.prototype._iRegisterSkybox=function(t){this.iMarkForUpdate(this._skyboxNodePool.getItem(t))};t.prototype._iUnregisterCamera=function(t){this.iRemoveEntity(this._cameraNodePool.disposeItem(t))};t.prototype._iUnregisterDirectionalLight=function(t){this.iRemoveEntity(this._directionalLightNodePool.disposeItem(t))};t.prototype._iUnregisterEntity=function(t){this.iRemoveEntity(this._entityNodePool.disposeItem(t))};t.prototype._iUnregisterLightProbe=function(t){this.iRemoveEntity(this._lightProbeNodePool.disposeItem(t))};t.prototype._iUnregisterPointLight=function(t){this.iRemoveEntity(this._pointLightNodePool.disposeItem(t))};t.prototype._iUnregisterSkybox=function(t){this.iRemoveEntity(this._skyboxNodePool.disposeItem(t))};return t}();e.exports=u},{"awayjs-display/lib/partition/CameraNode":"awayjs-display/lib/partition/CameraNode","awayjs-display/lib/partition/DirectionalLightNode":"awayjs-display/lib/partition/DirectionalLightNode","awayjs-display/lib/partition/EntityNode":"awayjs-display/lib/partition/EntityNode","awayjs-display/lib/partition/LightProbeNode":"awayjs-display/lib/partition/LightProbeNode","awayjs-display/lib/partition/NullNode":"awayjs-display/lib/partition/NullNode","awayjs-display/lib/partition/PointLightNode":"awayjs-display/lib/partition/PointLightNode","awayjs-display/lib/partition/SkyboxNode":"awayjs-display/lib/partition/SkyboxNode","awayjs-display/lib/pool/EntityNodePool":"awayjs-display/lib/pool/EntityNodePool"}],"awayjs-display/lib/partition/PointLightNode":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];
function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/partition/EntityNode");var n=function(t){r(e,t);function e(e,i,r){t.call(this,e,i,r);this._pointLight=i}e.prototype.acceptTraverser=function(t){if(t.enterNode(this))t.applyPointLight(this._pointLight)};e.prototype.isCastingShadow=function(){return false};e.id="pointLightNode";return e}(s);e.exports=n},{"awayjs-display/lib/partition/EntityNode":"awayjs-display/lib/partition/EntityNode"}],"awayjs-display/lib/partition/SkyboxNode":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/partition/EntityNode");var n=function(t){r(e,t);function e(e,i,r){t.call(this,e,i,r);this._skyBox=i}e.prototype.acceptTraverser=function(t){if(t.enterNode(this))t.applySkybox(this._skyBox)};e.prototype.isInFrustum=function(t,e){if(!this._skyBox._iIsVisible)return false;return true};e.id="skyboxNode";return e}(s);e.exports=n},{"awayjs-display/lib/partition/EntityNode":"awayjs-display/lib/partition/EntityNode"}],"awayjs-display/lib/pick/IPicker":[function(t,e,i){},{}],"awayjs-display/lib/pick/IPickingCollider":[function(t,e,i){},{}],"awayjs-display/lib/pick/PickingCollisionVO":[function(t,e,i){var r=function(){function t(t){this.displayObject=t}return t}();e.exports=r},{}],"awayjs-display/lib/pick/RaycastPicker":[function(t,e,i){var r=t("awayjs-core/lib/geom/Vector3D");var s=t("awayjs-display/lib/traverse/RaycastCollector");var n=function(){function t(t){if(t===void 0){t=false}this._ignoredEntities=[];this._onlyMouseEnabled=true;this._numEntities=0;this._raycastCollector=new s;this._findClosestCollision=t;this._entities=new Array}Object.defineProperty(t.prototype,"onlyMouseEnabled",{get:function(){return this._onlyMouseEnabled},set:function(t){this._onlyMouseEnabled=t},enumerable:true,configurable:true});t.prototype.getViewCollision=function(t,e,i){var r=i.unproject(t,e,0);var s=i.unproject(t,e,1).subtract(r);return this.getSceneCollision(r,s,i.scene)};t.prototype.getSceneCollision=function(t,e,i){this._raycastCollector.clear();this._raycastCollector.rayPosition=t;this._raycastCollector.rayDirection=e;i.traversePartitions(this._raycastCollector);this._numEntities=0;var r=this._raycastCollector.entityHead;var s;while(r){if(!this.isIgnored(s=r.entity))this._entities[this._numEntities++]=s;r=r.next}if(!this._numEntities)return null;return this.getPickingCollisionVO(this._raycastCollector)};t.prototype.setIgnoreList=function(t){this._ignoredEntities=t};t.prototype.isIgnored=function(t){if(this._onlyMouseEnabled&&!t._iIsMouseEnabled())return true;var e=this._ignoredEntities.length;for(var i=0;i<e;i++)if(this._ignoredEntities[i]==t)return true;return false};t.prototype.sortOnNearT=function(t,e){return t._iPickingCollisionVO.rayEntryDistance>e._iPickingCollisionVO.rayEntryDistance?1:-1};t.prototype.getPickingCollisionVO=function(t){this._entities.length=this._numEntities;this._entities=this._entities.sort(this.sortOnNearT);var e=Number.MAX_VALUE;var i;var r;var s;var n;for(n=0;n<this._numEntities;++n){s=this._entities[n];r=s._iPickingCollisionVO;if(s.pickingCollider){if((i==null||r.rayEntryDistance<i.rayEntryDistance)&&s._iTestCollision(e,this._findClosestCollision)){e=r.rayEntryDistance;i=r;if(!this._findClosestCollision){this.updateLocalPosition(r);return r}}}else if(i==null||r.rayEntryDistance<i.rayEntryDistance){if(!r.rayOriginIsInsideBounds){this.updateLocalPosition(r);return r}}}return i};t.prototype.updateLocalPosition=function(t){var e=t.localPosition==null?t.localPosition=new r:t.localPosition;var i=t.localRayDirection;var s=t.localRayPosition;var n=t.rayEntryDistance;e.x=s.x+n*i.x;e.y=s.y+n*i.y;e.z=s.z+n*i.z};t.prototype.dispose=function(){};return t}();e.exports=n},{"awayjs-core/lib/geom/Vector3D":undefined,"awayjs-display/lib/traverse/RaycastCollector":"awayjs-display/lib/traverse/RaycastCollector"}],"awayjs-display/lib/pool/CSSBillboardRenderable":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/pool/CSSRenderableBase");var n=function(t){r(e,t);function e(e,i){t.call(this,e,i,i);var r=document.createElement("div");r.onmousedown=function(t){return false};this.htmlElement=r;var s=r.style;s.position="absolute";s.transformOrigin=s["-webkit-transform-origin"]=s["-moz-transform-origin"]=s["-o-transform-origin"]=s["-ms-transform-origin"]="0% 0%";var n=document.createElement("div");r.appendChild(n);n.className="material"+i.material.id}e.id="billboard";return e}(s);e.exports=n},{"awayjs-display/lib/pool/CSSRenderableBase":"awayjs-display/lib/pool/CSSRenderableBase"}],"awayjs-display/lib/pool/CSSLineSegmentRenderable":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/pool/CSSRenderableBase");var n=function(t){r(e,t);function e(e,i){t.call(this,e,i,i);var r=document.createElement("div");r.onmousedown=function(t){return false};this.htmlElement=r;var s=r.style;s.position="absolute";s.transformOrigin=s["-webkit-transform-origin"]=s["-moz-transform-origin"]=s["-o-transform-origin"]=s["-ms-transform-origin"]="0% 0%";var n=document.createElement("div");r.appendChild(n);n.className="material"+i.material.id}e.id="lineSegment";return e}(s);e.exports=n},{"awayjs-display/lib/pool/CSSRenderableBase":"awayjs-display/lib/pool/CSSRenderableBase"}],"awayjs-display/lib/pool/CSSRenderableBase":[function(t,e,i){var r=function(){function t(t,e,i){this._pool=t;this.sourceEntity=e;this.renderableOwner=i}t.prototype.dispose=function(){this._pool.disposeItem(this.renderableOwner)};t.prototype.invalidateGeometry=function(){};t.prototype.invalidateIndexData=function(){};t.prototype.invalidateVertexData=function(t){};return t}();e.exports=r},{}],"awayjs-display/lib/pool/CSSSkyboxRenderable":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/pool/CSSRenderableBase");var n=function(t){r(e,t);function e(e,i){t.call(this,e,i,i);var r=document.createElement("div");r.onmousedown=function(t){return false};this.htmlElement=r;var s=r.style;var n;s.position="absolute";s.transformOrigin=s["-webkit-transform-origin"]=s["-moz-transform-origin"]=s["-o-transform-origin"]=s["-ms-transform-origin"]="0% 0%";n=document.createElement("div");r.appendChild(n);n.className="material"+i.id}e.id="skybox";return e}(s);e.exports=n},{"awayjs-display/lib/pool/CSSRenderableBase":"awayjs-display/lib/pool/CSSRenderableBase"}],"awayjs-display/lib/pool/EntityListItemPool":[function(t,e,i){var r=t("awayjs-display/lib/pool/EntityListItem");var s=function(){function t(){this._index=0;this._poolSize=0;this._pool=new Array}t.prototype.getItem=function(){var t;if(this._index==this._poolSize){t=new r;this._pool[this._index++]=t;++this._poolSize}else{t=this._pool[this._index++]}return t};t.prototype.freeAll=function(){this._index=0};t.prototype.dispose=function(){this._pool.length=0};return t}();e.exports=s},{"awayjs-display/lib/pool/EntityListItem":"awayjs-display/lib/pool/EntityListItem"}],"awayjs-display/lib/pool/EntityListItem":[function(t,e,i){var r=function(){function t(){}return t}();e.exports=r},{}],"awayjs-display/lib/pool/EntityNodePool":[function(t,e,i){var r=function(){function t(t,e){this._entityNodePool=new Object;this._entityNodeClass=t;this._partition=e}t.prototype.getItem=function(t){return this._entityNodePool[t.id]||(this._entityNodePool[t.id]=t._iAddEntityNode(new this._entityNodeClass(this,t,this._partition)))};t.prototype.disposeItem=function(t){var e=this._entityNodePool[t.id];if(e){t._iRemoveEntityNode(e);this._entityNodePool[t.id]=null}return e};return t}();e.exports=r},{}],"awayjs-display/lib/pool/IEntityNodeClass":[function(t,e,i){},{}],"awayjs-display/lib/pool/IRenderObject":[function(t,e,i){},{}],"awayjs-display/lib/pool/IRenderablePool":[function(t,e,i){},{}],"awayjs-display/lib/pool/IRenderable":[function(t,e,i){},{}],"awayjs-display/lib/pool/IRendererPool":[function(t,e,i){},{}],"awayjs-display/lib/prefabs/PrefabBase":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/library/NamedAssetBase");var n=t("awayjs-core/lib/errors/AbstractMethodError");var o=function(t){r(e,t);function e(){t.call(this);this._pObjects=new Array}e.prototype.getNewObject=function(){var t=this._pCreateObject();this._pObjects.push(t);return t};e.prototype._pCreateObject=function(){throw new n};e.prototype._iValidate=function(){};return e}(s);e.exports=o},{"awayjs-core/lib/errors/AbstractMethodError":undefined,"awayjs-core/lib/library/NamedAssetBase":undefined}],"awayjs-display/lib/prefabs/PrimitiveCapsulePrefab":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/prefabs/PrimitivePrefabBase");var n=function(t){r(e,t);function e(e,i,r,s,n){if(e===void 0){e=50}if(i===void 0){i=100}if(r===void 0){r=16}if(s===void 0){s=15}if(n===void 0){n=true}t.call(this);this._numVertices=0;this._radius=e;this._height=i;this._segmentsW=r;this._segmentsH=s%2==0?s+1:s;this._yUp=n}Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"segmentsW",{get:function(){return this._segmentsW},set:function(t){this._segmentsW=t;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"segmentsH",{get:function(){return this._segmentsH},set:function(t){this._segmentsH=t%2==0?t+1:t;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"yUp",{get:function(){return this._yUp},set:function(t){this._yUp=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});e.prototype._pBuildGeometry=function(t,e){var i;var r;var s;var n;var o;var a;var p=0;var l=0;var h;var u,c,f,_;var d=0;if(e=="triangleSubGeometry"){var y=t;this._numVertices=(this._segmentsH+1)*(this._segmentsW+1);d=(this._segmentsH-1)*this._segmentsW*6;if(this._numVertices==y.numVertices){i=y.indices;r=y.positions;s=y.vertexNormals;n=y.vertexTangents}else{i=new Array(d);r=new Array(this._numVertices*3);s=new Array(this._numVertices*3);n=new Array(this._numVertices*3);this._pInvalidateUVs()}for(a=0;a<=this._segmentsH;++a){var b=Math.PI*a/this._segmentsH;var m=-this._radius*Math.cos(b);var g=this._radius*Math.sin(b);h=l;for(o=0;o<=this._segmentsW;++o){var v=2*Math.PI*o/this._segmentsW;var w=g*Math.cos(v);var j=a>this._segmentsH/2?this._height/2:-this._height/2;var P=g*Math.sin(v);var A=1/Math.sqrt(w*w+P*P+m*m);var O=Math.sqrt(P*P+w*w);if(this._yUp){f=0;_=O>.007?w/O:0;u=-m;c=P}else{f=O>.007?w/O:0;_=0;u=P;c=m}if(o==this._segmentsW){r[l]=r[h];r[l+1]=r[h+1];r[l+2]=r[h+2];s[l]=(s[h]+w*A)*.5;s[l+1]=(s[h+1]+u*A)*.5;s[l+2]=(s[h+2]+c*A)*.5;n[l]=(n[h]+(O>.007?-P/O:1))*.5;n[l+1]=(n[h+1]+f)*.5;n[l+2]=(n[h+2]+_)*.5}else{r[l]=w;r[l+1]=this._yUp?u-j:u;r[l+2]=this._yUp?c:c+j;s[l]=w*A;s[l+1]=u*A;s[l+2]=c*A;n[l]=O>.007?-P/O:1;n[l+1]=f;n[l+2]=_}if(o>0&&a>0){var D=(this._segmentsW+1)*a+o;var E=(this._segmentsW+1)*a+o-1;var S=(this._segmentsW+1)*(a-1)+o-1;var C=(this._segmentsW+1)*(a-1)+o;if(a==this._segmentsH){r[l]=r[h];r[l+1]=r[h+1];r[l+2]=r[h+2];i[p++]=D;i[p++]=S;i[p++]=C}else if(a==1){i[p++]=D;i[p++]=E;i[p++]=S}else{i[p++]=D;i[p++]=E;i[p++]=S;i[p++]=D;i[p++]=S;i[p++]=C}}l+=3}}y.updateIndices(i);y.updatePositions(r);y.updateVertexNormals(s);y.updateVertexTangents(n)}else if(e=="lineSubGeometry"){}};e.prototype._pBuildUVs=function(t,e){var i,r;var s;if(e=="triangleSubGeometry"){var n=t;if(n.uvs&&this._numVertices==n.numVertices){s=n.uvs}else{s=new Array(this._numVertices*2)}var o=0;for(r=0;r<=this._segmentsH;++r){for(i=0;i<=this._segmentsW;++i){s[o++]=i/this._segmentsW*n.scaleU;s[o++]=r/this._segmentsH*n.scaleV}}n.updateUVs(s)}else if(e=="lineSubGeometry"){}};return e}(s);e.exports=n},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":"awayjs-display/lib/prefabs/PrimitivePrefabBase"}],"awayjs-display/lib/prefabs/PrimitiveConePrefab":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/prefabs/PrimitiveCylinderPrefab");var n=function(t){r(e,t);function e(e,i,r,s,n,o){if(e===void 0){e=50}if(i===void 0){i=100}if(r===void 0){r=16}if(s===void 0){s=1}if(n===void 0){n=true}if(o===void 0){o=true}t.call(this,0,e,i,r,s,false,n,true,o)}Object.defineProperty(e.prototype,"radius",{get:function(){return this._pBottomRadius},set:function(t){this._pBottomRadius=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});return e}(s);e.exports=n},{"awayjs-display/lib/prefabs/PrimitiveCylinderPrefab":"awayjs-display/lib/prefabs/PrimitiveCylinderPrefab"}],"awayjs-display/lib/prefabs/PrimitiveCubePrefab":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/prefabs/PrimitivePrefabBase");var n=function(t){r(e,t);function e(e,i,r,s,n,o,a){if(e===void 0){e=100}if(i===void 0){i=100}if(r===void 0){r=100}if(s===void 0){s=1}if(n===void 0){n=1}if(o===void 0){o=1}if(a===void 0){a=true}t.call(this);this._width=e;this._height=i;this._depth=r;this._segmentsW=s;this._segmentsH=n;this._segmentsD=o;this._tile6=a}Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"depth",{get:function(){return this._depth},set:function(t){this._depth=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"tile6",{get:function(){return this._tile6},set:function(t){this._tile6=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"segmentsW",{get:function(){return this._segmentsW},set:function(t){this._segmentsW=t;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"segmentsH",{get:function(){return this._segmentsH},set:function(t){this._segmentsH=t;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"segmentsD",{get:function(){return this._segmentsD},set:function(t){this._segmentsD=t;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});e.prototype._pBuildGeometry=function(t,e){var i;var r;var s;var n;var o,a,p,l;var h,u,c=0;var f,_;var d,y,b;var m,g,v;var w;var j;var P;d=this._width/2;y=this._height/2;b=this._depth/2;if(e=="triangleSubGeometry"){var A=t;P=((this._segmentsW+1)*(this._segmentsH+1)+(this._segmentsW+1)*(this._segmentsD+1)+(this._segmentsH+1)*(this._segmentsD+1))*2;j=(this._segmentsW*this._segmentsH+this._segmentsW*this._segmentsD+this._segmentsH*this._segmentsD)*12;if(P==A.numVertices&&A.indices!=null){i=A.indices;r=A.positions;s=A.vertexNormals;n=A.vertexTangents}else{i=new Array(j);r=new Array(P*3);s=new Array(P*3);n=new Array(P*3);this._pInvalidateUVs()}f=0;_=0;m=this._width/this._segmentsW;g=this._height/this._segmentsH;v=this._depth/this._segmentsD;for(h=0;h<=this._segmentsW;h++){w=-d+h*m;for(u=0;u<=this._segmentsH;u++){r[f]=w;r[f+1]=-y+u*g;r[f+2]=-b;s[f]=0;s[f+1]=0;s[f+2]=-1;n[f]=1;n[f+1]=0;n[f+2]=0;f+=3;r[f]=w;r[f+1]=-y+u*g;r[f+2]=b;s[f]=0;s[f+1]=0;s[f+2]=1;n[f]=-1;n[f+1]=0;n[f+2]=0;f+=3;if(h&&u){o=2*((h-1)*(this._segmentsH+1)+(u-1));a=2*(h*(this._segmentsH+1)+(u-1));p=o+2;l=a+2;i[_++]=o;i[_++]=p;i[_++]=l;i[_++]=o;i[_++]=l;i[_++]=a;i[_++]=a+1;i[_++]=l+1;i[_++]=p+1;i[_++]=a+1;i[_++]=p+1;i[_++]=o+1}}}c+=2*(this._segmentsW+1)*(this._segmentsH+1);for(h=0;h<=this._segmentsW;h++){w=-d+h*m;for(u=0;u<=this._segmentsD;u++){r[f]=w;r[f+1]=y;r[f+2]=-b+u*v;s[f]=0;s[f+1]=1;s[f+2]=0;n[f]=1;n[f+1]=0;n[f+2]=0;f+=3;r[f]=w;r[f+1]=-y;r[f+2]=-b+u*v;s[f]=0;s[f+1]=-1;s[f+2]=0;n[f]=1;n[f+1]=0;n[f+2]=0;f+=3;if(h&&u){o=c+2*((h-1)*(this._segmentsD+1)+(u-1));a=c+2*(h*(this._segmentsD+1)+(u-1));p=o+2;l=a+2;i[_++]=o;i[_++]=p;i[_++]=l;i[_++]=o;i[_++]=l;i[_++]=a;i[_++]=a+1;i[_++]=l+1;i[_++]=p+1;i[_++]=a+1;i[_++]=p+1;i[_++]=o+1}}}c+=2*(this._segmentsW+1)*(this._segmentsD+1);for(h=0;h<=this._segmentsD;h++){w=b-h*v;for(u=0;u<=this._segmentsH;u++){r[f]=-d;r[f+1]=-y+u*g;r[f+2]=w;s[f]=-1;s[f+1]=0;s[f+2]=0;n[f]=0;n[f+1]=0;n[f+2]=-1;f+=3;r[f]=d;r[f+1]=-y+u*g;r[f+2]=w;s[f]=1;s[f+1]=0;s[f+2]=0;n[f]=0;n[f+1]=0;n[f+2]=1;f+=3;if(h&&u){o=c+2*((h-1)*(this._segmentsH+1)+(u-1));a=c+2*(h*(this._segmentsH+1)+(u-1));p=o+2;l=a+2;i[_++]=o;i[_++]=p;i[_++]=l;i[_++]=o;i[_++]=l;i[_++]=a;i[_++]=a+1;i[_++]=l+1;i[_++]=p+1;i[_++]=a+1;i[_++]=p+1;i[_++]=o+1}}}A.updateIndices(i);A.updatePositions(r);A.updateVertexNormals(s);A.updateVertexTangents(n)}else if(e=="lineSubGeometry"){var O=t;var D=this._segmentsH*4+this._segmentsW*4+this._segmentsD*4;var E;var S;var C;if(O.indices!=null&&D==O.numSegments){E=O.startPositions;S=O.endPositions;C=O.thickness}else{E=new Array(D*3);S=new Array(D*3);C=new Array(D)}f=0;_=0;for(h=0;h<this._segmentsH;++h){E[f]=-d;E[f+1]=h*this._height/this._segmentsH-y;E[f+2]=-b;S[f]=d;S[f+1]=h*this._height/this._segmentsH-y;S[f+2]=-b;C[_++]=1;f+=3;E[f]=-d;E[f+1]=y-h*this._height/this._segmentsH;E[f+2]=b;S[f]=d;S[f+1]=y-h*this._height/this._segmentsH;S[f+2]=b;C[_++]=1;f+=3}for(h=0;h<this._segmentsW;++h){E[f]=h*this._width/this._segmentsW-d;E[f+1]=-y;E[f+2]=-b;S[f]=h*this._width/this._segmentsW-d;S[f+1]=y;S[f+2]=-b;C[_++]=1;f+=3;E[f]=d-h*this._width/this._segmentsW;E[f+1]=-y;E[f+2]=b;S[f]=d-h*this._width/this._segmentsW;S[f+1]=y;S[f+2]=b;C[_++]=1;f+=3}for(h=0;h<this._segmentsH;++h){E[f]=-d;E[f+1]=h*this._height/this._segmentsH-y;E[f+2]=-b;S[f]=-d;S[f+1]=h*this._height/this._segmentsH-y;S[f+2]=b;C[_++]=1;f+=3;E[f]=d;E[f+1]=y-h*this._height/this._segmentsH;E[f+2]=-b;S[f]=d;S[f+1]=y-h*this._height/this._segmentsH;S[f+2]=b;C[_++]=1;f+=3}for(h=0;h<this._segmentsD;++h){E[f]=d;E[f+1]=-y;E[f+2]=h*this._depth/this._segmentsD-b;S[f]=d;S[f+1]=y;S[f+2]=h*this._depth/this._segmentsD-b;C[_++]=1;f+=3;E[f]=-d;E[f+1]=-y;E[f+2]=b-h*this._depth/this._segmentsD;S[f]=-d;S[f+1]=y;S[f+2]=b-h*this._depth/this._segmentsD;C[_++]=1;f+=3}for(h=0;h<this._segmentsD;++h){E[f]=-d;E[f+1]=-y;E[f+2]=b-h*this._depth/this._segmentsD;S[f]=d;S[f+1]=-y;S[f+2]=b-h*this._depth/this._segmentsD;C[_++]=1;f+=3;E[f]=-d;E[f+1]=y;E[f+2]=h*this._depth/this._segmentsD-b;S[f]=d;S[f+1]=y;S[f+2]=h*this._depth/this._segmentsD-b;C[_++]=1;f+=3}for(h=0;h<this._segmentsW;++h){E[f]=d-h*this._width/this._segmentsW;E[f+1]=-y;E[f+2]=-b;S[f]=d-h*this._width/this._segmentsW;S[f+1]=-y;S[f+2]=b;C[_++]=1;f+=3;E[f]=h*this._width/this._segmentsW-d;E[f+1]=y;E[f+2]=-b;S[f]=h*this._width/this._segmentsW-d;S[f+1]=y;S[f+2]=b;C[_++]=1;f+=3}O.updatePositions(E,S);O.updateThickness(C)}};e.prototype._pBuildUVs=function(t,e){var i,r,s;var n;var o,a;var p,l;var h,u;var c,f;var _,d;var y;if(e=="triangleSubGeometry"){y=((this._segmentsW+1)*(this._segmentsH+1)+(this._segmentsW+1)*(this._segmentsD+1)+(this._segmentsH+1)*(this._segmentsD+1))*2;var b=t;if(y==b.numVertices&&b.uvs!=null){n=b.uvs}else{n=new Array(y*2)}if(this._tile6){o=p=1/3;a=l=1/2}else{o=a=1;p=l=0}s=0;h=1*p;u=1*l;c=2*p;f=0*l;_=o/this._segmentsW;d=a/this._segmentsH;for(i=0;i<=this._segmentsW;i++){for(r=0;r<=this._segmentsH;r++){n[s++]=(h+i*_)*b.scaleU;n[s++]=(u+(a-r*d))*b.scaleV;n[s++]=(c+(o-i*_))*b.scaleU;n[s++]=(f+(a-r*d))*b.scaleV}}h=1*p;u=0*l;c=0*p;f=0*l;_=o/this._segmentsW;d=a/this._segmentsD;for(i=0;i<=this._segmentsW;i++){for(r=0;r<=this._segmentsD;r++){n[s++]=(h+i*_)*b.scaleU;n[s++]=(u+(a-r*d))*b.scaleV;n[s++]=(c+i*_)*b.scaleU;n[s++]=(f+r*d)*b.scaleV}}h=0*p;u=1*l;c=2*p;f=1*l;_=o/this._segmentsD;d=a/this._segmentsH;for(i=0;i<=this._segmentsD;i++){for(r=0;r<=this._segmentsH;r++){n[s++]=(h+i*_)*b.scaleU;n[s++]=(u+(a-r*d))*b.scaleV;n[s++]=(c+(o-i*_))*b.scaleU;n[s++]=(f+(a-r*d))*b.scaleV}}b.updateUVs(n)}else if(e=="lineSubGeometry"){}};return e}(s);e.exports=n},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":"awayjs-display/lib/prefabs/PrimitivePrefabBase"}],"awayjs-display/lib/prefabs/PrimitiveCylinderPrefab":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/prefabs/PrimitivePrefabBase");var n=function(t){r(e,t);function e(e,i,r,s,n,o,a,p,l){if(e===void 0){e=50}if(i===void 0){i=50}if(r===void 0){r=100}if(s===void 0){s=16}if(n===void 0){n=1}if(o===void 0){o=true}if(a===void 0){a=true}if(p===void 0){p=true}if(l===void 0){l=true}t.call(this);this._numVertices=0;this._topRadius=e;this._pBottomRadius=i;this._height=r;this._pSegmentsW=s;this._pSegmentsH=n;this._topClosed=o;this._bottomClosed=a;this._surfaceClosed=p;this._yUp=l}Object.defineProperty(e.prototype,"topRadius",{get:function(){return this._topRadius},set:function(t){this._topRadius=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"bottomRadius",{get:function(){return this._pBottomRadius},set:function(t){this._pBottomRadius=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"segmentsW",{get:function(){return this._pSegmentsW},set:function(t){this.setSegmentsW(t)},enumerable:true,configurable:true});e.prototype.setSegmentsW=function(t){this._pSegmentsW=t;this._pInvalidateGeometry();this._pInvalidateUVs()};Object.defineProperty(e.prototype,"segmentsH",{get:function(){return this._pSegmentsH},set:function(t){this.setSegmentsH(t)},enumerable:true,configurable:true});e.prototype.setSegmentsH=function(t){this._pSegmentsH=t;this._pInvalidateGeometry();this._pInvalidateUVs()};Object.defineProperty(e.prototype,"topClosed",{get:function(){return this._topClosed},set:function(t){this._topClosed=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"bottomClosed",{get:function(){return this._bottomClosed},set:function(t){this._bottomClosed=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"yUp",{get:function(){return this._yUp},set:function(t){this._yUp=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});e.prototype._pBuildGeometry=function(t,e){var i;var r;var s;var n;var o;var a;var p;var l;var h;var u;var c;var f;var _;var d;var y;var b;var m=0;var g;var v;var w=0;var j=0;var P=0;var A;var O;this._numVertices=0;var D=2*Math.PI/this._pSegmentsW;if(e=="triangleSubGeometry"){var E=t;if(this._surfaceClosed){this._numVertices+=(this._pSegmentsH+1)*(this._pSegmentsW+1);m+=this._pSegmentsH*this._pSegmentsW*6}if(this._topClosed){this._numVertices+=2*(this._pSegmentsW+1);m+=this._pSegmentsW*3}if(this._bottomClosed){this._numVertices+=2*(this._pSegmentsW+1);m+=this._pSegmentsW*3}if(this._numVertices==E.numVertices){i=E.indices;r=E.positions;s=E.vertexNormals;n=E.vertexTangents}else{i=new Array(m);r=new Array(this._numVertices*3);s=new Array(this._numVertices*3);n=new Array(this._numVertices*3);this._pInvalidateUVs()}u=0;c=0;if(this._topClosed&&this._topRadius>0){h=-.5*this._height;if(this._yUp){A=1;O=0;g=-h;v=0}else{A=0;O=-1;g=0;v=h}r[u]=0;r[u+1]=g;r[u+2]=v;s[u]=0;s[u+1]=A;s[u+2]=O;n[u]=1;n[u+1]=0;n[u+2]=0;u+=3;j+=1;for(o=0;o<=this._pSegmentsW;++o){_=o*D;p=this._topRadius*Math.cos(_);l=this._topRadius*Math.sin(_);if(this._yUp){g=-h;v=l}else{g=l;v=h}if(o==this._pSegmentsW){r[u]=r[w+3];r[u+1]=r[w+4];r[u+2]=r[w+5]}else{r[u]=p;r[u+1]=g;r[u+2]=v}s[u]=0;s[u+1]=A;s[u+2]=O;n[u]=1;n[u+1]=0;n[u+2]=0;u+=3;if(o>0){i[c++]=j-1;i[c++]=P;i[c++]=j}j+=1}}if(this._bottomClosed&&this._pBottomRadius>0){h=.5*this._height;w=j*3;P=j;if(this._yUp){A=-1;O=0;g=-h;v=0}else{A=0;O=1;g=0;v=h}if(o>0){r[u]=0;r[u+1]=g;r[u+2]=v;s[u]=0;s[u+1]=A;s[u+2]=O;n[u]=1;n[u+1]=0;n[u+2]=0;u+=3}j+=1;for(o=0;o<=this._pSegmentsW;++o){_=o*D;p=this._pBottomRadius*Math.cos(_);l=this._pBottomRadius*Math.sin(_);if(this._yUp){g=-h;v=l}else{g=l;v=h}if(o==this._pSegmentsW){r[u]=r[w+3];r[u+1]=r[w+4];r[u+2]=r[w+5]}else{r[u]=p;r[u+1]=g;r[u+2]=v}s[u]=0;s[u+1]=A;s[u+2]=O;n[u]=1;n[u+1]=0;n[u+2]=0;u+=3;if(o>0){i[c++]=j-1;i[c++]=j;i[c++]=P}j+=1}}d=this._pBottomRadius-this._topRadius;y=d/this._height;b=y==0?1:this._height/d;if(this._surfaceClosed){var S;var C;var T;var x;var N,I,M,R;for(a=0;a<=this._pSegmentsH;++a){f=this._topRadius-a/this._pSegmentsH*(this._topRadius-this._pBottomRadius);h=-(this._height/2)+a/this._pSegmentsH*this._height;w=j*3;for(o=0;o<=this._pSegmentsW;++o){_=o*D;p=f*Math.cos(_);l=f*Math.sin(_);N=b*Math.cos(_);I=b*Math.sin(_);if(this._yUp){A=0;O=-N;g=-h;v=l;M=y;R=I}else{A=-N;O=0;g=l;v=h;M=I;R=y}if(o==this._pSegmentsW){r[u]=r[w];r[u+1]=r[w+1];r[u+2]=r[w+2];s[u]=N;s[u+1]=y;s[u+2]=I;n[u]=I;n[u+1]=A;n[u+2]=O}else{r[u]=p;r[u+1]=g;r[u+2]=v;s[u]=N;s[u+1]=M;s[u+2]=R;n[u]=-I;n[u+1]=A;n[u+2]=O}u+=3;if(o>0&&a>0){S=j;C=j-1;T=C-this._pSegmentsW-1;x=S-this._pSegmentsW-1;i[c++]=S;i[c++]=C;i[c++]=T;i[c++]=S;i[c++]=T;i[c++]=x}j++}}}E.updateIndices(i);E.updatePositions(r);E.updateVertexNormals(s);E.updateVertexTangents(n)}else if(e=="lineSubGeometry"){var U=t;var B=(this._pSegmentsH+1)*this._pSegmentsW+this._pSegmentsW;var V;var L;var G;if(U.indices!=null&&B==U.numSegments){V=U.startPositions;L=U.endPositions;G=U.thickness}else{V=new Array(B*3);L=new Array(B*3);G=new Array(B)}u=0;c=0;for(a=0;a<=this._pSegmentsH;++a){f=this._topRadius-a/this._pSegmentsH*(this._topRadius-this._pBottomRadius);h=this._height*(a/this._pSegmentsH-.5);for(o=0;o<=this._pSegmentsW;++o){_=o*D;p=f*Math.cos(_);l=f*Math.sin(_);if(this._yUp){g=-h;v=l}else{g=l;v=h}if(o>0){L[u]=p;L[u+1]=g;L[u+2]=v;G[c++]=1;u+=3;V[u]=L[u-this._pSegmentsW*6];V[u+1]=L[u+1-this._pSegmentsW*6];V[u+2]=L[u+2-this._pSegmentsW*6];L[u]=p;L[u+1]=g;L[u+2]=v;G[c++]=1;u+=3}if(o<this._pSegmentsW){V[u]=p;V[u+1]=g;V[u+2]=v}}}U.updatePositions(V,L);U.updateThickness(G)}};e.prototype._pBuildUVs=function(t,e){var i;var r;var s;var n;var o;var a;if(e=="triangleSubGeometry"){var p=t;if(p.uvs&&this._numVertices==p.numVertices){a=p.uvs}else{a=new Array(this._numVertices*2)}var l=2*Math.PI/this._pSegmentsW;var h=0;if(this._topClosed){a[h++]=.5*p.scaleU;a[h++]=.5*p.scaleV;for(i=0;i<=this._pSegmentsW;++i){o=i*l;s=.5+.5*-Math.cos(o);n=.5+.5*Math.sin(o);a[h++]=s*p.scaleU;a[h++]=n*p.scaleV}}if(this._bottomClosed){a[h++]=.5*p.scaleU;a[h++]=.5*p.scaleV;for(i=0;i<=this._pSegmentsW;++i){o=i*l;s=.5+.5*Math.cos(o);n=.5+.5*Math.sin(o);a[h++]=s*p.scaleU;a[h++]=n*p.scaleV}}if(this._surfaceClosed){for(r=0;r<=this._pSegmentsH;++r){for(i=0;i<=this._pSegmentsW;++i){a[h++]=i/this._pSegmentsW*p.scaleU;a[h++]=r/this._pSegmentsH*p.scaleV}}}p.updateUVs(a)}else if(e=="lineSubGeometry"){}};return e}(s);e.exports=n},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":"awayjs-display/lib/prefabs/PrimitivePrefabBase"}],"awayjs-display/lib/prefabs/PrimitivePlanePrefab":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/prefabs/PrimitivePrefabBase");var n=function(t){r(e,t);function e(e,i,r,s,n,o){if(e===void 0){e=100}if(i===void 0){i=100}if(r===void 0){r=1}if(s===void 0){s=1}if(n===void 0){n=true}if(o===void 0){o=false}t.call(this);this._segmentsW=r;this._segmentsH=s;this._yUp=n;this._width=e;this._height=i;this._doubleSided=o}Object.defineProperty(e.prototype,"segmentsW",{get:function(){return this._segmentsW},set:function(t){this._segmentsW=t;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"segmentsH",{get:function(){return this._segmentsH},set:function(t){this._segmentsH=t;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"yUp",{get:function(){return this._yUp},set:function(t){this._yUp=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"doubleSided",{get:function(){return this._doubleSided},set:function(t){this._doubleSided=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});e.prototype._pBuildGeometry=function(t,e){var i;var r,s;var n;var o;var a=this._segmentsW+1;var p;var l,h;var u;var c;if(e=="triangleSubGeometry"){var f=t;var p=(this._segmentsH+1)*a;var _;var d;var y;if(this._doubleSided)p*=2;n=this._segmentsH*this._segmentsW*6;if(this._doubleSided)n*=2;if(f.indices!=null&&n==f.indices.length){i=f.indices}else{i=new Array(n);this._pInvalidateUVs()}if(p==f.numVertices){_=f.positions;d=f.vertexNormals;y=f.vertexTangents}else{_=new Array(p*3);d=new Array(p*3);y=new Array(p*3);this._pInvalidateUVs()}h=0;l=0;for(c=0;c<=this._segmentsH;++c){for(u=0;u<=this._segmentsW;++u){r=(u/this._segmentsW-.5)*this._width;s=(c/this._segmentsH-.5)*this._height;_[l]=r;if(this._yUp){_[l+1]=0;_[l+2]=s}else{_[l+1]=s;_[l+2]=0}d[l]=0;if(this._yUp){d[l+1]=1;d[l+2]=0}else{d[l+1]=0;d[l+2]=-1}y[l]=1;y[l+1]=0;y[l+2]=0;l+=3;if(this._doubleSided){for(var b=l;b<l+3;++b){_[b]=_[b-3];d[b]=-d[b-3];y[b]=-y[b-3]}l+=3}if(u!=this._segmentsW&&c!=this._segmentsH){o=u+c*a;var m=this._doubleSided?2:1;i[h++]=o*m;i[h++]=(o+a)*m;i[h++]=(o+a+1)*m;i[h++]=o*m;i[h++]=(o+a+1)*m;i[h++]=(o+1)*m;if(this._doubleSided){i[h++]=(o+a+1)*m+1;i[h++]=(o+a)*m+1;i[h++]=o*m+1;i[h++]=(o+1)*m+1;i[h++]=(o+a+1)*m+1;i[h++]=o*m+1}}}}f.updateIndices(i);f.updatePositions(_);f.updateVertexNormals(d);f.updateVertexTangents(y)}else if(e=="lineSubGeometry"){var g=t;var v=this._segmentsH+1+a;var w;var j;var P;var A=this._width/2;var O=this._height/2;if(g.indices!=null&&v==g.numSegments){w=g.startPositions;j=g.endPositions;P=g.thickness}else{w=new Array(v*3);j=new Array(v*3);P=new Array(v)}h=0;l=0;for(c=0;c<=this._segmentsH;++c){w[l]=-A;w[l+1]=0;w[l+2]=c*this._height-O;j[l]=A;j[l+1]=0;j[l+2]=c*this._height-O;P[h++]=1;l+=3}for(u=0;u<=this._segmentsW;++u){w[l]=u*this._width-A;w[l+1]=0;w[l+2]=-O;j[l]=u*this._width-A;j[l+1]=0;j[l+2]=O;P[h++]=1;l+=3}g.updatePositions(w,j);g.updateThickness(P)}};e.prototype._pBuildUVs=function(t,e){var i;var r;if(e=="triangleSubGeometry"){r=(this._segmentsH+1)*(this._segmentsW+1);if(this._doubleSided)r*=2;var s=t;if(s.uvs&&r==s.numVertices){i=s.uvs}else{i=new Array(r*2);this._pInvalidateGeometry()}var n=0;for(var o=0;o<=this._segmentsH;++o){for(var a=0;a<=this._segmentsW;++a){i[n]=a/this._segmentsW*s.scaleU;i[n+1]=(1-o/this._segmentsH)*s.scaleV;n+=2;if(this._doubleSided){i[n]=a/this._segmentsW*s.scaleU;
i[n+1]=(1-o/this._segmentsH)*s.scaleV;n+=2}}}s.updateUVs(i)}else if(e=="lineSubGeometry"){}};return e}(s);e.exports=n},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":"awayjs-display/lib/prefabs/PrimitivePrefabBase"}],"awayjs-display/lib/prefabs/PrimitivePolygonPrefab":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/prefabs/PrimitiveCylinderPrefab");var n=function(t){r(e,t);function e(e,i,r){if(e===void 0){e=100}if(i===void 0){i=16}if(r===void 0){r=true}t.call(this,e,0,0,i,1,true,false,false,r)}Object.defineProperty(e.prototype,"radius",{get:function(){return this._pBottomRadius},set:function(t){this._pBottomRadius=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"sides",{get:function(){return this._pSegmentsW},set:function(t){this.setSegmentsW(t)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"subdivisions",{get:function(){return this._pSegmentsH},set:function(t){this.setSegmentsH(t)},enumerable:true,configurable:true});return e}(s);e.exports=n},{"awayjs-display/lib/prefabs/PrimitiveCylinderPrefab":"awayjs-display/lib/prefabs/PrimitiveCylinderPrefab"}],"awayjs-display/lib/prefabs/PrimitivePrefabBase":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/library/AssetType");var n=t("awayjs-core/lib/errors/AbstractMethodError");var o=t("awayjs-display/lib/base/Geometry");var a=t("awayjs-display/lib/base/TriangleSubGeometry");var p=t("awayjs-display/lib/base/LineSubGeometry");var l=t("awayjs-display/lib/entities/Mesh");var h=t("awayjs-display/lib/prefabs/PrefabBase");var u=function(t){r(e,t);function e(e,i){if(e===void 0){e=null}if(i===void 0){i="triangleSubGeometry"}t.call(this);this._geomDirty=true;this._uvDirty=true;this._geometryTypeDirty=true;this._geometry=new o;this._material=e;this._geometryType=i}Object.defineProperty(e.prototype,"assetType",{get:function(){return s.PRIMITIVE_PREFAB},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"geometryType",{get:function(){return this._geometryType},set:function(t){if(this._geometryType==t)return;this._geometryType=t;this.invalidateGeometryType()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"geometry",{get:function(){this._iValidate();return this._geometry},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"material",{get:function(){return this._material},set:function(t){if(t==this._material)return;this._material=t;var e=this._pObjects.length;for(var i=0;i<e;i++)this._pObjects[i].material=this._material},enumerable:true,configurable:true});e.prototype._pBuildGeometry=function(t,e){throw new n};e.prototype._pBuildUVs=function(t,e){throw new n};e.prototype.invalidateGeometryType=function(){this._geometryTypeDirty=true;this._geomDirty=true;this._uvDirty=true};e.prototype._pInvalidateGeometry=function(){this._geomDirty=true};e.prototype._pInvalidateUVs=function(){this._uvDirty=true};e.prototype.updateGeometryType=function(){if(this._subGeometry)this._geometry.removeSubGeometry(this._subGeometry);if(this._geometryType=="triangleSubGeometry"){var t=new a(true);t.autoDeriveNormals=false;t.autoDeriveTangents=false;t.autoDeriveUVs=false;this._geometry.addSubGeometry(t);this._subGeometry=t}else if(this._geometryType=="lineSubGeometry"){this._geometry.addSubGeometry(this._subGeometry=new p)}this._geometryTypeDirty=false};e.prototype.updateGeometry=function(){this._pBuildGeometry(this._subGeometry,this._geometryType);this._geomDirty=false};e.prototype.updateUVs=function(){this._pBuildUVs(this._subGeometry,this._geometryType);this._uvDirty=false};e.prototype._iValidate=function(){if(this._geometryTypeDirty)this.updateGeometryType();if(this._geomDirty)this.updateGeometry();if(this._uvDirty)this.updateUVs()};e.prototype._pCreateObject=function(){var t=new l(this._geometry,this._material);t._iSourcePrefab=this;return t};return e}(h);e.exports=u},{"awayjs-core/lib/errors/AbstractMethodError":undefined,"awayjs-core/lib/library/AssetType":undefined,"awayjs-display/lib/base/Geometry":"awayjs-display/lib/base/Geometry","awayjs-display/lib/base/LineSubGeometry":"awayjs-display/lib/base/LineSubGeometry","awayjs-display/lib/base/TriangleSubGeometry":"awayjs-display/lib/base/TriangleSubGeometry","awayjs-display/lib/entities/Mesh":"awayjs-display/lib/entities/Mesh","awayjs-display/lib/prefabs/PrefabBase":"awayjs-display/lib/prefabs/PrefabBase"}],"awayjs-display/lib/prefabs/PrimitiveSpherePrefab":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/prefabs/PrimitivePrefabBase");var n=function(t){r(e,t);function e(e,i,r,s){if(e===void 0){e=50}if(i===void 0){i=16}if(r===void 0){r=12}if(s===void 0){s=true}t.call(this);this._radius=e;this._segmentsW=i;this._segmentsH=r;this._yUp=s}Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"segmentsW",{get:function(){return this._segmentsW},set:function(t){this._segmentsW=t;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"segmentsH",{get:function(){return this._segmentsH},set:function(t){this._segmentsH=t;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"yUp",{get:function(){return this._yUp},set:function(t){this._yUp=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});e.prototype._pBuildGeometry=function(t,e){var i;var r;var s;var n;var o;var a;var p,l;var h;var u;var c;if(e=="triangleSubGeometry"){var f=t;c=(this._segmentsH+1)*(this._segmentsW+1);if(c==f.numVertices&&f.indices!=null){i=f.indices;r=f.positions;s=f.vertexNormals;n=f.vertexTangents}else{i=new Array((this._segmentsH-1)*this._segmentsW*6);r=new Array(c*3);s=new Array(c*3);n=new Array(c*3);this._pInvalidateUVs()}p=0;l=0;var _;var d;var y;for(a=0;a<=this._segmentsH;++a){_=p;var b=Math.PI*a/this._segmentsH;var m=-this._radius*Math.cos(b);var g=this._radius*Math.sin(b);for(o=0;o<=this._segmentsW;++o){var v=2*Math.PI*o/this._segmentsW;var w=g*Math.cos(v);var j=g*Math.sin(v);var P=1/Math.sqrt(w*w+j*j+m*m);var A=Math.sqrt(j*j+w*w);if(this._yUp){d=0;y=A>.007?w/A:0;h=-m;u=j}else{d=A>.007?w/A:0;y=0;h=j;u=m}if(o==this._segmentsW){r[p]=r[_];r[p+1]=r[_+1];r[p+2]=r[_+2];s[p]=s[_]+w*P*.5;s[p+1]=s[_+1]+h*P*.5;s[p+2]=s[_+2]+u*P*.5;n[p]=A>.007?-j/A:1;n[p+1]=d;n[p+2]=y}else{r[p]=w;r[p+1]=h;r[p+2]=u;s[p]=w*P;s[p+1]=h*P;s[p+2]=u*P;n[p]=A>.007?-j/A:1;n[p+1]=d;n[p+2]=y}if(o>0&&a>0){var O=(this._segmentsW+1)*a+o;var D=(this._segmentsW+1)*a+o-1;var E=(this._segmentsW+1)*(a-1)+o-1;var S=(this._segmentsW+1)*(a-1)+o;if(a==this._segmentsH){r[p]=r[_];r[p+1]=r[_+1];r[p+2]=r[_+2];i[l++]=O;i[l++]=E;i[l++]=S}else if(a==1){i[l++]=O;i[l++]=D;i[l++]=E}else{i[l++]=O;i[l++]=D;i[l++]=E;i[l++]=O;i[l++]=E;i[l++]=S}}p+=3}}f.updateIndices(i);f.updatePositions(r);f.updateVertexNormals(s);f.updateVertexTangents(n)}else if(e=="lineSubGeometry"){var C=t;var T=(this._segmentsH-1)*this._segmentsW*2;var x;var N;var I;if(C.indices!=null&&T==C.numSegments){x=C.startPositions;N=C.endPositions;I=C.thickness}else{x=new Array(T*3);N=new Array(T*3);I=new Array(T)}p=0;l=0;for(a=0;a<=this._segmentsH;++a){var b=Math.PI*a/this._segmentsH;var m=-this._radius*Math.cos(b);var g=this._radius*Math.sin(b);for(o=0;o<=this._segmentsW;++o){var v=2*Math.PI*o/this._segmentsW;var w=g*Math.cos(v);var j=g*Math.sin(v);if(this._yUp){h=-m;u=j}else{h=j;u=m}if(o>0&&a>0){if(a<this._segmentsH){N[p]=w;N[p+1]=h;N[p+2]=u;I[l++]=1;p+=3}x[p]=N[p-this._segmentsW*6];x[p+1]=N[p+1-this._segmentsW*6];x[p+2]=N[p+2-this._segmentsW*6];N[p]=w;N[p+1]=h;N[p+2]=u;I[l++]=1;p+=3}if(o<this._segmentsW&&a>0&&a<this._segmentsH){x[p]=w;x[p+1]=h;x[p+2]=u}}}C.updatePositions(x,N);C.updateThickness(I)}};e.prototype._pBuildUVs=function(t,e){var i,r;var s=(this._segmentsH+1)*(this._segmentsW+1);var n;if(e=="triangleSubGeometry"){s=(this._segmentsH+1)*(this._segmentsW+1);var o=t;if(s==o.numVertices&&o.uvs!=null){n=o.uvs}else{n=new Array(s*2)}var a=0;for(r=0;r<=this._segmentsH;++r){for(i=0;i<=this._segmentsW;++i){n[a++]=i/this._segmentsW*o.scaleU;n[a++]=r/this._segmentsH*o.scaleV}}o.updateUVs(n)}else if(e=="lineSubGeometry"){}};return e}(s);e.exports=n},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":"awayjs-display/lib/prefabs/PrimitivePrefabBase"}],"awayjs-display/lib/prefabs/PrimitiveTorusPrefab":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/prefabs/PrimitivePrefabBase");var n=function(t){r(e,t);function e(e,i,r,s,n){if(e===void 0){e=50}if(i===void 0){i=50}if(r===void 0){r=16}if(s===void 0){s=8}if(n===void 0){n=true}t.call(this);this._numVertices=0;this._radius=e;this._tubeRadius=i;this._segmentsR=r;this._segmentsT=s;this._yUp=n}Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"tubeRadius",{get:function(){return this._tubeRadius},set:function(t){this._tubeRadius=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"segmentsR",{get:function(){return this._segmentsR},set:function(t){this._segmentsR=t;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"segmentsT",{get:function(){return this._segmentsT},set:function(t){this._segmentsT=t;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"yUp",{get:function(){return this._yUp},set:function(t){this._yUp=t;this._pInvalidateGeometry()},enumerable:true,configurable:true});e.prototype._pBuildGeometry=function(t,e){var i;var r;var s;var n;var o,a;var p,l,h,u,c,f,_,d;var y;var b;var m=0;if(e=="triangleSubGeometry"){var g=t;this._numVertices=(this._segmentsT+1)*(this._segmentsR+1);m=this._segmentsT*this._segmentsR*6;if(this._numVertices==g.numVertices){i=g.indices;r=g.positions;s=g.vertexNormals;n=g.vertexTangents}else{i=new Array(m);r=new Array(this._numVertices*3);s=new Array(this._numVertices*3);n=new Array(this._numVertices*3);this._pInvalidateUVs()}y=0;b=0;var v=2*Math.PI/this._segmentsR;var w=2*Math.PI/this._segmentsT;var j,P;var A,O,D,E;var S=0;var C=0;var T,x,N,I,M;for(a=0;a<=this._segmentsT;++a){S=C*3;for(o=0;o<=this._segmentsR;++o){_=o*v;d=a*w;M=Math.cos(d);u=M*Math.cos(_);c=M*Math.sin(_);f=Math.sin(d);p=this._radius*Math.cos(_)+this._tubeRadius*u;l=this._radius*Math.sin(_)+this._tubeRadius*c;h=a==this._segmentsT?0:this._tubeRadius*f;if(this._yUp){D=-f;E=c;A=0;O=M?u/M:p/this._radius;j=-h;P=l}else{D=c;E=f;A=M?u/M:p/this._radius;O=0;j=l;P=h}if(o==this._segmentsR){r[y]=p;r[y+1]=r[S+1];r[y+2]=r[S+2]}else{r[y]=p;r[y+1]=j;r[y+2]=P}s[y]=u;s[y+1]=D;s[y+2]=E;n[y]=-(M?c/M:l/this._radius);n[y+1]=A;n[y+2]=O;y+=3;if(o>0&&a>0){T=C;x=C-1;N=x-this._segmentsR-1;I=T-this._segmentsR-1;i[b++]=T;i[b++]=x;i[b++]=N;i[b++]=T;i[b++]=N;i[b++]=I}C++}}g.updateIndices(i);g.updatePositions(r);g.updateVertexNormals(s);g.updateVertexTangents(n)}else if(e=="lineSubGeometry"){}};e.prototype._pBuildUVs=function(t,e){var i,r;var s;if(e=="triangleSubGeometry"){var n=t;if(n.uvs&&this._numVertices==n.numVertices){s=n.uvs}else{s=new Array(this._numVertices*2)}var o=0;for(r=0;r<=this._segmentsT;++r){for(i=0;i<=this._segmentsR;++i){s[o++]=i/this._segmentsR*n.scaleU;s[o++]=r/this._segmentsT*n.scaleV}}n.updateUVs(s)}else if(e=="lineSubGeometry"){}};return e}(s);e.exports=n},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":"awayjs-display/lib/prefabs/PrimitivePrefabBase"}],"awayjs-display/lib/render/CSSDefaultRenderer":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/geom/Matrix3D");var n=t("awayjs-core/lib/projections/CoordinateSystem");var o=t("awayjs-display/lib/render/CSSRendererBase");var a=t("awayjs-display/lib/traverse/CSSEntityCollector");var p=function(t){r(e,t);function e(){t.call(this);this._contextMatrix=new s;this._skyboxProjection=new s;this._transform=new s;this._container=document.createElement("div");this._container.style.overflow="hidden";this._container.style.position="absolute";document.body.appendChild(this._container);this._context=document.createElement("div");this._contextStyle=this._context.style;this._contextStyle.position="absolute";this._contextStyle.transformStyle=this._contextStyle["-webkit-transform-style"]=this._contextStyle["-moz-transform-style"]=this._contextStyle["-o-transform-style"]=this._contextStyle["-ms-transform-style"]="preserve-3d";this._contextStyle.transformOrigin=this._contextStyle["-webkit-transform-origin"]=this._contextStyle["-moz-transform-origin"]=this._contextStyle["-o-transform-origin"]=this._contextStyle["-ms-transform-origin"]="0% 0%";this._container.appendChild(this._context)}e.prototype.render=function(e){t.prototype.render.call(this,e);if(this._pBackBufferInvalid)this.pUpdateBackBuffer();this._iRender(e);this._pBackBufferInvalid=false};e.prototype.pDraw=function(t){var e=document.styleSheets[document.styleSheets.length-1];for(var i=0;i<e.cssRules.length;i++){var r=e.cssRules[i].style;r.transform=r["-webkit-transform"]=r["-moz-transform"]=r["-o-transform"]=r["-ms-transform"]=t.camera.projection.coordinateSystem==n.RIGHT_HANDED?"":"scale3d(1, -1, 1) translateY(-"+r.height+")"}this.drawRenderables(this._renderableHead,t);this._activeMaterial=null};e.prototype.pUpdateBackBuffer=function(){this._container.style.width=this._width+"px";this._container.style.height=this._height+"px";this._container.style.clip="rect(0px, "+this._width+"px, "+this._height+"px, 0px)";this._contextMatrix.rawData[0]=this._width/2;this._contextMatrix.rawData[5]=-this._height/2;this._contextMatrix.rawData[10]=-1;this._contextMatrix.rawData[12]=this._width/2;this._contextMatrix.rawData[13]=this._height/2;this._contextStyle.transform=this._contextStyle["-webkit-transform"]=this._contextStyle["-moz-transform"]=this._contextStyle["-o-transform"]=this._contextStyle["-ms-transform"]=this._contextMatrix.toString();this._pBackBufferInvalid=false};e.prototype.drawSkybox=function(t){};e.prototype.drawRenderables=function(t,e){var i=e.camera.viewProjection.clone();while(t){this._transform.copyRawDataFrom(t.renderSceneTransform.rawData);this._transform.append(i);var r=t.htmlElement.style;r.transform=r["-webkit-transform"]=r["-moz-transform"]=r["-o-transform"]=r["-ms-transform"]=this._transform.toString();r.transformStyle=r["-webkit-transform-style"]=r["-moz-transform-style"]=r["-o-transform-style"]=r["-ms-transform-style"]="preserve-3d";if(!this._context.contains(t.htmlElement))this._context.appendChild(t.htmlElement);t=t.next}};e.prototype.dispose=function(){t.prototype.dispose.call(this)};e.prototype._iCreateEntityCollector=function(){return new a};return e}(o);e.exports=p},{"awayjs-core/lib/geom/Matrix3D":undefined,"awayjs-core/lib/projections/CoordinateSystem":undefined,"awayjs-display/lib/render/CSSRendererBase":"awayjs-display/lib/render/CSSRendererBase","awayjs-display/lib/traverse/CSSEntityCollector":"awayjs-display/lib/traverse/CSSEntityCollector"}],"awayjs-display/lib/render/CSSRendererBase":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/geom/Point");var n=t("awayjs-core/lib/geom/Rectangle");var o=t("awayjs-core/lib/errors/AbstractMethodError");var a=t("awayjs-core/lib/events/EventDispatcher");var p=t("awayjs-display/lib/events/RendererEvent");var l=function(t){r(e,t);function e(e,i,r){if(e===void 0){e=false}if(i===void 0){i=false}if(r===void 0){r="baseline"}t.call(this);this._backgroundR=0;this._backgroundG=0;this._backgroundB=0;this._backgroundAlpha=1;this._shareContext=false;this._pBackBufferInvalid=true;this._depthTextureInvalid=true;this._viewPort=new n;this._scissorRect=new n;this._localPos=new s;this._globalPos=new s;this._viewPort=new n;if(this._width==0)this.width=window.innerWidth;if(this._height==0)this.height=window.innerHeight}Object.defineProperty(e.prototype,"viewPort",{get:function(){return this._viewPort},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"scissorRect",{get:function(){return this._scissorRect},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"x",{get:function(){return this._localPos.x},set:function(t){if(this.x==t)return;this.updateGlobalPos()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"y",{get:function(){return this._localPos.y},set:function(t){if(this.y==t)return;this._globalPos.y=this._localPos.y=t;this.updateGlobalPos()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){if(this._width==t)return;this._width=t;this._scissorRect.width=t;this._viewPort.width=t;this._pBackBufferInvalid=true;this._depthTextureInvalid=true;this.notifyViewportUpdate();this.notifyScissorUpdate()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){if(this._height==t)return;this._height=t;this._scissorRect.height=t;this._viewPort.height=t;this._pBackBufferInvalid=true;this._depthTextureInvalid=true;this.notifyViewportUpdate();this.notifyScissorUpdate()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"_iBackgroundR",{get:function(){return this._backgroundR},set:function(t){if(this._backgroundR==t)return;this._backgroundR=t;this._pBackBufferInvalid=true},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"_iBackgroundG",{get:function(){return this._backgroundG},set:function(t){if(this._backgroundG==t)return;this._backgroundG=t;this._pBackBufferInvalid=true},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"_iBackgroundB",{get:function(){return this._backgroundB},set:function(t){if(this._backgroundB==t)return;this._backgroundB=t;this._pBackBufferInvalid=true},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"shareContext",{get:function(){return this._shareContext},set:function(t){if(this._shareContext==t)return;this._shareContext=t;this.updateGlobalPos()},enumerable:true,configurable:true});e.prototype.dispose=function(){};e.prototype.render=function(t){this._viewportDirty=false;this._scissorDirty=false};e.prototype._iRender=function(t,e,i,r){if(e===void 0){e=null}if(i===void 0){i=null}if(r===void 0){r=0}if(!t.entityHead)return;this.pExecuteRender(t,i)};e.prototype._iRenderCascades=function(t,e,i,r,s){};e.prototype.pCollectRenderables=function(t){};e.prototype.pExecuteRender=function(t,e){if(e===void 0){e=null}this.pCollectRenderables(t);this.pDraw(t)};e.prototype.pDraw=function(t){throw new o};Object.defineProperty(e.prototype,"_iBackgroundAlpha",{get:function(){return this._backgroundAlpha},set:function(t){if(this._backgroundAlpha==t)return;this._backgroundAlpha=t;this._pBackBufferInvalid=true},enumerable:true,configurable:true});e.prototype.applyBillboard=function(t){};e.prototype.applyLineSubMesh=function(t){};e.prototype.applySkybox=function(t){};e.prototype.applyTriangleSubMesh=function(t){};e.prototype._applyRenderable=function(t){var e;var i=t.sourceEntity;var r=i.scenePosition;if(e){t.materialId=e._iMaterialId;t.cascaded=false;r=this._iEntryPoint.subtract(r);t.zIndex=i.zOffset-r.dotProduct(this._pCameraForward);t.renderSceneTransform=t.sourceEntity.getRenderSceneTransform(this._pCamera);t.next=this._renderableHead;this._renderableHead=t}};e.prototype.notifyScissorUpdate=function(){if(this._scissorDirty)return;this._scissorDirty=true;if(!this._scissorUpdated)this._scissorUpdated=new p(p.SCISSOR_UPDATED);this.dispatchEvent(this._scissorUpdated)};e.prototype.notifyViewportUpdate=function(){if(this._viewportDirty)return;this._viewportDirty=true;if(!this._viewPortUpdated)this._viewPortUpdated=new p(p.VIEWPORT_UPDATED);this.dispatchEvent(this._viewPortUpdated)};e.prototype.updateGlobalPos=function(){this._viewPort.x=this._globalPos.x;this._viewPort.y=this._globalPos.y;this.notifyViewportUpdate();this.notifyScissorUpdate()};e.prototype._iCreateEntityCollector=function(){throw new o};return e}(a);e.exports=l},{"awayjs-core/lib/errors/AbstractMethodError":undefined,"awayjs-core/lib/events/EventDispatcher":undefined,"awayjs-core/lib/geom/Point":undefined,"awayjs-core/lib/geom/Rectangle":undefined,"awayjs-display/lib/events/RendererEvent":"awayjs-display/lib/events/RendererEvent"}],"awayjs-display/lib/render/IRenderer":[function(t,e,i){},{}],"awayjs-display/lib/sort/IEntitySorter":[function(t,e,i){},{}],"awayjs-display/lib/sort/RenderableMergeSort":[function(t,e,i){var r=function(){function t(){}t.prototype.sortBlendedRenderables=function(t){var e;var i;var r;if(!t||!t.next){return t}r=t;i=t.next;while(i){i=i.next;if(i){r=r.next;i=i.next}}e=r.next;r.next=null;t=this.sortBlendedRenderables(t);e=this.sortBlendedRenderables(e);var s;var n;var o;if(!t)return e;if(!e)return t;while(t&&e){if(t.zIndex<e.zIndex){o=t;t=t.next}else{o=e;e=e.next}if(!s)s=o;else n.next=o;n=o}if(t)n.next=t;else if(e)n.next=e;return s};t.prototype.sortOpaqueRenderables=function(t){var e;var i,r;if(!t||!t.next){return t}r=t;i=t.next;while(i){i=i.next;if(i){r=r.next;i=i.next}}e=r.next;r.next=null;t=this.sortOpaqueRenderables(t);e=this.sortOpaqueRenderables(e);var s;var n;var o;var a=0;if(!t)return e;if(!e)return t;while(t&&e&&t!=null&&e!=null){var p=t.renderOrderId;var l=e.renderOrderId;if(p==l){var h=t.renderObjectId;var u=e.renderObjectId;if(h==u){if(t.zIndex<e.zIndex)a=1;else a=-1}else if(h>u){a=1}else{a=-1}}else if(p>l){a=1}else{a=-1}if(a<0){o=t;t=t.next}else{o=e;e=e.next}if(!s){s=o;n=o}else{n.next=o;n=o}}if(t)n.next=t;else if(e)n.next=e;return s};return t}();e.exports=r},{}],"awayjs-display/lib/sort/RenderableNullSort":[function(t,e,i){var r=function(){function t(){}t.prototype.sortBlendedRenderables=function(t){return t};t.prototype.sortOpaqueRenderables=function(t){return t};return t}();e.exports=r},{}],"awayjs-display/lib/text/AntiAliasType":[function(t,e,i){var r=function(){function t(){}t.ADVANCED="advanced";t.NORMAL="normal";return t}();e.exports=r},{}],"awayjs-display/lib/text/GridFitType":[function(t,e,i){var r=function(){function t(){}t.NONE="none";t.PIXEL="pixel";t.SUBPIXEL="subpixel";return t}();e.exports=r},{}],"awayjs-display/lib/text/TextFieldAutoSize":[function(t,e,i){var r=function(){function t(){}t.CENTER="center";t.LEFT="left";t.NONE="none";t.RIGHT="right";return t}();e.exports=r},{}],"awayjs-display/lib/text/TextFieldType":[function(t,e,i){var r=function(){function t(){}t.DYNAMIC="dynamic";t.INPUT="input";return t}();e.exports=r},{}],"awayjs-display/lib/text/TextFormatAlign":[function(t,e,i){var r=function(){function t(){this.CENTER="center";this.JUSTIFY="justify";this.LEFT="left";this.RIGHT="right"}return t}();e.exports=r},{}],"awayjs-display/lib/text/TextFormat":[function(t,e,i){var r=function(){function t(t,e,i,r,s,n,o,a,p,l,h,u,c){if(t===void 0){t="Times New Roman"}if(e===void 0){e=12}if(i===void 0){i=0}if(r===void 0){r=false}if(s===void 0){s=false}if(n===void 0){n=false}if(o===void 0){o=""}if(a===void 0){a=""}if(p===void 0){p="left"}if(l===void 0){l=0}if(h===void 0){h=0}if(u===void 0){u=0}if(c===void 0){c=0}this.tabStops=new Array;this.font=t;this.size=e;this.bold=r;this.italic=s;this.underline=n;this.url=o;this.target=a;this.align=p;this.leftMargin=l;this.rightMargin=h;this.indent=u;this.leading=c}return t}();e.exports=r},{}],"awayjs-display/lib/text/TextInteractionMode":[function(t,e,i){var r=function(){function t(){}t.NORMAL="normal";t.SELECTION="selection";return t}();e.exports=r},{}],"awayjs-display/lib/text/TextLineMetrics":[function(t,e,i){var r=function(){function t(t,e,i,r,s,n){if(t===void 0){t=NaN}if(e===void 0){e=NaN}if(i===void 0){i=NaN}if(r===void 0){r=NaN}if(s===void 0){s=NaN}if(n===void 0){n=NaN}}return t}();e.exports=r},{}],"awayjs-display/lib/traverse/CSSEntityCollector":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/traverse/CollectorBase");var n=function(t){r(e,t);function e(){t.call(this)}return e}(s);e.exports=n},{"awayjs-display/lib/traverse/CollectorBase":"awayjs-display/lib/traverse/CollectorBase"}],"awayjs-display/lib/traverse/CollectorBase":[function(t,e,i){var r=t("awayjs-display/lib/pool/EntityListItemPool");var s=function(){function t(){this._numCullPlanes=0;this._pNumEntities=0;this._pNumInteractiveEntities=0;this._pEntityListItemPool=new r}Object.defineProperty(t.prototype,"camera",{get:function(){return this._pCamera},set:function(t){this._pCamera=t;this._cullPlanes=this._pCamera.frustumPlanes},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cullPlanes",{get:function(){return this._customCullPlanes},set:function(t){this._customCullPlanes=t},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"entityHead",{get:function(){return this._pEntityHead},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numEntities",{get:function(){return this._pNumEntities},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numInteractiveEntities",{get:function(){return this._pNumInteractiveEntities},enumerable:true,configurable:true});t.prototype.clear=function(){this._pNumEntities=this._pNumInteractiveEntities=0;this._cullPlanes=this._customCullPlanes?this._customCullPlanes:this._pCamera?this._pCamera.frustumPlanes:null;this._numCullPlanes=this._cullPlanes?this._cullPlanes.length:0;this._pEntityHead=null;this._pEntityListItemPool.freeAll()};t.prototype.enterNode=function(t){var e=this.scene._iCollectionMark!=t._iCollectionMark&&t.isInFrustum(this._cullPlanes,this._numCullPlanes);t._iCollectionMark=this.scene._iCollectionMark;return e};t.prototype.applyDirectionalLight=function(t){};t.prototype.applyEntity=function(t){this._pNumEntities++;if(t._iIsMouseEnabled())this._pNumInteractiveEntities++;var e=this._pEntityListItemPool.getItem();e.entity=t;e.next=this._pEntityHead;this._pEntityHead=e};t.prototype.applyLightProbe=function(t){};t.prototype.applyPointLight=function(t){};t.prototype.applySkybox=function(t){};return t}();e.exports=s},{"awayjs-display/lib/pool/EntityListItemPool":"awayjs-display/lib/pool/EntityListItemPool"}],"awayjs-display/lib/traverse/EntityCollector":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/traverse/CollectorBase");var n=function(t){r(e,t);function e(){t.call(this);this._pNumLights=0;this._numDirectionalLights=0;this._numPointLights=0;this._numLightProbes=0;this._pLights=new Array;this._directionalLights=new Array;this._pointLights=new Array;this._lightProbes=new Array;this.isEntityCollector=true}Object.defineProperty(e.prototype,"directionalLights",{get:function(){return this._directionalLights},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"lightProbes",{get:function(){return this._lightProbes},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"lights",{get:function(){return this._pLights},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"pointLights",{get:function(){return this._pointLights},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"skyBox",{get:function(){return this._pSkybox},enumerable:true,configurable:true});e.prototype.applyDirectionalLight=function(t){this._directionalLights[this._numDirectionalLights++]=t};e.prototype.applyLightProbe=function(t){this._lightProbes[this._numLightProbes++]=t};e.prototype.applyPointLight=function(t){this._pointLights[this._numPointLights++]=t};e.prototype.applySkybox=function(t){this._pSkybox=t};e.prototype.clear=function(){t.prototype.clear.call(this);this._pSkybox=null;if(this._pNumLights>0)this._pLights.length=this._pNumLights=0;if(this._numDirectionalLights>0)this._directionalLights.length=this._numDirectionalLights=0;if(this._numPointLights>0)this._pointLights.length=this._numPointLights=0;if(this._numLightProbes>0)this._lightProbes.length=this._numLightProbes=0};return e}(s);e.exports=n},{"awayjs-display/lib/traverse/CollectorBase":"awayjs-display/lib/traverse/CollectorBase"}],"awayjs-display/lib/traverse/RaycastCollector":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-core/lib/geom/Vector3D");var n=t("awayjs-display/lib/traverse/CollectorBase");var o=function(t){r(e,t);function e(){t.call(this);this._rayPosition=new s;this._rayDirection=new s;this._iCollectionMark=0}Object.defineProperty(e.prototype,"rayPosition",{get:function(){return this._rayPosition},set:function(t){this._rayPosition=t},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"rayDirection",{get:function(){return this._rayDirection},set:function(t){this._rayDirection=t},enumerable:true,configurable:true});e.prototype.enterNode=function(t){return t.isIntersectingRay(this._rayPosition,this._rayDirection)};return e}(n);e.exports=o},{"awayjs-core/lib/geom/Vector3D":undefined,"awayjs-display/lib/traverse/CollectorBase":"awayjs-display/lib/traverse/CollectorBase"}],"awayjs-display/lib/traverse/ShadowCasterCollector":[function(t,e,i){var r=this.__extends||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i];function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r};var s=t("awayjs-display/lib/traverse/CollectorBase");var n=function(t){r(e,t);function e(){t.call(this)}e.prototype.enterNode=function(e){var i=this.scene._iCollectionMark!=e._iCollectionMark&&e.isCastingShadow();if(!i){e._iCollectionMark=this.scene._iCollectionMark;return false}return t.prototype.enterNode.call(this,e)};return e}(s);e.exports=n},{"awayjs-display/lib/traverse/CollectorBase":"awayjs-display/lib/traverse/CollectorBase"}],"awayjs-display/lib/utils/Cast":[function(t,e,i){var r=t("awayjs-core/lib/base/BitmapData");var s=t("awayjs-core/lib/utils/ByteArray");var n=t("awayjs-display/lib/errors/CastError");var o=t("awayjs-core/lib/textures/BitmapTexture");var a=t("awayjs-core/lib/textures/ImageTexture");var p=function(){function t(){}t.string=function(t){if(typeof t=="function")t=new t;if(typeof t=="string")return t;return t};t.byteArray=function(t){if(typeof t=="function")t=new t;if(t instanceof s)return t;return t};t.isHex=function(t){var e=t.length;for(var i=0;i<e;++i){if(this._hexChars.indexOf(t.charAt(i))==-1)return false}return true};t.tryColor=function(t){if(typeof t=="number")return Math.floor(t);if(typeof t=="string"){if(t=="random")return Math.floor(Math.random()*16777216);if(this._colorNames==null){this._colorNames=new Object;this._colorNames["steelblue"]=4620980;this._colorNames["royalblue"]=267920;this._colorNames["cornflowerblue"]=6591981;this._colorNames["lightsteelblue"]=11584734;this._colorNames["mediumslateblue"]=8087790;this._colorNames["slateblue"]=6970061;this._colorNames["darkslateblue"]=4734347;this._colorNames["midnightblue"]=1644912;
this._colorNames["navy"]=128;this._colorNames["darkblue"]=139;this._colorNames["mediumblue"]=205;this._colorNames["blue"]=255;this._colorNames["dodgerblue"]=2003199;this._colorNames["deepskyblue"]=49151;this._colorNames["lightskyblue"]=8900346;this._colorNames["skyblue"]=8900331;this._colorNames["lightblue"]=11393254;this._colorNames["powderblue"]=11591910;this._colorNames["azure"]=15794175;this._colorNames["lightcyan"]=14745599;this._colorNames["paleturquoise"]=11529966;this._colorNames["mediumturquoise"]=4772300;this._colorNames["lightseagreen"]=2142890;this._colorNames["darkcyan"]=35723;this._colorNames["teal"]=32896;this._colorNames["cadetblue"]=6266528;this._colorNames["darkturquoise"]=52945;this._colorNames["aqua"]=65535;this._colorNames["cyan"]=65535;this._colorNames["turquoise"]=4251856;this._colorNames["aquamarine"]=8388564;this._colorNames["mediumaquamarine"]=6737322;this._colorNames["darkseagreen"]=9419919;this._colorNames["mediumseagreen"]=3978097;this._colorNames["seagreen"]=3050327;this._colorNames["darkgreen"]=25600;this._colorNames["green"]=32768;this._colorNames["forestgreen"]=2263842;this._colorNames["limegreen"]=3329330;this._colorNames["lime"]=65280;this._colorNames["chartreuse"]=8388352;this._colorNames["lawngreen"]=8190976;this._colorNames["greenyellow"]=11403055;this._colorNames["yellowgreen"]=10145074;this._colorNames["palegreen"]=10025880;this._colorNames["lightgreen"]=9498256;this._colorNames["springgreen"]=65407;this._colorNames["mediumspringgreen"]=64154;this._colorNames["darkolivegreen"]=5597999;this._colorNames["olivedrab"]=7048739;this._colorNames["olive"]=8421376;this._colorNames["darkkhaki"]=12433259;this._colorNames["darkgoldenrod"]=12092939;this._colorNames["goldenrod"]=14329120;this._colorNames["gold"]=16766720;this._colorNames["yellow"]=16776960;this._colorNames["khaki"]=15787660;this._colorNames["palegoldenrod"]=15657130;this._colorNames["blanchedalmond"]=16772045;this._colorNames["moccasin"]=16770229;this._colorNames["wheat"]=16113331;this._colorNames["navajowhite"]=16768685;this._colorNames["burlywood"]=14596231;this._colorNames["tan"]=13808780;this._colorNames["rosybrown"]=12357519;this._colorNames["sienna"]=10506797;this._colorNames["saddlebrown"]=9127187;this._colorNames["chocolate"]=13789470;this._colorNames["peru"]=13468991;this._colorNames["sandybrown"]=16032864;this._colorNames["darkred"]=9109504;this._colorNames["maroon"]=8388608;this._colorNames["brown"]=10824234;this._colorNames["firebrick"]=11674146;this._colorNames["indianred"]=13458524;this._colorNames["lightcoral"]=15761536;this._colorNames["salmon"]=16416882;this._colorNames["darksalmon"]=15308410;this._colorNames["lightsalmon"]=16752762;this._colorNames["coral"]=16744272;this._colorNames["tomato"]=16737095;this._colorNames["darkorange"]=16747520;this._colorNames["orange"]=16753920;this._colorNames["orangered"]=16729344;this._colorNames["crimson"]=14423100;this._colorNames["red"]=16711680;this._colorNames["deeppink"]=16716947;this._colorNames["fuchsia"]=16711935;this._colorNames["magenta"]=16711935;this._colorNames["hotpink"]=16738740;this._colorNames["lightpink"]=16758465;this._colorNames["pink"]=16761035;this._colorNames["palevioletred"]=14381203;this._colorNames["mediumvioletred"]=13047173;this._colorNames["purple"]=8388736;this._colorNames["darkmagenta"]=9109643;this._colorNames["mediumpurple"]=9662683;this._colorNames["blueviolet"]=9055202;this._colorNames["indigo"]=4915330;this._colorNames["darkviolet"]=9699539;this._colorNames["darkorchid"]=10040012;this._colorNames["mediumorchid"]=12211667;this._colorNames["orchid"]=14315734;this._colorNames["violet"]=15631086;this._colorNames["plum"]=14524637;this._colorNames["thistle"]=14204888;this._colorNames["lavender"]=15132410;this._colorNames["ghostwhite"]=16316671;this._colorNames["aliceblue"]=15792383;this._colorNames["mintcream"]=16121850;this._colorNames["honeydew"]=15794160;this._colorNames["lightgoldenrodyellow"]=16448210;this._colorNames["lemonchiffon"]=16775885;this._colorNames["cornsilk"]=16775388;this._colorNames["lightyellow"]=16777184;this._colorNames["ivory"]=16777200;this._colorNames["floralwhite"]=16775920;this._colorNames["linen"]=16445670;this._colorNames["oldlace"]=16643558;this._colorNames["antiquewhite"]=16444375;this._colorNames["bisque"]=16770244;this._colorNames["peachpuff"]=16767673;this._colorNames["papayawhip"]=16773077;this._colorNames["beige"]=16119260;this._colorNames["seashell"]=16774638;this._colorNames["lavenderblush"]=16773365;this._colorNames["mistyrose"]=16770273;this._colorNames["snow"]=16775930;this._colorNames["white"]=16777215;this._colorNames["whitesmoke"]=16119285;this._colorNames["gainsboro"]=14474460;this._colorNames["lightgrey"]=13882323;this._colorNames["silver"]=12632256;this._colorNames["darkgrey"]=11119017;this._colorNames["grey"]=8421504;this._colorNames["lightslategrey"]=7833753;this._colorNames["slategrey"]=7372944;this._colorNames["dimgrey"]=6908265;this._colorNames["darkslategrey"]=3100495;this._colorNames["black"]=0;this._colorNames["transparent"]=4278190080}if(this._colorNames[t]!=null)return this._colorNames[t];if(t.length==6&&this.isHex(t))return parseInt("0x"+t)}return null};t.color=function(t){var e=this.tryColor(t);if(e==null)throw new n("Can't cast to color: "+t);return e};t.tryClass=function(t){if(this._notClasses[t])return t;var e=this._classes[t];if(e!=null)return e;try{e=window[t];this._classes[t]=e;return e}catch(i){}this._notClasses[t]=true;return t};t.bitmapData=function(t){if(t==null)return null;if(typeof t=="string")t=this.tryClass(t);if(typeof t=="function"){try{t=new t}catch(e){t=new t(0,0)}}if(t instanceof r)return t;if(t instanceof a)t=t.htmlImageElement;if(t instanceof HTMLImageElement){var i=t;var s=new r(i.width,i.height,true,0);s.draw(i);return s}throw new n("Can't cast to BitmapData: "+t)};t.bitmapTexture=function(e){if(e==null)return null;if(typeof e=="string")e=this.tryClass(e);if(typeof e=="function"){try{e=new e}catch(i){e=new e(0,0)}}if(e instanceof o)return e;try{var r=t.bitmapData(e);return new o(r)}catch(i){}throw new n("Can't cast to BitmapTexture: "+e)};t._hexChars="0123456789abcdefABCDEF";t._notClasses=new Object;t._classes=new Object;return t}();e.exports=p},{"awayjs-core/lib/base/BitmapData":undefined,"awayjs-core/lib/textures/BitmapTexture":undefined,"awayjs-core/lib/textures/ImageTexture":undefined,"awayjs-core/lib/utils/ByteArray":undefined,"awayjs-display/lib/errors/CastError":"awayjs-display/lib/errors/CastError"}]},{},[]);

//# sourceMappingURL=awayjs-display.min.js.map