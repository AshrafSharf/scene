require=function t(e,i,s){function n(r,a){if(!i[r]){if(!e[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(o)return o(r,!0);var p=new Error("Cannot find module '"+r+"'");throw p.code="MODULE_NOT_FOUND",p}var l=i[r]={exports:{}};e[r][0].call(l.exports,function(t){var i=e[r][1][t];return n(i?i:t)},l,l.exports,t,e,i,s)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<s.length;r++)n(s[r]);return n}({"awayjs-display/lib/animators/IAnimationSet":[function(){},{}],"awayjs-display/lib/animators/IAnimator":[function(){},{}],"awayjs-display/lib/animators/nodes/AnimationNodeBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),n=t("awayjs-core/lib/library/NamedAssetBase"),o=function(t){function e(){t.call(this)}return i(e,t),Object.defineProperty(e.prototype,"stateClass",{get:function(){return this._pStateClass},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){},Object.defineProperty(e.prototype,"assetType",{get:function(){return s.ANIMATION_NODE},enumerable:!0,configurable:!0}),e}(n);e.exports=o},{"awayjs-core/lib/library/AssetType":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0}],"awayjs-display/lib/base/AlignmentMode":[function(t,e){var i=function(){function t(){}return t.REGISTRATION_POINT="registrationPoint",t.PIVOT_POINT="pivot",t}();e.exports=i},{}],"awayjs-display/lib/base/BlendMode":[function(t,e){var i=function(){function t(){}return t.ADD="add",t.ALPHA="alpha",t.DARKEN="darken",t.DIFFERENCE="difference",t.ERASE="erase",t.HARDLIGHT="hardlight",t.INVERT="invert",t.LAYER="layer",t.LIGHTEN="lighten",t.MULTIPLY="multiply",t.NORMAL="normal",t.OVERLAY="overlay",t.SCREEN="screen",t.SHADER="shader",t.SUBTRACT="subtract",t}();e.exports=i},{}],"awayjs-display/lib/base/CapsStyle":[function(t,e){var i=function(){function t(){}return t.ROUND="round",t.NONE="none",t.SQUARE="square",t}();e.exports=i},{}],"awayjs-display/lib/base/DisplayObject":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/bounds/AxisAlignedBoundingBox"),n=t("awayjs-core/lib/geom/MathConsts"),o=t("awayjs-core/lib/geom/Matrix3D"),r=t("awayjs-core/lib/geom/Matrix3DUtils"),a=t("awayjs-core/lib/geom/Point"),h=t("awayjs-core/lib/geom/Vector3D"),p=t("awayjs-core/lib/library/NamedAssetBase"),l=t("awayjs-core/lib/errors/AbstractMethodError"),c=t("awayjs-display/lib/base/AlignmentMode"),u=t("awayjs-display/lib/base/OrientationMode"),_=t("awayjs-display/lib/base/Transform"),d=t("awayjs-display/lib/pick/PickingCollisionVO"),y=t("awayjs-display/lib/events/DisplayObjectEvent"),f=t("awayjs-display/lib/events/SceneEvent"),m=function(t){function e(){t.call(this),this._pSceneTransform=new o,this._pSceneTransformDirty=!0,this._matrix3D=new o,this._matrix3DDirty=!0,this._inverseSceneTransform=new o,this._inverseSceneTransformDirty=!0,this._scenePosition=new h,this._scenePositionDirty=!0,this._explicitVisibility=!0,this._pImplicitVisibility=!0,this._explicitMouseEnabled=!0,this._pImplicitMouseEnabled=!0,this._positionDirty=!0,this._rotationDirty=!0,this._scaleDirty=!0,this._rotationX=0,this._rotationY=0,this._rotationZ=0,this._eulers=new h,this._flipY=new o,this._zOffset=0,this._pScaleX=1,this._pScaleY=1,this._pScaleZ=1,this._x=0,this._y=0,this._z=0,this._pivot=new h,this._orientationMatrix=new o,this._pivotZero=!0,this._pivotDirty=!0,this._pos=new h,this._rot=new h,this._sca=new h,this._pIgnoreTransform=!1,this._pBoundsInvalid=!0,this._worldBoundsInvalid=!0,this._pRenderables=new Array,this.alignmentMode=c.REGISTRATION_POINT,this.castsShadows=!0,this.orientationMode=u.DEFAULT,this._transformComponents=new Array(3),this._transformComponents[0]=this._pos,this._transformComponents[1]=this._rot,this._transformComponents[2]=this._sca,this._transform=new _(this),this._matrix3D.identity(),this._flipY.appendScale(1,-1,1),this._pBounds=this.pCreateDefaultBoundingVolume(),this._worldBounds=this.pCreateDefaultBoundingVolume()}return i(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this._pBoundsInvalid&&this.pUpdateBounds(),this._pBounds},set:function(t){this._pBounds!=t&&(this._pBounds=t,this._worldBounds=t.clone(),this.pInvalidateBounds(),this._boundsVisible&&this._partitionNode._iUpdateEntityBounds())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return this._pBoundsInvalid&&this.pUpdateBounds(),this._depth},set:function(t){this._depth!=t&&(this._depth==t,this._pScaleZ=t/this.bounds.aabb.depth,this.invalidateScale())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eulers",{get:function(){return this._eulers.x=this._rotationX*n.RADIANS_TO_DEGREES,this._eulers.y=this._rotationY*n.RADIANS_TO_DEGREES,this._eulers.z=this._rotationZ*n.RADIANS_TO_DEGREES,this._eulers},set:function(t){this._rotationX=t.x*n.DEGREES_TO_RADIANS,this._rotationY=t.y*n.DEGREES_TO_RADIANS,this._rotationZ=t.z*n.DEGREES_TO_RADIANS,this.invalidateRotation()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._pBoundsInvalid&&this.pUpdateBounds(),this._height},set:function(t){this._height!=t&&(this._height==t,this._pScaleY=t/this.bounds.aabb.height,this.invalidateScale())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._pParent?this._pParent.getChildIndex(this):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inverseSceneTransform",{get:function(){return this._inverseSceneTransformDirty&&(this._inverseSceneTransform.copyFrom(this.sceneTransform),this._inverseSceneTransform.invert(),this._inverseSceneTransformDirty=!1),this._inverseSceneTransform},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignoreTransform",{get:function(){return this._pIgnoreTransform},set:function(t){this._pIgnoreTransform!=t&&(this._pIgnoreTransform=t,t&&(this._pSceneTransform.identity(),this._scenePosition.setTo(0,0,0)),this.pInvalidateSceneTransform())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEntity",{get:function(){return this._pIsEntity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loaderInfo",{get:function(){return this._loaderInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseEnabled",{get:function(){return this._explicitMouseEnabled},set:function(t){this._explicitMouseEnabled!=t&&(this._explicitMouseEnabled=t,this._pUpdateImplicitMouseEnabled(this._pParent?this._pParent.mouseChildren:!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseX",{get:function(){return this._mouseX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseY",{get:function(){return this._mouseY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._pParent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partition",{get:function(){return this._explicitPartition},set:function(t){this._explicitPartition!=t&&(this._pScene&&this._explicitPartition&&this._pScene.iUnregisterPartition(this._explicitPartition),this._explicitPartition=t,this._pScene&&t&&this._pScene.iRegisterPartition(t),this._pUpdateImplicitPartition(this._pParent?this._pParent._iAssignedPartition:null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partitionNode",{get:function(){return this._partitionNode||(this._partitionNode=this.pCreateEntityPartitionNode()),this._partitionNode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pickingCollider",{get:function(){return this._pPickingCollider},set:function(t){this._pPickingCollider=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this._pivot},set:function(t){this._pivot=t.clone(),this.invalidatePivot()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationX",{get:function(){return this._rotationX*n.RADIANS_TO_DEGREES},set:function(t){this.rotationX!=t&&(this._rotationX=t*n.DEGREES_TO_RADIANS,this.invalidateRotation())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationY",{get:function(){return this._rotationY*n.RADIANS_TO_DEGREES},set:function(t){this.rotationY!=t&&(this._rotationY=t*n.DEGREES_TO_RADIANS,this.invalidateRotation())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationZ",{get:function(){return this._rotationZ*n.RADIANS_TO_DEGREES},set:function(t){this.rotationZ!=t&&(this._rotationZ=t*n.DEGREES_TO_RADIANS,this.invalidateRotation())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this._pScaleX},set:function(t){this._pScaleX!=t&&(this._pScaleX=t,this.invalidateScale())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this._pScaleY},set:function(t){this._pScaleY!=t&&(this._pScaleY=t,this.invalidateScale())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleZ",{get:function(){return this._pScaleZ},set:function(t){this._pScaleZ!=t&&(this._pScaleZ=t,this.invalidateScale())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._pScene},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scenePosition",{get:function(){if(this._scenePositionDirty){if(this._pivotZero||this.alignmentMode!=c.PIVOT_POINT)this.sceneTransform.copyColumnTo(3,this._scenePosition);else{var t=new h(this._pivot.x/this._pScaleX,this._pivot.y/this._pScaleY,this._pivot.z/this._pScaleZ);this._scenePosition=this.sceneTransform.transformVector(t)}this._scenePositionDirty=!1}return this._scenePosition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sceneTransform",{get:function(){return this._pSceneTransformDirty&&this.pUpdateSceneTransform(),this._pSceneTransform},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shaderPickingDetails",{get:function(){return this._shaderPickingDetails},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundsVisible",{get:function(){return this._boundsVisible},set:function(t){t!=this._boundsVisible&&(this._boundsVisible=t,this._partitionNode.boundsVisible=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transform",{get:function(){return this._transform},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._explicitVisibility},set:function(t){this._explicitVisibility!=t&&(this._explicitVisibility=t,this._pUpdateImplicitVisibility(this._pParent?this._pParent._iIsVisible():!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._pBoundsInvalid&&this.pUpdateBounds(),this._width},set:function(t){this._width!=t&&(this._width==t,this._pScaleX=t/this.bounds.aabb.width,this.invalidateScale())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"worldBounds",{get:function(){return this._iSourcePrefab&&this._iSourcePrefab._iValidate(),this._worldBoundsInvalid&&(this._worldBoundsInvalid=!1,this._worldBounds.transformFrom(this.bounds,this.sceneTransform)),this._worldBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x!=t&&(this._x=t,this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y!=t&&(this._y=t,this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._z},set:function(t){this._z!=t&&(this._z=t,this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zOffset",{get:function(){return this._zOffset},set:function(t){this._zOffset=t},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(e,i){switch(t.prototype.addEventListener.call(this,e,i),e){case y.POSITION_CHANGED:this._listenToPositionChanged=!0;break;case y.ROTATION_CHANGED:this._listenToRotationChanged=!0;break;case y.SCALE_CHANGED:this._listenToScaleChanged=!0}},e.prototype.clone=function(){var t=new e;return t.pivot=this.pivot,t._iMatrix3D=this._iMatrix3D,t.name=name,t},e.prototype.dispose=function(){for(this.parent&&this.parent.removeChild(this);this._pRenderables.length;)this._pRenderables[0].dispose()},e.prototype.disposeAsset=function(){this.dispose()},e.prototype.getBounds=function(){return this._bounds},e.prototype.getRect=function(){return this._bounds},e.prototype.globalToLocal=function(t){return t},e.prototype.globalToLocal3D=function(){return new h},e.prototype.hitTestObject=function(){return!1},e.prototype.hitTestPoint=function(t,e,i){return void 0===i&&(i=!1),!1},e.prototype.isIntersectingRay=function(t,e){var i=this.inverseSceneTransform.transformVector(t),s=this.inverseSceneTransform.deltaTransformVector(e),n=this._iPickingCollisionVO;n.localNormal||(n.localNormal=new h);var o=this.bounds.rayIntersection(i,s,n.localNormal);return 0>o?!1:(n.rayEntryDistance=o,n.localRayPosition=i,n.localRayDirection=s,n.rayPosition=t,n.rayDirection=e,n.rayOriginIsInsideBounds=0==o,!0)},e.prototype.local3DToGlobal=function(){return new a},e.prototype.lookAt=function(t,e){void 0===e&&(e=null);var i,s,n,a;null==e?e=h.Y_AXIS:e.normalize(),s=t.subtract(this._iMatrix3D.position),s.normalize(),n=e.crossProduct(s),n.normalize(),n.length<.05&&(n.x=e.y,n.y=e.x,n.z=0,n.normalize()),i=s.crossProduct(n),a=r.RAW_DATA_CONTAINER,a[0]=n.x,a[1]=n.y,a[2]=n.z,a[3]=0,a[4]=i.x,a[5]=i.y,a[6]=i.z,a[7]=0,a[8]=s.x,a[9]=s.y,a[10]=s.z,a[11]=0;var p=new o;p.copyRawDataFrom(a);var l=p.decompose()[1];this._rotationX=l.x,this._rotationY=l.y,this._rotationZ=l.z,this.invalidateRotation()},e.prototype.localToGlobal=function(){return new a},e.prototype.moveTo=function(t,e,i){(this._x!=t||this._y!=e||this._z!=i)&&(this._x=t,this._y=e,this._z=i,this.invalidatePosition())},e.prototype.movePivot=function(t,e,i){null==this._pivot&&(this._pivot=new h),this._pivot.x+=t,this._pivot.y+=e,this._pivot.z+=i,this.invalidatePivot()},e.prototype.pitch=function(t){this.rotate(h.X_AXIS,t)},e.prototype.getRenderSceneTransform=function(t){if(this.orientationMode==u.CAMERA_PLANE){var e=t.sceneTransform.decompose(),i=e[2];return e[0]=this.scenePosition,i.x=this._pScaleX,i.y=this._pScaleY,i.z=this._pScaleZ,this._orientationMatrix.recompose(e),this._pivotZero||this.alignmentMode!=c.PIVOT_POINT||this._orientationMatrix.prependTranslation(-this._pivot.x/this._pScaleX,-this._pivot.y/this._pScaleY,-this._pivot.z/this._pScaleZ),this._orientationMatrix}return this.sceneTransform},e.prototype.roll=function(t){this.rotate(h.Z_AXIS,t)},e.prototype.rotate=function(t,e){var i=new o;i.prependRotation(e,t);var s=i.decompose()[1];this._rotationX+=s.x,this._rotationY+=s.y,this._rotationZ+=s.z,this.invalidateRotation()},e.prototype.rotateTo=function(t,e,i){this._rotationX=t*n.DEGREES_TO_RADIANS,this._rotationY=e*n.DEGREES_TO_RADIANS,this._rotationZ=i*n.DEGREES_TO_RADIANS,this.invalidateRotation()},e.prototype.removeEventListener=function(e,i){if(t.prototype.removeEventListener.call(this,e,i),!this.hasEventListener(e,i))switch(e){case y.POSITION_CHANGED:this._listenToPositionChanged=!1;break;case y.ROTATION_CHANGED:this._listenToRotationChanged=!1;break;case y.SCALE_CHANGED:this._listenToScaleChanged=!1}},e.prototype.translate=function(t,e){var i=t.x,s=t.y,n=t.z,o=e/Math.sqrt(i*i+s*s+n*n);this._x+=i*o,this._y+=s*o,this._z+=n*o,this.invalidatePosition()},e.prototype.translateLocal=function(t,e){var i=t.x,s=t.y,n=t.z,o=e/Math.sqrt(i*i+s*s+n*n);this._iMatrix3D.prependTranslation(i*o,s*o,n*o),this._matrix3D.copyColumnTo(3,this._pos),this._x=this._pos.x,this._y=this._pos.y,this._z=this._pos.z,this.invalidatePosition()},e.prototype.yaw=function(t){this.rotate(h.Y_AXIS,t)},Object.defineProperty(e.prototype,"_iAssignedPartition",{get:function(){return this._pImplicitPartition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_iMatrix3D",{get:function(){return this._matrix3DDirty&&this._pUpdateMatrix3D(),this._matrix3D},set:function(t){var e,i=t.decompose();e=i[0],(this._x!=e.x||this._y!=e.y||this._z!=e.z)&&(this._x=e.x,this._y=e.y,this._z=e.z,this.invalidatePosition()),e=i[1],(this._rotationX!=e.x||this._rotationY!=e.y||this._rotationZ!=e.z)&&(this._rotationX=e.x,this._rotationY=e.y,this._rotationZ=e.z,this.invalidateRotation()),e=i[2],(this._pScaleX!=e.x||this._pScaleY!=e.y||this._pScaleZ!=e.z)&&(this._pScaleX=e.x,this._pScaleY=e.y,this._pScaleZ=e.z,this.invalidateScale())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_iPickingCollisionVO",{get:function(){return this._pPickingCollisionVO||(this._pPickingCollisionVO=new d(this)),this._pPickingCollisionVO},enumerable:!0,configurable:!0}),e.prototype.iSetParent=function(t){this._pParent=t,t?(this._pUpdateImplicitMouseEnabled(t.mouseChildren),this._pUpdateImplicitVisibility(t._iIsVisible()),this._pUpdateImplicitPartition(t._iAssignedPartition),this._iSetScene(t._pScene)):(this._pUpdateImplicitMouseEnabled(!0),this._pUpdateImplicitVisibility(!0),this._pUpdateImplicitPartition(null),this._iSetScene(null))},e.prototype.pCreateDefaultBoundingVolume=function(){return new s},e.prototype.pCreateEntityPartitionNode=function(){throw new l},e.prototype.pInvalidateBounds=function(){this._pBoundsInvalid=!0,this._worldBoundsInvalid=!0,this.isEntity&&this.invalidatePartition()},e.prototype.pInvalidateSceneTransform=function(){this._pSceneTransformDirty=!this._pIgnoreTransform,this._inverseSceneTransformDirty=!this._pIgnoreTransform,this._scenePositionDirty=!this._pIgnoreTransform,this._worldBoundsInvalid=!this._pIgnoreTransform,this.isEntity&&this.invalidatePartition(),this._listenToSceneTransformChanged&&this.notifySceneTransformChange()},e.prototype.pUpdateBounds=function(){this._width=this._pBounds.aabb.width*this._pScaleX,this._height=this._pBounds.aabb.height*this._pScaleY,this._depth=this._pBounds.aabb.depth*this._pScaleZ,this._pBoundsInvalid=!1},e.prototype._pUpdateImplicitMouseEnabled=function(t){this._pImplicitMouseEnabled=this._explicitMouseEnabled&&t,this._pImplicitMouseEnabled&&this._pParent&&!this._pPickingCollider&&(this._pPickingCollider=this._pParent._pPickingCollider)},e.prototype._pUpdateImplicitPartition=function(t){this._pImplicitPartition=this._explicitPartition||t},e.prototype._pUpdateImplicitVisibility=function(t){this._pImplicitVisibility=this._explicitVisibility&&t},e.prototype._pUpdateMatrix3D=function(){this._pos.x=this._x,this._pos.y=this._y,this._pos.z=this._z,this._rot.x=this._rotationX,this._rot.y=this._rotationY,this._rot.z=this._rotationZ,this._sca.x=this._pScaleX,this._sca.y=this._pScaleY,this._sca.z=this._pScaleZ,this._matrix3D.recompose(this._transformComponents),this._pivotZero||(this._matrix3D.prependTranslation(-this._pivot.x/this._pScaleX,-this._pivot.y/this._pScaleY,-this._pivot.z/this._pScaleZ),this.alignmentMode!=c.PIVOT_POINT&&this._matrix3D.appendTranslation(this._pivot.x,this._pivot.y,this._pivot.z)),this._matrix3DDirty=!1,this._positionDirty=!1,this._rotationDirty=!1,this._scaleDirty=!1,this._pivotDirty=!1},e.prototype.pUpdateSceneTransform=function(){this._pParent&&!this._pParent._iIsRoot?(this._pSceneTransform.copyFrom(this._pParent.sceneTransform),this._pSceneTransform.prepend(this._iMatrix3D)):this._pSceneTransform.copyFrom(this._iMatrix3D),this._pSceneTransformDirty=!1},e.prototype._iAddRenderable=function(t){return this._pRenderables.push(t),t},e.prototype._iRemoveRenderable=function(t){var e=this._pRenderables.indexOf(t);return this._pRenderables.splice(e,1),t},e.prototype._iTestCollision=function(){return!1},e.prototype._iInternalUpdate=function(){this._iController&&this._iController.update()},e.prototype._iIsVisible=function(){return this._pImplicitVisibility},e.prototype._iIsMouseEnabled=function(){return this._pImplicitMouseEnabled},e.prototype._iSetScene=function(t){this._pScene!=t&&(this._pUpdateScene(t),this._pSceneTransformDirty||this._pIgnoreTransform||this.pInvalidateSceneTransform())},e.prototype._pUpdateScene=function(t){this._pScene&&(this._pScene.dispatchEvent(new f(f.REMOVED_FROM_SCENE,this)),this._pScene.iUnregisterEntity(this)),this._pScene=t,t&&(t.dispatchEvent(new f(f.ADDED_TO_SCENE,this)),t.iRegisterEntity(this)),this.notifySceneChange()},e.prototype.notifyPositionChanged=function(){this._positionChanged||(this._positionChanged=new y(y.POSITION_CHANGED,this)),this.dispatchEvent(this._positionChanged)},e.prototype.notifyRotationChanged=function(){this._rotationChanged||(this._rotationChanged=new y(y.ROTATION_CHANGED,this)),this.dispatchEvent(this._rotationChanged)},e.prototype.notifyScaleChanged=function(){this._scaleChanged||(this._scaleChanged=new y(y.SCALE_CHANGED,this)),this.dispatchEvent(this._scaleChanged)},e.prototype.notifySceneChange=function(){this._listenToSceneChanged&&(this._scenechanged||(this._scenechanged=new y(y.SCENE_CHANGED,this)),this.dispatchEvent(this._scenechanged))},e.prototype.notifySceneTransformChange=function(){this._sceneTransformChanged||(this._sceneTransformChanged=new y(y.SCENETRANSFORM_CHANGED,this)),this.dispatchEvent(this._sceneTransformChanged)},e.prototype.invalidateMatrix3D=function(){this._matrix3DDirty||(this._matrix3DDirty=!0,this._pSceneTransformDirty||this._pIgnoreTransform||this.pInvalidateSceneTransform())},e.prototype.invalidatePartition=function(){this._iAssignedPartition&&this._iAssignedPartition.iMarkForUpdate(this)},e.prototype.invalidatePivot=function(){this._pivotZero=0==this._pivot.x&&0==this._pivot.y&&0==this._pivot.z,this._pivotDirty||(this._pivotDirty=!0,this.invalidateMatrix3D())},e.prototype.invalidatePosition=function(){this._positionDirty||(this._positionDirty=!0,this.invalidateMatrix3D(),this._listenToPositionChanged&&this.notifyPositionChanged())},e.prototype.invalidateRotation=function(){this._rotationDirty||(this._rotationDirty=!0,this.invalidateMatrix3D(),this._listenToRotationChanged&&this.notifyRotationChanged())},e.prototype.invalidateScale=function(){this._scaleDirty||(this._scaleDirty=!0,this.invalidateMatrix3D(),this._listenToScaleChanged&&this.notifyScaleChanged())},e}(p);e.exports=m},{"awayjs-core/lib/bounds/AxisAlignedBoundingBox":void 0,"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/geom/MathConsts":void 0,"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/geom/Matrix3DUtils":void 0,"awayjs-core/lib/geom/Point":void 0,"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0,"awayjs-display/lib/base/AlignmentMode":void 0,"awayjs-display/lib/base/OrientationMode":void 0,"awayjs-display/lib/base/Transform":void 0,"awayjs-display/lib/events/DisplayObjectEvent":void 0,"awayjs-display/lib/events/SceneEvent":void 0,"awayjs-display/lib/pick/PickingCollisionVO":void 0}],"awayjs-display/lib/base/Geometry":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),n=t("awayjs-core/lib/library/NamedAssetBase"),o=t("awayjs-display/lib/events/GeometryEvent"),r=function(t){function e(){t.call(this),this._subGeometries=new Array}return i(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return s.GEOMETRY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subGeometries",{get:function(){return this._subGeometries},enumerable:!0,configurable:!0}),e.prototype.getSubGeometries=function(){return this._subGeometries},e.prototype.applyTransformation=function(t){for(var e=this._subGeometries.length,i=0;e>i;++i)this._subGeometries[i].applyTransformation(t)},e.prototype.addSubGeometry=function(t){this._subGeometries.push(t),t.parentGeometry=this,this.hasEventListener(o.SUB_GEOMETRY_ADDED)&&this.dispatchEvent(new o(o.SUB_GEOMETRY_ADDED,t)),this.iInvalidateBounds(t)},e.prototype.removeSubGeometry=function(t){this._subGeometries.splice(this._subGeometries.indexOf(t),1),t.parentGeometry=null,this.hasEventListener(o.SUB_GEOMETRY_REMOVED)&&this.dispatchEvent(new o(o.SUB_GEOMETRY_REMOVED,t)),this.iInvalidateBounds(t)},e.prototype.clone=function(){for(var t=new e,i=this._subGeometries.length,s=0;i>s;++s)t.addSubGeometry(this._subGeometries[s].clone());return t},e.prototype.scale=function(t){for(var e=this._subGeometries.length,i=0;e>i;++i)this._subGeometries[i].scale(t)},e.prototype.dispose=function(){for(var t=this._subGeometries.length,e=0;t>e;++e){var i=this._subGeometries[0];this.removeSubGeometry(i),i.dispose()}},e.prototype.scaleUV=function(t,e){void 0===t&&(t=1),void 0===e&&(e=1);for(var i=this._subGeometries.length,s=0;i>s;++s)this._subGeometries[s].scaleUV(t,e)},e.prototype.iInvalidateBounds=function(t){this.hasEventListener(o.BOUNDS_INVALID)&&this.dispatchEvent(new o(o.BOUNDS_INVALID,t))},e}(n);e.exports=r},{"awayjs-core/lib/library/AssetType":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0,"awayjs-display/lib/events/GeometryEvent":void 0}],"awayjs-display/lib/base/GradientType":[function(t,e){var i=function(){function t(){}return t.LINEAR="linear",t.RADIAL="radial",t}();e.exports=i},{}],"awayjs-display/lib/base/GraphicsPathWinding":[function(t,e){var i=function(){function t(){}return t.EVEN_ODD="evenOdd",t.NON_ZERO="nonZero",t}();e.exports=i},{}],"awayjs-display/lib/base/Graphics":[function(t,e){var i=function(){function t(){}return t.prototype.beginBitmapFill=function(t,e,i,s){void 0===e&&(e=null),void 0===i&&(i=!0),void 0===s&&(s=!1)},t.prototype.beginFill=function(t,e){void 0===e&&(e=1)},t.prototype.beginGradientFill=function(t,e,i,s,n,o,r,a){void 0===n&&(n=null),void 0===o&&(o="pad"),void 0===r&&(r="rgb"),void 0===a&&(a=0)},t.prototype.clear=function(){},t.prototype.copyFrom=function(){},t.prototype.cubicCurveTo=function(){},t.prototype.curveTo=function(){},t.prototype.drawCircle=function(){},t.prototype.drawEllipse=function(){},t.prototype.drawGraphicsData=function(){},t.prototype.drawPath=function(){},t.prototype.drawRect=function(){},t.prototype.drawRoundRect=function(t,e,i,s,n,o){void 0===o&&(o=0/0)},t.prototype.drawTriangles=function(t,e,i,s){void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=null)},t.prototype.endFill=function(){},t.prototype.lineBitmapStyle=function(t,e,i,s){void 0===e&&(e=null),void 0===i&&(i=!0),void 0===s&&(s=!1)},t.prototype.lineGradientStyle=function(t,e,i,s,n,o,r,a){void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r=null),void 0===a&&(a=0)},t.prototype.lineStyle=function(t,e,i,s,n,o,r,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===s&&(s=!1),void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r=null),void 0===a&&(a=3)},t.prototype.lineTo=function(){},t.prototype.moveTo=function(){},t}();e.exports=i},{}],"awayjs-display/lib/base/IBitmapDrawable":[function(){},{}],"awayjs-display/lib/base/IGraphicsData":[function(){},{}],"awayjs-display/lib/base/IMaterialOwner":[function(){},{}],"awayjs-display/lib/base/IStage":[function(){},{}],"awayjs-display/lib/base/ISubMeshClass":[function(){},{}],"awayjs-display/lib/base/ISubMesh":[function(){},{}],"awayjs-display/lib/base/InterpolationMethod":[function(t,e){var i=function(){function t(){}return t.LINEAR_RGB="linearRGB",t.RGB="rgb",t}();e.exports=i},{}],"awayjs-display/lib/base/JointStyle":[function(t,e){var i=function(){function t(){}return t.BEVEL="bevel",t.MITER="miter",t.ROUND="round",t}();e.exports=i},{}],"awayjs-display/lib/base/LightBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),n=t("awayjs-core/lib/errors/AbstractMethodError"),o=t("awayjs-display/lib/containers/DisplayObjectContainer"),r=t("awayjs-display/lib/events/LightEvent"),a=function(t){function e(){t.call(this),this._color=16777215,this._colorR=1,this._colorG=1,this._colorB=1,this._ambientColor=16777215,this._ambient=0,this._iAmbientR=0,this._iAmbientG=0,this._iAmbientB=0,this._specular=1,this._iSpecularR=1,this._iSpecularG=1,this._iSpecularB=1,this._diffuse=1,this._iDiffuseR=1,this._iDiffuseG=1,this._iDiffuseB=1,this._castsShadows=!1}return i(e,t),Object.defineProperty(e.prototype,"castsShadows",{get:function(){return this._castsShadows},set:function(t){this._castsShadows!=t&&(this._castsShadows=t,t?(null==this._shadowMapper&&(this._shadowMapper=this.pCreateShadowMapper()),this._shadowMapper.light=this):(this._shadowMapper.dispose(),this._shadowMapper=null),this.dispatchEvent(new r(r.CASTS_SHADOW_CHANGE)))},enumerable:!0,configurable:!0}),e.prototype.pCreateShadowMapper=function(){throw new n},Object.defineProperty(e.prototype,"specular",{get:function(){return this._specular},set:function(t){0>t&&(t=0),this._specular=t,this.updateSpecular()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"diffuse",{get:function(){return this._diffuse},set:function(t){0>t&&(t=0),this._diffuse=t,this.updateDiffuse()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this._colorR=(this._color>>16&255)/255,this._colorG=(this._color>>8&255)/255,this._colorB=(255&this._color)/255,this.updateDiffuse(),this.updateSpecular()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ambient",{get:function(){return this._ambient},set:function(t){0>t?t=0:t>1&&(t=1),this._ambient=t,this.updateAmbient()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ambientColor",{get:function(){return this._ambientColor},set:function(t){this._ambientColor=t,this.updateAmbient()},enumerable:!0,configurable:!0}),e.prototype.updateAmbient=function(){this._iAmbientR=(this._ambientColor>>16&255)/255*this._ambient,this._iAmbientG=(this._ambientColor>>8&255)/255*this._ambient,this._iAmbientB=(255&this._ambientColor)/255*this._ambient},e.prototype.iGetObjectProjectionMatrix=function(t,e,i){throw void 0===i&&(i=null),new n},Object.defineProperty(e.prototype,"assetType",{get:function(){return s.LIGHT},enumerable:!0,configurable:!0}),e.prototype.updateSpecular=function(){this._iSpecularR=this._colorR*this._specular,this._iSpecularG=this._colorG*this._specular,this._iSpecularB=this._colorB*this._specular},e.prototype.updateDiffuse=function(){this._iDiffuseR=this._colorR*this._diffuse,this._iDiffuseG=this._colorG*this._diffuse,this._iDiffuseB=this._colorB*this._diffuse},Object.defineProperty(e.prototype,"shadowMapper",{get:function(){return this._shadowMapper},set:function(t){this._shadowMapper=t,this._shadowMapper.light=this},enumerable:!0,configurable:!0}),e}(o);e.exports=a},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/library/AssetType":void 0,"awayjs-display/lib/containers/DisplayObjectContainer":void 0,"awayjs-display/lib/events/LightEvent":void 0}],"awayjs-display/lib/base/LineScaleMode":[function(t,e){var i=function(){function t(){}return t.HORIZONTAL="horizontal",t.NONE="none",t.NORMAL="normal",t.VERTICAL="vertical",t}();e.exports=i},{}],"awayjs-display/lib/base/LineSubGeometry":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/base/LineSubMesh"),n=t("awayjs-display/lib/base/SubGeometryBase"),o=t("awayjs-display/lib/base/TriangleSubGeometry"),r=t("awayjs-display/lib/events/SubGeometryEvent"),a=function(t){function e(){t.call(this,!0),this._positionsDirty=!0,this._boundingPositionDirty=!0,this._thicknessDirty=!0,this._colorsDirty=!0,this._pSubMeshClass=s
}return i(e,t),e.prototype._pUpdateStrideOffset=function(){this._pOffset[e.VERTEX_DATA]=0;var t=0;this._pOffset[e.START_POSITION_DATA]=t,t+=3,this._pOffset[e.END_POSITION_DATA]=t,t+=3,this._pOffset[e.THICKNESS_DATA]=t,t+=1,this._pOffset[e.COLOR_DATA]=t,t+=4,this._pStride[e.VERTEX_DATA]=t,this._pStride[e.START_POSITION_DATA]=t,this._pStride[e.END_POSITION_DATA]=t,this._pStride[e.THICKNESS_DATA]=t,this._pStride[e.COLOR_DATA]=t;var i=this._pNumVertices*t;null==this._pVertices?this._pVertices=new Array(i):this._pVertices.length!=i&&(this._pVertices.length=i),this._pStrideOffsetDirty=!1},Object.defineProperty(e.prototype,"vertices",{get:function(){return this._positionsDirty&&this.updatePositions(this._startPositions,this._endPositions),this._thicknessDirty&&this.updateThickness(this._thickness),this._colorsDirty&&this.updateColors(this._startColors,this._endColors),this._pVertices},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startPositions",{get:function(){return this._positionsDirty&&this.updatePositions(this._startPositions,this._endPositions),this._startPositions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPositions",{get:function(){return this._positionsDirty&&this.updatePositions(this._startPositions,this._endPositions),this._endPositions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thickness",{get:function(){return this._thicknessDirty&&this.updateThickness(this._thickness),this._thickness},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startColors",{get:function(){return this._colorsDirty&&this.updateColors(this._startColors,this._endColors),this._startColors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endColors",{get:function(){return this._colorsDirty&&this.updateColors(this._startColors,this._endColors),this._endColors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numSegments",{get:function(){return this._numSegments},enumerable:!0,configurable:!0}),e.prototype.getBoundingPositions=function(){return this._boundingPositionDirty&&(this._boundingPositions=this.startPositions.concat(this.endPositions)),this._boundingPositions},e.prototype.updatePositions=function(t,i){var s,n,o,r,a,h,p;this._startPositions=t,null==this._startPositions&&(this._startPositions=new Array),this._endPositions=i,null==this._endPositions&&(this._endPositions=new Array),this._boundingPositionDirty=!0,this._numSegments=this._startPositions.length/3,this._pNumVertices=4*this._numSegments;var l=this._pNumVertices*this.getStride(e.VERTEX_DATA);for(null==this._pVertices?this._pVertices=new Array(l):this._pVertices.length!=l&&(this._pVertices.length=l),s=0,n=0,r=this.getOffset(e.START_POSITION_DATA),a=this.getStride(e.START_POSITION_DATA),h=this._pVertices,p=new Array;s<t.length;){if(o=r/a&1?i:t,h[r]=o[s],h[r+1]=o[s+1],h[r+2]=o[s+2],o=r/a&1?t:i,h[r+3]=o[s],h[r+4]=o[s+1],h[r+5]=o[s+2],4==++n){var c=r/a-3;p.push(c,c+1,c+2,c+3,c+2,c+1),n=0,s+=3}r+=a}this.updateIndices(p),this.pInvalidateBounds(),this.notifyPositionsUpdate(),this._positionsDirty=!1},e.prototype.updateThickness=function(t){var i,s,n,o,r,a;if(this._thickness=t,null!=t)for(i=0,s=0,o=this.getOffset(e.THICKNESS_DATA),r=this.getStride(e.THICKNESS_DATA),a=this._pVertices,n=o;i<t.length;)a[n]=1&Math.floor(.5*(n-o)/r+.5)?-t[i]:t[i],4==++s&&(s=0,i++),n+=r;this.notifyThicknessUpdate(),this._thicknessDirty=!1},e.prototype.updateColors=function(t,i){var s,n,o,r,a,h,p;if(this._startColors=t,this._endColors=i,null==this._startColors)for(this._startColors=new Array(4*this._numSegments),s=0;s<this._startColors.length;)this._startColors[s++]=1;if(null==this._endColors)for(this._endColors=new Array(4*this._numSegments),s=0;s<this._endColors.length;)this._endColors[s++]=1;for(s=0,n=0,a=this.getOffset(e.COLOR_DATA),h=this.getStride(e.COLOR_DATA),p=this._pVertices,r=a;s<this._startColors.length;)o=(r-a)/h&1?this._endColors:this._startColors,p[r]=o[s],p[r+1]=o[s+1],p[r+2]=o[s+2],p[r+3]=o[s+3],4==++n&&(n=0,s+=4),r+=h;this.notifyColorsUpdate(),this._colorsDirty=!1},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._startPositions=null,this._endPositions=null,this._thickness=null,this._startColors=null,this._endColors=null},e.prototype.pInvalidateBounds=function(){this.parentGeometry&&this.parentGeometry.iInvalidateBounds(this)},e.prototype.clone=function(){var t=new e;return t.updateIndices(this._pIndices.concat()),t.updatePositions(this._startPositions.concat(),this._endPositions.concat()),t.updateThickness(this._thickness.concat()),t.updatePositions(this._startPositions.concat(),this._endPositions.concat()),t},e.prototype._pNotifyVerticesUpdate=function(){this._pStrideOffsetDirty=!0,this.notifyPositionsUpdate(),this.notifyThicknessUpdate(),this.notifyColorsUpdate()},e.prototype.notifyPositionsUpdate=function(){this._positionsDirty||(this._positionsDirty=!0,this._positionsUpdated||(this._positionsUpdated=new r(r.VERTICES_UPDATED,o.POSITION_DATA)),this.dispatchEvent(this._positionsUpdated))},e.prototype.notifyThicknessUpdate=function(){this._thicknessDirty||(this._thicknessDirty=!0,this._thicknessUpdated||(this._thicknessUpdated=new r(r.VERTICES_UPDATED,e.THICKNESS_DATA)),this.dispatchEvent(this._thicknessUpdated))},e.prototype.notifyColorsUpdate=function(){this._colorsDirty||(this._colorsDirty=!0,this._colorUpdated||(this._colorUpdated=new r(r.VERTICES_UPDATED,e.COLOR_DATA)),this.dispatchEvent(this._colorUpdated))},e.VERTEX_DATA="vertices",e.START_POSITION_DATA="startPositions",e.END_POSITION_DATA="endPositions",e.THICKNESS_DATA="thickness",e.COLOR_DATA="colors",e.POSITION_FORMAT="float3",e.COLOR_FORMAT="float4",e.THICKNESS_FORMAT="float1",e}(n);e.exports=a},{"awayjs-display/lib/base/LineSubMesh":void 0,"awayjs-display/lib/base/SubGeometryBase":void 0,"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-display/lib/events/SubGeometryEvent":void 0}],"awayjs-display/lib/base/LineSubMesh":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),n=t("awayjs-display/lib/base/SubMeshBase"),o=function(t){function e(e,i,s){void 0===s&&(s=null),t.call(this),this._pParentMesh=i,this._subGeometry=e,this.material=s}return i(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return s.LINE_SUB_MESH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subGeometry",{get:function(){return this._subGeometry},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.material=null,t.prototype.dispose.call(this)},e.prototype._iCollectRenderable=function(t){t.applyLineSubMesh(this)},e}(n);e.exports=o},{"awayjs-core/lib/library/AssetType":void 0,"awayjs-display/lib/base/SubMeshBase":void 0}],"awayjs-display/lib/base/LoaderInfo":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/EventDispatcher"),n=function(t){function e(){t.apply(this,arguments)}return i(e,t),Object.defineProperty(e.prototype,"bytes",{get:function(){return this._bytes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bytesLoaded",{get:function(){return this._bytesLoaded},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bytesTotal",{get:function(){return this._bytesTotal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentType",{get:function(){return this._contentType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loader",{get:function(){return this._loader},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),e}(s);e.exports=n},{"awayjs-core/lib/events/EventDispatcher":void 0}],"awayjs-display/lib/base/OrientationMode":[function(t,e){var i=function(){function t(){}return t.DEFAULT="default",t.CAMERA_PLANE="cameraPlane",t.CAMERA_POSITION="cameraPosition",t}();e.exports=i},{}],"awayjs-display/lib/base/PixelSnapping":[function(t,e){var i=function(){function t(){}return t.ALWAYS="always",t.AUTO="auto",t.NEVER="never",t}();e.exports=i},{}],"awayjs-display/lib/base/SpreadMethod":[function(t,e){var i=function(){function t(){}return t.PAD="pad",t.REFLECT="reflect",t.REPEAT="repeat",t}();e.exports=i},{}],"awayjs-display/lib/base/SubGeometryBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/NamedAssetBase"),n=t("awayjs-core/lib/errors/AbstractMethodError"),o=t("awayjs-display/lib/events/SubGeometryEvent"),r=function(t){function e(e){t.call(this),this._pStrideOffsetDirty=!0,this._pConcatenateArrays=!0,this._pStride=new Object,this._pOffset=new Object,this._pConcatenateArrays=e}return i(e,t),e.prototype._pUpdateStrideOffset=function(){throw new n},Object.defineProperty(e.prototype,"subMeshClass",{get:function(){return this._pSubMeshClass},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"concatenateArrays",{get:function(){return this._pConcatenateArrays},set:function(t){this._pConcatenateArrays!=t&&(this._pConcatenateArrays=t,this._pStrideOffsetDirty=!0,t&&this._pNotifyVerticesUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indices",{get:function(){return this._pIndices},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.updateVertices(),this._pVertices},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numTriangles",{get:function(){return this._numTriangles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numVertices",{get:function(){return this._pNumVertices},enumerable:!0,configurable:!0}),e.prototype.getStride=function(t){return this._pStrideOffsetDirty&&this._pUpdateStrideOffset(),this._pStride[t]},e.prototype.getOffset=function(t){return this._pStrideOffsetDirty&&this._pUpdateStrideOffset(),this._pOffset[t]},e.prototype.updateVertices=function(){throw new n},e.prototype.dispose=function(){this._pIndices=null,this._pVertices=null},e.prototype.updateIndices=function(t){this._pIndices=t,this._numIndices=t.length,this._numTriangles=this._numIndices/3,this.notifyIndicesUpdate()},e.prototype.pInvalidateBounds=function(){this.parentGeometry&&this.parentGeometry.iInvalidateBounds(this)},e.prototype.clone=function(){throw new n},e.prototype.applyTransformation=function(){},e.prototype.scale=function(){},e.prototype.scaleUV=function(t,e){void 0===t&&(t=1),void 0===e&&(e=1)},e.prototype.getBoundingPositions=function(){throw new n},e.prototype.notifyIndicesUpdate=function(){this._indicesUpdated||(this._indicesUpdated=new o(o.INDICES_UPDATED)),this.dispatchEvent(this._indicesUpdated)},e.prototype._pNotifyVerticesUpdate=function(){throw new n},e.VERTEX_DATA="vertices",e}(s);e.exports=r},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0,"awayjs-display/lib/events/SubGeometryEvent":void 0}],"awayjs-display/lib/base/SubMeshBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/AbstractMethodError"),n=t("awayjs-core/lib/library/NamedAssetBase"),o=function(t){function e(){t.call(this),this._iIndex=0,this._renderables=new Array}return i(e,t),Object.defineProperty(e.prototype,"animator",{get:function(){return this._pParentMesh.animator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this._material||this._pParentMesh.material},set:function(t){this.material&&this.material.iRemoveOwner(this),this._material=t,this.material&&this.material.iAddOwner(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sceneTransform",{get:function(){return this._pParentMesh.sceneTransform},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentMesh",{get:function(){return this._pParentMesh},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uvTransform",{get:function(){return this._uvTransform||this._pParentMesh.uvTransform},set:function(t){this._uvTransform=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.material=null;for(var t=this._renderables.length,e=0;t>e;e++)this._renderables[e].dispose()},e.prototype.getRenderSceneTransform=function(t){return this._pParentMesh.getRenderSceneTransform(t)},e.prototype._iAddRenderable=function(t){return this._renderables.push(t),t},e.prototype._iRemoveRenderable=function(t){var e=this._renderables.indexOf(t);return this._renderables.splice(e,1),t},e.prototype._iInvalidateRenderableGeometry=function(){for(var t=this._renderables.length,e=0;t>e;e++)this._renderables[e].invalidateGeometry()},e.prototype._iCollectRenderable=function(){throw new s},e.prototype._iGetExplicitMaterial=function(){return this._material},e}(n);e.exports=o},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0}],"awayjs-display/lib/base/Transform":[function(t,e){var i=t("awayjs-core/lib/geom/Matrix3D"),s=t("awayjs-core/lib/geom/Matrix3DUtils"),n=t("awayjs-core/lib/geom/Vector3D"),o=function(){function t(t){this._position=new n,this._displayObject=t}return Object.defineProperty(t.prototype,"backVector",{get:function(){var t=s.getForward(this._displayObject._iMatrix3D);return t.negate(),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"concatenatedColorTransform",{get:function(){return this._concatenatedColorTransform},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"concatenatedMatrix",{get:function(){return this._concatenatedMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"downVector",{get:function(){var t=s.getUp(this._displayObject._iMatrix3D);return t.negate(),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"forwardVector",{get:function(){return s.getForward(this._displayObject._iMatrix3D)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftVector",{get:function(){var t=s.getRight(this._displayObject._iMatrix3D);return t.negate(),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"matrix3D",{get:function(){return this._displayObject._iMatrix3D},set:function(t){this._displayObject._iMatrix3D=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelBounds",{get:function(){return this._pixelBounds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._displayObject._iMatrix3D.position},set:function(t){this._displayObject.x=t.x,this._displayObject.y=t.y,this._displayObject.z=t.z},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightVector",{get:function(){return s.getRight(this._displayObject._iMatrix3D)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return new n(this._displayObject.rotationX,this._displayObject.rotationY,this._displayObject.rotationZ)},set:function(t){this._displayObject.rotationX=t.x,this._displayObject.rotationY=t.y,this._displayObject.rotationZ=t.z},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return new n(this._displayObject.scaleX,this._displayObject.scaleY,this._displayObject.scaleZ)},set:function(t){this._displayObject.scaleX=t.x,this._displayObject.scaleY=t.y,this._displayObject.scaleZ=t.z},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"upVector",{get:function(){return s.getUp(this._displayObject._iMatrix3D)},enumerable:!0,configurable:!0}),t.prototype.getRelativeMatrix3D=function(){return new i},t.prototype.moveForward=function(t){this._displayObject.translateLocal(n.Z_AXIS,t)},t.prototype.moveBackward=function(t){this._displayObject.translateLocal(n.Z_AXIS,-t)},t.prototype.moveLeft=function(t){this._displayObject.translateLocal(n.X_AXIS,-t)},t.prototype.moveRight=function(t){this._displayObject.translateLocal(n.X_AXIS,t)},t.prototype.moveUp=function(t){this._displayObject.translateLocal(n.Y_AXIS,t)},t.prototype.moveDown=function(t){this._displayObject.translateLocal(n.Y_AXIS,-t)},t}();e.exports=o},{"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/geom/Matrix3DUtils":void 0,"awayjs-core/lib/geom/Vector3D":void 0}],"awayjs-display/lib/base/TriangleCulling":[function(t,e){var i=function(){function t(){}return t.NEGATIVE="negative",t.NONE="none",t.POSITIVE="positive",t}();e.exports=i},{}],"awayjs-display/lib/base/TriangleSubGeometry":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),n=t("awayjs-display/lib/base/SubGeometryBase"),o=t("awayjs-display/lib/base/TriangleSubMesh"),r=t("awayjs-display/lib/events/SubGeometryEvent"),a=function(t){function e(e){t.call(this,e),this._positionsDirty=!0,this._faceNormalsDirty=!0,this._faceTangentsDirty=!0,this._vertexNormalsDirty=!0,this._vertexTangentsDirty=!0,this._uvsDirty=!0,this._secondaryUVsDirty=!0,this._jointIndicesDirty=!0,this._jointWeightsDirty=!0,this._concatenateArrays=!0,this._autoDeriveNormals=!0,this._autoDeriveTangents=!0,this._autoDeriveUVs=!1,this._useFaceWeights=!1,this._scaleU=1,this._scaleV=1,this._pSubMeshClass=o}return i(e,t),Object.defineProperty(e.prototype,"scaleU",{get:function(){return this._scaleU},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleV",{get:function(){return this._scaleV},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useCondensedIndices",{get:function(){return this._useCondensedIndices},set:function(t){this._useCondensedIndices!=t&&(this._useCondensedIndices=t,this.notifyJointIndicesUpdate())},enumerable:!0,configurable:!0}),e.prototype._pUpdateStrideOffset=function(){if(this._concatenateArrays){this._pOffset[e.VERTEX_DATA]=0,this._pOffset[e.POSITION_DATA]=0;var t=3;null!=this._vertexNormals&&(this._pOffset[e.NORMAL_DATA]=t,t+=3),null!=this._vertexTangents&&(this._pOffset[e.TANGENT_DATA]=t,t+=3),null!=this._uvs&&(this._pOffset[e.UV_DATA]=t,t+=2),null!=this._secondaryUVs&&(this._pOffset[e.SECONDARY_UV_DATA]=t,t+=2),null!=this._jointIndices&&(this._pOffset[e.JOINT_INDEX_DATA]=t,t+=this._jointsPerVertex),null!=this._jointWeights&&(this._pOffset[e.JOINT_WEIGHT_DATA]=t,t+=this._jointsPerVertex),this._pStride[e.VERTEX_DATA]=t,this._pStride[e.POSITION_DATA]=t,this._pStride[e.NORMAL_DATA]=t,this._pStride[e.TANGENT_DATA]=t,this._pStride[e.UV_DATA]=t,this._pStride[e.SECONDARY_UV_DATA]=t,this._pStride[e.JOINT_INDEX_DATA]=t,this._pStride[e.JOINT_WEIGHT_DATA]=t;var i=this._pNumVertices*t;null==this._pVertices?this._pVertices=new Array(i):this._pVertices.length!=i&&(this._pVertices.length=i)}else this._pOffset[e.POSITION_DATA]=0,this._pOffset[e.NORMAL_DATA]=0,this._pOffset[e.TANGENT_DATA]=0,this._pOffset[e.UV_DATA]=0,this._pOffset[e.SECONDARY_UV_DATA]=0,this._pOffset[e.JOINT_INDEX_DATA]=0,this._pOffset[e.JOINT_WEIGHT_DATA]=0,this._pStride[e.POSITION_DATA]=3,this._pStride[e.NORMAL_DATA]=3,this._pStride[e.TANGENT_DATA]=3,this._pStride[e.UV_DATA]=2,this._pStride[e.SECONDARY_UV_DATA]=2,this._pStride[e.JOINT_INDEX_DATA]=this._jointsPerVertex,this._pStride[e.JOINT_WEIGHT_DATA]=this._jointsPerVertex;this._pStrideOffsetDirty=!1},Object.defineProperty(e.prototype,"jointsPerVertex",{get:function(){return this._jointsPerVertex},set:function(t){this._jointsPerVertex!=t&&(this._jointsPerVertex=t,this._pStrideOffsetDirty=!0,this._pConcatenateArrays&&this._pNotifyVerticesUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoDeriveUVs",{get:function(){return this._autoDeriveUVs},set:function(t){this._autoDeriveUVs!=t&&(this._autoDeriveUVs=t,t&&this.notifyUVsUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoDeriveNormals",{get:function(){return this._autoDeriveNormals},set:function(t){this._autoDeriveNormals!=t&&(this._autoDeriveNormals=t,t&&this.notifyNormalsUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoDeriveTangents",{get:function(){return this._autoDeriveTangents},set:function(t){this._autoDeriveTangents!=t&&(this._autoDeriveTangents=t,t&&this.notifyTangentsUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertices",{get:function(){return this._positionsDirty&&this.updatePositions(this._positions),this._vertexNormalsDirty&&this.updateVertexNormals(this._vertexNormals),this._vertexTangentsDirty&&this.updateVertexTangents(this._vertexTangents),this._uvsDirty&&this.updateUVs(this._uvs),this._secondaryUVsDirty&&this.updateSecondaryUVs(this._secondaryUVs),this._jointIndicesDirty&&this.updateJointIndices(this._jointIndices),this._jointWeightsDirty&&this.updateJointWeights(this._jointWeights),this._pVertices},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positionsDirty&&this.updatePositions(this._positions),this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertexNormals",{get:function(){return this._vertexNormalsDirty&&this.updateVertexNormals(this._vertexNormals),this._vertexNormals},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertexTangents",{get:function(){return this._vertexTangentsDirty&&this.updateVertexTangents(this._vertexTangents),this._vertexTangents},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"faceNormals",{get:function(){return this._faceNormalsDirty&&this.updateFaceNormals(),this._faceNormals},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"faceTangents",{get:function(){return this._faceTangentsDirty&&this.updateFaceTangents(),this._faceTangents},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uvs",{get:function(){return this._uvsDirty&&this.updateUVs(this._uvs),this._uvs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secondaryUVs",{get:function(){return this._secondaryUVsDirty&&this.updateSecondaryUVs(this._secondaryUVs),this._secondaryUVs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"jointIndices",{get:function(){return this._jointIndicesDirty&&this.updateJointIndices(this._jointIndices),this._useCondensedIndices?this._condensedJointIndices:this._jointIndices},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"jointWeights",{get:function(){return this._jointWeightsDirty&&this.updateJointWeights(this._jointWeights),this._jointWeights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useFaceWeights",{get:function(){return this._useFaceWeights},set:function(t){this._useFaceWeights!=t&&(this._useFaceWeights=t,this._autoDeriveNormals&&this.notifyNormalsUpdate(),this._autoDeriveTangents&&this.notifyTangentsUpdate(),this._faceNormalsDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numCondensedJoints",{get:function(){return this._jointIndicesDirty&&this.updateJointIndices(this._jointIndices),this._numCondensedJoints},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"condensedIndexLookUp",{get:function(){return this._jointIndicesDirty&&this.updateJointIndices(this._jointIndices),this._condensedIndexLookUp},enumerable:!0,configurable:!0}),e.prototype.getBoundingPositions=function(){return this._positionsDirty&&this.updatePositions(this._positions),this._positions},e.prototype.updatePositions=function(t){var i,s,n,o;if(this._positions=t,null==this._positions&&(this._positions=new Array),this._pNumVertices=this._positions.length/3,this._concatenateArrays){var r=this._pNumVertices*this.getStride(e.VERTEX_DATA);for(null==this._pVertices?this._pVertices=new Array(r):this._pVertices.length!=r&&(this._pVertices.length=r),i=0,s=this.getOffset(e.POSITION_DATA),n=this.getStride(e.POSITION_DATA),o=this._pVertices;i<t.length;)o[s]=t[i++],o[s+1]=t[i++],o[s+2]=t[i++],s+=n}this._autoDeriveNormals&&this.notifyNormalsUpdate(),this._autoDeriveTangents&&this.notifyTangentsUpdate(),this._autoDeriveUVs&&this.notifyUVsUpdate(),this.pInvalidateBounds(),this.notifyPositionsUpdate(),this._positionsDirty=!1},e.prototype.updateVertexNormals=function(t){var i,s,n,o,r;if(this._autoDeriveNormals){null==this._vertexNormals&&(this._vertexNormals=new Array(this._positions.length),this._concatenateArrays?this._pNotifyVerticesUpdate():this._pStrideOffsetDirty=!0),this._faceNormalsDirty&&this.updateFaceNormals(),n=this.getOffset(e.NORMAL_DATA),o=this.getStride(e.NORMAL_DATA),r=this._concatenateArrays?this._pVertices:this._vertexNormals;var a=0,h=1,p=2;s=n;for(var l=r.length;l>s;)r[s]=0,r[s+1]=0,r[s+2]=0,s+=o;var c,u=0,_=this._pIndices.length;for(i=0;_>i;)c=this._useFaceWeights?this._faceWeights[u++]:1,s=n+this._pIndices[i++]*o,r[s]+=this._faceNormals[a]*c,r[s+1]+=this._faceNormals[h]*c,r[s+2]+=this._faceNormals[p]*c,s=n+this._pIndices[i++]*o,r[s]+=this._faceNormals[a]*c,r[s+1]+=this._faceNormals[h]*c,r[s+2]+=this._faceNormals[p]*c,s=n+this._pIndices[i++]*o,r[s]+=this._faceNormals[a]*c,r[s+1]+=this._faceNormals[h]*c,r[s+2]+=this._faceNormals[p]*c,a+=3,h+=3,p+=3;for(i=0,s=n;l>s;){var d=r[s],y=r[s+1],f=r[s+2],m=1/Math.sqrt(d*d+y*y+f*f);this._concatenateArrays?(this._vertexNormals[i++]=r[s]=d*m,this._vertexNormals[i++]=r[s+1]=y*m,this._vertexNormals[i++]=r[s+2]=f*m):(r[s]=d*m,r[s+1]=y*m,r[s+2]=f*m),s+=o}}else if(null!=this._vertexNormals&&null!=t||null==this._vertexNormals&&null==t||(this._concatenateArrays?this._pNotifyVerticesUpdate():this._pStrideOffsetDirty=!0),this._vertexNormals=t,null!=t&&this._concatenateArrays)for(i=0,s=this.getOffset(e.NORMAL_DATA),o=this.getStride(e.NORMAL_DATA),r=this._pVertices;i<t.length;)r[s]=t[i++],r[s+1]=t[i++],r[s+2]=t[i++],s+=o;this.notifyNormalsUpdate(),this._vertexNormalsDirty=!1},e.prototype.updateVertexTangents=function(t){var i,s,n,o,r;if(this._autoDeriveTangents){null==this._vertexTangents&&(this._vertexTangents=new Array(this._positions.length),this._concatenateArrays?this._pNotifyVerticesUpdate():this._pStrideOffsetDirty=!0),this._faceTangentsDirty&&this.updateFaceTangents(),n=this.getOffset(e.TANGENT_DATA),o=this.getStride(e.TANGENT_DATA),r=this._concatenateArrays?this._pVertices:this._vertexTangents,s=n;for(var a=r.length;a>s;)r[s]=0,r[s+1]=0,r[s+2]=0,s+=o;var h,p=0,l=0,c=1,u=2;i=0;for(var _=this._pIndices.length;_>i;)h=this._useFaceWeights?this._faceWeights[p++]:1,s=n+this._pIndices[i++]*o,r[s++]+=this._faceTangents[l]*h,r[s++]+=this._faceTangents[c]*h,r[s]+=this._faceTangents[u]*h,s=n+this._pIndices[i++]*o,r[s++]+=this._faceTangents[l]*h,r[s++]+=this._faceTangents[c]*h,r[s]+=this._faceTangents[u]*h,s=n+this._pIndices[i++]*o,r[s++]+=this._faceTangents[l]*h,r[s++]+=this._faceTangents[c]*h,r[s]+=this._faceTangents[u]*h,l+=3,c+=3,u+=3;for(i=0,s=n;a>s;){var d=r[s],y=r[s+1],f=r[s+2],m=1/Math.sqrt(d*d+y*y+f*f);this._concatenateArrays?(this._vertexTangents[i++]=r[s]=d*m,this._vertexTangents[i++]=r[s+1]=y*m,this._vertexTangents[i++]=r[s+2]=f*m):(r[s]=d*m,r[s+1]=y*m,r[s+2]=f*m),s+=o}}else if(null!=this._vertexTangents&&null!=t||null==this._vertexTangents&&null==t||(this._concatenateArrays?this._pNotifyVerticesUpdate():this._pStrideOffsetDirty=!0),this._vertexTangents=t,null!=t&&this._concatenateArrays)for(i=0,s=this.getOffset(e.TANGENT_DATA),o=this.getStride(e.TANGENT_DATA),r=this._pVertices;i<t.length;)r[s]=t[i++],r[s+1]=t[i++],r[s+2]=t[i++],s+=o;this.notifyTangentsUpdate(),this._vertexTangentsDirty=!1},e.prototype.updateUVs=function(t){var i,s,n,o,r;if(this._autoDeriveUVs){null==this._uvs&&(this._uvs=new Array(2*this._positions.length/3),this._concatenateArrays?this._pNotifyVerticesUpdate():this._pStrideOffsetDirty=!0),n=this.getOffset(e.UV_DATA),o=this.getStride(e.UV_DATA),r=this._concatenateArrays?this._pVertices:this._uvs,i=0,s=n;for(var a=0,h=r.length;h>s;)this._concatenateArrays?(this._uvs[i++]=r[s]=.5*a,this._uvs[i++]=r[s+1]=1-(1&a)):(r[s]=.5*a,r[s+1]=1-(1&a)),3==++a&&(a=0),s+=o}else if(null!=this._uvs&&null!=t||null==this._uvs&&null==t||(this._concatenateArrays?this._pNotifyVerticesUpdate():this._pStrideOffsetDirty=!0),this._uvs=t,null!=t&&this._concatenateArrays)for(i=0,s=this.getOffset(e.UV_DATA),o=this.getStride(e.UV_DATA),r=this._pVertices;i<t.length;)r[s]=t[i++],r[s+1]=t[i++],s+=o;this._autoDeriveTangents&&this.notifyTangentsUpdate(),this.notifyUVsUpdate(),this._uvsDirty=!1},e.prototype.updateSecondaryUVs=function(t){var i,s,n,o,r;if(!this._concatenateArrays||null!=this._secondaryUVs&&null!=t||null==this._secondaryUVs&&null==t||this._pNotifyVerticesUpdate(),this._secondaryUVs=t,null!=t&&this._concatenateArrays)for(n=this.getOffset(e.SECONDARY_UV_DATA),o=this.getStride(e.SECONDARY_UV_DATA),i=0,s=n,r=this._pVertices;i<t.length;)r[s]=t[i++],r[s+1]=t[i++],s+=o;this.notifySecondaryUVsUpdate(),this._secondaryUVsDirty=!1},e.prototype.updateJointIndices=function(t){var i,s,n,o,r,a;if(!this._concatenateArrays||null!=this._jointIndices&&null!=t||null==this._jointIndices&&null==t||this._pNotifyVerticesUpdate(),this._jointIndices=t,null!=t)if(o=this.getOffset(e.JOINT_INDEX_DATA),r=this.getStride(e.JOINT_INDEX_DATA),this._useCondensedIndices){i=0,s=0,n=o,a=this._concatenateArrays?this._pVertices:this._condensedJointIndices;var h,p=0,l=new Object;for(this._concatenateArrays||(this._condensedJointIndices=new Array(t.length)),this._condensedIndexLookUp=new Array;i<t.length;){for(s=0;s<this._jointsPerVertex;s++)h=t[i++],void 0==l[h]&&(l[h]=3*p,this._condensedIndexLookUp[p++]=h),a[n+s]=l[h];n+=r}this._numCondensedJoints=p}else if(this._concatenateArrays)for(i=0,n=o,a=this._pVertices;i<t.length;){for(s=0;s<this._jointsPerVertex;)a[n+s++]=t[i++];n+=r}this.notifyJointIndicesUpdate(),this._jointIndicesDirty=!1},e.prototype.updateJointWeights=function(t){var i,s,n,o,r,a;if(!this._concatenateArrays||null!=this._jointWeights&&null!=t||null==this._jointWeights&&null==t||this._pNotifyVerticesUpdate(),this._jointWeights=t,null!=t&&this._concatenateArrays)for(o=this.getOffset(e.JOINT_WEIGHT_DATA),r=this.getStride(e.JOINT_WEIGHT_DATA),i=0,n=o,a=this._pVertices;i<t.length;){for(s=0;s<this._jointsPerVertex;)a[n+s++]=t[i++];n+=r}this.notifyJointWeightsUpdate(),this._jointWeightsDirty=!1},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._positions=null,this._vertexNormals=null,this._vertexTangents=null,this._uvs=null,this._secondaryUVs=null,this._jointIndices=null,this._jointWeights=null,this._faceNormals=null,this._faceWeights=null,this._faceTangents=null},e.prototype.updateIndices=function(e){t.prototype.updateIndices.call(this,e),this._faceNormalsDirty=!0,this._autoDeriveNormals&&(this._vertexNormalsDirty=!0),this._autoDeriveTangents&&(this._vertexTangentsDirty=!0),this._autoDeriveUVs&&(this._uvsDirty=!0)},e.prototype.clone=function(){var t=new e(this._concatenateArrays);return t.updateIndices(this._pIndices.concat()),t.updatePositions(this._positions.concat()),t.updateVertexNormals(this._vertexNormals&&!this._autoDeriveNormals?this._vertexNormals.concat():null),t.updateUVs(this._uvs&&!this._autoDeriveUVs?this._uvs.concat():null),t.updateVertexTangents(this._vertexTangents&&!this._autoDeriveTangents?this._vertexTangents.concat():null),this._secondaryUVs&&t.updateSecondaryUVs(this._secondaryUVs.concat()),this._jointIndices&&(t.jointsPerVertex=this._jointsPerVertex,t.updateJointIndices(this._jointIndices.concat())),this._jointWeights&&t.updateJointWeights(this._jointWeights.concat()),t},e.prototype.scaleUV=function(t,e){void 0===t&&(t=1),void 0===e&&(e=1);var i,s,n,o;o=this._uvs;var r=t/this._scaleU,a=e/this._scaleV;
this._scaleU=t,this._scaleV=e;var h=o.length;for(s=0,n=2,i=s;h>i;)o[i]*=r,o[i+1]*=a,i+=n;this.notifyUVsUpdate()},e.prototype.scale=function(t){var e,i,s,n,o;o=this._positions;var r=o.length;for(s=0,n=3,e=0,i=s;r>e;)o[i]*=t,o[i+1]*=t,o[i+2]*=t,e+=3,i+=n;this.notifyPositionsUpdate()},e.prototype.applyTransformation=function(t){var i,n,o;this._concatenateArrays?(i=this._pVertices,n=this._pVertices,o=this._pVertices):(i=this._positions,n=this._vertexNormals,o=this._vertexTangents);var r,a,h,p,l=this._positions.length/3,c=new s,u=null!=this._vertexNormals,_=null!=this._vertexTangents;(u||_)&&(p=t.clone(),p.invert(),p.transpose());var d=this.getOffset(e.POSITION_DATA),y=this.getOffset(e.NORMAL_DATA),f=this.getOffset(e.TANGENT_DATA),m=this.getStride(e.POSITION_DATA),b=this.getStride(e.NORMAL_DATA),g=this.getStride(e.TANGENT_DATA);for(r=0;l>r;++r)a=d+1,h=d+2,c.x=i[d],c.y=i[a],c.z=i[h],c=t.transformVector(c),i[d]=c.x,i[a]=c.y,i[h]=c.z,d+=m,u&&(a=y+1,h=y+2,c.x=n[y],c.y=n[a],c.z=n[h],c=p.deltaTransformVector(c),c.normalize(),n[y]=c.x,n[a]=c.y,n[h]=c.z,y+=b),_&&(a=f+1,h=f+2,c.x=o[f],c.y=o[a],c.z=o[h],c=p.deltaTransformVector(c),c.normalize(),o[f]=c.x,o[a]=c.y,o[h]=c.z,f+=g);this.notifyPositionsUpdate(),this.notifyNormalsUpdate(),this.notifyTangentsUpdate()},e.prototype.updateFaceTangents=function(){var t,e,i,s,n,o,r,a,h,p,l,c,u,_,d,y,f,m,b,g,v=0,w=this._positions,P=this._uvs,j=this._pIndices.length;for(null==this._faceTangents&&(this._faceTangents=new Array(j));j>v;)t=this._pIndices[v],e=this._pIndices[v+1],i=this._pIndices[v+2],n=P[2*t+1],o=P[2*e+1]-n,r=P[2*i+1]-n,s=3*t,h=w[s],p=w[s+1],l=w[s+2],s=3*e,c=w[s]-h,u=w[s+1]-p,_=w[s+2]-l,s=3*i,d=w[s]-h,y=w[s+1]-p,f=w[s+2]-l,m=r*c-o*d,b=r*u-o*y,g=r*_-o*f,a=1/Math.sqrt(m*m+b*b+g*g),this._faceTangents[v++]=a*m,this._faceTangents[v++]=a*b,this._faceTangents[v++]=a*g;this._faceTangentsDirty=!1},e.prototype.updateFaceNormals=function(){var t,e,i,s,n,o,r,a,h,p,l,c,u,_,d,y,f,m,b,g,v=0,w=0,P=0,j=this._positions,A=this._pIndices.length;for(null==this._faceNormals&&(this._faceNormals=new Array(A)),this._useFaceWeights&&null==this._faceWeights&&(this._faceWeights=new Array(A/3));A>v;){if(t=3*this._pIndices[v++],e=j[t],n=j[t+1],a=j[t+2],t=3*this._pIndices[v++],i=j[t],o=j[t+1],h=j[t+2],t=3*this._pIndices[v++],s=j[t],r=j[t+1],p=j[t+2],l=s-e,c=r-n,u=p-a,_=i-e,d=o-n,y=h-a,f=u*d-c*y,m=l*y-u*_,b=c*_-l*d,g=Math.sqrt(f*f+m*m+b*b),this._useFaceWeights){var O=1e4*g;1>O&&(O=1),this._faceWeights[P++]=O}g=1/g,this._faceNormals[w++]=f*g,this._faceNormals[w++]=m*g,this._faceNormals[w++]=b*g}this._faceNormalsDirty=!1},e.prototype._pNotifyVerticesUpdate=function(){this._pStrideOffsetDirty=!0,this.notifyPositionsUpdate(),this.notifyNormalsUpdate(),this.notifyTangentsUpdate(),this.notifyUVsUpdate(),this.notifySecondaryUVsUpdate(),this.notifyJointIndicesUpdate(),this.notifyJointWeightsUpdate()},e.prototype.notifyPositionsUpdate=function(){this._positionsDirty||(this._positionsDirty=!0,this._positionsUpdated||(this._positionsUpdated=new r(r.VERTICES_UPDATED,e.POSITION_DATA)),this.dispatchEvent(this._positionsUpdated))},e.prototype.notifyNormalsUpdate=function(){this._vertexNormalsDirty||(this._vertexNormalsDirty=!0,this._normalsUpdated||(this._normalsUpdated=new r(r.VERTICES_UPDATED,e.NORMAL_DATA)),this.dispatchEvent(this._normalsUpdated))},e.prototype.notifyTangentsUpdate=function(){this._vertexTangentsDirty||(this._vertexTangentsDirty=!0,this._tangentsUpdated||(this._tangentsUpdated=new r(r.VERTICES_UPDATED,e.TANGENT_DATA)),this.dispatchEvent(this._tangentsUpdated))},e.prototype.notifyUVsUpdate=function(){this._uvsDirty||(this._uvsDirty=!0,this._uvsUpdated||(this._uvsUpdated=new r(r.VERTICES_UPDATED,e.UV_DATA)),this.dispatchEvent(this._uvsUpdated))},e.prototype.notifySecondaryUVsUpdate=function(){this._secondaryUVsDirty||(this._secondaryUVsDirty=!0,this._secondaryUVsUpdated||(this._secondaryUVsUpdated=new r(r.VERTICES_UPDATED,e.SECONDARY_UV_DATA)),this.dispatchEvent(this._secondaryUVsUpdated))},e.prototype.notifyJointIndicesUpdate=function(){this._jointIndicesDirty||(this._jointIndicesDirty=!0,this._jointIndicesUpdated||(this._jointIndicesUpdated=new r(r.VERTICES_UPDATED,e.JOINT_INDEX_DATA)),this.dispatchEvent(this._jointIndicesUpdated))},e.prototype.notifyJointWeightsUpdate=function(){this._jointWeightsDirty||(this._jointWeightsDirty=!0,this._jointWeightsUpdated||(this._jointWeightsUpdated=new r(r.VERTICES_UPDATED,e.JOINT_WEIGHT_DATA)),this.dispatchEvent(this._jointWeightsUpdated))},e.POSITION_DATA="positions",e.NORMAL_DATA="vertexNormals",e.TANGENT_DATA="vertexTangents",e.UV_DATA="uvs",e.SECONDARY_UV_DATA="secondaryUVs",e.JOINT_INDEX_DATA="jointIndices",e.JOINT_WEIGHT_DATA="jointWeights",e.POSITION_FORMAT="float3",e.NORMAL_FORMAT="float3",e.TANGENT_FORMAT="float3",e.UV_FORMAT="float2",e.SECONDARY_UV_FORMAT="float2",e}(n);e.exports=a},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/base/SubGeometryBase":void 0,"awayjs-display/lib/base/TriangleSubMesh":void 0,"awayjs-display/lib/events/SubGeometryEvent":void 0}],"awayjs-display/lib/base/TriangleSubMesh":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),n=t("awayjs-display/lib/base/SubMeshBase"),o=function(t){function e(e,i,s){void 0===s&&(s=null),t.call(this),this._pParentMesh=i,this._subGeometry=e,this.material=s}return i(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return s.TRIANGLE_SUB_MESH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subGeometry",{get:function(){return this._subGeometry},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){t.prototype.dispose.call(this)},e.prototype._iCollectRenderable=function(t){t.applyTriangleSubMesh(this)},e}(n);e.exports=o},{"awayjs-core/lib/library/AssetType":void 0,"awayjs-display/lib/base/SubMeshBase":void 0}],"awayjs-display/lib/containers/DisplayObjectContainer":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),n=t("awayjs-core/lib/errors/ArgumentError"),o=t("awayjs-core/lib/errors/Error"),r=t("awayjs-core/lib/errors/RangeError"),a=t("awayjs-display/lib/base/DisplayObject"),h=function(t){function e(){t.call(this),this._mouseChildren=!0,this._children=new Array}return i(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return s.CONTAINER},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseChildren",{get:function(){return this._mouseChildren},set:function(t){this._mouseChildren!=t&&(this._mouseChildren=t,this._pUpdateImplicitMouseEnabled(this._pParent?this._pParent.mouseChildren:!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numChildren",{get:function(){return this._children.length},enumerable:!0,configurable:!0}),e.prototype.addChild=function(t){if(null==t)throw new o("Parameter child cannot be null.");return t._pParent&&t._pParent.removeChildInternal(t),t.iSetParent(this),this._children.push(t),t},e.prototype.addChildAt=function(t){return t},e.prototype.addChildren=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var i=t.length,s=0;i>s;s++)this.addChild(t[s])},e.prototype.clone=function(){var t=new e;t.pivot=this.pivot,t._iMatrix3D=this._iMatrix3D,t.partition=this.partition,t.name=name;for(var i=this._children.length,s=0;i>s;++s)t.addChild(this._children[s].clone());return t},e.prototype.contains=function(t){return this._children.indexOf(t)>=0},e.prototype.disposeWithChildren=function(){for(this.dispose();this.numChildren>0;)this.getChildAt(0).dispose()},e.prototype.getChildAt=function(t){var e=this._children[t];if(null==e)throw new r("Index does not exist in the child list of the caller");return e},e.prototype.getChildByName=function(t){for(var e=this._children.length,i=0;e>i;++i)if(this._children[i].name==t)return this._children[i];return null},e.prototype.getChildIndex=function(t){var e=this._children.indexOf(t);if(-1==e)throw new n("Child parameter is not a child of the caller");return e},e.prototype.getObjectsUnderPoint=function(){return new Array},e.prototype.removeChild=function(t){if(null==t)throw new o("Parameter child cannot be null");return this.removeChildInternal(t),t.iSetParent(null),t},e.prototype.removeChildAt=function(t){return this.removeChild(this._children[t])},e.prototype.removeChildren=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=2147483647),0>t)throw new r("beginIndex is out of range of the child list");if(e>this._children.length)throw new r("endIndex is out of range of the child list");for(var i=t;e>i;i++)this.removeChild(this._children[i])},e.prototype.setChildIndex=function(){},e.prototype.swapChildren=function(){},e.prototype.swapChildrenAt=function(){},e.prototype.pInvalidateSceneTransform=function(){t.prototype.pInvalidateSceneTransform.call(this);for(var e=this._children.length,i=0;e>i;++i)this._children[i].pInvalidateSceneTransform()},e.prototype._pUpdateScene=function(e){t.prototype._pUpdateScene.call(this,e);for(var i=this._children.length,s=0;i>s;++s)this._children[s]._pUpdateScene(e)},e.prototype._pUpdateImplicitMouseEnabled=function(e){t.prototype._pUpdateImplicitMouseEnabled.call(this,e);for(var i=this._children.length,s=0;i>s;++s)this._children[s]._pUpdateImplicitMouseEnabled(this._mouseChildren)},e.prototype._pUpdateImplicitVisibility=function(e){t.prototype._pUpdateImplicitVisibility.call(this,e);for(var i=this._children.length,s=0;i>s;++s)this._children[s]._pUpdateImplicitVisibility(this._pImplicitVisibility)},e.prototype._pUpdateImplicitPartition=function(e){t.prototype._pUpdateImplicitPartition.call(this,e);for(var i=this._children.length,s=0;i>s;++s)this._children[s]._pUpdateImplicitPartition(this._pImplicitPartition)},e.prototype.removeChildInternal=function(t){return this._children.splice(this.getChildIndex(t),1),t},e}(a);e.exports=h},{"awayjs-core/lib/errors/ArgumentError":void 0,"awayjs-core/lib/errors/Error":void 0,"awayjs-core/lib/errors/RangeError":void 0,"awayjs-core/lib/library/AssetType":void 0,"awayjs-display/lib/base/DisplayObject":void 0}],"awayjs-display/lib/containers/Loader":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetLibraryBundle"),n=t("awayjs-core/lib/library/AssetLoader"),o=t("awayjs-core/lib/events/AssetEvent"),r=t("awayjs-core/lib/events/IOErrorEvent"),a=t("awayjs-core/lib/events/LoaderEvent"),h=t("awayjs-core/lib/events/ParserEvent"),p=t("awayjs-display/lib/containers/DisplayObjectContainer"),l=function(t){function e(e,i){var s=this;void 0===e&&(e=!0),void 0===i&&(i=null),t.call(this),this._loadingSessions=new Array,this._useAssetLib=e,this._assetLibId=i,this._onResourceCompleteDelegate=function(t){return s.onResourceComplete(t)},this._onAssetCompleteDelegate=function(t){return s.onAssetComplete(t)}}return i(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentLoaderInfo",{get:function(){return this._contentLoaderInfo},enumerable:!0,configurable:!0}),e.prototype.close=function(){if(this._useAssetLib){var t;return t=s.getInstance(this._assetLibId),t.stopAllLoadingSessions(),void(this._loadingSessions=null)}var e,i=this._loadingSessions.length;for(e=0;i>e;e++)this.removeListeners(this._loadingSessions[e]),this._loadingSessions[e].stop(),this._loadingSessions[e]=null;this._loadingSessions=null},e.prototype.load=function(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=null);var h;if(this._useAssetLib){var p;p=s.getInstance(this._assetLibId),h=p.load(t,e,i,r)}else{var l=new n;this._loadingSessions.push(l),h=l.load(t,e,i,r)}return h.addEventListener(a.RESOURCE_COMPLETE,this._onResourceCompleteDelegate),h.addEventListener(o.ASSET_COMPLETE,this._onAssetCompleteDelegate),h._iLoader._iAddErrorHandler(this.onLoadError),h._iLoader._iAddParseErrorHandler(this.onParseError),h},e.prototype.loadData=function(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=null);var h;if(this._useAssetLib){var p;p=s.getInstance(this._assetLibId),h=p.loadData(t,e,i,r)}else{var l=new n;this._loadingSessions.push(l),h=l.loadData(t,"",e,i,r)}return h.addEventListener(a.RESOURCE_COMPLETE,this._onResourceCompleteDelegate),h.addEventListener(o.ASSET_COMPLETE,this._onAssetCompleteDelegate),h._iLoader._iAddErrorHandler(this.onLoadError),h._iLoader._iAddParseErrorHandler(this.onParseError),h},e.prototype.unload=function(){},e.enableParser=function(t){n.enableParser(t)},e.enableParsers=function(t){n.enableParsers(t)},e.prototype.removeListeners=function(t){t.removeEventListener(a.RESOURCE_COMPLETE,this._onResourceCompleteDelegate),t.removeEventListener(o.ASSET_COMPLETE,this._onAssetCompleteDelegate)},e.prototype.onAssetComplete=function(t){this.dispatchEvent(t)},e.prototype.onLoadError=function(t){return this.hasEventListener(r.IO_ERROR)?(this.dispatchEvent(t),!0):!1},e.prototype.onParseError=function(t){return this.hasEventListener(h.PARSE_ERROR)?(this.dispatchEvent(t),!0):!1},e.prototype.onResourceComplete=function(t){this._content=t.content,this._content&&this.addChild(this._content),this.dispatchEvent(t)},e}(p);e.exports=l},{"awayjs-core/lib/events/AssetEvent":void 0,"awayjs-core/lib/events/IOErrorEvent":void 0,"awayjs-core/lib/events/LoaderEvent":void 0,"awayjs-core/lib/events/ParserEvent":void 0,"awayjs-core/lib/library/AssetLibraryBundle":void 0,"awayjs-core/lib/library/AssetLoader":void 0,"awayjs-display/lib/containers/DisplayObjectContainer":void 0}],"awayjs-display/lib/containers/Scene":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/EventDispatcher"),n=t("awayjs-display/lib/containers/DisplayObjectContainer"),o=t("awayjs-display/lib/events/SceneEvent"),r=t("awayjs-display/lib/partition/NodeBase"),a=t("awayjs-display/lib/partition/Partition"),h=function(t){function e(){t.call(this),this._expandedPartitions=new Array,this._partitions=new Array,this._iCollectionMark=0,this._iSceneGraphRoot=new n,this._iSceneGraphRoot._iSetScene(this),this._iSceneGraphRoot._iIsRoot=!0,this._iSceneGraphRoot.partition=new a(new r)}return i(e,t),e.prototype.traversePartitions=function(t){var e=0,i=this._partitions.length;for(t.scene=this;i>e;)this._iCollectionMark++,this._partitions[e++].traverse(t)},Object.defineProperty(e.prototype,"partition",{get:function(){return this._iSceneGraphRoot.partition},set:function(t){this._iSceneGraphRoot.partition=t,this.dispatchEvent(new o(o.PARTITION_CHANGED,this._iSceneGraphRoot))},enumerable:!0,configurable:!0}),e.prototype.contains=function(t){return this._iSceneGraphRoot.contains(t)},e.prototype.addChild=function(t){return this._iSceneGraphRoot.addChild(t)},e.prototype.removeChild=function(t){this._iSceneGraphRoot.removeChild(t)},e.prototype.removeChildAt=function(t){this._iSceneGraphRoot.removeChildAt(t)},e.prototype.getChildAt=function(t){return this._iSceneGraphRoot.getChildAt(t)},Object.defineProperty(e.prototype,"numChildren",{get:function(){return this._iSceneGraphRoot.numChildren},enumerable:!0,configurable:!0}),e.prototype.iRegisterEntity=function(t){t.partition&&this.iRegisterPartition(t.partition),t.isEntity&&t._iAssignedPartition.iMarkForUpdate(t)},e.prototype.iRegisterPartition=function(t){this._expandedPartitions.push(t),-1==this._partitions.indexOf(t)&&this._partitions.push(t)},e.prototype.iUnregisterEntity=function(t){t.partition&&this.iUnregisterPartition(t.partition),t.isEntity&&t._iAssignedPartition.iRemoveEntity(t)},e.prototype.iUnregisterPartition=function(t){this._expandedPartitions.splice(this._expandedPartitions.indexOf(t),1),-1==this._expandedPartitions.indexOf(t)&&this._partitions.splice(this._partitions.indexOf(t),1)},e}(s);e.exports=h},{"awayjs-core/lib/events/EventDispatcher":void 0,"awayjs-display/lib/containers/DisplayObjectContainer":void 0,"awayjs-display/lib/events/SceneEvent":void 0,"awayjs-display/lib/partition/NodeBase":void 0,"awayjs-display/lib/partition/Partition":void 0}],"awayjs-display/lib/containers/View":[function(t,e){var i=t("awayjs-core/lib/utils/getTimer"),s=t("awayjs-display/lib/containers/Scene"),n=t("awayjs-display/lib/pick/RaycastPicker"),o=t("awayjs-display/lib/entities/Camera"),r=t("awayjs-display/lib/events/CameraEvent"),a=t("awayjs-display/lib/events/SceneEvent"),h=t("awayjs-display/lib/events/RendererEvent"),p=t("awayjs-display/lib/managers/MouseManager"),l=function(){function t(t,e,i){var r=this;void 0===e&&(e=null),void 0===i&&(i=null),this._width=0,this._height=0,this._time=0,this._deltaTime=0,this._backgroundColor=0,this._backgroundAlpha=1,this._viewportDirty=!0,this._scissorDirty=!0,this._mousePicker=new n,this._onScenePartitionChangedDelegate=function(t){return r.onScenePartitionChanged(t)},this._onProjectionChangedDelegate=function(t){return r.onProjectionChanged(t)},this._onViewportUpdatedDelegate=function(t){return r.onViewportUpdated(t)},this._onScissorUpdatedDelegate=function(t){return r.onScissorUpdated(t)},this.scene=e||new s,this.camera=i||new o,this.renderer=t,document.body.style.margin="0px",this._htmlElement=document.createElement("div"),this._htmlElement.style.position="absolute",document.body.appendChild(this._htmlElement),this._mouseManager=p.getInstance(),this._mouseManager.registerView(this)}return t.prototype.onScenePartitionChanged=function(){this._pCamera&&(this._pCamera.partition=this.scene.partition)},Object.defineProperty(t.prototype,"mouseX",{get:function(){return this._pMouseX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mouseY",{get:function(){return this._pMouseY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"htmlElement",{get:function(){return this._htmlElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{get:function(){return this._pRenderer},set:function(t){this._pRenderer!=t&&(this._pRenderer&&(this._pRenderer.dispose(),this._pRenderer.removeEventListener(h.VIEWPORT_UPDATED,this._onViewportUpdatedDelegate),this._pRenderer.removeEventListener(h.SCISSOR_UPDATED,this._onScissorUpdatedDelegate)),this._pRenderer=t,this._pRenderer.addEventListener(h.VIEWPORT_UPDATED,this._onViewportUpdatedDelegate),this._pRenderer.addEventListener(h.SCISSOR_UPDATED,this._onScissorUpdatedDelegate),this._pEntityCollector=this._pRenderer._iCreateEntityCollector(),this._pCamera&&(this._pEntityCollector.camera=this._pCamera),this._pRenderer._iBackgroundR=(this._backgroundColor>>16&255)/255,this._pRenderer._iBackgroundG=(this._backgroundColor>>8&255)/255,this._pRenderer._iBackgroundB=(255&this._backgroundColor)/255,this._pRenderer._iBackgroundAlpha=this._backgroundAlpha,this._pRenderer.width=this._width,this._pRenderer.height=this._height,this._pRenderer.shareContext=this._shareContext)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shareContext",{get:function(){return this._shareContext},set:function(t){this._shareContext!=t&&(this._shareContext=t,this._pRenderer&&(this._pRenderer.shareContext=this._shareContext))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor!=t&&(this._backgroundColor=t,this._pRenderer._iBackgroundR=(t>>16&255)/255,this._pRenderer._iBackgroundG=(t>>8&255)/255,this._pRenderer._iBackgroundB=(255&t)/255)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundAlpha},set:function(t){t>1?t=1:0>t&&(t=0),this._backgroundAlpha!=t&&(this._pRenderer._iBackgroundAlpha=this._backgroundAlpha=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"camera",{get:function(){return this._pCamera},set:function(t){this._pCamera!=t&&(this._pCamera&&this._pCamera.removeEventListener(r.PROJECTION_CHANGED,this._onProjectionChangedDelegate),this._pCamera=t,this._pEntityCollector&&(this._pEntityCollector.camera=this._pCamera),this._pScene&&(this._pCamera.partition=this._pScene.partition),this._pCamera.addEventListener(r.PROJECTION_CHANGED,this._onProjectionChangedDelegate),this._scissorDirty=!0,this._viewportDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scene",{get:function(){return this._pScene},set:function(t){this._pScene!=t&&(this._pScene&&this._pScene.removeEventListener(a.PARTITION_CHANGED,this._onScenePartitionChangedDelegate),this._pScene=t,this._pScene.addEventListener(a.PARTITION_CHANGED,this._onScenePartitionChangedDelegate),this._pCamera&&(this._pCamera.partition=this._pScene.partition))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deltaTime",{get:function(){return this._deltaTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width!=t&&(this._width=t,this._aspectRatio=this._width/this._height,this._pCamera.projection._iAspectRatio=this._aspectRatio,this._pRenderer.width=t,this._htmlElement.style.width=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height!=t&&(this._height=t,this._aspectRatio=this._width/this._height,this._pCamera.projection._iAspectRatio=this._aspectRatio,this._pRenderer.height=t,this._htmlElement.style.height=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mousePicker",{get:function(){return this._mousePicker},set:function(t){this._mousePicker!=t&&(this._mousePicker=null==t?new n:t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._pRenderer.x},set:function(t){this._pRenderer.x!=t&&(this._pRenderer.x==t,this._htmlElement.style.left=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._pRenderer.y},set:function(t){this._pRenderer.y!=t&&(this._pRenderer.y==t,this._htmlElement.style.top=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return"visible"==this._htmlElement.style.visibility},set:function(t){this._htmlElement.style.visibility=t?"visible":"hidden"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderedFacesCount",{get:function(){return 0},enumerable:!0,configurable:!0}),t.prototype.render=function(){this.pUpdateTime(),this._pCamera.projection._iAspectRatio=this._aspectRatio,this._scissorDirty&&(this._scissorDirty=!1,this._pCamera.projection._iUpdateScissorRect(this._pRenderer.scissorRect.x,this._pRenderer.scissorRect.y,this._pRenderer.scissorRect.width,this._pRenderer.scissorRect.height)),this._viewportDirty&&(this._viewportDirty=!1,this._pCamera.projection._iUpdateViewport(this._pRenderer.viewPort.x,this._pRenderer.viewPort.y,this._pRenderer.viewPort.width,this._pRenderer.viewPort.height)),this._shareContext||(this.forceMouseMove&&this._htmlElement==this._mouseManager._iActiveDiv&&!this._mouseManager._iUpdateDirty&&(this._mouseManager._iCollidingObject=this.mousePicker.getViewCollision(this._pMouseX,this._pMouseY,this)),this._mouseManager.fireMouseEvents(this.forceMouseMove)),this._pEntityCollector.clear(),this._pScene.traversePartitions(this._pEntityCollector),this._pRenderer.render(this._pEntityCollector)},t.prototype.pUpdateTime=function(){var t=i();0==this._time&&(this._time=t),this._deltaTime=t-this._time,this._time=t},t.prototype.dispose=function(){this._pRenderer.dispose(),this._mouseManager.unregisterView(this),this._mouseManager=null,this._pRenderer=null,this._pEntityCollector=null},Object.defineProperty(t.prototype,"iEntityCollector",{get:function(){return this._pEntityCollector},enumerable:!0,configurable:!0}),t.prototype.onProjectionChanged=function(){this._scissorDirty=!0,this._viewportDirty=!0},t.prototype.onViewportUpdated=function(){this._viewportDirty=!0},t.prototype.onScissorUpdated=function(){this._scissorDirty=!0},t.prototype.project=function(t){var e=this._pCamera.project(t);return e.x=e.x*this._pRenderer.viewPort.width/2+this._width*this._pCamera.projection.originX,e.y=e.y*this._pRenderer.viewPort.height/2+this._height*this._pCamera.projection.originY,e},t.prototype.unproject=function(t,e,i){return this._pCamera.unproject(2*(t-this._width*this._pCamera.projection.originX)/this._pRenderer.viewPort.width,2*(e-this._height*this._pCamera.projection.originY)/this._pRenderer.viewPort.height,i)},t.prototype.getRay=function(t,e,i){return this._pCamera.getRay((2*t-this._width)/this._width,(2*e-this._height)/this._height,i)},t.prototype.updateCollider=function(){if(this._shareContext){var t=this.mousePicker.getViewCollision(this._pMouseX,this._pMouseY,this);(this.layeredView||null==this._mouseManager._iCollidingObject||t.rayEntryDistance<this._mouseManager._iCollidingObject.rayEntryDistance)&&(this._mouseManager._iCollidingObject=t)}else this._htmlElement==this._mouseManager._iActiveDiv&&(this._mouseManager._iCollidingObject=this.mousePicker.getViewCollision(this._pMouseX,this._pMouseY,this))},t}();e.exports=l},{"awayjs-core/lib/utils/getTimer":void 0,"awayjs-display/lib/containers/Scene":void 0,"awayjs-display/lib/entities/Camera":void 0,"awayjs-display/lib/events/CameraEvent":void 0,"awayjs-display/lib/events/RendererEvent":void 0,"awayjs-display/lib/events/SceneEvent":void 0,"awayjs-display/lib/managers/MouseManager":void 0,"awayjs-display/lib/pick/RaycastPicker":void 0}],"awayjs-display/lib/controllers/ControllerBase":[function(t,e){var i=t("awayjs-core/lib/errors/AbstractMethodError"),s=function(){function t(t){void 0===t&&(t=null),this._pAutoUpdate=!0,this.targetObject=t}return t.prototype.pNotifyUpdate=function(){this._pTargetObject&&this._pTargetObject._iAssignedPartition&&this._pAutoUpdate&&this._pTargetObject._iAssignedPartition.iMarkForUpdate(this._pTargetObject)},Object.defineProperty(t.prototype,"targetObject",{get:function(){return this._pTargetObject},set:function(t){this._pTargetObject!=t&&(this._pTargetObject&&this._pAutoUpdate&&(this._pTargetObject._iController=null),this._pTargetObject=t,this._pTargetObject&&this._pAutoUpdate&&(this._pTargetObject._iController=this),this.pNotifyUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._pAutoUpdate},set:function(t){this._pAutoUpdate!=t&&(this._pAutoUpdate=t,this._pTargetObject&&(this._pTargetObject._iController=this._pTargetObject?this:null))},enumerable:!0,configurable:!0}),t.prototype.update=function(t){throw void 0===t&&(t=!0),new i},t}();e.exports=s},{"awayjs-core/lib/errors/AbstractMethodError":void 0}],"awayjs-display/lib/controllers/FirstPersonController":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/MathConsts"),n=t("awayjs-display/lib/controllers/ControllerBase"),o=function(t){function e(e,i,s,n,o,r,a){void 0===e&&(e=null),void 0===i&&(i=0),void 0===s&&(s=90),void 0===n&&(n=-90),void 0===o&&(o=90),void 0===r&&(r=8),void 0===a&&(a=!1),t.call(this,e),this._iCurrentPanAngle=0,this._iCurrentTiltAngle=90,this._panAngle=0,this._tiltAngle=90,this._minTiltAngle=-90,this._maxTiltAngle=90,this._steps=8,this._walkIncrement=0,this._strafeIncrement=0,this._wrapPanAngle=!1,this.fly=!1,this.panAngle=i,this.tiltAngle=s,this.minTiltAngle=n,this.maxTiltAngle=o,this.steps=r,this.wrapPanAngle=a,this._iCurrentPanAngle=this._panAngle,this._iCurrentTiltAngle=this._tiltAngle}return i(e,t),Object.defineProperty(e.prototype,"steps",{get:function(){return this._steps},set:function(t){t=1>t?1:t,this._steps!=t&&(this._steps=t,this.pNotifyUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panAngle",{get:function(){return this._panAngle},set:function(t){this._panAngle!=t&&(this._panAngle=t,this.pNotifyUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tiltAngle",{get:function(){return this._tiltAngle},set:function(t){t=Math.max(this._minTiltAngle,Math.min(this._maxTiltAngle,t)),this._tiltAngle!=t&&(this._tiltAngle=t,this.pNotifyUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minTiltAngle",{get:function(){return this._minTiltAngle},set:function(t){this._minTiltAngle!=t&&(this._minTiltAngle=t,this.tiltAngle=Math.max(this._minTiltAngle,Math.min(this._maxTiltAngle,this._tiltAngle)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxTiltAngle",{get:function(){return this._maxTiltAngle},set:function(t){this._maxTiltAngle!=t&&(this._maxTiltAngle=t,this.tiltAngle=Math.max(this._minTiltAngle,Math.min(this._maxTiltAngle,this._tiltAngle)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapPanAngle",{get:function(){return this._wrapPanAngle},set:function(t){this._wrapPanAngle!=t&&(this._wrapPanAngle=t,this.pNotifyUpdate())},enumerable:!0,configurable:!0}),e.prototype.update=function(t){if(void 0===t&&(t=!0),this._tiltAngle!=this._iCurrentTiltAngle||this._panAngle!=this._iCurrentPanAngle){if(this.pNotifyUpdate(),this._wrapPanAngle){for(this._panAngle<0?(this._iCurrentPanAngle+=this._panAngle%360+360-this._panAngle,this._panAngle=this._panAngle%360+360):(this._iCurrentPanAngle+=this._panAngle%360-this._panAngle,this._panAngle=this._panAngle%360);this._panAngle-this._iCurrentPanAngle<-180;)this._iCurrentPanAngle-=360;for(;this._panAngle-this._iCurrentPanAngle>180;)this._iCurrentPanAngle+=360}t?(this._iCurrentTiltAngle+=(this._tiltAngle-this._iCurrentTiltAngle)/(this.steps+1),this._iCurrentPanAngle+=(this._panAngle-this._iCurrentPanAngle)/(this.steps+1)):(this._iCurrentTiltAngle=this._tiltAngle,this._iCurrentPanAngle=this._panAngle),Math.abs(this.tiltAngle-this._iCurrentTiltAngle)<.01&&Math.abs(this._panAngle-this._iCurrentPanAngle)<.01&&(this._iCurrentTiltAngle=this._tiltAngle,this._iCurrentPanAngle=this._panAngle)}this.targetObject.rotationX=this._iCurrentTiltAngle,this.targetObject.rotationY=this._iCurrentPanAngle,this._walkIncrement&&(this.fly?this.targetObject.transform.moveForward(this._walkIncrement):(this.targetObject.x+=this._walkIncrement*Math.sin(this._panAngle*s.DEGREES_TO_RADIANS),this.targetObject.z+=this._walkIncrement*Math.cos(this._panAngle*s.DEGREES_TO_RADIANS)),this._walkIncrement=0),this._strafeIncrement&&(this.targetObject.transform.moveRight(this._strafeIncrement),this._strafeIncrement=0)},e.prototype.incrementWalk=function(t){0!=t&&(this._walkIncrement+=t,this.pNotifyUpdate())},e.prototype.incrementStrafe=function(t){0!=t&&(this._strafeIncrement+=t,this.pNotifyUpdate())},e}(n);e.exports=o},{"awayjs-core/lib/geom/MathConsts":void 0,"awayjs-display/lib/controllers/ControllerBase":void 0}],"awayjs-display/lib/controllers/FollowController":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/controllers/HoverController"),n=function(t){function e(e,i,s,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=45),void 0===n&&(n=700),t.call(this,e,i,0,s,n)}return i(e,t),e.prototype.update=function(e){void 0===e&&(e=!0),e=e,this.lookAtObject&&(this.panAngle=this._pLookAtObject.rotationY-180,t.prototype.update.call(this))},e}(s);e.exports=n},{"awayjs-display/lib/controllers/HoverController":void 0}],"awayjs-display/lib/controllers/HoverController":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/MathConsts"),n=t("awayjs-core/lib/geom/Vector3D"),o=t("awayjs-display/lib/controllers/LookAtController"),r=function(t){function e(e,i,s,o,r,a,h,p,l,c,u,_){void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=0),void 0===o&&(o=90),void 0===r&&(r=1e3),void 0===a&&(a=-90),void 0===h&&(h=90),void 0===p&&(p=null),void 0===l&&(l=null),void 0===c&&(c=8),void 0===u&&(u=2),void 0===_&&(_=!1),t.call(this,e,i),this._iCurrentPanAngle=0,this._iCurrentTiltAngle=90,this._panAngle=0,this._tiltAngle=90,this._distance=1e3,this._minPanAngle=-1/0,this._maxPanAngle=1/0,this._minTiltAngle=-90,this._maxTiltAngle=90,this._steps=8,this._yFactor=2,this._wrapPanAngle=!1,this._upAxis=new n,this.distance=r,this.panAngle=s,this.tiltAngle=o,this.minPanAngle=null!=p?p:-1/0,this.maxPanAngle=null!=l?l:1/0,this.minTiltAngle=a,this.maxTiltAngle=h,this.steps=c,this.yFactor=u,this.wrapPanAngle=_,this._iCurrentPanAngle=this._panAngle,this._iCurrentTiltAngle=this._tiltAngle
}return i(e,t),Object.defineProperty(e.prototype,"steps",{get:function(){return this._steps},set:function(t){t=1>t?1:t,this._steps!=t&&(this._steps=t,this.pNotifyUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panAngle",{get:function(){return this._panAngle},set:function(t){t=Math.max(this._minPanAngle,Math.min(this._maxPanAngle,t)),this._panAngle!=t&&(this._panAngle=t,this.pNotifyUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tiltAngle",{get:function(){return this._tiltAngle},set:function(t){t=Math.max(this._minTiltAngle,Math.min(this._maxTiltAngle,t)),this._tiltAngle!=t&&(this._tiltAngle=t,this.pNotifyUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},set:function(t){this._distance!=t&&(this._distance=t,this.pNotifyUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minPanAngle",{get:function(){return this._minPanAngle},set:function(t){this._minPanAngle!=t&&(this._minPanAngle=t,this.panAngle=Math.max(this._minPanAngle,Math.min(this._maxPanAngle,this._panAngle)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxPanAngle",{get:function(){return this._maxPanAngle},set:function(t){this._maxPanAngle!=t&&(this._maxPanAngle=t,this.panAngle=Math.max(this._minPanAngle,Math.min(this._maxPanAngle,this._panAngle)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minTiltAngle",{get:function(){return this._minTiltAngle},set:function(t){this._minTiltAngle!=t&&(this._minTiltAngle=t,this.tiltAngle=Math.max(this._minTiltAngle,Math.min(this._maxTiltAngle,this._tiltAngle)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxTiltAngle",{get:function(){return this._maxTiltAngle},set:function(t){this._maxTiltAngle!=t&&(this._maxTiltAngle=t,this.tiltAngle=Math.max(this._minTiltAngle,Math.min(this._maxTiltAngle,this._tiltAngle)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yFactor",{get:function(){return this._yFactor},set:function(t){this._yFactor!=t&&(this._yFactor=t,this.pNotifyUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapPanAngle",{get:function(){return this._wrapPanAngle},set:function(t){this._wrapPanAngle!=t&&(this._wrapPanAngle=t,this.pNotifyUpdate())},enumerable:!0,configurable:!0}),e.prototype.update=function(t){if(void 0===t&&(t=!0),this._tiltAngle!=this._iCurrentTiltAngle||this._panAngle!=this._iCurrentPanAngle){if(this.pNotifyUpdate(),this._wrapPanAngle){for(this._panAngle<0?(this._iCurrentPanAngle+=this._panAngle%360+360-this._panAngle,this._panAngle=this._panAngle%360+360):(this._iCurrentPanAngle+=this._panAngle%360-this._panAngle,this._panAngle=this._panAngle%360);this._panAngle-this._iCurrentPanAngle<-180;)this._iCurrentPanAngle-=360;for(;this._panAngle-this._iCurrentPanAngle>180;)this._iCurrentPanAngle+=360}t?(this._iCurrentTiltAngle+=(this._tiltAngle-this._iCurrentTiltAngle)/(this.steps+1),this._iCurrentPanAngle+=(this._panAngle-this._iCurrentPanAngle)/(this.steps+1)):(this._iCurrentPanAngle=this._panAngle,this._iCurrentTiltAngle=this._tiltAngle),Math.abs(this.tiltAngle-this._iCurrentTiltAngle)<.01&&Math.abs(this._panAngle-this._iCurrentPanAngle)<.01&&(this._iCurrentTiltAngle=this._tiltAngle,this._iCurrentPanAngle=this._panAngle)}var e=this.lookAtObject?this.lookAtObject.transform.position:this.lookAtPosition?this.lookAtPosition:this._pOrigin;this.targetObject.x=e.x+this.distance*Math.sin(this._iCurrentPanAngle*s.DEGREES_TO_RADIANS)*Math.cos(this._iCurrentTiltAngle*s.DEGREES_TO_RADIANS),this.targetObject.y=e.y+this.distance*Math.sin(this._iCurrentTiltAngle*s.DEGREES_TO_RADIANS)*this.yFactor,this.targetObject.z=e.z+this.distance*Math.cos(this._iCurrentPanAngle*s.DEGREES_TO_RADIANS)*Math.cos(this._iCurrentTiltAngle*s.DEGREES_TO_RADIANS),this._upAxis.x=-Math.sin(this._iCurrentPanAngle*s.DEGREES_TO_RADIANS)*Math.sin(this._iCurrentTiltAngle*s.DEGREES_TO_RADIANS),this._upAxis.y=Math.cos(this._iCurrentTiltAngle*s.DEGREES_TO_RADIANS),this._upAxis.z=-Math.cos(this._iCurrentPanAngle*s.DEGREES_TO_RADIANS)*Math.sin(this._iCurrentTiltAngle*s.DEGREES_TO_RADIANS),this._pTargetObject&&(this._pLookAtPosition?this._pTargetObject.lookAt(this._pLookAtPosition,this._upAxis):this._pLookAtObject&&this._pTargetObject.lookAt(this._pLookAtObject.scene?this._pLookAtObject.scenePosition:this._pLookAtObject.transform.position,this._upAxis))},e}(o);e.exports=r},{"awayjs-core/lib/geom/MathConsts":void 0,"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/controllers/LookAtController":void 0}],"awayjs-display/lib/controllers/LookAtController":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),n=t("awayjs-display/lib/controllers/ControllerBase"),o=t("awayjs-display/lib/events/DisplayObjectEvent"),r=function(t){function e(e,i){var n=this;void 0===e&&(e=null),void 0===i&&(i=null),t.call(this,e),this._pOrigin=new s(0,0,0),this._onLookAtObjectChangedDelegate=function(t){return n.onLookAtObjectChanged(t)},i?this.lookAtObject=i:this.lookAtPosition=new s}return i(e,t),Object.defineProperty(e.prototype,"lookAtPosition",{get:function(){return this._pLookAtPosition},set:function(t){this._pLookAtObject&&(this._pLookAtObject.removeEventListener(o.SCENETRANSFORM_CHANGED,this._onLookAtObjectChangedDelegate),this._pLookAtObject=null),this._pLookAtPosition=t,this.pNotifyUpdate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lookAtObject",{get:function(){return this._pLookAtObject},set:function(t){this._pLookAtPosition&&(this._pLookAtPosition=null),this._pLookAtObject!=t&&(this._pLookAtObject&&this._pLookAtObject.removeEventListener(o.SCENETRANSFORM_CHANGED,this._onLookAtObjectChangedDelegate),this._pLookAtObject=t,this._pLookAtObject&&this._pLookAtObject.addEventListener(o.SCENETRANSFORM_CHANGED,this._onLookAtObjectChangedDelegate),this.pNotifyUpdate())},enumerable:!0,configurable:!0}),e.prototype.update=function(t){void 0===t&&(t=!0),this._pTargetObject&&(this._pLookAtPosition?this._pTargetObject.lookAt(this._pLookAtPosition):this._pLookAtObject&&this._pTargetObject.lookAt(this._pLookAtObject.scene?this._pLookAtObject.scenePosition:this._pLookAtObject.transform.position))},e.prototype.onLookAtObjectChanged=function(){this.pNotifyUpdate()},e}(n);e.exports=r},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/controllers/ControllerBase":void 0,"awayjs-display/lib/events/DisplayObjectEvent":void 0}],"awayjs-display/lib/controllers/SpringController":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),n=t("awayjs-display/lib/controllers/LookAtController"),o=function(t){function e(e,i,n,o,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=1),void 0===o&&(o=40),void 0===r&&(r=4),t.call(this,e,i),this.positionOffset=new s(0,500,-1e3),this.stiffness=n,this.damping=r,this.mass=o,this._velocity=new s,this._dv=new s,this._stretch=new s,this._force=new s,this._acceleration=new s,this._desiredPosition=new s}return i(e,t),e.prototype.update=function(e){void 0===e&&(e=!0);var i;this._pLookAtObject&&this._pTargetObject&&(i=this._pLookAtObject.transform.matrix3D.deltaTransformVector(this.positionOffset),this._desiredPosition.x=this._pLookAtObject.x+i.x,this._desiredPosition.y=this._pLookAtObject.y+i.y,this._desiredPosition.z=this._pLookAtObject.z+i.z,this._stretch=this._pTargetObject.transform.position.add(this._desiredPosition),this._stretch.scaleBy(-this.stiffness),this._dv.copyFrom(this._velocity),this._dv.scaleBy(this.damping),this._force.x=this._stretch.x-this._dv.x,this._force.y=this._stretch.y-this._dv.y,this._force.z=this._stretch.z-this._dv.z,this._acceleration.copyFrom(this._force),this._acceleration.scaleBy(1/this.mass),this._velocity.incrementBy(this._acceleration),this._pTargetObject.transform.position=this._pTargetObject.transform.position.add(this._velocity),t.prototype.update.call(this))},e}(n);e.exports=o},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/controllers/LookAtController":void 0}],"awayjs-display/lib/display/ContextMode":[function(t,e){var i=function(){function t(){}return t.AUTO="auto",t.WEBGL="webgl",t.FLASH="flash",t.NATIVE="native",t}();e.exports=i},{}],"awayjs-display/lib/display/IContext":[function(){},{}],"awayjs-display/lib/entities/Billboard":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),n=t("awayjs-display/lib/base/DisplayObject"),o=t("awayjs-display/lib/partition/EntityNode"),r=t("awayjs-display/lib/events/MaterialEvent"),a=function(t){function e(e,i,s){var n=this;void 0===i&&(i="auto"),void 0===s&&(s=!1),t.call(this),this._pIsEntity=!0,this.onSizeChangedDelegate=function(t){return n.onSizeChanged(t)},this.material=e,this._billboardWidth=e.width,this._billboardHeight=e.height}return i(e,t),Object.defineProperty(e.prototype,"animator",{get:function(){return this._animator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assetType",{get:function(){return s.BILLBOARD},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"billboardHeight",{get:function(){return this._billboardHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"billboardWidth",{get:function(){return this._billboardWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this._material},set:function(t){t!=this._material&&(this._material&&(this._material.iRemoveOwner(this),this._material.removeEventListener(r.SIZE_CHANGED,this.onSizeChangedDelegate)),this._material=t,this._material&&(this._material.iAddOwner(this),this._material.addEventListener(r.SIZE_CHANGED,this.onSizeChangedDelegate)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uvTransform",{get:function(){return this._uvTransform},set:function(t){this._uvTransform=t},enumerable:!0,configurable:!0}),e.prototype.pCreateEntityPartitionNode=function(){return new o(this)},e.prototype.pUpdateBounds=function(){this._pBounds.fromExtremes(0,0,0,this._billboardWidth,this._billboardHeight,0),t.prototype.pUpdateBounds.call(this)},e.prototype._iTestCollision=function(t){return this._pPickingCollider.testBillboardCollision(this,this._pPickingCollisionVO,t)},e.prototype.onSizeChanged=function(){this._billboardWidth=this._material.width,this._billboardHeight=this._material.height,this._pBoundsInvalid=!0;for(var t=this._pRenderables.length,e=0;t>e;e++)this._pRenderables[e].invalidateVertexData("vertices")},e.prototype._iCollectRenderables=function(t){this._iSourcePrefab&&this._iSourcePrefab._iValidate(),this._iCollectRenderable(t)},e.prototype._iCollectRenderable=function(t){t.applyBillboard(this)},e}(n);e.exports=a},{"awayjs-core/lib/library/AssetType":void 0,"awayjs-display/lib/base/DisplayObject":void 0,"awayjs-display/lib/events/MaterialEvent":void 0,"awayjs-display/lib/partition/EntityNode":void 0}],"awayjs-display/lib/entities/Camera":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/bounds/NullBounds"),n=t("awayjs-core/lib/geom/Matrix3D"),o=t("awayjs-core/lib/geom/Plane3D"),r=t("awayjs-core/lib/library/AssetType"),a=t("awayjs-core/lib/events/ProjectionEvent"),h=t("awayjs-core/lib/projections/PerspectiveProjection"),p=t("awayjs-display/lib/containers/DisplayObjectContainer"),l=t("awayjs-display/lib/events/CameraEvent"),c=t("awayjs-display/lib/partition/CameraNode"),u=function(t){function e(e){var i=this;void 0===e&&(e=null),t.call(this),this._viewProjection=new n,this._viewProjectionDirty=!0,this._frustumPlanesDirty=!0,this._pIsEntity=!0,this._onProjectionMatrixChangedDelegate=function(t){return i.onProjectionMatrixChanged(t)},this._projection=e||new h,this._projection.addEventListener(a.MATRIX_CHANGED,this._onProjectionMatrixChangedDelegate),this._frustumPlanes=[];for(var s=0;6>s;++s)this._frustumPlanes[s]=new o;this.z=-1e3}return i(e,t),e.prototype.pCreateDefaultBoundingVolume=function(){return new s},e.prototype.pCreateEntityPartitionNode=function(){return new c(this)},Object.defineProperty(e.prototype,"assetType",{get:function(){return r.CAMERA},enumerable:!0,configurable:!0}),e.prototype.onProjectionMatrixChanged=function(t){this._viewProjectionDirty=!0,this._frustumPlanesDirty=!0,this.dispatchEvent(t)},Object.defineProperty(e.prototype,"frustumPlanes",{get:function(){return this._frustumPlanesDirty&&this.updateFrustum(),this._frustumPlanes},enumerable:!0,configurable:!0}),e.prototype.updateFrustum=function(){var t,e,i,s,n,o,r,a,h,p,l,c,u,_,d,y,f,m,b,g,v,w=new Array(16);this.viewProjection.copyRawDataTo(w),s=w[0],n=w[4],o=w[8],r=w[12],a=w[1],h=w[5],p=w[9],l=w[13],c=w[2],u=w[6],_=w[10],d=w[14],y=w[3],f=w[7],m=w[11],b=w[15],g=this._frustumPlanes[0],t=y+s,e=f+n,i=m+o,v=1/Math.sqrt(t*t+e*e+i*i),g.a=t*v,g.b=e*v,g.c=i*v,g.d=-(b+r)*v,g=this._frustumPlanes[1],t=y-s,e=f-n,i=m-o,v=1/Math.sqrt(t*t+e*e+i*i),g.a=t*v,g.b=e*v,g.c=i*v,g.d=(r-b)*v,g=this._frustumPlanes[2],t=y+a,e=f+h,i=m+p,v=1/Math.sqrt(t*t+e*e+i*i),g.a=t*v,g.b=e*v,g.c=i*v,g.d=-(b+l)*v,g=this._frustumPlanes[3],t=y-a,e=f-h,i=m-p,v=1/Math.sqrt(t*t+e*e+i*i),g.a=t*v,g.b=e*v,g.c=i*v,g.d=(l-b)*v,g=this._frustumPlanes[4],t=c,e=u,i=_,v=1/Math.sqrt(t*t+e*e+i*i),g.a=t*v,g.b=e*v,g.c=i*v,g.d=-d*v,g=this._frustumPlanes[5],t=y-c,e=f-u,i=m-_,v=1/Math.sqrt(t*t+e*e+i*i),g.a=t*v,g.b=e*v,g.c=i*v,g.d=(d-b)*v,this._frustumPlanesDirty=!1},e.prototype.pInvalidateSceneTransform=function(){t.prototype.pInvalidateSceneTransform.call(this),this._viewProjectionDirty=!0,this._frustumPlanesDirty=!0},e.prototype.pUpdateBounds=function(){this._pBoundsInvalid=!1,this._pBounds.nullify()},Object.defineProperty(e.prototype,"projection",{get:function(){return this._projection},set:function(t){if(this._projection!=t){if(!t)throw new Error("Projection cannot be null!");this._projection.removeEventListener(a.MATRIX_CHANGED,this._onProjectionMatrixChangedDelegate),this._projection=t,this._projection.addEventListener(a.MATRIX_CHANGED,this._onProjectionMatrixChangedDelegate),this.dispatchEvent(new l(l.PROJECTION_CHANGED,this))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewProjection",{get:function(){return this._viewProjectionDirty&&(this._viewProjection.copyFrom(this.inverseSceneTransform),this._viewProjection.append(this._projection.matrix),this._viewProjectionDirty=!1),this._viewProjection},enumerable:!0,configurable:!0}),e.prototype.getRay=function(t,e,i){return this.sceneTransform.deltaTransformVector(this._projection.unproject(t,e,i))},e.prototype.project=function(t){return this._projection.project(this.inverseSceneTransform.transformVector(t))},e.prototype.unproject=function(t,e,i){return this.sceneTransform.transformVector(this._projection.unproject(t,e,i))},e.prototype._iCollectRenderables=function(t){this._iSourcePrefab&&this._iSourcePrefab._iValidate(),this._iCollectRenderable(t)},e.prototype._iCollectRenderable=function(){},e}(p);e.exports=u},{"awayjs-core/lib/bounds/NullBounds":void 0,"awayjs-core/lib/events/ProjectionEvent":void 0,"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/geom/Plane3D":void 0,"awayjs-core/lib/library/AssetType":void 0,"awayjs-core/lib/projections/PerspectiveProjection":void 0,"awayjs-display/lib/containers/DisplayObjectContainer":void 0,"awayjs-display/lib/events/CameraEvent":void 0,"awayjs-display/lib/partition/CameraNode":void 0}],"awayjs-display/lib/entities/DirectionalLight":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/bounds/NullBounds"),n=t("awayjs-core/lib/geom/Matrix3D"),o=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-display/lib/base/LightBase"),a=t("awayjs-display/lib/partition/DirectionalLightNode"),h=t("awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper"),p=function(t){function e(e,i,s){void 0===e&&(e=0),void 0===i&&(i=-1),void 0===s&&(s=1),t.call(this),this._pIsEntity=!0,this.direction=new o(e,i,s),this._sceneDirection=new o}return i(e,t),Object.defineProperty(e.prototype,"sceneDirection",{get:function(){return this._pSceneTransformDirty&&this.pUpdateSceneTransform(),this._sceneDirection},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=t,this._tmpLookAt||(this._tmpLookAt=new o),this._tmpLookAt.x=this.x+this._direction.x,this._tmpLookAt.y=this.y+this._direction.y,this._tmpLookAt.z=this.z+this._direction.z,this.lookAt(this._tmpLookAt)},enumerable:!0,configurable:!0}),e.prototype.pCreateDefaultBoundingVolume=function(){return new s},e.prototype.pUpdateBounds=function(){},e.prototype.pUpdateSceneTransform=function(){t.prototype.pUpdateSceneTransform.call(this),this.sceneTransform.copyColumnTo(2,this._sceneDirection),this._sceneDirection.normalize()},e.prototype.pCreateShadowMapper=function(){return new h},e.prototype.pCreateEntityPartitionNode=function(){return new a(this)},e.prototype.iGetObjectProjectionMatrix=function(t,e,i){void 0===i&&(i=null);var s=new Array,o=t.bounds,r=new n;r.copyFrom(t.getRenderSceneTransform(e)),r.append(this.inverseSceneTransform),this._projAABBPoints||(this._projAABBPoints=[]),r.transformVectors(o.aabbPoints,this._projAABBPoints);for(var a,h=1/0,p=-1/0,l=1/0,c=-1/0,u=1/0,_=-1/0,d=0;24>d;)a=this._projAABBPoints[d++],h>a&&(h=a),a>p&&(p=a),a=this._projAABBPoints[d++],l>a&&(l=a),a>c&&(c=a),a=this._projAABBPoints[d++],u>a&&(u=a),a>_&&(_=a);var y=1/(p-h),f=1/(c-l),m=1/(_-u);return s[0]=2*y,s[5]=2*f,s[10]=m,s[12]=-(p+h)*y,s[13]=-(c+l)*f,s[14]=-u*m,s[1]=s[2]=s[3]=s[4]=s[6]=s[7]=s[8]=s[9]=s[11]=0,s[15]=1,i||(i=new n),i.copyRawDataFrom(s),i.prepend(r),i},e.prototype._iCollectRenderables=function(){},e}(r);e.exports=p},{"awayjs-core/lib/bounds/NullBounds":void 0,"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/base/LightBase":void 0,"awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper":void 0,"awayjs-display/lib/partition/DirectionalLightNode":void 0}],"awayjs-display/lib/entities/IEntity":[function(){},{}],"awayjs-display/lib/entities/LightProbe":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/bounds/NullBounds"),n=t("awayjs-core/lib/errors/Error"),o=t("awayjs-display/lib/base/LightBase"),r=t("awayjs-display/lib/partition/LightProbeNode"),a=function(t){function e(e,i){void 0===i&&(i=null),t.call(this),this._pIsEntity=!0,this._diffuseMap=e,this._specularMap=i}return i(e,t),Object.defineProperty(e.prototype,"diffuseMap",{get:function(){return this._diffuseMap},set:function(t){this._diffuseMap=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specularMap",{get:function(){return this._specularMap},set:function(t){this._specularMap=t},enumerable:!0,configurable:!0}),e.prototype.pCreateEntityPartitionNode=function(){return new r(this)},e.prototype.pUpdateBounds=function(){this._pBoundsInvalid=!1},e.prototype.pCreateDefaultBoundingVolume=function(){return new s},e.prototype.iGetObjectProjectionMatrix=function(t,e,i){throw void 0===i&&(i=null),new n("Object projection matrices are not supported for LightProbe objects!")},e.prototype._iCollectRenderables=function(){},e}(o);e.exports=a},{"awayjs-core/lib/bounds/NullBounds":void 0,"awayjs-core/lib/errors/Error":void 0,"awayjs-display/lib/base/LightBase":void 0,"awayjs-display/lib/partition/LightProbeNode":void 0}],"awayjs-display/lib/entities/LineSegment":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),n=t("awayjs-display/lib/base/DisplayObject"),o=t("awayjs-display/lib/partition/EntityNode"),r=t("awayjs-display/lib/events/MaterialEvent"),a=function(t){function e(e,i,s,n){var o=this;void 0===n&&(n=1),t.call(this),this._pIsEntity=!0,this.onSizeChangedDelegate=function(t){return o.onSizeChanged(t)},this.material=e,this._startPosition=i,this._endPosition=s,this._halfThickness=.5*n}return i(e,t),Object.defineProperty(e.prototype,"animator",{get:function(){return this._animator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assetType",{get:function(){return s.LINE_SEGMENT},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startPostion",{get:function(){return this._startPosition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startPosition",{set:function(t){this._startPosition!=t&&(this._startPosition=t,this.notifyRenderableUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPosition",{get:function(){return this._endPosition},set:function(t){this._endPosition!=t&&(this._endPosition=t,this.notifyRenderableUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this._material},set:function(t){t!=this._material&&(this._material&&(this._material.iRemoveOwner(this),this._material.removeEventListener(r.SIZE_CHANGED,this.onSizeChangedDelegate)),this._material=t,this._material&&(this._material.iAddOwner(this),this._material.addEventListener(r.SIZE_CHANGED,this.onSizeChangedDelegate)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thickness",{get:function(){return 2*this._halfThickness},set:function(t){this._halfThickness!=t&&(this._halfThickness=.5*t,this.notifyRenderableUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uvTransform",{get:function(){return this._uvTransform},set:function(t){this._uvTransform=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._startPosition=null,this._endPosition=null},e.prototype.pCreateEntityPartitionNode=function(){return new o(this)},e.prototype.pUpdateBounds=function(){this._pBounds.fromExtremes(this._startPosition.x,this._startPosition.y,this._startPosition.z,this._endPosition.x,this._endPosition.y,this._endPosition.z),t.prototype.pUpdateBounds.call(this)},e.prototype.onSizeChanged=function(){this.notifyRenderableUpdate()},e.prototype.notifyRenderableUpdate=function(){for(var t=this._pRenderables.length,e=0;t>e;e++)this._pRenderables[e].invalidateVertexData("vertices")},e.prototype._iCollectRenderables=function(t){this._iSourcePrefab&&this._iSourcePrefab._iValidate(),this._iCollectRenderable(t)},e.prototype._iCollectRenderable=function(){},e}(n);e.exports=a},{"awayjs-core/lib/library/AssetType":void 0,"awayjs-display/lib/base/DisplayObject":void 0,"awayjs-display/lib/events/MaterialEvent":void 0,"awayjs-display/lib/partition/EntityNode":void 0}],"awayjs-display/lib/entities/Mesh":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),n=t("awayjs-display/lib/base/Geometry"),o=t("awayjs-display/lib/containers/DisplayObjectContainer"),r=t("awayjs-display/lib/partition/EntityNode"),a=t("awayjs-display/lib/events/GeometryEvent"),h=function(t){function e(e,i){var s=this;void 0===i&&(i=null),t.call(this),this._castsShadows=!0,this._shareAnimationGeometry=!0,this._pIsEntity=!0,this._subMeshes=new Array,this._onGeometryBoundsInvalidDelegate=function(t){return s.onGeometryBoundsInvalid(t)},this._onSubGeometryAddedDelegate=function(t){return s.onSubGeometryAdded(t)},this._onSubGeometryRemovedDelegate=function(t){return s.onSubGeometryRemoved(t)},this.geometry=e||new n,this.material=i}return i(e,t),Object.defineProperty(e.prototype,"animator",{get:function(){return this._animator},set:function(t){this._animator&&this._animator.removeOwner(this),this._animator=t;for(var e,i=this._subMeshes.length,s=0;i>s;++s)e=this._subMeshes[s],e.material&&(e.material.iRemoveOwner(e),e.material.iAddOwner(e)),e._iInvalidateRenderableGeometry();this._animator&&this._animator.addOwner(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assetType",{get:function(){return s.MESH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"castsShadows",{get:function(){return this._castsShadows},set:function(t){this._castsShadows=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._iSourcePrefab&&this._iSourcePrefab._iValidate(),this._geometry},set:function(t){var e;if(this._geometry){for(this._geometry.removeEventListener(a.BOUNDS_INVALID,this._onGeometryBoundsInvalidDelegate),this._geometry.removeEventListener(a.SUB_GEOMETRY_ADDED,this._onSubGeometryAddedDelegate),this._geometry.removeEventListener(a.SUB_GEOMETRY_REMOVED,this._onSubGeometryRemovedDelegate),e=0;e<this._subMeshes.length;++e)this._subMeshes[e].dispose();this._subMeshes.length=0}if(this._geometry=t,this._geometry){this._geometry.addEventListener(a.BOUNDS_INVALID,this._onGeometryBoundsInvalidDelegate),this._geometry.addEventListener(a.SUB_GEOMETRY_ADDED,this._onSubGeometryAddedDelegate),this._geometry.addEventListener(a.SUB_GEOMETRY_REMOVED,this._onSubGeometryRemovedDelegate);var i=this._geometry.subGeometries;for(e=0;e<i.length;++e)this.addSubMesh(i[e])}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this._material},set:function(t){if(t!=this._material){var e,i,s=this._subMeshes.length;for(e=0;s>e;e++)this._material&&(i=this._subMeshes[e]).material==this._material&&this._material.iRemoveOwner(i);for(this._material=t,e=0;s>e;e++)this._material&&(i=this._subMeshes[e]).material==this._material&&this._material.iAddOwner(i)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shareAnimationGeometry",{get:function(){return this._shareAnimationGeometry},set:function(t){this._shareAnimationGeometry=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subMeshes",{get:function(){return this._iSourcePrefab&&this._iSourcePrefab._iValidate(),this._subMeshes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uvTransform",{get:function(){return this._uvTransform},set:function(t){this._uvTransform=t},enumerable:!0,configurable:!0}),e.prototype.bakeTransformations=function(){this.geometry.applyTransformation(this._iMatrix3D),this._iMatrix3D.identity()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.material=null,this.geometry=null},e.prototype.disposeWithAnimatorAndChildren=function(){this.disposeWithChildren(),this._animator&&this._animator.dispose()},e.prototype.clone=function(){var t=new e(this._geometry,this._material);t._iMatrix3D=this._iMatrix3D,t.pivot=this.pivot,t.partition=this.partition,t.bounds=this.bounds.clone(),t.name=this.name,t.castsShadows=this.castsShadows,t.shareAnimationGeometry=this.shareAnimationGeometry,t.mouseEnabled=this.mouseEnabled,t.mouseChildren=this.mouseChildren,t.extra=this.extra;for(var i=this._subMeshes.length,s=0;i>s;++s)t._subMeshes[s].material=this._subMeshes[s]._iGetExplicitMaterial();i=this.numChildren;var n;for(s=0;i>s;++s)n=this.getChildAt(s).clone(),t.addChild(n);return this._animator&&(t.animator=this._animator.clone()),t},e.prototype.getSubMeshFromSubGeometry=function(t){return this._subMeshes[this._geometry.subGeometries.indexOf(t)]},e.prototype.pCreateEntityPartitionNode=function(){return new r(this)},e.prototype.pUpdateBounds=function(){var e,i,s,n,o,r,a,h,p,l,c,u=this._geometry.subGeometries,_=u.length;if(_>0){for(e=0,n=u[0],o=n.getBoundingPositions(),r=p=o[e],a=l=o[e+1],h=c=o[e+2],i=_;i--;)for(n=u[i],o=n.getBoundingPositions(),e=o.length;e--;)s=o[e],r>s?r=s:s>p&&(p=s),s=o[e+1],a>s?a=s:s>l&&(l=s),s=o[e+2],h>s?h=s:s>c&&(c=s);this._pBounds.fromExtremes(r,a,h,p,l,c)}else this._pBounds.fromExtremes(0,0,0,0,0,0);t.prototype.pUpdateBounds.call(this)},e.prototype.onGeometryBoundsInvalid=function(){this.pInvalidateBounds()},e.prototype.onSubGeometryAdded=function(t){this.addSubMesh(t.subGeometry)},e.prototype.onSubGeometryRemoved=function(t){var e,i,s=t.subGeometry,n=this._subMeshes.length;for(i=0;n>i;++i)if(e=this._subMeshes[i],e.subGeometry==s){e.dispose(),this._subMeshes.splice(i,1);break}for(--n;n>i;++i)this._subMeshes[i]._iIndex=i},e.prototype.addSubMesh=function(t){var e=t.subMeshClass,i=new e(t,this,null),s=this._subMeshes.length;i._iIndex=s,this._subMeshes[s]=i,this.pInvalidateBounds()},e.prototype._iTestCollision=function(t,e){return this._pPickingCollider.testMeshCollision(this,this._pPickingCollisionVO,t,e)},e.prototype._iCollectRenderables=function(t){this._iSourcePrefab&&this._iSourcePrefab._iValidate();for(var e=this._subMeshes.length,i=0;e>i;i++)this._subMeshes[i]._iCollectRenderable(t)},e.prototype._iInvalidateRenderableGeometries=function(){for(var t=this._subMeshes.length,e=0;t>e;++e)this._subMeshes[e]._iInvalidateRenderableGeometry()},e}(o);e.exports=h},{"awayjs-core/lib/library/AssetType":void 0,"awayjs-display/lib/base/Geometry":void 0,"awayjs-display/lib/containers/DisplayObjectContainer":void 0,"awayjs-display/lib/events/GeometryEvent":void 0,"awayjs-display/lib/partition/EntityNode":void 0}],"awayjs-display/lib/entities/PointLight":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/bounds/BoundingSphere"),n=t("awayjs-core/lib/geom/Matrix3D"),o=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-display/lib/base/LightBase"),a=t("awayjs-display/lib/partition/PointLightNode"),h=t("awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper"),p=function(t){function e(){t.call(this),this._pRadius=9e4,this._pFallOff=1e5,this._pIsEntity=!0,this._pFallOffFactor=1/(this._pFallOff*this._pFallOff-this._pRadius*this._pRadius)}return i(e,t),e.prototype.pCreateShadowMapper=function(){return new h},Object.defineProperty(e.prototype,"radius",{get:function(){return this._pRadius},set:function(t){this._pRadius=t,this._pRadius<0?this._pRadius=0:this._pRadius>this._pFallOff&&(this._pFallOff=this._pRadius,this.pInvalidateBounds()),this._pFallOffFactor=1/(this._pFallOff*this._pFallOff-this._pRadius*this._pRadius)},enumerable:!0,configurable:!0}),e.prototype.iFallOffFactor=function(){return this._pFallOffFactor},Object.defineProperty(e.prototype,"fallOff",{get:function(){return this._pFallOff},set:function(t){this._pFallOff=t,this._pFallOff<0&&(this._pFallOff=0),this._pFallOff<this._pRadius&&(this._pRadius=this._pFallOff),this._pFallOffFactor=1/(this._pFallOff*this._pFallOff-this._pRadius*this._pRadius),this.pInvalidateBounds()},enumerable:!0,configurable:!0}),e.prototype.pCreateEntityPartitionNode=function(){return new a(this)},e.prototype.pUpdateBounds=function(){this._pBounds.fromSphere(new o,this._pFallOff),this._pBoundsInvalid=!1},e.prototype.pCreateDefaultBoundingVolume=function(){return new s},e.prototype.iGetObjectProjectionMatrix=function(t,e,i){void 0===i&&(i=null);var s=new Array(16),r=t.bounds,a=new n;a.copyFrom(t.getRenderSceneTransform(e)),a.append(this._pParent.inverseSceneTransform),this.lookAt(a.position),a.copyFrom(t.getRenderSceneTransform(e)),a.append(this.inverseSceneTransform);var h,p,l=r.aabb,c=a.deltaTransformVector(new o(l.left,l.bottom,l.front)),u=a.deltaTransformVector(new o(l.right,l.top,l.back)),_=c.x*c.x+c.y*c.y+c.z*c.z,d=u.x*u.x+u.y*u.y+u.z*u.z,y=Math.sqrt(_>d?_:d),f=a.rawData[14];return h=f-y,p=f+y,s[5]=s[0]=h/y,s[10]=p/(p-h),s[11]=1,s[1]=s[2]=s[3]=s[4]=s[6]=s[7]=s[8]=s[9]=s[12]=s[13]=s[15]=0,s[14]=-h*s[10],i||(i=new n),i.copyRawDataFrom(s),i.prepend(a),i
},e.prototype._iCollectRenderables=function(){},e}(r);e.exports=p},{"awayjs-core/lib/bounds/BoundingSphere":void 0,"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/base/LightBase":void 0,"awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper":void 0,"awayjs-display/lib/partition/PointLightNode":void 0}],"awayjs-display/lib/entities/Shape":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/base/DisplayObject"),n=function(t){function e(){t.call(this)}return i(e,t),Object.defineProperty(e.prototype,"graphics",{get:function(){return this._graphics},enumerable:!0,configurable:!0}),e}(s);e.exports=n},{"awayjs-display/lib/base/DisplayObject":void 0}],"awayjs-display/lib/entities/Skybox":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/bounds/NullBounds"),n=t("awayjs-core/lib/library/AssetType"),o=t("awayjs-display/lib/base/DisplayObject"),r=t("awayjs-display/lib/partition/SkyboxNode"),a=function(t){function e(e){t.call(this),this._pIsEntity=!0,this.material=e}return i(e,t),Object.defineProperty(e.prototype,"animator",{get:function(){return this._animator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uvTransform",{get:function(){return this._uvTransform},set:function(t){this._uvTransform=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this._material},set:function(t){t!=this._material&&(this._material&&this._material.iRemoveOwner(this),this._material=t,this._material&&this._material.iAddOwner(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assetType",{get:function(){return n.SKYBOX},enumerable:!0,configurable:!0}),e.prototype.pInvalidateBounds=function(){},e.prototype.pCreateEntityPartitionNode=function(){return new r(this)},e.prototype.pCreateDefaultBoundingVolume=function(){return new s},e.prototype.pUpdateBounds=function(){this._pBoundsInvalid=!1},Object.defineProperty(e.prototype,"castsShadows",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype._iCollectRenderables=function(){},e.prototype._iCollectRenderable=function(){},e}(o);e.exports=a},{"awayjs-core/lib/bounds/NullBounds":void 0,"awayjs-core/lib/library/AssetType":void 0,"awayjs-display/lib/base/DisplayObject":void 0,"awayjs-display/lib/partition/SkyboxNode":void 0}],"awayjs-display/lib/entities/TextField":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/base/DisplayObject"),n=function(t){function e(){t.call(this),this._text=""}return i(e,t),Object.defineProperty(e.prototype,"bottomScrollV",{get:function(){return this._bottomScrollV},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"caretIndex",{get:function(){return this._caretIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.maxScrollH=function(){return this._maxScrollH},e.prototype.maxScrollV=function(){return this._maxScrollV},Object.defineProperty(e.prototype,"numLines",{get:function(){return this._numLines},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionBeginIndex",{get:function(){return this._selectionBeginIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionEndIndex",{get:function(){return this._selectionEndIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text!=t&&(this._text=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this._textHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textInteractionMode",{get:function(){return this._textInteractionMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this._textWidth},enumerable:!0,configurable:!0}),e.prototype.appendText=function(){},e.prototype.getCharBoundaries=function(){return this._charBoundaries},e.prototype.getCharIndexAtPoint=function(){return this._charIndexAtPoint},e.prototype.getFirstCharInParagraph=function(){return this._firstCharInParagraph},e.prototype.getImageReference=function(){return this._imageReference},e.prototype.getLineIndexAtPoint=function(){return this._lineIndexAtPoint},e.prototype.getLineIndexOfChar=function(){return this._lineIndexOfChar},e.prototype.getLineLength=function(){return this._lineLength},e.prototype.getLineMetrics=function(){return this._lineMetrics},e.prototype.getLineOffset=function(){return this._lineOffset},e.prototype.getLineText=function(){return this._lineText},e.prototype.getParagraphLength=function(){return this._paragraphLength},e.prototype.getTextFormat=function(t,e){return void 0===t&&(t=-1),void 0===e&&(e=-1),this._textFormat},e.prototype.replaceSelectedText=function(){},e.prototype.replaceText=function(){},e.prototype.setSelection=function(){},e.prototype.setTextFormat=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=-1)},e.isFontCompatible=function(){return!1},e}(s);e.exports=n},{"awayjs-display/lib/base/DisplayObject":void 0}],"awayjs-display/lib/errors/CastError":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/Error"),n=function(t){function e(e){t.call(this,e)}return i(e,t),e}(s);e.exports=n},{"awayjs-core/lib/errors/Error":void 0}],"awayjs-display/lib/events/CameraEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),n=function(t){function e(e,i){t.call(this,e),this._camera=i}return i(e,t),Object.defineProperty(e.prototype,"camera",{get:function(){return this._camera},enumerable:!0,configurable:!0}),e.PROJECTION_CHANGED="projectionChanged",e}(s);e.exports=n},{"awayjs-core/lib/events/Event":void 0}],"awayjs-display/lib/events/DisplayObjectEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),n=function(t){function e(e,i){t.call(this,e),this.object=i}return i(e,t),e.VISIBLITY_UPDATED="visiblityUpdated",e.SCENETRANSFORM_CHANGED="scenetransformChanged",e.SCENE_CHANGED="sceneChanged",e.POSITION_CHANGED="positionChanged",e.ROTATION_CHANGED="rotationChanged",e.SCALE_CHANGED="scaleChanged",e}(s);e.exports=n},{"awayjs-core/lib/events/Event":void 0}],"awayjs-display/lib/events/GeometryEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),n=function(t){function e(e,i){void 0===i&&(i=null),t.call(this,e),this._subGeometry=i}return i(e,t),Object.defineProperty(e.prototype,"subGeometry",{get:function(){return this._subGeometry},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._subGeometry)},e.SUB_GEOMETRY_ADDED="SubGeometryAdded",e.SUB_GEOMETRY_REMOVED="SubGeometryRemoved",e.BOUNDS_INVALID="BoundsInvalid",e}(s);e.exports=n},{"awayjs-core/lib/events/Event":void 0}],"awayjs-display/lib/events/LightEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),n=function(t){function e(e){t.call(this,e)}return i(e,t),e.prototype.clone=function(){return new e(this.type)},e.CASTS_SHADOW_CHANGE="castsShadowChange",e}(s);e.exports=n},{"awayjs-core/lib/events/Event":void 0}],"awayjs-display/lib/events/MaterialEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),n=function(t){function e(e){t.call(this,e)}return i(e,t),e.SIZE_CHANGED="sizeChanged",e}(s);e.exports=n},{"awayjs-core/lib/events/Event":void 0}],"awayjs-display/lib/events/MouseEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),n=function(t){function e(e){t.call(this,e),this._iAllowedToPropagate=!0}return i(e,t),Object.defineProperty(e.prototype,"bubbles",{get:function(){var t=this._iAllowedToPropagate;return this._iAllowedToPropagate=!0,t},enumerable:!0,configurable:!0}),e.prototype.stopPropagation=function(){this._iAllowedToPropagate=!1,this._iParentEvent&&this._iParentEvent.stopPropagation()},e.prototype.stopImmediatePropagation=function(){this._iAllowedToPropagate=!1,this._iParentEvent&&this._iParentEvent.stopImmediatePropagation()},e.prototype.clone=function(){var t=new e(this.type);return t.screenX=this.screenX,t.screenY=this.screenY,t.view=this.view,t.object=this.object,t.materialOwner=this.materialOwner,t.material=this.material,t.uv=this.uv,t.localPosition=this.localPosition,t.localNormal=this.localNormal,t.index=this.index,t.subGeometryIndex=this.subGeometryIndex,t.delta=this.delta,t.ctrlKey=this.ctrlKey,t.shiftKey=this.shiftKey,t._iParentEvent=this,t._iAllowedToPropagate=this._iAllowedToPropagate,t},Object.defineProperty(e.prototype,"scenePosition",{get:function(){return this.object.sceneTransform.transformVector(this.localPosition)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sceneNormal",{get:function(){var t=this.object.sceneTransform.deltaTransformVector(this.localNormal);return t.normalize(),t},enumerable:!0,configurable:!0}),e.MOUSE_OVER="mouseOver3d",e.MOUSE_OUT="mouseOut3d",e.MOUSE_UP="mouseUp3d",e.MOUSE_DOWN="mouseDown3d",e.MOUSE_MOVE="mouseMove3d",e.CLICK="click3d",e.DOUBLE_CLICK="doubleClick3d",e.MOUSE_WHEEL="mouseWheel3d",e}(s);e.exports=n},{"awayjs-core/lib/events/Event":void 0}],"awayjs-display/lib/events/RendererEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),n=function(t){function e(e){t.call(this,e)}return i(e,t),e.VIEWPORT_UPDATED="viewportUpdated",e.SCISSOR_UPDATED="scissorUpdated",e}(s);e.exports=n},{"awayjs-core/lib/events/Event":void 0}],"awayjs-display/lib/events/ResizeEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),n=function(t){function e(e,i,s){void 0===i&&(i=0/0),void 0===s&&(s=0/0),t.call(this,e),this._oldHeight=i,this._oldWidth=s}return i(e,t),Object.defineProperty(e.prototype,"oldHeight",{get:function(){return this._oldHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oldWidth",{get:function(){return this._oldWidth},enumerable:!0,configurable:!0}),e.RESIZE="resize",e}(s);e.exports=n},{"awayjs-core/lib/events/Event":void 0}],"awayjs-display/lib/events/SceneEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),n=function(t){function e(e,i){t.call(this,e),this.displayObject=i}return i(e,t),e.ADDED_TO_SCENE="addedToScene",e.REMOVED_FROM_SCENE="removedFromScene",e.PARTITION_CHANGED="partitionChanged",e}(s);e.exports=n},{"awayjs-core/lib/events/Event":void 0}],"awayjs-display/lib/events/StageEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),n=function(t){function e(e){t.call(this,e)}return i(e,t),e.CONTEXT_CREATED="contextCreated",e.CONTEXT_DISPOSED="contextDisposed",e.CONTEXT_RECREATED="contextRecreated",e.VIEWPORT_UPDATED="viewportUpdated",e}(s);e.exports=n},{"awayjs-core/lib/events/Event":void 0}],"awayjs-display/lib/events/SubGeometryEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),n=function(t){function e(e,i){void 0===i&&(i=""),t.call(this,e),this._dataType=i}return i(e,t),Object.defineProperty(e.prototype,"dataType",{get:function(){return this._dataType},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._dataType)},e.INDICES_UPDATED="indicesUpdated",e.VERTICES_UPDATED="verticesUpdated",e}(s);e.exports=n},{"awayjs-core/lib/events/Event":void 0}],"awayjs-display/lib/managers/MouseManager":[function(t,e){var i=t("awayjs-core/lib/geom/Vector3D"),s=t("awayjs-display/lib/events/MouseEvent"),n=function(){function t(){var t=this;this._viewLookup=new Array,this._nullVector=new i,this._queuedEvents=new Array,this._mouseUp=new s(s.MOUSE_UP),this._mouseClick=new s(s.CLICK),this._mouseOut=new s(s.MOUSE_OUT),this._mouseDown=new s(s.MOUSE_DOWN),this._mouseMove=new s(s.MOUSE_MOVE),this._mouseOver=new s(s.MOUSE_OVER),this._mouseWheel=new s(s.MOUSE_WHEEL),this._mouseDoubleClick=new s(s.DOUBLE_CLICK),this.onClickDelegate=function(e){return t.onClick(e)},this.onDoubleClickDelegate=function(e){return t.onDoubleClick(e)},this.onMouseDownDelegate=function(e){return t.onMouseDown(e)},this.onMouseMoveDelegate=function(e){return t.onMouseMove(e)},this.onMouseUpDelegate=function(e){return t.onMouseUp(e)},this.onMouseWheelDelegate=function(e){return t.onMouseWheel(e)},this.onMouseOverDelegate=function(e){return t.onMouseOver(e)},this.onMouseOutDelegate=function(e){return t.onMouseOut(e)}}return t.getInstance=function(){return this._instance?this._instance:this._instance=new t},t.prototype.fireMouseEvents=function(t){this._iCollidingObject!=this._previousCollidingObject&&(this._previousCollidingObject&&this.queueDispatch(this._mouseOut,this._mouseMoveEvent,this._previousCollidingObject),this._iCollidingObject&&this.queueDispatch(this._mouseOver,this._mouseMoveEvent)),t&&this._iCollidingObject&&this.queueDispatch(this._mouseMove,this._mouseMoveEvent);for(var e,i,s=this._queuedEvents.length,n=0;s>n;++n){for(e=this._queuedEvents[n],i=e.object;i&&!i._iIsMouseEnabled();)i=i.parent;i&&i.dispatchEvent(e)}this._queuedEvents.length=0,this._previousCollidingObject=this._iCollidingObject,this._iUpdateDirty=!1},t.prototype.registerView=function(t){t.htmlElement.addEventListener("click",this.onClickDelegate),t.htmlElement.addEventListener("dblclick",this.onDoubleClickDelegate),t.htmlElement.addEventListener("mousedown",this.onMouseDownDelegate),t.htmlElement.addEventListener("mousemove",this.onMouseMoveDelegate),t.htmlElement.addEventListener("mouseup",this.onMouseUpDelegate),t.htmlElement.addEventListener("mousewheel",this.onMouseWheelDelegate),t.htmlElement.addEventListener("mouseover",this.onMouseOverDelegate),t.htmlElement.addEventListener("mouseout",this.onMouseOutDelegate),this._viewLookup.push(t)},t.prototype.unregisterView=function(t){t.htmlElement.removeEventListener("click",this.onClickDelegate),t.htmlElement.removeEventListener("dblclick",this.onDoubleClickDelegate),t.htmlElement.removeEventListener("mousedown",this.onMouseDownDelegate),t.htmlElement.removeEventListener("mousemove",this.onMouseMoveDelegate),t.htmlElement.removeEventListener("mouseup",this.onMouseUpDelegate),t.htmlElement.removeEventListener("mousewheel",this.onMouseWheelDelegate),t.htmlElement.removeEventListener("mouseover",this.onMouseOverDelegate),t.htmlElement.removeEventListener("mouseout",this.onMouseOutDelegate),this._viewLookup.slice(this._viewLookup.indexOf(t),1)},t.prototype.queueDispatch=function(t,e,i){void 0===i&&(i=null),e&&(t.ctrlKey=e.ctrlKey,t.altKey=e.altKey,t.shiftKey=e.shiftKey,t.screenX=e.clientX,t.screenY=e.clientY),null==i&&(i=this._iCollidingObject),i?(t.object=i.displayObject,t.materialOwner=i.materialOwner,t.uv=i.uv,t.localPosition=i.localPosition?i.localPosition.clone():null,t.localNormal=i.localNormal?i.localNormal.clone():null,t.index=i.index):(t.uv=null,t.object=null,t.localPosition=this._nullVector,t.localNormal=this._nullVector,t.index=0,t.subGeometryIndex=0),this._queuedEvents.push(t)},t.prototype.onMouseMove=function(t){this.updateColliders(t),this._iCollidingObject&&this.queueDispatch(this._mouseMove,this._mouseMoveEvent=t)},t.prototype.onMouseOut=function(t){this._iActiveDiv=null,this.updateColliders(t),this._iCollidingObject&&this.queueDispatch(this._mouseOut,t)},t.prototype.onMouseOver=function(t){this._iActiveDiv=t.target,this.updateColliders(t),this._iCollidingObject&&this.queueDispatch(this._mouseOver,t)},t.prototype.onClick=function(t){this.updateColliders(t),this._iCollidingObject&&this.queueDispatch(this._mouseClick,t)},t.prototype.onDoubleClick=function(t){this.updateColliders(t),this._iCollidingObject&&this.queueDispatch(this._mouseDoubleClick,t)},t.prototype.onMouseDown=function(t){this._iActiveDiv=t.target,this.updateColliders(t),this._iCollidingObject&&this.queueDispatch(this._mouseDown,t)},t.prototype.onMouseUp=function(t){this.updateColliders(t),this._iCollidingObject&&this.queueDispatch(this._mouseUp,t)},t.prototype.onMouseWheel=function(t){this.updateColliders(t),this._iCollidingObject&&this.queueDispatch(this._mouseWheel,t)},t.prototype.updateColliders=function(t){if(!this._iUpdateDirty){for(var e,i,s=t.clientX,n=t.clientY,o=this._viewLookup.length,r=0;o>r;r++)if(e=this._viewLookup[r],i=e.htmlElement.getBoundingClientRect(),s<i.left||s>i.right||n<i.top||n>i.bottom)e._pMouseX=null,e._pMouseY=null;else if(e._pMouseX=s+i.left,e._pMouseY=n+i.top,e.updateCollider(),e.layeredView&&this._iCollidingObject)break;this._iUpdateDirty=!0}},t}();e.exports=n},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/events/MouseEvent":void 0}],"awayjs-display/lib/materials/CSSMaterialBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/materials/MaterialBase"),n=t("awayjs-core/lib/textures/ImageTexture"),o=function(t){function e(e,i,s){void 0===e&&(e=null),void 0===i&&(i=!0),void 0===s&&(s=!1),t.call(this),this._iMaterialId=Number(this.id),this.texture=e,this.smooth=i,this.repeat=s}return i(e,t),Object.defineProperty(e.prototype,"imageElement",{get:function(){return this._imageElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageStyle",{get:function(){return this._imageStyle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._pTexture},set:function(t){if(this._pTexture!=t&&(this._pTexture=t,t instanceof n)){this._imageElement=t.htmlImageElement;var e=document.createElement("style");e.type="text/css",document.getElementsByTagName("head")[0].appendChild(e);var i=document.styleSheets[document.styleSheets.length-1];i.insertRule(".material"+this.id+"{ }",0);var s=i.cssRules[0].style;s.backgroundImage="url("+this._imageElement.src+")",s.backgroundSize="100% 100%",s.position="absolute",s.width=this._imageElement.width+"px",s.height=this._imageElement.height+"px",s.transformOrigin=s["-webkit-transform-origin"]=s["-moz-transform-origin"]=s["-o-transform-origin"]=s["-ms-transform-origin"]="0% 0%",this._pHeight=this._imageElement.height,this._pWidth=this._imageElement.width,this._pNotifySizeChanged()}},enumerable:!0,configurable:!0}),e}(s);e.exports=o},{"awayjs-core/lib/textures/ImageTexture":void 0,"awayjs-display/lib/materials/MaterialBase":void 0}],"awayjs-display/lib/materials/LightSources":[function(t,e){var i=function(){function t(){}return t.LIGHTS=1,t.PROBES=2,t.ALL=3,t}();e.exports=i},{}],"awayjs-display/lib/materials/MaterialBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),n=t("awayjs-core/lib/library/AssetType"),o=t("awayjs-core/lib/library/NamedAssetBase"),r=t("awayjs-display/lib/base/BlendMode"),a=t("awayjs-display/lib/events/MaterialEvent"),h=function(t){function e(){var e=this;t.call(this),this._materialPassData=new Array,this._materialData=new Array,this._pAlphaThreshold=0,this._pAnimateUVs=!1,this._enableLightFallOff=!0,this._specularLightSources=1,this._diffuseLightSources=3,this._iMaterialId=0,this._iBaseScreenPassIndex=0,this._bothSides=!1,this._pScreenPassesInvalid=!0,this._pBlendMode=r.NORMAL,this._numPasses=0,this._mipmap=!1,this._smooth=!0,this._repeat=!1,this._color=16777215,this._pHeight=1,this._pWidth=1,this._pRequiresBlending=!1,this._iMaterialId=Number(this.id),this._owners=new Array,this._passes=new Array,this._onPassChangeDelegate=function(t){return e.onPassChange(t)},this._onLightChangeDelegate=function(t){return e.onLightsChange(t)},this.alphaPremultiplied=!1}return i(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return n.MATERIAL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._pHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationSet",{get:function(){return this._animationSet},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lightPicker",{get:function(){return this._pLightPicker},set:function(t){this._pLightPicker!=t&&(this._pLightPicker&&this._pLightPicker.removeEventListener(s.CHANGE,this._onLightChangeDelegate),this._pLightPicker=t,this._pLightPicker&&this._pLightPicker.addEventListener(s.CHANGE,this._onLightChangeDelegate),this._pInvalidateScreenPasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!=t&&(this._mipmap=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smooth",{get:function(){return this._smooth},set:function(t){this._smooth!=t&&(this._smooth=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"repeat",{get:function(){return this._repeat},set:function(t){this._repeat!=t&&(this._repeat=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color!=t&&(this._color=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._pTexture},set:function(t){this._pTexture!=t&&(this._pTexture=t,this._pInvalidatePasses(),this._pHeight=this._pTexture.height,this._pWidth=this._pTexture.width,this._pNotifySizeChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animateUVs",{get:function(){return this._pAnimateUVs},set:function(t){this._pAnimateUVs!=t&&(this._pAnimateUVs=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enableLightFallOff",{get:function(){return this._enableLightFallOff},set:function(t){this._enableLightFallOff!=t&&(this._enableLightFallOff=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"diffuseLightSources",{get:function(){return this._diffuseLightSources},set:function(t){this._diffuseLightSources!=t&&(this._diffuseLightSources=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specularLightSources",{get:function(){return this._specularLightSources},set:function(t){this._specularLightSources!=t&&(this._specularLightSources=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var t,e;for(this._pClearScreenPasses(),e=this._materialData.length,t=0;e>t;t++)this._materialData[t].dispose();for(this._materialData=new Array,e=this._materialPassData.length,t=0;e>t;t++)this._materialPassData[t].dispose();this._materialPassData=new Array},Object.defineProperty(e.prototype,"bothSides",{get:function(){return this._bothSides},set:function(t){(this._bothSides=t)||(this._bothSides=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._pBlendMode},set:function(t){this._pBlendMode!=t&&(this._pBlendMode=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alphaPremultiplied",{get:function(){return this._alphaPremultiplied},set:function(t){this._alphaPremultiplied!=t&&(this._alphaPremultiplied=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alphaThreshold",{get:function(){return this._pAlphaThreshold},set:function(t){0>t?t=0:t>1&&(t=1),this._pAlphaThreshold!=t&&(this._pAlphaThreshold=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requiresBlending",{get:function(){return this._pRequiresBlending},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._pWidth},enumerable:!0,configurable:!0}),e.prototype._iActivatePass=function(t,e,i){t.materialPass._iActivate(t,e,i)},e.prototype._iDeactivatePass=function(t,e){t.materialPass._iDeactivate(t,e)},e.prototype._iRenderPass=function(t,e,i,s,n){this._pLightPicker&&this._pLightPicker.collectLights(e),t.materialPass._iRender(t,e,i,s,n)},e.prototype.iAddOwner=function(t){this._owners.push(t);var e,i=t.animator;if(i&&(e=i.animationSet),t.animator){if(this._animationSet&&e!=this._animationSet)throw new Error("A Material instance cannot be shared across material owners with different animation sets");this._animationSet!=e&&(this._animationSet=e,this.invalidateAnimation())}},e.prototype.iRemoveOwner=function(t){this._owners.splice(this._owners.indexOf(t),1),0==this._owners.length&&(this._animationSet=null,this.invalidateAnimation())},Object.defineProperty(e.prototype,"iOwners",{get:function(){return this._owners},enumerable:!0,configurable:!0}),e.prototype._iNumScreenPasses=function(){return this._numPasses},Object.defineProperty(e.prototype,"_iScreenPasses",{get:function(){return this._passes},enumerable:!0,configurable:!0}),e.prototype._pInvalidatePasses=function(){for(var t=this._materialPassData.length,e=0;t>e;e++)this._materialPassData[e].invalidate();this.invalidateMaterial()},e.prototype._pInvalidateScreenPasses=function(){this._pScreenPassesInvalid=!0},e.prototype._pRemoveScreenPass=function(t){t.removeEventListener(s.CHANGE,this._onPassChangeDelegate),this._passes.splice(this._passes.indexOf(t),1),this._numPasses--},e.prototype._pClearScreenPasses=function(){for(var t=0;t<this._numPasses;++t)this._passes[t].removeEventListener(s.CHANGE,this._onPassChangeDelegate);this._passes.length=this._numPasses=0},e.prototype._pAddScreenPass=function(t){this._passes[this._numPasses++]=t,t.lightPicker=this._pLightPicker,t.addEventListener(s.CHANGE,this._onPassChangeDelegate),this.invalidateMaterial()},e.prototype._iAddMaterialData=function(t){return this._materialData.push(t),t},e.prototype._iRemoveMaterialData=function(t){return this._materialData.splice(this._materialData.indexOf(t),1),t},e.prototype._iUpdateMaterial=function(){},e.prototype.onPassChange=function(){this.invalidateMaterial()},e.prototype.invalidateAnimation=function(){for(var t=this._materialData.length,e=0;t>e;e++)this._materialData[e].invalidateAnimation()},e.prototype.invalidateMaterial=function(){for(var t=this._materialData.length,e=0;t>e;e++)this._materialData[e].invalidateMaterial()},e.prototype.onLightsChange=function(){this._pInvalidateScreenPasses()},e.prototype._pNotifySizeChanged=function(){this._sizeChanged||(this._sizeChanged=new a(a.SIZE_CHANGED)),this.dispatchEvent(this._sizeChanged)},e.prototype._iAddMaterialPassData=function(t){return this._materialPassData.push(t),t},e.prototype._iRemoveMaterialPassData=function(t){return this._materialPassData.splice(this._materialPassData.indexOf(t),1),t},e}(o);e.exports=h},{"awayjs-core/lib/events/Event":void 0,"awayjs-core/lib/library/AssetType":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0,"awayjs-display/lib/base/BlendMode":void 0,"awayjs-display/lib/events/MaterialEvent":void 0}],"awayjs-display/lib/materials/lightpickers/LightPickerBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),n=t("awayjs-core/lib/library/NamedAssetBase"),o=function(t){function e(){t.call(this),this._pNumPointLights=0,this._pNumDirectionalLights=0,this._pNumCastingPointLights=0,this._pNumCastingDirectionalLights=0,this._pNumLightProbes=0}return i(e,t),e.prototype.dispose=function(){},Object.defineProperty(e.prototype,"assetType",{get:function(){return s.LIGHT_PICKER},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numDirectionalLights",{get:function(){return this._pNumDirectionalLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numPointLights",{get:function(){return this._pNumPointLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numCastingDirectionalLights",{get:function(){return this._pNumCastingDirectionalLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numCastingPointLights",{get:function(){return this._pNumCastingPointLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numLightProbes",{get:function(){return this._pNumLightProbes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointLights",{get:function(){return this._pPointLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"directionalLights",{get:function(){return this._pDirectionalLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"castingPointLights",{get:function(){return this._pCastingPointLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"castingDirectionalLights",{get:function(){return this._pCastingDirectionalLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lightProbes",{get:function(){return this._pLightProbes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lightProbeWeights",{get:function(){return this._pLightProbeWeights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allPickedLights",{get:function(){return this._pAllPickedLights},enumerable:!0,configurable:!0}),e.prototype.collectLights=function(t){this.updateProbeWeights(t)},e.prototype.updateProbeWeights=function(t){var e,i,s,n,o,r,a=t.sourceEntity.scenePosition,h=a.x,p=a.y,l=a.z,c=0;for(r=0;r<this._pNumLightProbes;++r)e=this._pLightProbes[r].scenePosition,i=h-e.x,s=p-e.y,n=l-e.z,o=i*i+s*s+n*n,o=o>1e-5?1/o:5e7,this._pLightProbeWeights[r]=o,c+=o;for(c=1/c,r=0;r<this._pNumLightProbes;++r)this._pLightProbeWeights[r]*=c},e}(n);e.exports=o},{"awayjs-core/lib/library/AssetType":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0}],"awayjs-display/lib/materials/lightpickers/StaticLightPicker":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),n=t("awayjs-display/lib/entities/DirectionalLight"),o=t("awayjs-display/lib/entities/LightProbe"),r=t("awayjs-display/lib/entities/PointLight"),a=t("awayjs-display/lib/events/LightEvent"),h=t("awayjs-display/lib/materials/lightpickers/LightPickerBase"),p=function(t){function e(e){var i=this;
t.call(this),this._onCastShadowChangeDelegate=function(t){return i.onCastShadowChange(t)},this.lights=e}return i(e,t),Object.defineProperty(e.prototype,"lights",{get:function(){return this._lights},set:function(t){var e,i=0,h=0,p=0,l=0,c=0;this._lights&&this.clearListeners(),this._lights=t,this._pAllPickedLights=t,this._pPointLights=new Array,this._pCastingPointLights=new Array,this._pDirectionalLights=new Array,this._pCastingDirectionalLights=new Array,this._pLightProbes=new Array;for(var u=t.length,_=0;u>_;++_)e=t[_],e.addEventListener(a.CASTS_SHADOW_CHANGE,this._onCastShadowChangeDelegate),e instanceof r?e.castsShadows?this._pCastingPointLights[p++]=e:this._pPointLights[i++]=e:e instanceof n?e.castsShadows?this._pCastingDirectionalLights[l++]=e:this._pDirectionalLights[h++]=e:e instanceof o&&(this._pLightProbes[c++]=e);(this._pNumDirectionalLights!=h||this._pNumPointLights!=i||this._pNumLightProbes!=c||this._pNumCastingPointLights!=p||this._pNumCastingDirectionalLights!=l)&&(this._pNumDirectionalLights=h,this._pNumCastingDirectionalLights=l,this._pNumPointLights=i,this._pNumCastingPointLights=p,this._pNumLightProbes=c,this._pLightProbeWeights=new Array(4*Math.ceil(c/4)),this.dispatchEvent(new s(s.CHANGE)))},enumerable:!0,configurable:!0}),e.prototype.clearListeners=function(){for(var t=this._lights.length,e=0;t>e;++e)this._lights[e].removeEventListener(a.CASTS_SHADOW_CHANGE,this._onCastShadowChangeDelegate)},e.prototype.onCastShadowChange=function(t){var e=t.target;e instanceof r?this.updatePointCasting(e):e instanceof n&&this.updateDirectionalCasting(e),this.dispatchEvent(new s(s.CHANGE))},e.prototype.updateDirectionalCasting=function(t){var e=t;t.castsShadows?(--this._pNumDirectionalLights,++this._pNumCastingDirectionalLights,this._pDirectionalLights.splice(this._pDirectionalLights.indexOf(e),1),this._pCastingDirectionalLights.push(t)):(++this._pNumDirectionalLights,--this._pNumCastingDirectionalLights,this._pCastingDirectionalLights.splice(this._pCastingDirectionalLights.indexOf(e),1),this._pDirectionalLights.push(t))},e.prototype.updatePointCasting=function(t){var e=t;t.castsShadows?(--this._pNumPointLights,++this._pNumCastingPointLights,this._pPointLights.splice(this._pPointLights.indexOf(e),1),this._pCastingPointLights.push(t)):(++this._pNumPointLights,--this._pNumCastingPointLights,this._pCastingPointLights.splice(this._pCastingPointLights.indexOf(e),1),this._pPointLights.push(t))},e}(h);e.exports=p},{"awayjs-core/lib/events/Event":void 0,"awayjs-display/lib/entities/DirectionalLight":void 0,"awayjs-display/lib/entities/LightProbe":void 0,"awayjs-display/lib/entities/PointLight":void 0,"awayjs-display/lib/events/LightEvent":void 0,"awayjs-display/lib/materials/lightpickers/LightPickerBase":void 0}],"awayjs-display/lib/materials/passes/IMaterialPass":[function(){},{}],"awayjs-display/lib/materials/shadowmappers/CascadeShadowMapper":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Matrix3DUtils"),n=t("awayjs-core/lib/geom/Rectangle"),o=t("awayjs-core/lib/events/Event"),r=t("awayjs-core/lib/events/EventDispatcher"),a=t("awayjs-core/lib/projections/FreeMatrixProjection"),h=t("awayjs-display/lib/entities/Camera"),p=t("awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper"),l=function(t){function e(e){if(void 0===e&&(e=3),t.call(this),this._pScissorRectsInvalid=!0,1>e||e>4)throw new Error("numCascades must be an integer between 1 and 4");this._numCascades=e,this._changeDispatcher=new r(this),this.init()}return i(e,t),e.prototype.getSplitRatio=function(t){return this._splitRatios[t]},e.prototype.setSplitRatio=function(t,e){if(0>e?e=0:e>1&&(e=1),t>=this._numCascades)throw new Error("index must be smaller than the number of cascades!");this._splitRatios[t]=e},e.prototype.getDepthProjections=function(t){return this._depthCameras[t].viewProjection},e.prototype.init=function(){this._splitRatios=new Array(this._numCascades),this._nearPlaneDistances=new Array(this._numCascades);for(var t=1,e=this._numCascades-1;e>=0;--e)this._splitRatios[e]=t,t*=.4;for(this._texOffsetsX=Array(-1,1,-1,1),this._texOffsetsY=Array(1,1,-1,-1),this._pScissorRects=new Array(4),this._depthLenses=new Array,this._depthCameras=new Array,e=0;e<this._numCascades;++e)this._depthLenses[e]=new a,this._depthCameras[e]=new h(this._depthLenses[e])},e.prototype._pSetDepthMapSize=function(e){t.prototype._pSetDepthMapSize.call(this,e),this.invalidateScissorRects()},e.prototype.invalidateScissorRects=function(){this._pScissorRectsInvalid=!0},Object.defineProperty(e.prototype,"numCascades",{get:function(){return this._numCascades},set:function(t){if(t!=this._numCascades){if(1>t||t>4)throw new Error("numCascades must be an integer between 1 and 4");this._numCascades=t,this.invalidateScissorRects(),this.init(),this.dispatchEvent(new o(o.CHANGE))}},enumerable:!0,configurable:!0}),e.prototype.pDrawDepthMap=function(t,e,i){this._pScissorRectsInvalid&&this.updateScissorRects(),this._pCasterCollector.cullPlanes=this._pCullPlanes,this._pCasterCollector.camera=this._pOverallDepthCamera,this._pCasterCollector.clear(),e.traversePartitions(this._pCasterCollector),i._iRenderCascades(this._pCasterCollector,t,this._numCascades,this._pScissorRects,this._depthCameras)},e.prototype.updateScissorRects=function(){var t=.5*this._pDepthMapSize;this._pScissorRects[0]=new n(0,0,t,t),this._pScissorRects[1]=new n(t,0,t,t),this._pScissorRects[2]=new n(0,t,t,t),this._pScissorRects[3]=new n(t,t,t,t),this._pScissorRectsInvalid=!1},e.prototype.pUpdateDepthProjection=function(t){var e,i=t.projection,s=i.near,n=i.far-s;this.pUpdateProjectionFromFrustumCorners(t,t.projection.frustumCorners,this._pMatrix),this._pMatrix.appendScale(.96,.96,1),this._pOverallDepthProjection.matrix=this._pMatrix,this.pUpdateCullPlanes(t);for(var o=0;o<this._numCascades;++o)e=this._depthLenses[o].matrix,this._nearPlaneDistances[o]=s+this._splitRatios[o]*n,this._depthCameras[o].transform=this._pOverallDepthCamera.transform,this.updateProjectionPartition(e,this._splitRatios[o],this._texOffsetsX[o],this._texOffsetsY[o]),this._depthLenses[o].matrix=e},e.prototype.updateProjectionPartition=function(t,e,i,n){for(var o,r,a,h,p,l,c,u=s.RAW_DATA_CONTAINER,_=Number.POSITIVE_INFINITY,d=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY,f=Number.NEGATIVE_INFINITY,m=Number.NEGATIVE_INFINITY,b=0;12>b;)o=this._pLocalFrustum[b],r=this._pLocalFrustum[b+1],a=this._pLocalFrustum[b+2],h=o+(this._pLocalFrustum[b+12]-o)*e,p=r+(this._pLocalFrustum[b+13]-r)*e,l=a+(this._pLocalFrustum[b+14]-a)*e,_>o&&(_=o),o>y&&(y=o),d>r&&(d=r),r>f&&(f=r),a>m&&(m=a),_>h&&(_=h),h>y&&(y=h),d>p&&(d=p),p>f&&(f=p),l>m&&(m=l),b+=3;c=1;var g=y-_,v=f-d,w=1/(m-c);0>_&&(_-=this._pSnap),0>d&&(d-=this._pSnap),_=Math.floor(_/this._pSnap)*this._pSnap,d=Math.floor(d/this._pSnap)*this._pSnap;var P=2*this._pSnap;g=Math.floor(g/P+1)*P,v=Math.floor(v/P+1)*P,y=_+g,f=d+v,g=1/g,v=1/v,u[0]=2*g,u[5]=2*v,u[10]=w,u[12]=-(y+_)*g,u[13]=-(f+d)*v,u[14]=-c*w,u[15]=1,u[1]=u[2]=u[3]=u[4]=u[6]=u[7]=u[8]=u[9]=u[11]=0,t.copyRawDataFrom(u),t.appendScale(.96,.96,1),t.appendTranslation(i,n,0),t.appendScale(.5,.5,1)},e.prototype.addEventListener=function(t,e){this._changeDispatcher.addEventListener(t,e)},e.prototype.removeEventListener=function(t,e){this._changeDispatcher.removeEventListener(t,e)},e.prototype.dispatchEvent=function(t){return this._changeDispatcher.dispatchEvent(t)},e.prototype.hasEventListener=function(t){return this._changeDispatcher.hasEventListener(t)},Object.defineProperty(e.prototype,"_iNearPlaneDistances",{get:function(){return this._nearPlaneDistances},enumerable:!0,configurable:!0}),e}(p);e.exports=l},{"awayjs-core/lib/events/Event":void 0,"awayjs-core/lib/events/EventDispatcher":void 0,"awayjs-core/lib/geom/Matrix3DUtils":void 0,"awayjs-core/lib/geom/Rectangle":void 0,"awayjs-core/lib/projections/FreeMatrixProjection":void 0,"awayjs-display/lib/entities/Camera":void 0,"awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper":void 0}],"awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/PartialImplementationError"),n=t("awayjs-display/lib/entities/Camera"),o=t("awayjs-display/lib/materials/shadowmappers/ShadowMapperBase"),r=function(t){function e(){t.call(this),this._pDepthMapSize=512,this._needsRender=new Array,this.initCameras()}return i(e,t),e.prototype.initCameras=function(){this._depthCameras=new Array,this._projections=new Array,this.addCamera(0,90,0),this.addCamera(0,-90,0),this.addCamera(-90,0,0),this.addCamera(90,0,0),this.addCamera(0,0,0),this.addCamera(0,180,0)},e.prototype.addCamera=function(t,e,i){var s=new n;s.rotationX=t,s.rotationY=e,s.rotationZ=i,s.projection.near=.01;var o=s.projection;o.fieldOfView=90,this._projections.push(o),s.projection._iAspectRatio=1,this._depthCameras.push(s)},e.prototype.pCreateDepthTexture=function(){throw new s},e.prototype.pUpdateDepthProjection=function(){for(var t=this._pLight,e=t._pFallOff,i=this._pLight.scenePosition,s=0;6>s;++s)this._projections[s].far=e,this._depthCameras[s].transform.position=i,this._needsRender[s]=!0},e.prototype.pDrawDepthMap=function(t,e,i){for(var s=0;6>s;++s)this._needsRender[s]&&(this._pCasterCollector.camera=this._depthCameras[s],this._pCasterCollector.clear(),e.traversePartitions(this._pCasterCollector),i._iRender(this._pCasterCollector,t,null,s))},e}(o);e.exports=r},{"awayjs-core/lib/errors/PartialImplementationError":void 0,"awayjs-display/lib/entities/Camera":void 0,"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase":void 0}],"awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Matrix3D"),n=t("awayjs-core/lib/projections/FreeMatrixProjection"),o=t("awayjs-display/lib/entities/Camera"),r=t("awayjs-display/lib/materials/shadowmappers/ShadowMapperBase"),a=function(t){function e(){t.call(this),this._pLightOffset=1e4,this._pSnap=64,this._pCullPlanes=[],this._pOverallDepthProjection=new n,this._pOverallDepthCamera=new o(this._pOverallDepthProjection),this._pLocalFrustum=[],this._pMatrix=new s}return i(e,t),Object.defineProperty(e.prototype,"snap",{get:function(){return this._pSnap},set:function(t){this._pSnap=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lightOffset",{get:function(){return this._pLightOffset},set:function(t){this._pLightOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iDepthProjection",{get:function(){return this._pOverallDepthCamera.viewProjection},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return this._pMaxZ-this._pMinZ},enumerable:!0,configurable:!0}),e.prototype.pDrawDepthMap=function(t,e,i){this._pCasterCollector.camera=this._pOverallDepthCamera,this._pCasterCollector.cullPlanes=this._pCullPlanes,this._pCasterCollector.clear(),e.traversePartitions(this._pCasterCollector),i._iRender(this._pCasterCollector,t)},e.prototype.pUpdateCullPlanes=function(t){var e=this._pOverallDepthCamera.frustumPlanes,i=t.frustumPlanes;this._pCullPlanes.length=4,this._pCullPlanes[0]=e[0],this._pCullPlanes[1]=e[1],this._pCullPlanes[2]=e[2],this._pCullPlanes[3]=e[3];for(var s=this._pLight,n=s.sceneDirection,o=n.x,r=n.y,a=n.z,h=4,p=0;6>p;++p){var l=i[p];l.a*o+l.b*r+l.c*a<0&&(this._pCullPlanes[h++]=l)}},e.prototype.pUpdateDepthProjection=function(t){this.pUpdateProjectionFromFrustumCorners(t,t.projection.frustumCorners,this._pMatrix),this._pOverallDepthProjection.matrix=this._pMatrix,this.pUpdateCullPlanes(t)},e.prototype.pUpdateProjectionFromFrustumCorners=function(t,e,i){var s,n,o,r,a,h,p,l,c,u=new Array,_=this._pLight;for(s=_.sceneDirection,this._pOverallDepthCamera.transform.matrix3D=this._pLight.sceneTransform,n=Math.floor((t.x-s.x*this._pLightOffset)/this._pSnap)*this._pSnap,o=Math.floor((t.y-s.y*this._pLightOffset)/this._pSnap)*this._pSnap,r=Math.floor((t.z-s.z*this._pLightOffset)/this._pSnap)*this._pSnap,this._pOverallDepthCamera.x=n,this._pOverallDepthCamera.y=o,this._pOverallDepthCamera.z=r,this._pMatrix.copyFrom(this._pOverallDepthCamera.inverseSceneTransform),this._pMatrix.prepend(t.sceneTransform),this._pMatrix.transformVectors(e,this._pLocalFrustum),a=p=this._pLocalFrustum[0],h=l=this._pLocalFrustum[1],this._pMaxZ=this._pLocalFrustum[2],c=3;24>c;)n=this._pLocalFrustum[c],o=this._pLocalFrustum[c+1],r=this._pLocalFrustum[c+2],a>n&&(a=n),n>p&&(p=n),h>o&&(h=o),o>l&&(l=o),r>this._pMaxZ&&(this._pMaxZ=r),c+=3;this._pMinZ=1;var d=p-a,y=l-h,f=1/(this._pMaxZ-this._pMinZ);0>a&&(a-=this._pSnap),0>h&&(h-=this._pSnap),a=Math.floor(a/this._pSnap)*this._pSnap,h=Math.floor(h/this._pSnap)*this._pSnap;var m=2*this._pSnap;d=Math.floor(d/m+2)*m,y=Math.floor(y/m+2)*m,p=a+d,l=h+y,d=1/d,y=1/y,u[0]=2*d,u[5]=2*y,u[10]=f,u[12]=-(p+a)*d,u[13]=-(l+h)*y,u[14]=-this._pMinZ*f,u[15]=1,u[1]=u[2]=u[3]=u[4]=u[6]=u[7]=u[8]=u[9]=u[11]=0,i.copyRawDataFrom(u)},e}(r);e.exports=a},{"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/projections/FreeMatrixProjection":void 0,"awayjs-display/lib/entities/Camera":void 0,"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase":void 0}],"awayjs-display/lib/materials/shadowmappers/NearDirectionalShadowMapper":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper"),n=function(t){function e(e){void 0===e&&(e=.5),t.call(this),this.coverageRatio=e}return i(e,t),Object.defineProperty(e.prototype,"coverageRatio",{get:function(){return this._coverageRatio},set:function(t){t>1?t=1:0>t&&(t=0),this._coverageRatio=t},enumerable:!0,configurable:!0}),e.prototype.pUpdateDepthProjection=function(t){for(var e=t.projection.frustumCorners,i=0;12>i;++i){var s=e[i];this._pLocalFrustum[i]=s,this._pLocalFrustum[i+12]=s+(e[i+12]-s)*this._coverageRatio}this.pUpdateProjectionFromFrustumCorners(t,this._pLocalFrustum,this._pMatrix),this._pOverallDepthProjection.matrix=this._pMatrix},e}(s);e.exports=n},{"awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper":void 0}],"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase":[function(t,e){var i=t("awayjs-core/lib/errors/AbstractMethodError"),s=t("awayjs-display/lib/traverse/ShadowCasterCollector"),n=t("awayjs-core/lib/textures/RenderTexture"),o=function(){function t(){this._pDepthMapSize=2048,this._autoUpdateShadows=!0,this._pCasterCollector=this.pCreateCasterCollector()}return t.prototype.pCreateCasterCollector=function(){return new s},Object.defineProperty(t.prototype,"autoUpdateShadows",{get:function(){return this._autoUpdateShadows},set:function(t){this._autoUpdateShadows=t},enumerable:!0,configurable:!0}),t.prototype.updateShadows=function(){this._iShadowsInvalid=!0},t.prototype.iSetDepthMap=function(t){this._depthMap!=t&&(this._depthMap&&!this._explicitDepthMap&&this._depthMap.dispose(),this._depthMap=t,this._depthMap?(this._explicitDepthMap=!0,this._pDepthMapSize=this._depthMap.size):this._explicitDepthMap=!1)},Object.defineProperty(t.prototype,"light",{get:function(){return this._pLight},set:function(t){this._pLight=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"depthMap",{get:function(){return this._depthMap||(this._depthMap=this.pCreateDepthTexture()),this._depthMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"depthMapSize",{get:function(){return this._pDepthMapSize},set:function(t){t!=this._pDepthMapSize&&this._pSetDepthMapSize(t)},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._pCasterCollector=null,this._depthMap&&!this._explicitDepthMap&&this._depthMap.dispose(),this._depthMap=null},t.prototype.pCreateDepthTexture=function(){return new n(this._pDepthMapSize,this._pDepthMapSize)},t.prototype.iRenderDepthMap=function(t,e){this._iShadowsInvalid=!1,this.pUpdateDepthProjection(t.camera),this._depthMap||(this._depthMap=this.pCreateDepthTexture()),this.pDrawDepthMap(this._depthMap,t.scene,e)},t.prototype.pUpdateDepthProjection=function(){throw new i},t.prototype.pDrawDepthMap=function(){throw new i},t.prototype._pSetDepthMapSize=function(t){if(this._pDepthMapSize=t,this._explicitDepthMap)throw Error("Cannot set depth map size for the current renderer.");this._depthMap&&(this._depthMap.dispose(),this._depthMap=null)},t}();e.exports=o},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/textures/RenderTexture":void 0,"awayjs-display/lib/traverse/ShadowCasterCollector":void 0}],"awayjs-display/lib/partition/CameraNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/partition/EntityNode"),n=function(t){function e(e){t.call(this,e)}return i(e,t),e.prototype.acceptTraverser=function(){},e}(s);e.exports=n},{"awayjs-display/lib/partition/EntityNode":void 0}],"awayjs-display/lib/partition/DirectionalLightNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/partition/EntityNode"),n=function(t){function e(e){t.call(this,e),this._directionalLight=e}return i(e,t),e.prototype.acceptTraverser=function(t){t.enterNode(this)&&t.applyDirectionalLight(this._directionalLight)},e.prototype.isCastingShadow=function(){return!1},e}(s);e.exports=n},{"awayjs-display/lib/partition/EntityNode":void 0}],"awayjs-display/lib/partition/EntityNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/PartialImplementationError"),n=t("awayjs-display/lib/partition/NodeBase"),o=function(t){function e(e){t.call(this),this._entity=e,this._iNumEntities=1}return i(e,t),Object.defineProperty(e.prototype,"entity",{get:function(){return this._entity},enumerable:!0,configurable:!0}),e.prototype.removeFromParent=function(){this._iParent&&this._iParent.iRemoveNode(this),this._iParent=null},e.prototype.isCastingShadow=function(){return this.entity.castsShadows},e.prototype.isInFrustum=function(t,e){return this._entity._iIsVisible()?this._entity.worldBounds.isInFrustum(t,e):!1},e.prototype.acceptTraverser=function(t){t.enterNode(this)&&t.applyEntity(this._entity)},e.prototype.isIntersectingRay=function(t,e){return this._entity._iIsVisible()?this._entity.isIntersectingRay(t,e):!1},e.prototype._pCreateBoundsPrimitive=function(){throw new s},e}(n);e.exports=o},{"awayjs-core/lib/errors/PartialImplementationError":void 0,"awayjs-display/lib/partition/NodeBase":void 0}],"awayjs-display/lib/partition/LightProbeNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/partition/EntityNode"),n=function(t){function e(e){t.call(this,e),this._lightProbe=e}return i(e,t),e.prototype.acceptTraverser=function(t){t.enterNode(this)&&t.applyLightProbe(this._lightProbe)},e.prototype.isCastingShadow=function(){return!1},e}(s);e.exports=n},{"awayjs-display/lib/partition/EntityNode":void 0}],"awayjs-display/lib/partition/NodeBase":[function(t,e){var i=function(){function t(){this._pNumChildNodes=0,this._iNumEntities=0,this._pChildNodes=new Array}return Object.defineProperty(t.prototype,"boundsVisible",{get:function(){return this._explicitBoundsVisible},set:function(t){this._explicitBoundsVisible!=t&&(this._explicitBoundsVisible=t,this._iUpdateImplicitBoundsVisible(this._iParent?this._iParent.boundsChildrenVisible:!1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boundsChildrenVisible",{get:function(){return this._boundsChildrenVisible},set:function(t){if(this._boundsChildrenVisible!=t){this._boundsChildrenVisible=t;for(var e=0;e<this._pNumChildNodes;++e)this._pChildNodes[e]._iUpdateImplicitBoundsVisible(this._boundsChildrenVisible)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._iParent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_pNumEntities",{get:function(){return this._iNumEntities},enumerable:!0,configurable:!0}),t.prototype.isInFrustum=function(){return!0},t.prototype.isIntersectingRay=function(){return!0},t.prototype.isCastingShadow=function(){return!0},t.prototype.findPartitionForEntity=function(){return this},t.prototype.acceptTraverser=function(t){if((0!=this._pNumEntities||this._implicitBoundsVisible)&&t.enterNode(this)){for(var e=0;e<this._pNumChildNodes;)this._pChildNodes[e++].acceptTraverser(t);this._implicitBoundsVisible&&this._pBoundsPrimitive.partitionNode.acceptTraverser(t)}},t.prototype._pCreateBoundsPrimitive=function(){return null},t.prototype.iAddNode=function(t){t._iParent=this,this._iNumEntities+=t._pNumEntities,this._pChildNodes[this._pNumChildNodes++]=t,t._iUpdateImplicitBoundsVisible(this.boundsChildrenVisible);var e=t._pNumEntities;t=this;do t._iNumEntities+=e;while(null!=(t=t._iParent))},t.prototype.iRemoveNode=function(t){var e=this._pChildNodes.indexOf(t);this._pChildNodes[e]=this._pChildNodes[--this._pNumChildNodes],this._pChildNodes.pop(),t._iUpdateImplicitBoundsVisible(!1);var i=t._pNumEntities;t=this;do t._pNumEntities-=i;while(null!=(t=t._iParent))},t.prototype._iUpdateImplicitBoundsVisible=function(t){if(this._implicitBoundsVisible!=this._explicitBoundsVisible&&!t){this._implicitBoundsVisible=this._explicitBoundsVisible||t,this._iUpdateEntityBounds();for(var e=0;e<this._pNumChildNodes;++e)this._pChildNodes[e]._iUpdateImplicitBoundsVisible(this._boundsChildrenVisible)}},t.prototype._iIsBoundsVisible=function(){return this._implicitBoundsVisible},t.prototype._iUpdateEntityBounds=function(){this._pBoundsPrimitive&&(this._pBoundsPrimitive.dispose(),this._pBoundsPrimitive=null),this._implicitBoundsVisible&&(this._pBoundsPrimitive=this._pCreateBoundsPrimitive())},t}();e.exports=i},{}],"awayjs-display/lib/partition/NullNode":[function(t,e){var i=function(){function t(){}return t}();e.exports=i},{}],"awayjs-display/lib/partition/Partition":[function(t,e){var i=t("awayjs-display/lib/partition/NullNode"),s=function(){function t(t){this._updatesMade=!1,this._rootNode=t||new i}return Object.defineProperty(t.prototype,"rootNode",{get:function(){return this._rootNode},enumerable:!0,configurable:!0}),t.prototype.traverse=function(t){this._updatesMade&&this.updateEntities(),this._rootNode.acceptTraverser(t)},t.prototype.iMarkForUpdate=function(t){for(var e=t.partitionNode,i=this._updateQueue;i;){if(e==i)return;i=i._iUpdateQueueNext}e._iUpdateQueueNext=this._updateQueue,this._updateQueue=e,this._updatesMade=!0},t.prototype.iRemoveEntity=function(t){var e,i=t.partitionNode;if(i.removeFromParent(),i==this._updateQueue)this._updateQueue=i._iUpdateQueueNext;else{for(e=this._updateQueue;e&&e._iUpdateQueueNext!=i;)e=e._iUpdateQueueNext;e&&(e._iUpdateQueueNext=i._iUpdateQueueNext)}i._iUpdateQueueNext=null,this._updateQueue||(this._updatesMade=!1)},t.prototype.updateEntities=function(){var t,e,i=this._updateQueue;this._updateQueue=null,this._updatesMade=!1;do t=this._rootNode.findPartitionForEntity(i.entity),i.parent!=t&&(i&&i.removeFromParent(),t.iAddNode(i)),e=i._iUpdateQueueNext,i._iUpdateQueueNext=null,i.entity._iInternalUpdate();while(null!=(i=e))},t}();e.exports=s},{"awayjs-display/lib/partition/NullNode":void 0}],"awayjs-display/lib/partition/PointLightNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/partition/EntityNode"),n=function(t){function e(e){t.call(this,e),this._pointLight=e}return i(e,t),e.prototype.acceptTraverser=function(t){t.enterNode(this)&&t.applyPointLight(this._pointLight)},e.prototype.isCastingShadow=function(){return!1},e}(s);e.exports=n},{"awayjs-display/lib/partition/EntityNode":void 0}],"awayjs-display/lib/partition/SkyboxNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/partition/EntityNode"),n=function(t){function e(e){t.call(this,e),this._skyBox=e}return i(e,t),e.prototype.acceptTraverser=function(t){t.enterNode(this)&&t.applySkybox(this._skyBox)},e.prototype.isInFrustum=function(){return this._skyBox._iIsVisible?!0:!1},e}(s);e.exports=n},{"awayjs-display/lib/partition/EntityNode":void 0}],"awayjs-display/lib/pick/IPicker":[function(){},{}],"awayjs-display/lib/pick/IPickingCollider":[function(){},{}],"awayjs-display/lib/pick/PickingCollisionVO":[function(t,e){var i=function(){function t(t){this.displayObject=t}return t}();e.exports=i},{}],"awayjs-display/lib/pick/RaycastPicker":[function(t,e){var i=t("awayjs-core/lib/geom/Vector3D"),s=t("awayjs-display/lib/traverse/RaycastCollector"),n=function(){function t(t){void 0===t&&(t=!1),this._ignoredEntities=[],this._onlyMouseEnabled=!0,this._numEntities=0,this._raycastCollector=new s,this._findClosestCollision=t,this._entities=new Array}return Object.defineProperty(t.prototype,"onlyMouseEnabled",{get:function(){return this._onlyMouseEnabled},set:function(t){this._onlyMouseEnabled=t},enumerable:!0,configurable:!0}),t.prototype.getViewCollision=function(t,e,i){var s=i.unproject(t,e,0),n=i.unproject(t,e,1).subtract(s);return this.getSceneCollision(s,n,i.scene)},t.prototype.getSceneCollision=function(t,e,i){this._raycastCollector.clear(),this._raycastCollector.rayPosition=t,this._raycastCollector.rayDirection=e,i.traversePartitions(this._raycastCollector),this._numEntities=0;for(var s,n=this._raycastCollector.entityHead;n;)this.isIgnored(s=n.entity)||(this._entities[this._numEntities++]=s),n=n.next;return this._numEntities?this.getPickingCollisionVO(this._raycastCollector):null},t.prototype.setIgnoreList=function(t){this._ignoredEntities=t},t.prototype.isIgnored=function(t){if(this._onlyMouseEnabled&&!t._iIsMouseEnabled())return!0;for(var e=this._ignoredEntities.length,i=0;e>i;i++)if(this._ignoredEntities[i]==t)return!0;return!1},t.prototype.sortOnNearT=function(t,e){return t._iPickingCollisionVO.rayEntryDistance>e._iPickingCollisionVO.rayEntryDistance?1:-1},t.prototype.getPickingCollisionVO=function(){this._entities.length=this._numEntities,this._entities=this._entities.sort(this.sortOnNearT);var t,e,i,s,n=Number.MAX_VALUE;for(s=0;s<this._numEntities;++s)if(i=this._entities[s],e=i._iPickingCollisionVO,i.pickingCollider){if((null==t||e.rayEntryDistance<t.rayEntryDistance)&&i._iTestCollision(n,this._findClosestCollision)&&(n=e.rayEntryDistance,t=e,!this._findClosestCollision))return this.updateLocalPosition(e),e}else if((null==t||e.rayEntryDistance<t.rayEntryDistance)&&!e.rayOriginIsInsideBounds)return this.updateLocalPosition(e),e;return t},t.prototype.updateLocalPosition=function(t){var e=null==t.localPosition?new i:t.localPosition,s=t.localRayDirection,n=t.localRayPosition,o=t.rayEntryDistance;e.x=n.x+o*s.x,e.y=n.y+o*s.y,e.z=n.z+o*s.z},t.prototype.dispose=function(){},t}();e.exports=n},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/traverse/RaycastCollector":void 0}],"awayjs-display/lib/pool/CSSBillboardRenderable":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/pool/CSSRenderableBase"),n=function(t){function e(e,i){t.call(this,e,i,i);var s=document.createElement("div");s.onmousedown=function(){return!1},this.htmlElement=s;var n=s.style;n.position="absolute",n.transformOrigin=n["-webkit-transform-origin"]=n["-moz-transform-origin"]=n["-o-transform-origin"]=n["-ms-transform-origin"]="0% 0%";var o=document.createElement("div");s.appendChild(o),o.className="material"+i.material.id}return i(e,t),e.id="billboard",e}(s);e.exports=n},{"awayjs-display/lib/pool/CSSRenderableBase":void 0}],"awayjs-display/lib/pool/CSSLineSegmentRenderable":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/pool/CSSRenderableBase"),n=function(t){function e(e,i){t.call(this,e,i,i);var s=document.createElement("div");s.onmousedown=function(){return!1},this.htmlElement=s;var n=s.style;n.position="absolute",n.transformOrigin=n["-webkit-transform-origin"]=n["-moz-transform-origin"]=n["-o-transform-origin"]=n["-ms-transform-origin"]="0% 0%";var o=document.createElement("div");s.appendChild(o),o.className="material"+i.material.id}return i(e,t),e.id="lineSegment",e}(s);e.exports=n},{"awayjs-display/lib/pool/CSSRenderableBase":void 0}],"awayjs-display/lib/pool/CSSRenderableBase":[function(t,e){var i=function(){function t(t,e,i){this._pool=t,this.sourceEntity=e,this.materialOwner=i}return t.prototype.dispose=function(){this._pool.disposeItem(this.materialOwner)},t.prototype.invalidateGeometry=function(){},t.prototype.invalidateIndexData=function(){},t.prototype.invalidateVertexData=function(){},t}();e.exports=i},{}],"awayjs-display/lib/pool/CSSSkyboxRenderable":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/pool/CSSRenderableBase"),n=function(t){function e(e,i){t.call(this,e,i,i);var s=document.createElement("div");s.onmousedown=function(){return!1},this.htmlElement=s;var n,o=s.style;o.position="absolute",o.transformOrigin=o["-webkit-transform-origin"]=o["-moz-transform-origin"]=o["-o-transform-origin"]=o["-ms-transform-origin"]="0% 0%",n=document.createElement("div"),s.appendChild(n),n.className="material"+i.material.id}return i(e,t),e.id="skybox",e}(s);e.exports=n},{"awayjs-display/lib/pool/CSSRenderableBase":void 0}],"awayjs-display/lib/pool/EntityListItemPool":[function(t,e){var i=t("awayjs-display/lib/pool/EntityListItem"),s=function(){function t(){this._index=0,this._poolSize=0,this._pool=new Array}return t.prototype.getItem=function(){var t;return this._index==this._poolSize?(t=new i,this._pool[this._index++]=t,++this._poolSize):t=this._pool[this._index++],t},t.prototype.freeAll=function(){this._index=0},t.prototype.dispose=function(){this._pool.length=0},t}();e.exports=s},{"awayjs-display/lib/pool/EntityListItem":void 0}],"awayjs-display/lib/pool/EntityListItem":[function(t,e){var i=function(){function t(){}return t}();e.exports=i},{}],"awayjs-display/lib/pool/IMaterialData":[function(){},{}],"awayjs-display/lib/pool/IMaterialPassData":[function(){},{}],"awayjs-display/lib/pool/IRenderableClass":[function(){},{}],"awayjs-display/lib/pool/IRenderable":[function(){},{}],"awayjs-display/lib/pool/RenderablePool":[function(t,e){var i=function(){function t(t){this._pool=new Object,this._renderableClass=t}return t.prototype.getItem=function(t){return this._pool[t.id]||(this._pool[t.id]=t._iAddRenderable(new this._renderableClass(this,t)))},t.prototype.disposeItem=function(t){t._iRemoveRenderable(this._pool[t.id]),this._pool[t.id]=null},t.getPool=function(e){var i=t._pools[e.id];return void 0!=i?i:t._pools[e.id]=new t(e)},t.disposePool=function(e){t._pools[e.id]&&(t._pools[e.id]=void 0)},t._pools=new Object,t}();e.exports=i},{}],"awayjs-display/lib/prefabs/PrefabBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t
}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/NamedAssetBase"),n=t("awayjs-core/lib/errors/AbstractMethodError"),o=function(t){function e(){t.call(this),this._pObjects=new Array}return i(e,t),e.prototype.getNewObject=function(){var t=this._pCreateObject();return this._pObjects.push(t),t},e.prototype._pCreateObject=function(){throw new n},e.prototype._iValidate=function(){},e}(s);e.exports=o},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0}],"awayjs-display/lib/prefabs/PrimitiveCapsulePrefab":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/prefabs/PrimitivePrefabBase"),n=function(t){function e(e,i,s,n,o){void 0===e&&(e=50),void 0===i&&(i=100),void 0===s&&(s=16),void 0===n&&(n=15),void 0===o&&(o=!0),t.call(this),this._numVertices=0,this._radius=e,this._height=i,this._segmentsW=s,this._segmentsH=n%2==0?n+1:n,this._yUp=o}return i(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsW",{get:function(){return this._segmentsW},set:function(t){this._segmentsW=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsH",{get:function(){return this._segmentsH},set:function(t){this._segmentsH=t%2==0?t+1:t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yUp",{get:function(){return this._yUp},set:function(t){this._yUp=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),e.prototype._pBuildGeometry=function(t,e){var i,s,n,o,r,a,h,p,l,c,u,_=0,d=0,y=0;if("triangleSubGeometry"==e){var f=t;for(this._numVertices=(this._segmentsH+1)*(this._segmentsW+1),y=(this._segmentsH-1)*this._segmentsW*6,this._numVertices==f.numVertices?(i=f.indices,s=f.positions,n=f.vertexNormals,o=f.vertexTangents):(i=new Array(y),s=new Array(3*this._numVertices),n=new Array(3*this._numVertices),o=new Array(3*this._numVertices),this._pInvalidateUVs()),a=0;a<=this._segmentsH;++a){var m=Math.PI*a/this._segmentsH,b=-this._radius*Math.cos(m),g=this._radius*Math.sin(m);for(h=d,r=0;r<=this._segmentsW;++r){var v=2*Math.PI*r/this._segmentsW,w=g*Math.cos(v),P=a>this._segmentsH/2?this._height/2:-this._height/2,j=g*Math.sin(v),A=1/Math.sqrt(w*w+j*j+b*b),O=Math.sqrt(j*j+w*w);if(this._yUp?(c=0,u=O>.007?w/O:0,p=-b,l=j):(c=O>.007?w/O:0,u=0,p=j,l=b),r==this._segmentsW?(s[d]=s[h],s[d+1]=s[h+1],s[d+2]=s[h+2],n[d]=.5*(n[h]+w*A),n[d+1]=.5*(n[h+1]+p*A),n[d+2]=.5*(n[h+2]+l*A),o[d]=.5*(o[h]+(O>.007?-j/O:1)),o[d+1]=.5*(o[h+1]+c),o[d+2]=.5*(o[h+2]+u)):(s[d]=w,s[d+1]=this._yUp?p-P:p,s[d+2]=this._yUp?l:l+P,n[d]=w*A,n[d+1]=p*A,n[d+2]=l*A,o[d]=O>.007?-j/O:1,o[d+1]=c,o[d+2]=u),r>0&&a>0){var D=(this._segmentsW+1)*a+r,C=(this._segmentsW+1)*a+r-1,S=(this._segmentsW+1)*(a-1)+r-1,E=(this._segmentsW+1)*(a-1)+r;a==this._segmentsH?(s[d]=s[h],s[d+1]=s[h+1],s[d+2]=s[h+2],i[_++]=D,i[_++]=S,i[_++]=E):1==a?(i[_++]=D,i[_++]=C,i[_++]=S):(i[_++]=D,i[_++]=C,i[_++]=S,i[_++]=D,i[_++]=S,i[_++]=E)}d+=3}}f.updateIndices(i),f.updatePositions(s),f.updateVertexNormals(n),f.updateVertexTangents(o)}},e.prototype._pBuildUVs=function(t,e){var i,s,n;if("triangleSubGeometry"==e){var o=t;n=o.uvs&&this._numVertices==o.numVertices?o.uvs:new Array(2*this._numVertices);var r=0;for(s=0;s<=this._segmentsH;++s)for(i=0;i<=this._segmentsW;++i)n[r++]=i/this._segmentsW*o.scaleU,n[r++]=s/this._segmentsH*o.scaleV;o.updateUVs(n)}},e}(s);e.exports=n},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":void 0}],"awayjs-display/lib/prefabs/PrimitiveConePrefab":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/prefabs/PrimitiveCylinderPrefab"),n=function(t){function e(e,i,s,n,o,r){void 0===e&&(e=50),void 0===i&&(i=100),void 0===s&&(s=16),void 0===n&&(n=1),void 0===o&&(o=!0),void 0===r&&(r=!0),t.call(this,0,e,i,s,n,!1,o,!0,r)}return i(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){return this._pBottomRadius},set:function(t){this._pBottomRadius=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),e}(s);e.exports=n},{"awayjs-display/lib/prefabs/PrimitiveCylinderPrefab":void 0}],"awayjs-display/lib/prefabs/PrimitiveCubePrefab":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/prefabs/PrimitivePrefabBase"),n=function(t){function e(e,i,s,n,o,r,a){void 0===e&&(e=100),void 0===i&&(i=100),void 0===s&&(s=100),void 0===n&&(n=1),void 0===o&&(o=1),void 0===r&&(r=1),void 0===a&&(a=!0),t.call(this),this._width=e,this._height=i,this._depth=s,this._segmentsW=n,this._segmentsH=o,this._segmentsD=r,this._tile6=a}return i(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return this._depth},set:function(t){this._depth=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tile6",{get:function(){return this._tile6},set:function(t){this._tile6=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsW",{get:function(){return this._segmentsW},set:function(t){this._segmentsW=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsH",{get:function(){return this._segmentsH},set:function(t){this._segmentsH=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsD",{get:function(){return this._segmentsD},set:function(t){this._segmentsD=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),e.prototype._pBuildGeometry=function(t,e){var i,s,n,o,r,a,h,p,l,c,u,_,d,y,f,m,b,g,v,w,P,j=0;if(d=this._width/2,y=this._height/2,f=this._depth/2,"triangleSubGeometry"==e){var A=t;for(P=2*((this._segmentsW+1)*(this._segmentsH+1)+(this._segmentsW+1)*(this._segmentsD+1)+(this._segmentsH+1)*(this._segmentsD+1)),w=12*(this._segmentsW*this._segmentsH+this._segmentsW*this._segmentsD+this._segmentsH*this._segmentsD),P==A.numVertices&&null!=A.indices?(i=A.indices,s=A.positions,n=A.vertexNormals,o=A.vertexTangents):(i=new Array(w),s=new Array(3*P),n=new Array(3*P),o=new Array(3*P),this._pInvalidateUVs()),u=0,_=0,m=this._width/this._segmentsW,b=this._height/this._segmentsH,g=this._depth/this._segmentsD,l=0;l<=this._segmentsW;l++)for(v=-d+l*m,c=0;c<=this._segmentsH;c++)s[u]=v,s[u+1]=-y+c*b,s[u+2]=-f,n[u]=0,n[u+1]=0,n[u+2]=-1,o[u]=1,o[u+1]=0,o[u+2]=0,u+=3,s[u]=v,s[u+1]=-y+c*b,s[u+2]=f,n[u]=0,n[u+1]=0,n[u+2]=1,o[u]=-1,o[u+1]=0,o[u+2]=0,u+=3,l&&c&&(r=2*((l-1)*(this._segmentsH+1)+(c-1)),a=2*(l*(this._segmentsH+1)+(c-1)),h=r+2,p=a+2,i[_++]=r,i[_++]=h,i[_++]=p,i[_++]=r,i[_++]=p,i[_++]=a,i[_++]=a+1,i[_++]=p+1,i[_++]=h+1,i[_++]=a+1,i[_++]=h+1,i[_++]=r+1);for(j+=2*(this._segmentsW+1)*(this._segmentsH+1),l=0;l<=this._segmentsW;l++)for(v=-d+l*m,c=0;c<=this._segmentsD;c++)s[u]=v,s[u+1]=y,s[u+2]=-f+c*g,n[u]=0,n[u+1]=1,n[u+2]=0,o[u]=1,o[u+1]=0,o[u+2]=0,u+=3,s[u]=v,s[u+1]=-y,s[u+2]=-f+c*g,n[u]=0,n[u+1]=-1,n[u+2]=0,o[u]=1,o[u+1]=0,o[u+2]=0,u+=3,l&&c&&(r=j+2*((l-1)*(this._segmentsD+1)+(c-1)),a=j+2*(l*(this._segmentsD+1)+(c-1)),h=r+2,p=a+2,i[_++]=r,i[_++]=h,i[_++]=p,i[_++]=r,i[_++]=p,i[_++]=a,i[_++]=a+1,i[_++]=p+1,i[_++]=h+1,i[_++]=a+1,i[_++]=h+1,i[_++]=r+1);for(j+=2*(this._segmentsW+1)*(this._segmentsD+1),l=0;l<=this._segmentsD;l++)for(v=f-l*g,c=0;c<=this._segmentsH;c++)s[u]=-d,s[u+1]=-y+c*b,s[u+2]=v,n[u]=-1,n[u+1]=0,n[u+2]=0,o[u]=0,o[u+1]=0,o[u+2]=-1,u+=3,s[u]=d,s[u+1]=-y+c*b,s[u+2]=v,n[u]=1,n[u+1]=0,n[u+2]=0,o[u]=0,o[u+1]=0,o[u+2]=1,u+=3,l&&c&&(r=j+2*((l-1)*(this._segmentsH+1)+(c-1)),a=j+2*(l*(this._segmentsH+1)+(c-1)),h=r+2,p=a+2,i[_++]=r,i[_++]=h,i[_++]=p,i[_++]=r,i[_++]=p,i[_++]=a,i[_++]=a+1,i[_++]=p+1,i[_++]=h+1,i[_++]=a+1,i[_++]=h+1,i[_++]=r+1);A.updateIndices(i),A.updatePositions(s),A.updateVertexNormals(n),A.updateVertexTangents(o)}else if("lineSubGeometry"==e){var O,D,C,S=t,E=4*this._segmentsH+4*this._segmentsW+4*this._segmentsD;for(null!=S.indices&&E==S.numSegments?(O=S.startPositions,D=S.endPositions,C=S.thickness):(O=new Array(3*E),D=new Array(3*E),C=new Array(E)),u=0,_=0,l=0;l<this._segmentsH;++l)O[u]=-d,O[u+1]=l*this._height/this._segmentsH-y,O[u+2]=-f,D[u]=d,D[u+1]=l*this._height/this._segmentsH-y,D[u+2]=-f,C[_++]=1,u+=3,O[u]=-d,O[u+1]=y-l*this._height/this._segmentsH,O[u+2]=f,D[u]=d,D[u+1]=y-l*this._height/this._segmentsH,D[u+2]=f,C[_++]=1,u+=3;for(l=0;l<this._segmentsW;++l)O[u]=l*this._width/this._segmentsW-d,O[u+1]=-y,O[u+2]=-f,D[u]=l*this._width/this._segmentsW-d,D[u+1]=y,D[u+2]=-f,C[_++]=1,u+=3,O[u]=d-l*this._width/this._segmentsW,O[u+1]=-y,O[u+2]=f,D[u]=d-l*this._width/this._segmentsW,D[u+1]=y,D[u+2]=f,C[_++]=1,u+=3;for(l=0;l<this._segmentsH;++l)O[u]=-d,O[u+1]=l*this._height/this._segmentsH-y,O[u+2]=-f,D[u]=-d,D[u+1]=l*this._height/this._segmentsH-y,D[u+2]=f,C[_++]=1,u+=3,O[u]=d,O[u+1]=y-l*this._height/this._segmentsH,O[u+2]=-f,D[u]=d,D[u+1]=y-l*this._height/this._segmentsH,D[u+2]=f,C[_++]=1,u+=3;for(l=0;l<this._segmentsD;++l)O[u]=d,O[u+1]=-y,O[u+2]=l*this._depth/this._segmentsD-f,D[u]=d,D[u+1]=y,D[u+2]=l*this._depth/this._segmentsD-f,C[_++]=1,u+=3,O[u]=-d,O[u+1]=-y,O[u+2]=f-l*this._depth/this._segmentsD,D[u]=-d,D[u+1]=y,D[u+2]=f-l*this._depth/this._segmentsD,C[_++]=1,u+=3;for(l=0;l<this._segmentsD;++l)O[u]=-d,O[u+1]=-y,O[u+2]=f-l*this._depth/this._segmentsD,D[u]=d,D[u+1]=-y,D[u+2]=f-l*this._depth/this._segmentsD,C[_++]=1,u+=3,O[u]=-d,O[u+1]=y,O[u+2]=l*this._depth/this._segmentsD-f,D[u]=d,D[u+1]=y,D[u+2]=l*this._depth/this._segmentsD-f,C[_++]=1,u+=3;for(l=0;l<this._segmentsW;++l)O[u]=d-l*this._width/this._segmentsW,O[u+1]=-y,O[u+2]=-f,D[u]=d-l*this._width/this._segmentsW,D[u+1]=-y,D[u+2]=f,C[_++]=1,u+=3,O[u]=l*this._width/this._segmentsW-d,O[u+1]=y,O[u+2]=-f,D[u]=l*this._width/this._segmentsW-d,D[u+1]=y,D[u+2]=f,C[_++]=1,u+=3;S.updatePositions(O,D),S.updateThickness(C)}},e.prototype._pBuildUVs=function(t,e){var i,s,n,o,r,a,h,p,l,c,u,_,d,y,f;if("triangleSubGeometry"==e){f=2*((this._segmentsW+1)*(this._segmentsH+1)+(this._segmentsW+1)*(this._segmentsD+1)+(this._segmentsH+1)*(this._segmentsD+1));var m=t;for(o=f==m.numVertices&&null!=m.uvs?m.uvs:new Array(2*f),this._tile6?(r=h=1/3,a=p=.5):(r=a=1,h=p=0),n=0,l=1*h,c=1*p,u=2*h,_=0*p,d=r/this._segmentsW,y=a/this._segmentsH,i=0;i<=this._segmentsW;i++)for(s=0;s<=this._segmentsH;s++)o[n++]=(l+i*d)*m.scaleU,o[n++]=(c+(a-s*y))*m.scaleV,o[n++]=(u+(r-i*d))*m.scaleU,o[n++]=(_+(a-s*y))*m.scaleV;for(l=1*h,c=0*p,u=0*h,_=0*p,d=r/this._segmentsW,y=a/this._segmentsD,i=0;i<=this._segmentsW;i++)for(s=0;s<=this._segmentsD;s++)o[n++]=(l+i*d)*m.scaleU,o[n++]=(c+(a-s*y))*m.scaleV,o[n++]=(u+i*d)*m.scaleU,o[n++]=(_+s*y)*m.scaleV;for(l=0*h,c=1*p,u=2*h,_=1*p,d=r/this._segmentsD,y=a/this._segmentsH,i=0;i<=this._segmentsD;i++)for(s=0;s<=this._segmentsH;s++)o[n++]=(l+i*d)*m.scaleU,o[n++]=(c+(a-s*y))*m.scaleV,o[n++]=(u+(r-i*d))*m.scaleU,o[n++]=(_+(a-s*y))*m.scaleV;m.updateUVs(o)}},e}(s);e.exports=n},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":void 0}],"awayjs-display/lib/prefabs/PrimitiveCylinderPrefab":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/prefabs/PrimitivePrefabBase"),n=function(t){function e(e,i,s,n,o,r,a,h,p){void 0===e&&(e=50),void 0===i&&(i=50),void 0===s&&(s=100),void 0===n&&(n=16),void 0===o&&(o=1),void 0===r&&(r=!0),void 0===a&&(a=!0),void 0===h&&(h=!0),void 0===p&&(p=!0),t.call(this),this._numVertices=0,this._topRadius=e,this._pBottomRadius=i,this._height=s,this._pSegmentsW=n,this._pSegmentsH=o,this._topClosed=r,this._bottomClosed=a,this._surfaceClosed=h,this._yUp=p}return i(e,t),Object.defineProperty(e.prototype,"topRadius",{get:function(){return this._topRadius},set:function(t){this._topRadius=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRadius",{get:function(){return this._pBottomRadius},set:function(t){this._pBottomRadius=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsW",{get:function(){return this._pSegmentsW},set:function(t){this.setSegmentsW(t)},enumerable:!0,configurable:!0}),e.prototype.setSegmentsW=function(t){this._pSegmentsW=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},Object.defineProperty(e.prototype,"segmentsH",{get:function(){return this._pSegmentsH},set:function(t){this.setSegmentsH(t)},enumerable:!0,configurable:!0}),e.prototype.setSegmentsH=function(t){this._pSegmentsH=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},Object.defineProperty(e.prototype,"topClosed",{get:function(){return this._topClosed},set:function(t){this._topClosed=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomClosed",{get:function(){return this._bottomClosed},set:function(t){this._bottomClosed=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yUp",{get:function(){return this._yUp},set:function(t){this._yUp=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),e.prototype._pBuildGeometry=function(t,e){var i,s,n,o,r,a,h,p,l,c,u,_,d,y,f,m,b,g,v,w,P=0,j=0,A=0;this._numVertices=0;var O=2*Math.PI/this._pSegmentsW;if("triangleSubGeometry"==e){var D=t;if(this._surfaceClosed&&(this._numVertices+=(this._pSegmentsH+1)*(this._pSegmentsW+1),P+=this._pSegmentsH*this._pSegmentsW*6),this._topClosed&&(this._numVertices+=2*(this._pSegmentsW+1),P+=3*this._pSegmentsW),this._bottomClosed&&(this._numVertices+=2*(this._pSegmentsW+1),P+=3*this._pSegmentsW),this._numVertices==D.numVertices?(i=D.indices,s=D.positions,n=D.vertexNormals,o=D.vertexTangents):(i=new Array(P),s=new Array(3*this._numVertices),n=new Array(3*this._numVertices),o=new Array(3*this._numVertices),this._pInvalidateUVs()),c=0,u=0,this._topClosed&&this._topRadius>0){for(l=-.5*this._height,r=0;r<=this._pSegmentsW;++r)this._yUp?(v=1,w=0,b=-l,g=0):(v=0,w=-1,b=0,g=l),s[c]=0,s[c+1]=b,s[c+2]=g,n[c]=0,n[c+1]=v,n[c+2]=w,o[c]=1,o[c+1]=0,o[c+2]=0,c+=3,d=r*O,h=this._topRadius*Math.cos(d),p=this._topRadius*Math.sin(d),this._yUp?(b=-l,g=p):(b=p,g=l),r==this._pSegmentsW?(s[c]=s[j+3],s[c+1]=s[j+4],s[c+2]=s[j+5]):(s[c]=h,s[c+1]=b,s[c+2]=g),n[c]=0,n[c+1]=v,n[c+2]=w,o[c]=1,o[c+1]=0,o[c+2]=0,c+=3,r>0&&(i[u++]=A,i[u++]=A+1,i[u++]=A+2,A+=2);A+=2}if(this._bottomClosed&&this._pBottomRadius>0){for(l=.5*this._height,j=3*A,r=0;r<=this._pSegmentsW;++r)this._yUp?(v=-1,w=0,b=-l,g=0):(v=0,w=1,b=0,g=l),s[c]=0,s[c+1]=b,s[c+2]=g,n[c]=0,n[c+1]=v,n[c+2]=w,o[c]=1,o[c+1]=0,o[c+2]=0,c+=3,d=r*O,h=this._pBottomRadius*Math.cos(d),p=this._pBottomRadius*Math.sin(d),this._yUp?(b=-l,g=p):(b=p,g=l),r==this._pSegmentsW?(s[c]=s[j+3],s[c+1]=s[j+4],s[c+2]=s[j+5]):(s[c]=h,s[c+1]=b,s[c+2]=g),n[c]=0,n[c+1]=v,n[c+2]=w,o[c]=1,o[c+1]=0,o[c+2]=0,c+=3,r>0&&(i[u++]=A,i[u++]=A+2,i[u++]=A+1,A+=2);A+=2}if(y=this._pBottomRadius-this._topRadius,f=y/this._height,m=0==f?1:this._height/y,this._surfaceClosed){var C,S,E,T,x,N,I,M;for(a=0;a<=this._pSegmentsH;++a)for(_=this._topRadius-a/this._pSegmentsH*(this._topRadius-this._pBottomRadius),l=-(this._height/2)+a/this._pSegmentsH*this._height,j=3*A,r=0;r<=this._pSegmentsW;++r)d=r*O,h=_*Math.cos(d),p=_*Math.sin(d),x=m*Math.cos(d),N=m*Math.sin(d),this._yUp?(v=0,w=-x,b=-l,g=p,I=f,M=N):(v=-x,w=0,b=p,g=l,I=N,M=f),r==this._pSegmentsW?(s[c]=s[j],s[c+1]=s[j+1],s[c+2]=s[j+2],n[c]=x,n[c+1]=f,n[c+2]=N,o[c]=N,o[c+1]=v,o[c+2]=w):(s[c]=h,s[c+1]=b,s[c+2]=g,n[c]=x,n[c+1]=I,n[c+2]=M,o[c]=-N,o[c+1]=v,o[c+2]=w),c+=3,r>0&&a>0&&(C=A,S=A-1,E=S-this._pSegmentsW-1,T=C-this._pSegmentsW-1,i[u++]=C,i[u++]=S,i[u++]=E,i[u++]=C,i[u++]=E,i[u++]=T),A++}D.updateIndices(i),D.updatePositions(s),D.updateVertexNormals(n),D.updateVertexTangents(o)}else if("lineSubGeometry"==e){var R,U,L,V=t,B=(this._pSegmentsH+1)*this._pSegmentsW+this._pSegmentsW;for(null!=V.indices&&B==V.numSegments?(R=V.startPositions,U=V.endPositions,L=V.thickness):(R=new Array(3*B),U=new Array(3*B),L=new Array(B)),c=0,u=0,a=0;a<=this._pSegmentsH;++a)for(_=this._topRadius-a/this._pSegmentsH*(this._topRadius-this._pBottomRadius),l=this._height*(a/this._pSegmentsH-.5),r=0;r<=this._pSegmentsW;++r)d=r*O,h=_*Math.cos(d),p=_*Math.sin(d),this._yUp?(b=-l,g=p):(b=p,g=l),r>0&&(U[c]=h,U[c+1]=b,U[c+2]=g,L[u++]=1,c+=3,R[c]=U[c-6*this._pSegmentsW],R[c+1]=U[c+1-6*this._pSegmentsW],R[c+2]=U[c+2-6*this._pSegmentsW],U[c]=h,U[c+1]=b,U[c+2]=g,L[u++]=1,c+=3),r<this._pSegmentsW&&(R[c]=h,R[c+1]=b,R[c+2]=g);V.updatePositions(R,U),V.updateThickness(L)}},e.prototype._pBuildUVs=function(t,e){var i,s,n,o,r,a;if("triangleSubGeometry"==e){var h=t;a=h.uvs&&this._numVertices==h.numVertices?h.uvs:new Array(2*this._numVertices);var p=2*Math.PI/this._pSegmentsW,l=0;if(this._topClosed)for(i=0;i<=this._pSegmentsW;++i)r=i*p,n=.5+.5*-Math.cos(r),o=.5+.5*Math.sin(r),a[l++]=.5*h.scaleU,a[l++]=.5*h.scaleV,a[l++]=n*h.scaleU,a[l++]=o*h.scaleV;if(this._bottomClosed)for(i=0;i<=this._pSegmentsW;++i)r=i*p,n=.5+.5*Math.cos(r),o=.5+.5*Math.sin(r),a[l++]=.5*h.scaleU,a[l++]=.5*h.scaleV,a[l++]=n*h.scaleU,a[l++]=o*h.scaleV;if(this._surfaceClosed)for(s=0;s<=this._pSegmentsH;++s)for(i=0;i<=this._pSegmentsW;++i)a[l++]=i/this._pSegmentsW*h.scaleU,a[l++]=s/this._pSegmentsH*h.scaleV;h.updateUVs(a)}},e}(s);e.exports=n},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":void 0}],"awayjs-display/lib/prefabs/PrimitivePlanePrefab":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/prefabs/PrimitivePrefabBase"),n=function(t){function e(e,i,s,n,o,r){void 0===e&&(e=100),void 0===i&&(i=100),void 0===s&&(s=1),void 0===n&&(n=1),void 0===o&&(o=!0),void 0===r&&(r=!1),t.call(this),this._segmentsW=s,this._segmentsH=n,this._yUp=o,this._width=e,this._height=i,this._doubleSided=r}return i(e,t),Object.defineProperty(e.prototype,"segmentsW",{get:function(){return this._segmentsW},set:function(t){this._segmentsW=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsH",{get:function(){return this._segmentsH},set:function(t){this._segmentsH=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yUp",{get:function(){return this._yUp},set:function(t){this._yUp=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doubleSided",{get:function(){return this._doubleSided},set:function(t){this._doubleSided=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),e.prototype._pBuildGeometry=function(t,e){var i,s,n,o,r,a,h,p,l,c,u=this._segmentsW+1;if("triangleSubGeometry"==e){var _,d,y,f=t,a=(this._segmentsH+1)*u;for(this._doubleSided&&(a*=2),o=this._segmentsH*this._segmentsW*6,this._doubleSided&&(o*=2),null!=f.indices&&o==f.indices.length?i=f.indices:(i=new Array(o),this._pInvalidateUVs()),a==f.numVertices?(_=f.positions,d=f.vertexNormals,y=f.vertexTangents):(_=new Array(3*a),d=new Array(3*a),y=new Array(3*a),this._pInvalidateUVs()),p=0,h=0,c=0;c<=this._segmentsH;++c)for(l=0;l<=this._segmentsW;++l){if(s=(l/this._segmentsW-.5)*this._width,n=(c/this._segmentsH-.5)*this._height,_[h]=s,this._yUp?(_[h+1]=0,_[h+2]=n):(_[h+1]=n,_[h+2]=0),d[h]=0,this._yUp?(d[h+1]=1,d[h+2]=0):(d[h+1]=0,d[h+2]=-1),y[h]=1,y[h+1]=0,y[h+2]=0,h+=3,this._doubleSided){for(var m=h;h+3>m;++m)_[m]=_[m-3],d[m]=-d[m-3],y[m]=-y[m-3];h+=3}if(l!=this._segmentsW&&c!=this._segmentsH){r=l+c*u;var b=this._doubleSided?2:1;i[p++]=r*b,i[p++]=(r+u)*b,i[p++]=(r+u+1)*b,i[p++]=r*b,i[p++]=(r+u+1)*b,i[p++]=(r+1)*b,this._doubleSided&&(i[p++]=(r+u+1)*b+1,i[p++]=(r+u)*b+1,i[p++]=r*b+1,i[p++]=(r+1)*b+1,i[p++]=(r+u+1)*b+1,i[p++]=r*b+1)}}f.updateIndices(i),f.updatePositions(_),f.updateVertexNormals(d),f.updateVertexTangents(y)}else if("lineSubGeometry"==e){var g,v,w,P=t,j=this._segmentsH+1+u,A=this._width/2,O=this._height/2;for(null!=P.indices&&j==P.numSegments?(g=P.startPositions,v=P.endPositions,w=P.thickness):(g=new Array(3*j),v=new Array(3*j),w=new Array(j)),p=0,h=0,c=0;c<=this._segmentsH;++c)g[h]=-A,g[h+1]=0,g[h+2]=c*this._height-O,v[h]=A,v[h+1]=0,v[h+2]=c*this._height-O,w[p++]=1,h+=3;for(l=0;l<=this._segmentsW;++l)g[h]=l*this._width-A,g[h+1]=0,g[h+2]=-O,v[h]=l*this._width-A,v[h+1]=0,v[h+2]=O,w[p++]=1,h+=3;P.updatePositions(g,v),P.updateThickness(w)}},e.prototype._pBuildUVs=function(t,e){var i,s;if("triangleSubGeometry"==e){s=(this._segmentsH+1)*(this._segmentsW+1),this._doubleSided&&(s*=2);var n=t;n.uvs&&s==n.numVertices?i=n.uvs:(i=new Array(2*s),this._pInvalidateGeometry());for(var o=0,r=0;r<=this._segmentsH;++r)for(var a=0;a<=this._segmentsW;++a)i[o]=a/this._segmentsW*n.scaleU,i[o+1]=(1-r/this._segmentsH)*n.scaleV,o+=2,this._doubleSided&&(i[o]=a/this._segmentsW*n.scaleU,i[o+1]=(1-r/this._segmentsH)*n.scaleV,o+=2);n.updateUVs(i)}},e}(s);e.exports=n},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":void 0}],"awayjs-display/lib/prefabs/PrimitivePolygonPrefab":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/prefabs/PrimitiveCylinderPrefab"),n=function(t){function e(e,i,s){void 0===e&&(e=100),void 0===i&&(i=16),void 0===s&&(s=!0),t.call(this,e,0,0,i,1,!0,!1,!1,s)}return i(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){return this._pBottomRadius},set:function(t){this._pBottomRadius=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sides",{get:function(){return this._pSegmentsW},set:function(t){this.setSegmentsW(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subdivisions",{get:function(){return this._pSegmentsH},set:function(t){this.setSegmentsH(t)},enumerable:!0,configurable:!0}),e}(s);e.exports=n},{"awayjs-display/lib/prefabs/PrimitiveCylinderPrefab":void 0}],"awayjs-display/lib/prefabs/PrimitivePrefabBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),n=t("awayjs-core/lib/errors/AbstractMethodError"),o=t("awayjs-display/lib/base/Geometry"),r=t("awayjs-display/lib/base/TriangleSubGeometry"),a=t("awayjs-display/lib/base/LineSubGeometry"),h=t("awayjs-display/lib/entities/Mesh"),p=t("awayjs-display/lib/prefabs/PrefabBase"),l=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i="triangleSubGeometry"),t.call(this),this._geomDirty=!0,this._uvDirty=!0,this._geometryTypeDirty=!0,this._geometry=new o,this._material=e,this._geometryType=i}return i(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return s.PRIMITIVE_PREFAB},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geometryType",{get:function(){return this._geometryType},set:function(t){this._geometryType!=t&&(this._geometryType=t,this.invalidateGeometryType())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._iValidate(),this._geometry},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this._material},set:function(t){if(t!=this._material){this._material=t;for(var e=this._pObjects.length,i=0;e>i;i++)this._pObjects[i].material=this._material}},enumerable:!0,configurable:!0}),e.prototype._pBuildGeometry=function(){throw new n},e.prototype._pBuildUVs=function(){throw new n},e.prototype.invalidateGeometryType=function(){this._geometryTypeDirty=!0,this._geomDirty=!0,this._uvDirty=!0},e.prototype._pInvalidateGeometry=function(){this._geomDirty=!0},e.prototype._pInvalidateUVs=function(){this._uvDirty=!0},e.prototype.updateGeometryType=function(){if(this._subGeometry&&this._geometry.removeSubGeometry(this._subGeometry),"triangleSubGeometry"==this._geometryType){var t=new r(!0);t.autoDeriveNormals=!1,t.autoDeriveTangents=!1,t.autoDeriveUVs=!1,this._geometry.addSubGeometry(t),this._subGeometry=t}else"lineSubGeometry"==this._geometryType&&this._geometry.addSubGeometry(this._subGeometry=new a);this._geometryTypeDirty=!1},e.prototype.updateGeometry=function(){this._pBuildGeometry(this._subGeometry,this._geometryType),this._geomDirty=!1},e.prototype.updateUVs=function(){this._pBuildUVs(this._subGeometry,this._geometryType),this._uvDirty=!1},e.prototype._iValidate=function(){this._geometryTypeDirty&&this.updateGeometryType(),this._geomDirty&&this.updateGeometry(),this._uvDirty&&this.updateUVs()},e.prototype._pCreateObject=function(){var t=new h(this._geometry,this._material);return t._iSourcePrefab=this,t},e}(p);e.exports=l},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/library/AssetType":void 0,"awayjs-display/lib/base/Geometry":void 0,"awayjs-display/lib/base/LineSubGeometry":void 0,"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-display/lib/entities/Mesh":void 0,"awayjs-display/lib/prefabs/PrefabBase":void 0}],"awayjs-display/lib/prefabs/PrimitiveSpherePrefab":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/prefabs/PrimitivePrefabBase"),n=function(t){function e(e,i,s,n){void 0===e&&(e=50),void 0===i&&(i=16),void 0===s&&(s=12),void 0===n&&(n=!0),t.call(this),this._radius=e,this._segmentsW=i,this._segmentsH=s,this._yUp=n}return i(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsW",{get:function(){return this._segmentsW},set:function(t){this._segmentsW=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsH",{get:function(){return this._segmentsH},set:function(t){this._segmentsH=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yUp",{get:function(){return this._yUp},set:function(t){this._yUp=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),e.prototype._pBuildGeometry=function(t,e){var i,s,n,o,r,a,h,p,l,c,u;if("triangleSubGeometry"==e){var _=t;u=(this._segmentsH+1)*(this._segmentsW+1),u==_.numVertices&&null!=_.indices?(i=_.indices,s=_.positions,n=_.vertexNormals,o=_.vertexTangents):(i=new Array((this._segmentsH-1)*this._segmentsW*6),s=new Array(3*u),n=new Array(3*u),o=new Array(3*u),this._pInvalidateUVs()),h=0,p=0;var d,y,f;for(a=0;a<=this._segmentsH;++a){d=h;var m=Math.PI*a/this._segmentsH,b=-this._radius*Math.cos(m),g=this._radius*Math.sin(m);for(r=0;r<=this._segmentsW;++r){var v=2*Math.PI*r/this._segmentsW,w=g*Math.cos(v),P=g*Math.sin(v),j=1/Math.sqrt(w*w+P*P+b*b),A=Math.sqrt(P*P+w*w);if(this._yUp?(y=0,f=A>.007?w/A:0,l=-b,c=P):(y=A>.007?w/A:0,f=0,l=P,c=b),r==this._segmentsW?(s[h]=s[d],s[h+1]=s[d+1],s[h+2]=s[d+2],n[h]=n[d]+w*j*.5,n[h+1]=n[d+1]+l*j*.5,n[h+2]=n[d+2]+c*j*.5,o[h]=A>.007?-P/A:1,o[h+1]=y,o[h+2]=f):(s[h]=w,s[h+1]=l,s[h+2]=c,n[h]=w*j,n[h+1]=l*j,n[h+2]=c*j,o[h]=A>.007?-P/A:1,o[h+1]=y,o[h+2]=f),r>0&&a>0){var O=(this._segmentsW+1)*a+r,D=(this._segmentsW+1)*a+r-1,C=(this._segmentsW+1)*(a-1)+r-1,S=(this._segmentsW+1)*(a-1)+r;a==this._segmentsH?(s[h]=s[d],s[h+1]=s[d+1],s[h+2]=s[d+2],i[p++]=O,i[p++]=C,i[p++]=S):1==a?(i[p++]=O,i[p++]=D,i[p++]=C):(i[p++]=O,i[p++]=D,i[p++]=C,i[p++]=O,i[p++]=C,i[p++]=S)}h+=3}}_.updateIndices(i),_.updatePositions(s),_.updateVertexNormals(n),_.updateVertexTangents(o)}else if("lineSubGeometry"==e){var E,T,x,N=t,I=(this._segmentsH-1)*this._segmentsW*2;for(null!=N.indices&&I==N.numSegments?(E=N.startPositions,T=N.endPositions,x=N.thickness):(E=new Array(3*I),T=new Array(3*I),x=new Array(I)),h=0,p=0,a=0;a<=this._segmentsH;++a){var m=Math.PI*a/this._segmentsH,b=-this._radius*Math.cos(m),g=this._radius*Math.sin(m);for(r=0;r<=this._segmentsW;++r){var v=2*Math.PI*r/this._segmentsW,w=g*Math.cos(v),P=g*Math.sin(v);this._yUp?(l=-b,c=P):(l=P,c=b),r>0&&a>0&&(a<this._segmentsH&&(T[h]=w,T[h+1]=l,T[h+2]=c,x[p++]=1,h+=3),E[h]=T[h-6*this._segmentsW],E[h+1]=T[h+1-6*this._segmentsW],E[h+2]=T[h+2-6*this._segmentsW],T[h]=w,T[h+1]=l,T[h+2]=c,x[p++]=1,h+=3),r<this._segmentsW&&a>0&&a<this._segmentsH&&(E[h]=w,E[h+1]=l,E[h+2]=c)}}N.updatePositions(E,T),N.updateThickness(x)}},e.prototype._pBuildUVs=function(t,e){var i,s,n,o=(this._segmentsH+1)*(this._segmentsW+1);if("triangleSubGeometry"==e){o=(this._segmentsH+1)*(this._segmentsW+1);var r=t;n=o==r.numVertices&&null!=r.uvs?r.uvs:new Array(2*o);var a=0;for(s=0;s<=this._segmentsH;++s)for(i=0;i<=this._segmentsW;++i)n[a++]=i/this._segmentsW*r.scaleU,n[a++]=s/this._segmentsH*r.scaleV;r.updateUVs(n)}},e}(s);e.exports=n},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":void 0}],"awayjs-display/lib/prefabs/PrimitiveTorusPrefab":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/prefabs/PrimitivePrefabBase"),n=function(t){function e(e,i,s,n,o){void 0===e&&(e=50),void 0===i&&(i=50),void 0===s&&(s=16),void 0===n&&(n=8),void 0===o&&(o=!0),t.call(this),this._numVertices=0,this._radius=e,this._tubeRadius=i,this._segmentsR=s,this._segmentsT=n,this._yUp=o}return i(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tubeRadius",{get:function(){return this._tubeRadius},set:function(t){this._tubeRadius=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsR",{get:function(){return this._segmentsR},set:function(t){this._segmentsR=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsT",{get:function(){return this._segmentsT},set:function(t){this._segmentsT=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yUp",{get:function(){return this._yUp},set:function(t){this._yUp=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),e.prototype._pBuildGeometry=function(t,e){var i,s,n,o,r,a,h,p,l,c,u,_,d,y,f,m,b=0;
if("triangleSubGeometry"==e){var g=t;this._numVertices=(this._segmentsT+1)*(this._segmentsR+1),b=this._segmentsT*this._segmentsR*6,this._numVertices==g.numVertices?(i=g.indices,s=g.positions,n=g.vertexNormals,o=g.vertexTangents):(i=new Array(b),s=new Array(3*this._numVertices),n=new Array(3*this._numVertices),o=new Array(3*this._numVertices),this._pInvalidateUVs()),f=0,m=0;var v,w,P,j,A,O,D,C,S,E,T,x=2*Math.PI/this._segmentsR,N=2*Math.PI/this._segmentsT,I=0,M=0;for(a=0;a<=this._segmentsT;++a)for(I=3*M,r=0;r<=this._segmentsR;++r)d=r*x,y=a*N,T=Math.cos(y),c=T*Math.cos(d),u=T*Math.sin(d),_=Math.sin(y),h=this._radius*Math.cos(d)+this._tubeRadius*c,p=this._radius*Math.sin(d)+this._tubeRadius*u,l=a==this._segmentsT?0:this._tubeRadius*_,this._yUp?(A=-_,O=u,P=0,j=T?c/T:h/this._radius,v=-l,w=p):(A=u,O=_,P=T?c/T:h/this._radius,j=0,v=p,w=l),r==this._segmentsR?(s[f]=h,s[f+1]=s[I+1],s[f+2]=s[I+2]):(s[f]=h,s[f+1]=v,s[f+2]=w),n[f]=c,n[f+1]=A,n[f+2]=O,o[f]=-(T?u/T:p/this._radius),o[f+1]=P,o[f+2]=j,f+=3,r>0&&a>0&&(D=M,C=M-1,S=C-this._segmentsR-1,E=D-this._segmentsR-1,i[m++]=D,i[m++]=C,i[m++]=S,i[m++]=D,i[m++]=S,i[m++]=E),M++;g.updateIndices(i),g.updatePositions(s),g.updateVertexNormals(n),g.updateVertexTangents(o)}},e.prototype._pBuildUVs=function(t,e){var i,s,n;if("triangleSubGeometry"==e){var o=t;n=o.uvs&&this._numVertices==o.numVertices?o.uvs:new Array(2*this._numVertices);var r=0;for(s=0;s<=this._segmentsT;++s)for(i=0;i<=this._segmentsR;++i)n[r++]=i/this._segmentsR*o.scaleU,n[r++]=s/this._segmentsT*o.scaleV;o.updateUVs(n)}},e}(s);e.exports=n},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":void 0}],"awayjs-display/lib/render/CSSDefaultRenderer":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Matrix3D"),n=t("awayjs-core/lib/projections/CoordinateSystem"),o=t("awayjs-display/lib/render/CSSRendererBase"),r=t("awayjs-display/lib/traverse/CSSEntityCollector"),a=function(t){function e(){t.call(this),this._contextMatrix=new s,this._skyboxProjection=new s,this._transform=new s,this._container=document.createElement("div"),this._container.style.overflow="hidden",this._container.style.position="absolute",document.body.appendChild(this._container),this._context=document.createElement("div"),this._contextStyle=this._context.style,this._contextStyle.position="absolute",this._contextStyle.transformStyle=this._contextStyle["-webkit-transform-style"]=this._contextStyle["-moz-transform-style"]=this._contextStyle["-o-transform-style"]=this._contextStyle["-ms-transform-style"]="preserve-3d",this._contextStyle.transformOrigin=this._contextStyle["-webkit-transform-origin"]=this._contextStyle["-moz-transform-origin"]=this._contextStyle["-o-transform-origin"]=this._contextStyle["-ms-transform-origin"]="0% 0%",this._container.appendChild(this._context)}return i(e,t),e.prototype.render=function(e){t.prototype.render.call(this,e),this._pBackBufferInvalid&&this.pUpdateBackBuffer(),this._iRender(e),this._pBackBufferInvalid=!1},e.prototype.pDraw=function(t){for(var e=document.styleSheets[document.styleSheets.length-1],i=0;i<e.cssRules.length;i++){var s=e.cssRules[i].style;s.transform=s["-webkit-transform"]=s["-moz-transform"]=s["-o-transform"]=s["-ms-transform"]=t.camera.projection.coordinateSystem==n.RIGHT_HANDED?"":"scale3d(1, -1, 1) translateY(-"+s.height+")"}this.drawRenderables(this._renderableHead,t),this._activeMaterial=null},e.prototype.pUpdateBackBuffer=function(){this._container.style.width=this._width+"px",this._container.style.height=this._height+"px",this._container.style.clip="rect(0px, "+this._width+"px, "+this._height+"px, 0px)",this._contextMatrix.rawData[0]=this._width/2,this._contextMatrix.rawData[5]=-this._height/2,this._contextMatrix.rawData[10]=-1,this._contextMatrix.rawData[12]=this._width/2,this._contextMatrix.rawData[13]=this._height/2,this._contextStyle.transform=this._contextStyle["-webkit-transform"]=this._contextStyle["-moz-transform"]=this._contextStyle["-o-transform"]=this._contextStyle["-ms-transform"]=this._contextMatrix.toString(),this._pBackBufferInvalid=!1},e.prototype.drawSkybox=function(){},e.prototype.drawRenderables=function(t,e){for(var i=e.camera.viewProjection.clone();t;){this._activeMaterial=t.materialOwner.material,this._transform.copyRawDataFrom(t.renderSceneTransform.rawData),this._transform.append(i);var s=t.htmlElement.style;s.transform=s["-webkit-transform"]=s["-moz-transform"]=s["-o-transform"]=s["-ms-transform"]=this._transform.toString(),s.transformStyle=s["-webkit-transform-style"]=s["-moz-transform-style"]=s["-o-transform-style"]=s["-ms-transform-style"]="preserve-3d",this._context.contains(t.htmlElement)||this._context.appendChild(t.htmlElement),t=t.next}},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e.prototype._iCreateEntityCollector=function(){return new r},e}(o);e.exports=a},{"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/projections/CoordinateSystem":void 0,"awayjs-display/lib/render/CSSRendererBase":void 0,"awayjs-display/lib/traverse/CSSEntityCollector":void 0}],"awayjs-display/lib/render/CSSRendererBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Point"),n=t("awayjs-core/lib/geom/Rectangle"),o=t("awayjs-core/lib/errors/AbstractMethodError"),r=t("awayjs-core/lib/events/EventDispatcher"),a=t("awayjs-display/lib/pool/CSSBillboardRenderable"),h=t("awayjs-display/lib/pool/CSSLineSegmentRenderable"),p=t("awayjs-display/lib/pool/RenderablePool"),l=t("awayjs-display/lib/events/RendererEvent"),c=function(t){function e(e,i,o){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===o&&(o="baseline"),t.call(this),this._backgroundR=0,this._backgroundG=0,this._backgroundB=0,this._backgroundAlpha=1,this._shareContext=!1,this._pBackBufferInvalid=!0,this._depthTextureInvalid=!0,this._viewPort=new n,this._scissorRect=new n,this._localPos=new s,this._globalPos=new s,this._billboardRenderablePool=p.getPool(a),this._lineSegmentRenderablePool=p.getPool(h),this._viewPort=new n,0==this._width&&(this.width=window.innerWidth),0==this._height&&(this.height=window.innerHeight)}return i(e,t),Object.defineProperty(e.prototype,"viewPort",{get:function(){return this._viewPort},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scissorRect",{get:function(){return this._scissorRect},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._localPos.x},set:function(t){this.x!=t&&this.updateGlobalPos()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._localPos.y},set:function(t){this.y!=t&&(this._globalPos.y=this._localPos.y=t,this.updateGlobalPos())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width!=t&&(this._width=t,this._scissorRect.width=t,this._viewPort.width=t,this._pBackBufferInvalid=!0,this._depthTextureInvalid=!0,this.notifyViewportUpdate(),this.notifyScissorUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height!=t&&(this._height=t,this._scissorRect.height=t,this._viewPort.height=t,this._pBackBufferInvalid=!0,this._depthTextureInvalid=!0,this.notifyViewportUpdate(),this.notifyScissorUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_iBackgroundR",{get:function(){return this._backgroundR},set:function(t){this._backgroundR!=t&&(this._backgroundR=t,this._pBackBufferInvalid=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_iBackgroundG",{get:function(){return this._backgroundG},set:function(t){this._backgroundG!=t&&(this._backgroundG=t,this._pBackBufferInvalid=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_iBackgroundB",{get:function(){return this._backgroundB},set:function(t){this._backgroundB!=t&&(this._backgroundB=t,this._pBackBufferInvalid=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shareContext",{get:function(){return this._shareContext},set:function(t){this._shareContext!=t&&(this._shareContext=t,this.updateGlobalPos())},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){},e.prototype.render=function(){this._viewportDirty=!1,this._scissorDirty=!1},e.prototype._iRender=function(t,e,i,s){void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=0),t.entityHead&&this.pExecuteRender(t,i)},e.prototype._iRenderCascades=function(){},e.prototype.pCollectRenderables=function(t){this._renderableHead=null;var e=t.entityHead;for(this._pCamera=t.camera,this._iEntryPoint=this._pCamera.scenePosition,this._pCameraForward=this._pCamera.transform.forwardVector;e;)e.entity._iCollectRenderables(this),e=e.next},e.prototype.pExecuteRender=function(t,e){void 0===e&&(e=null),this.pCollectRenderables(t),this.pDraw(t)},e.prototype.pDraw=function(){throw new o},Object.defineProperty(e.prototype,"_iBackgroundAlpha",{get:function(){return this._backgroundAlpha},set:function(t){this._backgroundAlpha!=t&&(this._backgroundAlpha=t,this._pBackBufferInvalid=!0)},enumerable:!0,configurable:!0}),e.prototype.applyBillboard=function(t){this._applyRenderable(this._billboardRenderablePool.getItem(t))},e.prototype.applyLineSubMesh=function(){},e.prototype.applySkybox=function(){},e.prototype.applyTriangleSubMesh=function(){},e.prototype._applyRenderable=function(t){var e=t.materialOwner.material,i=t.sourceEntity,s=i.scenePosition;e&&(t.materialId=e._iMaterialId,t.cascaded=!1,s=this._iEntryPoint.subtract(s),t.zIndex=i.zOffset-s.dotProduct(this._pCameraForward),t.renderSceneTransform=t.sourceEntity.getRenderSceneTransform(this._pCamera),t.next=this._renderableHead,this._renderableHead=t)},e.prototype.notifyScissorUpdate=function(){this._scissorDirty||(this._scissorDirty=!0,this._scissorUpdated||(this._scissorUpdated=new l(l.SCISSOR_UPDATED)),this.dispatchEvent(this._scissorUpdated))},e.prototype.notifyViewportUpdate=function(){this._viewportDirty||(this._viewportDirty=!0,this._viewPortUpdated||(this._viewPortUpdated=new l(l.VIEWPORT_UPDATED)),this.dispatchEvent(this._viewPortUpdated))},e.prototype.updateGlobalPos=function(){this._viewPort.x=this._globalPos.x,this._viewPort.y=this._globalPos.y,this.notifyViewportUpdate(),this.notifyScissorUpdate()},e.prototype._iCreateEntityCollector=function(){throw new o},e}(r);e.exports=c},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/events/EventDispatcher":void 0,"awayjs-core/lib/geom/Point":void 0,"awayjs-core/lib/geom/Rectangle":void 0,"awayjs-display/lib/events/RendererEvent":void 0,"awayjs-display/lib/pool/CSSBillboardRenderable":void 0,"awayjs-display/lib/pool/CSSLineSegmentRenderable":void 0,"awayjs-display/lib/pool/RenderablePool":void 0}],"awayjs-display/lib/render/IRenderer":[function(){},{}],"awayjs-display/lib/sort/IEntitySorter":[function(){},{}],"awayjs-display/lib/sort/RenderableMergeSort":[function(t,e){var i=function(){function t(){}return t.prototype.sortBlendedRenderables=function(t){var e,i,s;if(!t||!t.next)return t;for(s=t,i=t.next;i;)i=i.next,i&&(s=s.next,i=i.next);e=s.next,s.next=null,t=this.sortBlendedRenderables(t),e=this.sortBlendedRenderables(e);var n,o,r;if(!t)return e;if(!e)return t;for(;t&&e;)t.zIndex<e.zIndex?(r=t,t=t.next):(r=e,e=e.next),n?o.next=r:n=r,o=r;return t?o.next=t:e&&(o.next=e),n},t.prototype.sortOpaqueRenderables=function(t){var e,i,s;if(!t||!t.next)return t;for(s=t,i=t.next;i;)i=i.next,i&&(s=s.next,i=i.next);e=s.next,s.next=null,t=this.sortOpaqueRenderables(t),e=this.sortOpaqueRenderables(e);var n,o,r,a=0;if(!t)return e;if(!e)return t;for(;t&&e&&null!=t&&null!=e;){var h=t.renderOrderId,p=e.renderOrderId;if(h==p){var l=t.materialId,c=e.materialId;a=l==c?t.zIndex<e.zIndex?1:-1:l>c?1:-1}else a=h>p?1:-1;0>a?(r=t,t=t.next):(r=e,e=e.next),n?(o.next=r,o=r):(n=r,o=r)}return t?o.next=t:e&&(o.next=e),n},t}();e.exports=i},{}],"awayjs-display/lib/text/AntiAliasType":[function(t,e){var i=function(){function t(){}return t.ADVANCED="advanced",t.NORMAL="normal",t}();e.exports=i},{}],"awayjs-display/lib/text/GridFitType":[function(t,e){var i=function(){function t(){}return t.NONE="none",t.PIXEL="pixel",t.SUBPIXEL="subpixel",t}();e.exports=i},{}],"awayjs-display/lib/text/TextFieldAutoSize":[function(t,e){var i=function(){function t(){}return t.CENTER="center",t.LEFT="left",t.NONE="none",t.RIGHT="right",t}();e.exports=i},{}],"awayjs-display/lib/text/TextFieldType":[function(t,e){var i=function(){function t(){}return t.DYNAMIC="dynamic",t.INPUT="input",t}();e.exports=i},{}],"awayjs-display/lib/text/TextFormatAlign":[function(t,e){var i=function(){function t(){this.CENTER="center",this.JUSTIFY="justify",this.LEFT="left",this.RIGHT="right"}return t}();e.exports=i},{}],"awayjs-display/lib/text/TextFormat":[function(t,e){var i=function(){function t(t,e,i,s,n,o,r,a,h,p,l,c,u){void 0===t&&(t="Times New Roman"),void 0===e&&(e=12),void 0===i&&(i=0),void 0===s&&(s=!1),void 0===n&&(n=!1),void 0===o&&(o=!1),void 0===r&&(r=""),void 0===a&&(a=""),void 0===h&&(h="left"),void 0===p&&(p=0),void 0===l&&(l=0),void 0===c&&(c=0),void 0===u&&(u=0),this.tabStops=new Array,this.font=t,this.size=e,this.bold=s,this.italic=n,this.underline=o,this.url=r,this.target=a,this.align=h,this.leftMargin=p,this.rightMargin=l,this.indent=c,this.leading=u}return t}();e.exports=i},{}],"awayjs-display/lib/text/TextInteractionMode":[function(t,e){var i=function(){function t(){}return t.NORMAL="normal",t.SELECTION="selection",t}();e.exports=i},{}],"awayjs-display/lib/text/TextLineMetrics":[function(t,e){var i=function(){function t(t,e,i,s,n,o){void 0===t&&(t=0/0),void 0===e&&(e=0/0),void 0===i&&(i=0/0),void 0===s&&(s=0/0),void 0===n&&(n=0/0),void 0===o&&(o=0/0)}return t}();e.exports=i},{}],"awayjs-display/lib/traverse/CSSEntityCollector":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/traverse/CollectorBase"),n=function(t){function e(){t.call(this)}return i(e,t),e}(s);e.exports=n},{"awayjs-display/lib/traverse/CollectorBase":void 0}],"awayjs-display/lib/traverse/CollectorBase":[function(t,e){var i=t("awayjs-display/lib/pool/EntityListItemPool"),s=function(){function t(){this._numCullPlanes=0,this._pNumEntities=0,this._pNumInteractiveEntities=0,this._pEntityListItemPool=new i}return Object.defineProperty(t.prototype,"camera",{get:function(){return this._pCamera},set:function(t){this._pCamera=t,this._cullPlanes=this._pCamera.frustumPlanes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cullPlanes",{get:function(){return this._customCullPlanes},set:function(t){this._customCullPlanes=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entityHead",{get:function(){return this._pEntityHead},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numEntities",{get:function(){return this._pNumEntities},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numInteractiveEntities",{get:function(){return this._pNumInteractiveEntities},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._pNumEntities=this._pNumInteractiveEntities=0,this._cullPlanes=this._customCullPlanes?this._customCullPlanes:this._pCamera?this._pCamera.frustumPlanes:null,this._numCullPlanes=this._cullPlanes?this._cullPlanes.length:0,this._pEntityHead=null,this._pEntityListItemPool.freeAll()},t.prototype.enterNode=function(t){var e=this.scene._iCollectionMark!=t._iCollectionMark&&t.isInFrustum(this._cullPlanes,this._numCullPlanes);return t._iCollectionMark=this.scene._iCollectionMark,e},t.prototype.applyDirectionalLight=function(){},t.prototype.applyEntity=function(t){this._pNumEntities++,t._iIsMouseEnabled()&&this._pNumInteractiveEntities++;var e=this._pEntityListItemPool.getItem();e.entity=t,e.next=this._pEntityHead,this._pEntityHead=e},t.prototype.applyLightProbe=function(){},t.prototype.applyPointLight=function(){},t.prototype.applySkybox=function(){},t}();e.exports=s},{"awayjs-display/lib/pool/EntityListItemPool":void 0}],"awayjs-display/lib/traverse/EntityCollector":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/traverse/CollectorBase"),n=function(t){function e(){t.call(this),this._pNumLights=0,this._numDirectionalLights=0,this._numPointLights=0,this._numLightProbes=0,this._pLights=new Array,this._directionalLights=new Array,this._pointLights=new Array,this._lightProbes=new Array}return i(e,t),Object.defineProperty(e.prototype,"directionalLights",{get:function(){return this._directionalLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lightProbes",{get:function(){return this._lightProbes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lights",{get:function(){return this._pLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointLights",{get:function(){return this._pointLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skyBox",{get:function(){return this._pSkybox},enumerable:!0,configurable:!0}),e.prototype.applyDirectionalLight=function(t){this._directionalLights[this._numDirectionalLights++]=t},e.prototype.applyLightProbe=function(t){this._lightProbes[this._numLightProbes++]=t},e.prototype.applyPointLight=function(t){this._pointLights[this._numPointLights++]=t},e.prototype.applySkybox=function(t){this._pSkybox=t},e.prototype.clear=function(){t.prototype.clear.call(this),this._pSkybox=null,this._pNumLights>0&&(this._pLights.length=this._pNumLights=0),this._numDirectionalLights>0&&(this._directionalLights.length=this._numDirectionalLights=0),this._numPointLights>0&&(this._pointLights.length=this._numPointLights=0),this._numLightProbes>0&&(this._lightProbes.length=this._numLightProbes=0)},e}(s);e.exports=n},{"awayjs-display/lib/traverse/CollectorBase":void 0}],"awayjs-display/lib/traverse/ICollector":[function(){},{}],"awayjs-display/lib/traverse/RaycastCollector":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),n=t("awayjs-display/lib/traverse/CollectorBase"),o=function(t){function e(){t.call(this),this._rayPosition=new s,this._rayDirection=new s,this._iCollectionMark=0}return i(e,t),Object.defineProperty(e.prototype,"rayPosition",{get:function(){return this._rayPosition},set:function(t){this._rayPosition=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rayDirection",{get:function(){return this._rayDirection},set:function(t){this._rayDirection=t},enumerable:!0,configurable:!0}),e.prototype.enterNode=function(t){return t.isIntersectingRay(this._rayPosition,this._rayDirection)},e}(n);e.exports=o},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/traverse/CollectorBase":void 0}],"awayjs-display/lib/traverse/ShadowCasterCollector":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/traverse/CollectorBase"),n=function(t){function e(){t.call(this)}return i(e,t),e.prototype.enterNode=function(e){var i=this.scene._iCollectionMark!=e._iCollectionMark&&e.isCastingShadow();return i?t.prototype.enterNode.call(this,e):(e._iCollectionMark=this.scene._iCollectionMark,!1)},e}(s);e.exports=n},{"awayjs-display/lib/traverse/CollectorBase":void 0}],"awayjs-display/lib/utils/Cast":[function(t,e){var i=t("awayjs-core/lib/base/BitmapData"),s=t("awayjs-core/lib/utils/ByteArray"),n=t("awayjs-display/lib/errors/CastError"),o=t("awayjs-core/lib/textures/BitmapTexture"),r=t("awayjs-core/lib/textures/ImageTexture"),a=function(){function t(){}return t.string=function(t){return"function"==typeof t&&(t=new t),"string"==typeof t?t:t},t.byteArray=function(t){return"function"==typeof t&&(t=new t),t instanceof s?t:t},t.isHex=function(t){for(var e=t.length,i=0;e>i;++i)if(-1==this._hexChars.indexOf(t.charAt(i)))return!1;return!0},t.tryColor=function(t){if("number"==typeof t)return Math.floor(t);if("string"==typeof t){if("random"==t)return Math.floor(16777216*Math.random());if(null==this._colorNames&&(this._colorNames=new Object,this._colorNames.steelblue=4620980,this._colorNames.royalblue=267920,this._colorNames.cornflowerblue=6591981,this._colorNames.lightsteelblue=11584734,this._colorNames.mediumslateblue=8087790,this._colorNames.slateblue=6970061,this._colorNames.darkslateblue=4734347,this._colorNames.midnightblue=1644912,this._colorNames.navy=128,this._colorNames.darkblue=139,this._colorNames.mediumblue=205,this._colorNames.blue=255,this._colorNames.dodgerblue=2003199,this._colorNames.deepskyblue=49151,this._colorNames.lightskyblue=8900346,this._colorNames.skyblue=8900331,this._colorNames.lightblue=11393254,this._colorNames.powderblue=11591910,this._colorNames.azure=15794175,this._colorNames.lightcyan=14745599,this._colorNames.paleturquoise=11529966,this._colorNames.mediumturquoise=4772300,this._colorNames.lightseagreen=2142890,this._colorNames.darkcyan=35723,this._colorNames.teal=32896,this._colorNames.cadetblue=6266528,this._colorNames.darkturquoise=52945,this._colorNames.aqua=65535,this._colorNames.cyan=65535,this._colorNames.turquoise=4251856,this._colorNames.aquamarine=8388564,this._colorNames.mediumaquamarine=6737322,this._colorNames.darkseagreen=9419919,this._colorNames.mediumseagreen=3978097,this._colorNames.seagreen=3050327,this._colorNames.darkgreen=25600,this._colorNames.green=32768,this._colorNames.forestgreen=2263842,this._colorNames.limegreen=3329330,this._colorNames.lime=65280,this._colorNames.chartreuse=8388352,this._colorNames.lawngreen=8190976,this._colorNames.greenyellow=11403055,this._colorNames.yellowgreen=10145074,this._colorNames.palegreen=10025880,this._colorNames.lightgreen=9498256,this._colorNames.springgreen=65407,this._colorNames.mediumspringgreen=64154,this._colorNames.darkolivegreen=5597999,this._colorNames.olivedrab=7048739,this._colorNames.olive=8421376,this._colorNames.darkkhaki=12433259,this._colorNames.darkgoldenrod=12092939,this._colorNames.goldenrod=14329120,this._colorNames.gold=16766720,this._colorNames.yellow=16776960,this._colorNames.khaki=15787660,this._colorNames.palegoldenrod=15657130,this._colorNames.blanchedalmond=16772045,this._colorNames.moccasin=16770229,this._colorNames.wheat=16113331,this._colorNames.navajowhite=16768685,this._colorNames.burlywood=14596231,this._colorNames.tan=13808780,this._colorNames.rosybrown=12357519,this._colorNames.sienna=10506797,this._colorNames.saddlebrown=9127187,this._colorNames.chocolate=13789470,this._colorNames.peru=13468991,this._colorNames.sandybrown=16032864,this._colorNames.darkred=9109504,this._colorNames.maroon=8388608,this._colorNames.brown=10824234,this._colorNames.firebrick=11674146,this._colorNames.indianred=13458524,this._colorNames.lightcoral=15761536,this._colorNames.salmon=16416882,this._colorNames.darksalmon=15308410,this._colorNames.lightsalmon=16752762,this._colorNames.coral=16744272,this._colorNames.tomato=16737095,this._colorNames.darkorange=16747520,this._colorNames.orange=16753920,this._colorNames.orangered=16729344,this._colorNames.crimson=14423100,this._colorNames.red=16711680,this._colorNames.deeppink=16716947,this._colorNames.fuchsia=16711935,this._colorNames.magenta=16711935,this._colorNames.hotpink=16738740,this._colorNames.lightpink=16758465,this._colorNames.pink=16761035,this._colorNames.palevioletred=14381203,this._colorNames.mediumvioletred=13047173,this._colorNames.purple=8388736,this._colorNames.darkmagenta=9109643,this._colorNames.mediumpurple=9662683,this._colorNames.blueviolet=9055202,this._colorNames.indigo=4915330,this._colorNames.darkviolet=9699539,this._colorNames.darkorchid=10040012,this._colorNames.mediumorchid=12211667,this._colorNames.orchid=14315734,this._colorNames.violet=15631086,this._colorNames.plum=14524637,this._colorNames.thistle=14204888,this._colorNames.lavender=15132410,this._colorNames.ghostwhite=16316671,this._colorNames.aliceblue=15792383,this._colorNames.mintcream=16121850,this._colorNames.honeydew=15794160,this._colorNames.lightgoldenrodyellow=16448210,this._colorNames.lemonchiffon=16775885,this._colorNames.cornsilk=16775388,this._colorNames.lightyellow=16777184,this._colorNames.ivory=16777200,this._colorNames.floralwhite=16775920,this._colorNames.linen=16445670,this._colorNames.oldlace=16643558,this._colorNames.antiquewhite=16444375,this._colorNames.bisque=16770244,this._colorNames.peachpuff=16767673,this._colorNames.papayawhip=16773077,this._colorNames.beige=16119260,this._colorNames.seashell=16774638,this._colorNames.lavenderblush=16773365,this._colorNames.mistyrose=16770273,this._colorNames.snow=16775930,this._colorNames.white=16777215,this._colorNames.whitesmoke=16119285,this._colorNames.gainsboro=14474460,this._colorNames.lightgrey=13882323,this._colorNames.silver=12632256,this._colorNames.darkgrey=11119017,this._colorNames.grey=8421504,this._colorNames.lightslategrey=7833753,this._colorNames.slategrey=7372944,this._colorNames.dimgrey=6908265,this._colorNames.darkslategrey=3100495,this._colorNames.black=0,this._colorNames.transparent=4278190080),null!=this._colorNames[t])return this._colorNames[t];if(6==t.length&&this.isHex(t))return parseInt("0x"+t)}return null},t.color=function(t){var e=this.tryColor(t);if(null==e)throw new n("Can't cast to color: "+t);return e},t.tryClass=function(t){if(this._notClasses[t])return t;var e=this._classes[t];if(null!=e)return e;try{return e=window[t],this._classes[t]=e,e}catch(i){}return this._notClasses[t]=!0,t},t.bitmapData=function(t){if(null==t)return null;if("string"==typeof t&&(t=this.tryClass(t)),"function"==typeof t)try{t=new t}catch(e){t=new t(0,0)}if(t instanceof i)return t;if(t instanceof r&&(t=t.htmlImageElement),t instanceof HTMLImageElement){var s=t,o=new i(s.width,s.height,!0,0);return o.draw(s),o}throw new n("Can't cast to BitmapData: "+t)},t.bitmapTexture=function(e){if(null==e)return null;if("string"==typeof e&&(e=this.tryClass(e)),"function"==typeof e)try{e=new e}catch(i){e=new e(0,0)}if(e instanceof o)return e;try{var s=t.bitmapData(e);return new o(s)}catch(i){}throw new n("Can't cast to BitmapTexture: "+e)},t._hexChars="0123456789abcdefABCDEF",t._notClasses=new Object,t._classes=new Object,t}();e.exports=a},{"awayjs-core/lib/base/BitmapData":void 0,"awayjs-core/lib/textures/BitmapTexture":void 0,"awayjs-core/lib/textures/ImageTexture":void 0,"awayjs-core/lib/utils/ByteArray":void 0,"awayjs-display/lib/errors/CastError":void 0}]},{},[]);
//# sourceMappingURL=awayjs-display.min.js.map