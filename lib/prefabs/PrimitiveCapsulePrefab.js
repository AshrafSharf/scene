var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var PrimitivePrefabBase = require("awayjs-display/lib/prefabs/PrimitivePrefabBase");
/**
 * A Capsule primitive mesh.
 */
var PrimitiveCapsulePrefab = (function (_super) {
    __extends(PrimitiveCapsulePrefab, _super);
    /**
     * Creates a new Capsule object.
     * @param radius The radius of the capsule.
     * @param height The height of the capsule.
     * @param segmentsW Defines the number of horizontal segments that make up the capsule. Defaults to 16.
     * @param segmentsH Defines the number of vertical segments that make up the capsule. Defaults to 15. Must be uneven value.
     * @param yUp Defines whether the capsule poles should lay on the Y-axis (true) or on the Z-axis (false).
     */
    function PrimitiveCapsulePrefab(radius, height, segmentsW, segmentsH, yUp) {
        if (radius === void 0) { radius = 50; }
        if (height === void 0) { height = 100; }
        if (segmentsW === void 0) { segmentsW = 16; }
        if (segmentsH === void 0) { segmentsH = 15; }
        if (yUp === void 0) { yUp = true; }
        _super.call(this);
        this._numVertices = 0;
        this._radius = radius;
        this._height = height;
        this._segmentsW = segmentsW;
        this._segmentsH = (segmentsH % 2 == 0) ? segmentsH + 1 : segmentsH;
        this._yUp = yUp;
    }
    Object.defineProperty(PrimitiveCapsulePrefab.prototype, "radius", {
        /**
         * The radius of the capsule.
         */
        get: function () {
            return this._radius;
        },
        set: function (value) {
            this._radius = value;
            this._pInvalidateGeometry();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrimitiveCapsulePrefab.prototype, "height", {
        /**
         * The height of the capsule.
         */
        get: function () {
            return this._height;
        },
        set: function (value) {
            this._height = value;
            this._pInvalidateGeometry();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrimitiveCapsulePrefab.prototype, "segmentsW", {
        /**
         * Defines the number of horizontal segments that make up the capsule. Defaults to 16.
         */
        get: function () {
            return this._segmentsW;
        },
        set: function (value) {
            this._segmentsW = value;
            this._pInvalidateGeometry();
            this._pInvalidateUVs();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrimitiveCapsulePrefab.prototype, "segmentsH", {
        /**
         * Defines the number of vertical segments that make up the capsule. Defaults to 15. Must be uneven.
         */
        get: function () {
            return this._segmentsH;
        },
        set: function (value) {
            this._segmentsH = (value % 2 == 0) ? value + 1 : value;
            this._pInvalidateGeometry();
            this._pInvalidateUVs();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrimitiveCapsulePrefab.prototype, "yUp", {
        /**
         * Defines whether the capsule poles should lay on the Y-axis (true) or on the Z-axis (false).
         */
        get: function () {
            return this._yUp;
        },
        set: function (value) {
            this._yUp = value;
            this._pInvalidateGeometry();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @inheritDoc
     */
    PrimitiveCapsulePrefab.prototype._pBuildGeometry = function (target, geometryType) {
        var indices /*uint*/;
        var positions;
        var normals;
        var tangents;
        var i;
        var j;
        var triIndex = 0;
        var index = 0;
        var startIndex;
        var comp1, comp2, t1, t2;
        var numIndices = 0;
        if (geometryType == "triangleSubGeometry") {
            var triangleGeometry = target;
            // evaluate target number of vertices, triangles and indices
            this._numVertices = (this._segmentsH + 1) * (this._segmentsW + 1); // segmentsH + 1 because of closure, segmentsW + 1 because of closure
            numIndices = (this._segmentsH - 1) * this._segmentsW * 6; // each level has segmentH quads, each of 2 triangles
            // need to initialize raw arrays or can be reused?
            if (this._numVertices == triangleGeometry.numVertices) {
                indices = triangleGeometry.indices;
                positions = triangleGeometry.positions;
                normals = triangleGeometry.vertexNormals;
                tangents = triangleGeometry.vertexTangents;
            }
            else {
                indices = new Array(numIndices);
                positions = new Array(this._numVertices * 3);
                normals = new Array(this._numVertices * 3);
                tangents = new Array(this._numVertices * 3);
                this._pInvalidateUVs();
            }
            for (j = 0; j <= this._segmentsH; ++j) {
                var horangle = Math.PI * j / this._segmentsH;
                var z = -this._radius * Math.cos(horangle);
                var ringradius = this._radius * Math.sin(horangle);
                startIndex = index;
                for (i = 0; i <= this._segmentsW; ++i) {
                    var verangle = 2 * Math.PI * i / this._segmentsW;
                    var x = ringradius * Math.cos(verangle);
                    var offset = j > this._segmentsH / 2 ? this._height / 2 : -this._height / 2;
                    var y = ringradius * Math.sin(verangle);
                    var normLen = 1 / Math.sqrt(x * x + y * y + z * z);
                    var tanLen = Math.sqrt(y * y + x * x);
                    if (this._yUp) {
                        t1 = 0;
                        t2 = tanLen > .007 ? x / tanLen : 0;
                        comp1 = -z;
                        comp2 = y;
                    }
                    else {
                        t1 = tanLen > .007 ? x / tanLen : 0;
                        t2 = 0;
                        comp1 = y;
                        comp2 = z;
                    }
                    if (i == this._segmentsW) {
                        positions[index] = positions[startIndex];
                        positions[index + 1] = positions[startIndex + 1];
                        positions[index + 2] = positions[startIndex + 2];
                        normals[index] = (normals[startIndex] + (x * normLen)) * .5;
                        normals[index + 1] = (normals[startIndex + 1] + (comp1 * normLen)) * .5;
                        normals[index + 2] = (normals[startIndex + 2] + (comp2 * normLen)) * .5;
                        tangents[index] = (tangents[startIndex] + (tanLen > .007 ? -y / tanLen : 1)) * .5;
                        tangents[index + 1] = (tangents[startIndex + 1] + t1) * .5;
                        tangents[index + 2] = (tangents[startIndex + 2] + t2) * .5;
                    }
                    else {
                        // vertex
                        positions[index] = x;
                        positions[index + 1] = (this._yUp) ? comp1 - offset : comp1;
                        positions[index + 2] = (this._yUp) ? comp2 : comp2 + offset;
                        // normal
                        normals[index] = x * normLen;
                        normals[index + 1] = comp1 * normLen;
                        normals[index + 2] = comp2 * normLen;
                        // tangent
                        tangents[index] = tanLen > .007 ? -y / tanLen : 1;
                        tangents[index + 1] = t1;
                        tangents[index + 2] = t2;
                    }
                    if (i > 0 && j > 0) {
                        var a = (this._segmentsW + 1) * j + i;
                        var b = (this._segmentsW + 1) * j + i - 1;
                        var c = (this._segmentsW + 1) * (j - 1) + i - 1;
                        var d = (this._segmentsW + 1) * (j - 1) + i;
                        if (j == this._segmentsH) {
                            positions[index] = positions[startIndex];
                            positions[index + 1] = positions[startIndex + 1];
                            positions[index + 2] = positions[startIndex + 2];
                            indices[triIndex++] = a;
                            indices[triIndex++] = c;
                            indices[triIndex++] = d;
                        }
                        else if (j == 1) {
                            indices[triIndex++] = a;
                            indices[triIndex++] = b;
                            indices[triIndex++] = c;
                        }
                        else {
                            indices[triIndex++] = a;
                            indices[triIndex++] = b;
                            indices[triIndex++] = c;
                            indices[triIndex++] = a;
                            indices[triIndex++] = c;
                            indices[triIndex++] = d;
                        }
                    }
                    index += 3;
                }
            }
            // build real data from raw data
            triangleGeometry.updateIndices(indices);
            triangleGeometry.updatePositions(positions);
            triangleGeometry.updateVertexNormals(normals);
            triangleGeometry.updateVertexTangents(tangents);
        }
        else if (geometryType == "lineSubGeometry") {
        }
    };
    /**
     * @inheritDoc
     */
    PrimitiveCapsulePrefab.prototype._pBuildUVs = function (target, geometryType) {
        var i, j;
        var uvs;
        if (geometryType == "triangleSubGeometry") {
            var triangleGeometry = target;
            // need to initialize raw array or can be reused?
            if (triangleGeometry.uvs && this._numVertices == triangleGeometry.numVertices) {
                uvs = triangleGeometry.uvs;
            }
            else {
                uvs = new Array(this._numVertices * 2);
            }
            // current uv component index
            var index = 0;
            for (j = 0; j <= this._segmentsH; ++j) {
                for (i = 0; i <= this._segmentsW; ++i) {
                    // revolution vertex
                    uvs[index++] = (i / this._segmentsW) * triangleGeometry.scaleU;
                    uvs[index++] = (j / this._segmentsH) * triangleGeometry.scaleV;
                }
            }
            // build real data from raw data
            triangleGeometry.updateUVs(uvs);
        }
        else if (geometryType == "lineSubGeometry") {
        }
    };
    return PrimitiveCapsulePrefab;
})(PrimitivePrefabBase);
module.exports = PrimitiveCapsulePrefab;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1kaXNwbGF5L2xpYi9wcmVmYWJzL1ByaW1pdGl2ZUNhcHN1bGVQcmVmYWIudHMiXSwibmFtZXMiOlsiUHJpbWl0aXZlQ2Fwc3VsZVByZWZhYiIsIlByaW1pdGl2ZUNhcHN1bGVQcmVmYWIuY29uc3RydWN0b3IiLCJQcmltaXRpdmVDYXBzdWxlUHJlZmFiLnJhZGl1cyIsIlByaW1pdGl2ZUNhcHN1bGVQcmVmYWIuaGVpZ2h0IiwiUHJpbWl0aXZlQ2Fwc3VsZVByZWZhYi5zZWdtZW50c1ciLCJQcmltaXRpdmVDYXBzdWxlUHJlZmFiLnNlZ21lbnRzSCIsIlByaW1pdGl2ZUNhcHN1bGVQcmVmYWIueVVwIiwiUHJpbWl0aXZlQ2Fwc3VsZVByZWZhYi5fcEJ1aWxkR2VvbWV0cnkiLCJQcmltaXRpdmVDYXBzdWxlUHJlZmFiLl9wQnVpbGRVVnMiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUtBLElBQU8sbUJBQW1CLFdBQVksZ0RBQWdELENBQUMsQ0FBQztBQUV4RixBQUdBOztHQURHO0lBQ0csc0JBQXNCO0lBQVNBLFVBQS9CQSxzQkFBc0JBLFVBQTRCQTtJQXFGdkRBOzs7Ozs7O09BT0dBO0lBQ0hBLFNBN0ZLQSxzQkFBc0JBLENBNkZmQSxNQUFrQkEsRUFBRUEsTUFBbUJBLEVBQUVBLFNBQXFCQSxFQUFFQSxTQUFxQkEsRUFBRUEsR0FBa0JBO1FBQXpHQyxzQkFBa0JBLEdBQWxCQSxXQUFrQkE7UUFBRUEsc0JBQW1CQSxHQUFuQkEsWUFBbUJBO1FBQUVBLHlCQUFxQkEsR0FBckJBLGNBQXFCQTtRQUFFQSx5QkFBcUJBLEdBQXJCQSxjQUFxQkE7UUFBRUEsbUJBQWtCQSxHQUFsQkEsVUFBa0JBO1FBRXBIQSxpQkFBT0EsQ0FBQ0E7UUF4RkRBLGlCQUFZQSxHQUFVQSxDQUFDQSxDQUFDQTtRQTBGL0JBLElBQUlBLENBQUNBLE9BQU9BLEdBQUdBLE1BQU1BLENBQUNBO1FBQ3RCQSxJQUFJQSxDQUFDQSxPQUFPQSxHQUFHQSxNQUFNQSxDQUFDQTtRQUN0QkEs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QkFDbkRBLE9BQU9BLEdBQUdBLElBQUlBLEtBQUtBLENBQVNBLElBQUlBLENBQUNBLFlBQVlBLEdBQUNBLENBQUNBLENBQUNBLENBQUNBO2dCQUNqREEsUUFBUUEsR0FBR0EsSUFBSUEsS0FBS0EsQ0FBU0EsSUFBSUEsQ0FBQ0EsWUFBWUEsR0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBRWxEQSxJQUFJQSxDQUFDQSxlQUFlQSxFQUFFQSxDQUFDQTtZQUN4QkEsQ0FBQ0E7WUFFREEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsSUFBSUEsSUFBSUEsQ0FBQ0EsVUFBVUEsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsQ0FBQ0E7Z0JBRXZDQSxJQUFJQSxRQUFRQSxHQUFVQSxJQUFJQSxDQUFDQSxFQUFFQSxHQUFDQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQTtnQkFDaERBLElBQUlBLENBQUNBLEdBQVVBLENBQUNBLElBQUlBLENBQUNBLE9BQU9BLEdBQUNBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLFFBQVFBLENBQUNBLENBQUNBO2dCQUNoREEsSUFBSUEsVUFBVUEsR0FBVUEsSUFBSUEsQ0FBQ0EsT0FBT0EsR0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0E7Z0JBRXhEQSxVQUFVQSxHQUFHQSxLQUFLQSxDQUFDQTtnQkFFbkJBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLEVBQUVBLENBQUNBLElBQUlBLElBQUlBLENBQUNBLFVBQVVBLEVBQUVBLEVBQUVBLENBQUNBLEVBQUVBLENBQUNBO29CQUN2Q0EsSUFBSUEsUUFBUUEsR0FBVUEsQ0FBQ0EsR0FBQ0EsSUFBSUEsQ0FBQ0EsRUFBRUEsR0FBQ0EsQ0FBQ0EsR0FBQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0E7b0JBQ2xEQSxJQUFJQSxDQUFDQSxHQUFVQSxVQUFVQSxHQUFDQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxRQUFRQSxDQUFDQSxDQUFDQTtvQkFDN0NBLElBQUlBLE1BQU1BLEdBQVVBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLFVBQVVBLEdBQUNBLENBQUNBLEdBQUVBLElBQUlBLENBQUNBLE9BQU9BLEdBQUNBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLE9BQU9BLEdBQUNBLENBQUNBLENBQUNBO29CQUM1RUEsSUFBSUEsQ0FBQ0EsR0FBVUEsVUFBVUEsR0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0E7b0JBQzdDQSxJQUFJQSxPQUFPQSxHQUFVQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxHQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtvQkFDbERBLElBQUlBLE1BQU1BLEdBQVVBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLEdBQUNBLENBQUNBLEdBQUdBLENBQUNBLEdBQUNBLENBQUNBLENBQUNBLENBQUNBO29CQUV6Q0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7d0JBQ2ZBLEVBQUVBLEdBQUdBLENBQUNBLENBQUNBO3dCQUNQQSxFQUFFQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFFQSxDQUFDQSxHQUFDQSxNQUFNQSxHQUFHQSxDQUFDQSxDQUFDQTt3QkFDakNBLEtBQUtBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBO3dCQUNYQSxLQUFLQSxHQUFHQSxDQUFDQSxDQUFDQTtvQkFFWEEsQ0FBQ0E7b0JBQUNBLElBQUlBLENBQUNBLENBQUNBO3dCQUNQQSxFQUFFQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFFQSxDQUFDQSxHQUFDQSxNQUFNQSxHQUFHQSxDQUFDQSxDQUFDQTt3QkFDakNBLEVBQUVBLEdBQUdBLENBQUNBLENBQUNBO3dCQUNQQSxLQUFLQSxHQUFHQSxDQUFDQSxDQUFDQTt3QkFDVkEsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7b0JBQ1hBLENBQUNBO29CQUVEQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxJQUFJQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQSxDQUFDQTt3QkFFMUJBLFNBQVNBLENBQUNBLEtBQUtBLENBQUNBLEdBQUdBLFNBQVNBLENBQUNBLFVBQVVBLENBQUNBLENBQUNBO3dCQUN6Q0EsU0FBU0EsQ0FBQ0EsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsU0FBU0EsQ0FBQ0EsVUFBVUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7d0JBQ2pEQSxTQUFTQSxDQUFDQSxLQUFLQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxTQUFTQSxDQUFDQSxVQUFVQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQTt3QkFDakRBLE9BQU9BLENBQUNBLEtBQUtBLENBQUNBLEdBQUdBLENBQUNBLE9BQU9BLENBQUNBLFVBQVVBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLEdBQUNBLE9BQU9BLENBQUNBLENBQUNBLEdBQUNBLEVBQUVBLENBQUNBO3dCQUN4REEsT0FBT0EsQ0FBQ0EsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsVUFBVUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBRUEsS0FBS0EsR0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0EsR0FBQ0EsRUFBRUEsQ0FBQ0E7d0JBQ3JFQSxPQUFPQSxDQUFDQSxLQUFLQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxPQUFPQSxDQUFDQSxVQUFVQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxLQUFLQSxHQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxHQUFDQSxFQUFFQSxDQUFDQTt3QkFDcEVBLFFBQVFBLENBQUNBLEtBQUtBLENBQUNBLEdBQUdBLENBQUNBLFFBQVFBLENBQUNBLFVBQVVBLENBQUNBLEdBQUdBLENBQUNBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUVBLENBQUNBLENBQUNBLEdBQUNBLE1BQU1BLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEdBQUNBLEVBQUVBLENBQUNBO3dCQUM3RUEsUUFBUUEsQ0FBQ0EsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsVUFBVUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsRUFBRUEsQ0FBQ0EsR0FBQ0EsRUFBRUEsQ0FBQ0E7d0JBQ3pEQSxRQUFRQSxDQUFDQSxLQUFLQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxRQUFRQSxDQUFDQSxVQUFVQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxFQUFFQSxDQUFDQSxHQUFDQSxFQUFFQSxDQUFDQTtvQkFFMURBLENBQUNBO29CQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTt3QkFDUEEsQUFDQUEsU0FEU0E7d0JBQ1RBLFNBQVNBLENBQUNBLEtBQUtBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO3dCQUNyQkEsU0FBU0EsQ0FBQ0EsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBRUEsS0FBS0EsR0FBR0EsTUFBTUEsR0FBR0EsS0FBS0EsQ0FBQ0E7d0JBQzNEQSxTQUFTQSxDQUFDQSxLQUFLQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQSxHQUFFQSxLQUFLQSxHQUFHQSxLQUFLQSxHQUFHQSxNQUFNQSxDQUFDQTt3QkFDM0RBLEFBQ0FBLFNBRFNBO3dCQUNUQSxPQUFPQSxDQUFDQSxLQUFLQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFDQSxPQUFPQSxDQUFDQTt3QkFDM0JBLE9BQU9BLENBQUNBLEtBQUtBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLEtBQUtBLEdBQUNBLE9BQU9BLENBQUNBO3dCQUNuQ0EsT0FBT0EsQ0FBQ0EsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsS0FBS0EsR0FBQ0EsT0FBT0EsQ0FBQ0E7d0JBQ25DQSxBQUNBQSxVQURVQTt3QkFDVkEsUUFBUUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBRUEsQ0FBQ0EsQ0FBQ0EsR0FBQ0EsTUFBTUEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7d0JBQy9DQSxRQUFRQSxDQUFDQSxLQUFLQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxFQUFFQSxDQUFDQTt3QkFDekJBLFFBQVFBLENBQUNBLEtBQUtBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLEVBQUVBLENBQUNBO29CQUMxQkEsQ0FBQ0E7b0JBRURBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO3dCQUNwQkEsSUFBSUEsQ0FBQ0EsR0FBVUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7d0JBQzNDQSxJQUFJQSxDQUFDQSxHQUFVQSxDQUFDQSxJQUFJQSxDQUFDQSxVQUFVQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTt3QkFDL0NBLElBQUlBLENBQUNBLEdBQVVBLENBQUNBLElBQUlBLENBQUNBLFVBQVVBLEdBQUdBLENBQUNBLENBQUNBLEdBQUNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO3dCQUNyREEsSUFBSUEsQ0FBQ0EsR0FBVUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7d0JBRWpEQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxJQUFJQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQSxDQUFDQTs0QkFDMUJBLFNBQVNBLENBQUNBLEtBQUtBLENBQUNBLEdBQUdBLFNBQVNBLENBQUNBLFVBQVVBLENBQUNBLENBQUNBOzRCQUN6Q0EsU0FBU0EsQ0FBQ0EsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsU0FBU0EsQ0FBQ0EsVUFBVUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7NEJBQ2pEQSxTQUFTQSxDQUFDQSxLQUFLQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxTQUFTQSxDQUFDQSxVQUFVQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQTs0QkFFakRBLE9BQU9BLENBQUNBLFFBQVFBLEVBQUVBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBOzRCQUN4QkEsT0FBT0EsQ0FBQ0EsUUFBUUEsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7NEJBQ3hCQSxPQUFPQSxDQUFDQSxRQUFRQSxFQUFFQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTt3QkFFekJBLENBQUNBO3dCQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTs0QkFDbkJBLE9BQU9BLENBQUNBLFFBQVFBLEVBQUVBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBOzRCQUN4QkEsT0FBT0EsQ0FBQ0EsUUFBUUEsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7NEJBQ3hCQSxPQUFPQSxDQUFDQSxRQUFRQSxFQUFFQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTt3QkFFekJBLENBQUNBO3dCQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTs0QkFDUEEsT0FBT0EsQ0FBQ0EsUUFBUUEsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7NEJBQ3hCQSxPQUFPQSxDQUFDQSxRQUFRQSxFQUFFQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTs0QkFDeEJBLE9BQU9BLENBQUNBLFFBQVFBLEVBQUVBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBOzRCQUN4QkEsT0FBT0EsQ0FB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aUJBLENBQUNBLENBQUNBLENBQUNBO1FBRS9DQSxDQUFDQTtJQUNGQSxDQUFDQTtJQUNGUiw2QkFBQ0E7QUFBREEsQ0E5UkEsQUE4UkNBLEVBOVJvQyxtQkFBbUIsRUE4UnZEO0FBRUQsQUFBZ0MsaUJBQXZCLHNCQUFzQixDQUFDIiwiZmlsZSI6InByZWZhYnMvUHJpbWl0aXZlQ2Fwc3VsZVByZWZhYi5qcyIsInNvdXJjZVJvb3QiOiIuLi8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSUFzc2V0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9saWJyYXJ5L0lBc3NldFwiKTtcclxuXHJcbmltcG9ydCBMaW5lU3ViR2VvbWV0cnlcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvYmFzZS9MaW5lU3ViR2VvbWV0cnlcIik7XHJcbmltcG9ydCBTdWJHZW9tZXRyeUJhc2VcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvYmFzZS9TdWJHZW9tZXRyeUJhc2VcIik7XHJcbmltcG9ydCBUcmlhbmdsZVN1Ykdlb21ldHJ5XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9iYXNlL1RyaWFuZ2xlU3ViR2VvbWV0cnlcIik7XHJcbmltcG9ydCBQcmltaXRpdmVQcmVmYWJCYXNlXHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9wcmVmYWJzL1ByaW1pdGl2ZVByZWZhYkJhc2VcIik7XHJcblxyXG4vKipcclxuICogQSBDYXBzdWxlIHByaW1pdGl2ZSBtZXNoLlxyXG4gKi9cclxuY2xhc3MgUHJpbWl0aXZlQ2Fwc3VsZVByZWZhYiBleHRlbmRzIFByaW1pdGl2ZVByZWZhYkJhc2UgaW1wbGVtZW50cyBJQXNzZXRcclxue1xyXG5cdHByaXZhdGUgX3JhZGl1czpudW1iZXI7XHJcblx0cHJpdmF0ZSBfaGVpZ2h0Om51bWJlcjtcclxuXHRwcml2YXRlIF9zZWdtZW50c1c6bnVtYmVyO1xyXG5cdHByaXZhdGUgX3NlZ21lbnRzSDpudW1iZXI7XHJcblx0cHJpdmF0ZSBfeVVwOmJvb2xlYW47XHJcblx0cHJpdmF0ZSBfbnVtVmVydGljZXM6bnVtYmVyID0gMDtcclxuXHJcblx0LyoqXHJcblx0ICogVGhlIHJhZGl1cyBvZiB0aGUgY2Fwc3VsZS5cclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0IHJhZGl1cygpOm51bWJlclxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9yYWRpdXM7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IHJhZGl1cyh2YWx1ZTpudW1iZXIpXHJcblx0e1xyXG5cdFx0dGhpcy5fcmFkaXVzID0gdmFsdWU7XHJcblxyXG5cdFx0dGhpcy5fcEludmFsaWRhdGVHZW9tZXRyeSgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVGhlIGhlaWdodCBvZiB0aGUgY2Fwc3VsZS5cclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0IGhlaWdodCgpOm51bWJlclxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9oZWlnaHQ7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IGhlaWdodCh2YWx1ZTpudW1iZXIpXHJcblx0e1xyXG5cdFx0dGhpcy5faGVpZ2h0ID0gdmFsdWU7XHJcblx0XHR0aGlzLl9wSW52YWxpZGF0ZUdlb21ldHJ5KCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBEZWZpbmVzIHRoZSBudW1iZXIgb2YgaG9yaXpvbnRhbCBzZWdtZW50cyB0aGF0IG1ha2UgdXAgdGhlIGNhcHN1bGUuIERlZmF1bHRzIHRvIDE2LlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBnZXQgc2VnbWVudHNXKCk6bnVtYmVyXHJcblx0e1xyXG5cdFx0cmV0dXJuIHRoaXMuX3NlZ21lbnRzVztcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXQgc2VnbWVudHNXKHZhbHVlOm51bWJlcilcclxuXHR7XHJcblx0XHR0aGlzLl9zZWdtZW50c1cgPSB2YWx1ZTtcclxuXHJcblx0XHR0aGlzLl9wSW52YWxpZGF0ZUdlb21ldHJ5KCk7XHJcblx0XHR0aGlzLl9wSW52YWxpZGF0ZVVWcygpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRGVmaW5lcyB0aGUgbnVtYmVyIG9mIHZlcnRpY2FsIHNlZ21lbnRzIHRoYXQgbWFrZSB1cCB0aGUgY2Fwc3VsZS4gRGVmYXVsdHMgdG8gMTUuIE11c3QgYmUgdW5ldmVuLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBnZXQgc2VnbWVudHNIKCk6bnVtYmVyXHJcblx0e1xyXG5cdFx0cmV0dXJuIHRoaXMuX3NlZ21lbnRzSDtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXQgc2VnbWVudHNIKHZhbHVlOm51bWJlcilcclxuXHR7XHJcblx0XHR0aGlzLl9zZWdtZW50c0ggPSAodmFsdWUlMiA9PSAwKT8gdmFsdWUgKyAxIDogdmFsdWU7XHJcblxyXG5cdFx0dGhpcy5fcEludmFsaWRhdGVHZW9tZXRyeSgpO1xyXG5cdFx0dGhpcy5fcEludmFsaWRhdGVVVnMoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlZmluZXMgd2hldGhlciB0aGUgY2Fwc3VsZSBwb2xlcyBzaG91bGQgbGF5IG9uIHRoZSBZLWF4aXMgKHRydWUpIG9yIG9uIHRoZSBaLWF4aXMgKGZhbHNlKS5cclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0IHlVcCgpOmJvb2xlYW5cclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5feVVwO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldCB5VXAodmFsdWU6Ym9vbGVhbilcclxuXHR7XHJcblx0XHR0aGlzLl95VXAgPSB2YWx1ZTtcclxuXHJcblx0XHR0aGlzLl9wSW52YWxpZGF0ZUdlb21ldHJ5KCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDcmVhdGVzIGEgbmV3IENhcHN1bGUgb2JqZWN0LlxyXG5cdCAqIEBwYXJhbSByYWRpdXMgVGhlIHJhZGl1cyBvZiB0aGUgY2Fwc3VsZS5cclxuXHQgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIGNhcHN1bGUuXHJcblx0ICogQHBhcmFtIHNlZ21lbnRzVyBEZWZpbmVzIHRoZSBudW1iZXIgb2YgaG9yaXpvbnRhbCBzZWdtZW50cyB0aGF0IG1ha2UgdXAgdGhlIGNhcHN1bGUuIERlZmF1bHRzIHRvIDE2LlxyXG5cdCAqIEBwYXJhbSBzZWdtZW50c0ggRGVmaW5lcyB0aGUgbnVtYmVyIG9mIHZlcnRpY2FsIHNlZ21lbnRzIHRoYXQgbWFrZSB1cCB0aGUgY2Fwc3VsZS4gRGVmYXVsdHMgdG8gMTUuIE11c3QgYmUgdW5ldmVuIHZhbHVlLlxyXG5cdCAqIEBwYXJhbSB5VXAgRGVmaW5lcyB3aGV0aGVyIHRoZSBjYXBzdWxlIHBvbGVzIHNob3VsZCBsYXkgb24gdGhlIFktYXhpcyAodHJ1ZSkgb3Igb24gdGhlIFotYXhpcyAoZmFsc2UpLlxyXG5cdCAqL1xyXG5cdGNvbnN0cnVjdG9yKHJhZGl1czpudW1iZXIgPSA1MCwgaGVpZ2h0Om51bWJlciA9IDEwMCwgc2VnbWVudHNXOm51bWJlciA9IDE2LCBzZWdtZW50c0g6bnVtYmVyID0gMTUsIHlVcDpib29sZWFuID0gdHJ1ZSlcclxuXHR7XHJcblx0XHRzdXBlcigpO1xyXG5cclxuXHRcdHRoaXMuX3JhZGl1cyA9IHJhZGl1cztcclxuXHRcdHRoaXMuX2hlaWdodCA9IGhlaWdodDtcclxuXHRcdHRoaXMuX3NlZ21lbnRzVyA9IHNlZ21lbnRzVztcclxuXHRcdHRoaXMuX3NlZ21lbnRzSCA9IChzZWdtZW50c0glMiA9PSAwKT8gc2VnbWVudHNIICsgMSA6IHNlZ21lbnRzSDtcclxuXHRcdHRoaXMuX3lVcCA9IHlVcDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBpbmhlcml0RG9jXHJcblx0ICovXHJcblx0cHVibGljIF9wQnVpbGRHZW9tZXRyeSh0YXJnZXQ6U3ViR2VvbWV0cnlCYXNlLCBnZW9tZXRyeVR5cGU6c3RyaW5nKVxyXG5cdHtcclxuXHRcdHZhciBpbmRpY2VzOkFycmF5PG51bWJlcj4gLyp1aW50Ki87XHJcblx0XHR2YXIgcG9zaXRpb25zOkFycmF5PG51bWJlcj47XHJcblx0XHR2YXIgbm9ybWFsczpBcnJheTxudW1iZXI+O1xyXG5cdFx0dmFyIHRhbmdlbnRzOkFycmF5PG51bWJlcj47XHJcblxyXG5cdFx0dmFyIGk6bnVtYmVyO1xyXG5cdFx0dmFyIGo6bnVtYmVyO1xyXG5cdFx0dmFyIHRyaUluZGV4Om51bWJlciA9IDA7XHJcblx0XHR2YXIgaW5kZXg6bnVtYmVyID0gMDtcclxuXHRcdHZhciBzdGFydEluZGV4Om51bWJlcjtcclxuXHRcdHZhciBjb21wMTpudW1iZXIsIGNvbXAyOm51bWJlciwgdDE6bnVtYmVyLCB0MjpudW1iZXI7XHJcblx0XHR2YXIgbnVtSW5kaWNlczpudW1iZXIgPSAwO1xyXG5cclxuXHRcdGlmIChnZW9tZXRyeVR5cGUgPT0gXCJ0cmlhbmdsZVN1Ykdlb21ldHJ5XCIpIHtcclxuXHJcblx0XHRcdHZhciB0cmlhbmdsZUdlb21ldHJ5OlRyaWFuZ2xlU3ViR2VvbWV0cnkgPSA8VHJpYW5nbGVTdWJHZW9tZXRyeT4gdGFyZ2V0O1xyXG5cclxuXHRcdFx0Ly8gZXZhbHVhdGUgdGFyZ2V0IG51bWJlciBvZiB2ZXJ0aWNlcywgdHJpYW5nbGVzIGFuZCBpbmRpY2VzXHJcblx0XHRcdHRoaXMuX251bVZlcnRpY2VzID0gKHRoaXMuX3NlZ21lbnRzSCArIDEpKih0aGlzLl9zZWdtZW50c1cgKyAxKTsgLy8gc2VnbWVudHNIICsgMSBiZWNhdXNlIG9mIGNsb3N1cmUsIHNlZ21lbnRzVyArIDEgYmVjYXVzZSBvZiBjbG9zdXJlXHJcblx0XHRcdG51bUluZGljZXMgPSAodGhpcy5fc2VnbWVudHNIIC0gMSkqdGhpcy5fc2VnbWVudHNXKjY7IC8vIGVhY2ggbGV2ZWwgaGFzIHNlZ21lbnRIIHF1YWRzLCBlYWNoIG9mIDIgdHJpYW5nbGVzXHJcblxyXG5cdFx0XHQvLyBuZWVkIHRvIGluaXRpYWxpemUgcmF3IGFycmF5cyBvciBjYW4gYmUgcmV1c2VkP1xyXG5cdFx0XHRpZiAodGhpcy5fbnVtVmVydGljZXMgPT0gdHJpYW5nbGVHZW9tZXRyeS5udW1WZXJ0aWNlcykge1xyXG5cdFx0XHRcdGluZGljZXMgPSB0cmlhbmdsZUdlb21ldHJ5LmluZGljZXM7XHJcblx0XHRcdFx0cG9zaXRpb25zID0gdHJpYW5nbGVHZW9tZXRyeS5wb3NpdGlvbnM7XHJcblx0XHRcdFx0bm9ybWFscyA9IHRyaWFuZ2xlR2VvbWV0cnkudmVydGV4Tm9ybWFscztcclxuXHRcdFx0XHR0YW5nZW50cyA9IHRyaWFuZ2xlR2VvbWV0cnkudmVydGV4VGFuZ2VudHM7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aW5kaWNlcyA9IG5ldyBBcnJheTxudW1iZXI+KG51bUluZGljZXMpXHJcblx0XHRcdFx0cG9zaXRpb25zID0gbmV3IEFycmF5PG51bWJlcj4odGhpcy5fbnVtVmVydGljZXMqMyk7XHJcblx0XHRcdFx0bm9ybWFscyA9IG5ldyBBcnJheTxudW1iZXI+KHRoaXMuX251bVZlcnRpY2VzKjMpO1xyXG5cdFx0XHRcdHRhbmdlbnRzID0gbmV3IEFycmF5PG51bWJlcj4odGhpcy5fbnVtVmVydGljZXMqMyk7XHJcblxyXG5cdFx0XHRcdHRoaXMuX3BJbnZhbGlkYXRlVVZzKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGZvciAoaiA9IDA7IGogPD0gdGhpcy5fc2VnbWVudHNIOyArK2opIHtcclxuXHJcblx0XHRcdFx0dmFyIGhvcmFuZ2xlOm51bWJlciA9IE1hdGguUEkqai90aGlzLl9zZWdtZW50c0g7XHJcblx0XHRcdFx0dmFyIHo6bnVtYmVyID0gLXRoaXMuX3JhZGl1cypNYXRoLmNvcyhob3JhbmdsZSk7XHJcblx0XHRcdFx0dmFyIHJpbmdyYWRpdXM6bnVtYmVyID0gdGhpcy5fcmFkaXVzKk1hdGguc2luKGhvcmFuZ2xlKTtcclxuXHJcblx0XHRcdFx0c3RhcnRJbmRleCA9IGluZGV4O1xyXG5cclxuXHRcdFx0XHRmb3IgKGkgPSAwOyBpIDw9IHRoaXMuX3NlZ21lbnRzVzsgKytpKSB7XHJcblx0XHRcdFx0XHR2YXIgdmVyYW5nbGU6bnVtYmVyID0gMipNYXRoLlBJKmkvdGhpcy5fc2VnbWVudHNXO1xyXG5cdFx0XHRcdFx0dmFyIHg6bnVtYmVyID0gcmluZ3JhZGl1cypNYXRoLmNvcyh2ZXJhbmdsZSk7XHJcblx0XHRcdFx0XHR2YXIgb2Zmc2V0Om51bWJlciA9IGogPiB0aGlzLl9zZWdtZW50c0gvMj8gdGhpcy5faGVpZ2h0LzIgOiAtdGhpcy5faGVpZ2h0LzI7XHJcblx0XHRcdFx0XHR2YXIgeTpudW1iZXIgPSByaW5ncmFkaXVzKk1hdGguc2luKHZlcmFuZ2xlKTtcclxuXHRcdFx0XHRcdHZhciBub3JtTGVuOm51bWJlciA9IDEvTWF0aC5zcXJ0KHgqeCArIHkqeSArIHoqeik7XHJcblx0XHRcdFx0XHR2YXIgdGFuTGVuOm51bWJlciA9IE1hdGguc3FydCh5KnkgKyB4KngpO1xyXG5cclxuXHRcdFx0XHRcdGlmICh0aGlzLl95VXApIHtcclxuXHRcdFx0XHRcdFx0dDEgPSAwO1xyXG5cdFx0XHRcdFx0XHR0MiA9IHRhbkxlbiA+IC4wMDc/IHgvdGFuTGVuIDogMDtcclxuXHRcdFx0XHRcdFx0Y29tcDEgPSAtejtcclxuXHRcdFx0XHRcdFx0Y29tcDIgPSB5O1xyXG5cclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHQxID0gdGFuTGVuID4gLjAwNz8geC90YW5MZW4gOiAwO1xyXG5cdFx0XHRcdFx0XHR0MiA9IDA7XHJcblx0XHRcdFx0XHRcdGNvbXAxID0geTtcclxuXHRcdFx0XHRcdFx0Y29tcDIgPSB6O1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmIChpID09IHRoaXMuX3NlZ21lbnRzVykge1xyXG5cclxuXHRcdFx0XHRcdFx0cG9zaXRpb25zW2luZGV4XSA9IHBvc2l0aW9uc1tzdGFydEluZGV4XTtcclxuXHRcdFx0XHRcdFx0cG9zaXRpb25zW2luZGV4ICsgMV0gPSBwb3NpdGlvbnNbc3RhcnRJbmRleCArIDFdO1xyXG5cdFx0XHRcdFx0XHRwb3NpdGlvbnNbaW5kZXggKyAyXSA9IHBvc2l0aW9uc1tzdGFydEluZGV4ICsgMl07XHJcblx0XHRcdFx0XHRcdG5vcm1hbHNbaW5kZXhdID0gKG5vcm1hbHNbc3RhcnRJbmRleF0gKyAoeCpub3JtTGVuKSkqLjU7XHJcblx0XHRcdFx0XHRcdG5vcm1hbHNbaW5kZXggKyAxXSA9IChub3JtYWxzW3N0YXJ0SW5kZXggKyAxXSArICggY29tcDEqbm9ybUxlbikpKi41O1xyXG5cdFx0XHRcdFx0XHRub3JtYWxzW2luZGV4ICsgMl0gPSAobm9ybWFsc1tzdGFydEluZGV4ICsgMl0gKyAoY29tcDIqbm9ybUxlbikpKi41O1xyXG5cdFx0XHRcdFx0XHR0YW5nZW50c1tpbmRleF0gPSAodGFuZ2VudHNbc3RhcnRJbmRleF0gKyAodGFuTGVuID4gLjAwNz8gLXkvdGFuTGVuIDogMSkpKi41O1xyXG5cdFx0XHRcdFx0XHR0YW5nZW50c1tpbmRleCArIDFdID0gKHRhbmdlbnRzW3N0YXJ0SW5kZXggKyAxXSArIHQxKSouNTtcclxuXHRcdFx0XHRcdFx0dGFuZ2VudHNbaW5kZXggKyAyXSA9ICh0YW5nZW50c1tzdGFydEluZGV4ICsgMl0gKyB0MikqLjU7XHJcblxyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0Ly8gdmVydGV4XHJcblx0XHRcdFx0XHRcdHBvc2l0aW9uc1tpbmRleF0gPSB4O1xyXG5cdFx0XHRcdFx0XHRwb3NpdGlvbnNbaW5kZXggKyAxXSA9ICh0aGlzLl95VXApPyBjb21wMSAtIG9mZnNldCA6IGNvbXAxO1xyXG5cdFx0XHRcdFx0XHRwb3NpdGlvbnNbaW5kZXggKyAyXSA9ICh0aGlzLl95VXApPyBjb21wMiA6IGNvbXAyICsgb2Zmc2V0O1xyXG5cdFx0XHRcdFx0XHQvLyBub3JtYWxcclxuXHRcdFx0XHRcdFx0bm9ybWFsc1tpbmRleF0gPSB4Km5vcm1MZW47XHJcblx0XHRcdFx0XHRcdG5vcm1hbHNbaW5kZXggKyAxXSA9IGNvbXAxKm5vcm1MZW47XHJcblx0XHRcdFx0XHRcdG5vcm1hbHNbaW5kZXggKyAyXSA9IGNvbXAyKm5vcm1MZW47XHJcblx0XHRcdFx0XHRcdC8vIHRhbmdlbnRcclxuXHRcdFx0XHRcdFx0dGFuZ2VudHNbaW5kZXhdID0gdGFuTGVuID4gLjAwNz8gLXkvdGFuTGVuIDogMTtcclxuXHRcdFx0XHRcdFx0dGFuZ2VudHNbaW5kZXggKyAxXSA9IHQxO1xyXG5cdFx0XHRcdFx0XHR0YW5nZW50c1tpbmRleCArIDJdID0gdDI7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKGkgPiAwICYmIGogPiAwKSB7XHJcblx0XHRcdFx0XHRcdHZhciBhOm51bWJlciA9ICh0aGlzLl9zZWdtZW50c1cgKyAxKSpqICsgaTtcclxuXHRcdFx0XHRcdFx0dmFyIGI6bnVtYmVyID0gKHRoaXMuX3NlZ21lbnRzVyArIDEpKmogKyBpIC0gMTtcclxuXHRcdFx0XHRcdFx0dmFyIGM6bnVtYmVyID0gKHRoaXMuX3NlZ21lbnRzVyArIDEpKihqIC0gMSkgKyBpIC0gMTtcclxuXHRcdFx0XHRcdFx0dmFyIGQ6bnVtYmVyID0gKHRoaXMuX3NlZ21lbnRzVyArIDEpKihqIC0gMSkgKyBpO1xyXG5cclxuXHRcdFx0XHRcdFx0aWYgKGogPT0gdGhpcy5fc2VnbWVudHNIKSB7XHJcblx0XHRcdFx0XHRcdFx0cG9zaXRpb25zW2luZGV4XSA9IHBvc2l0aW9uc1tzdGFydEluZGV4XTtcclxuXHRcdFx0XHRcdFx0XHRwb3NpdGlvbnNbaW5kZXggKyAxXSA9IHBvc2l0aW9uc1tzdGFydEluZGV4ICsgMV07XHJcblx0XHRcdFx0XHRcdFx0cG9zaXRpb25zW2luZGV4ICsgMl0gPSBwb3NpdGlvbnNbc3RhcnRJbmRleCArIDJdO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRpbmRpY2VzW3RyaUluZGV4KytdID0gYTtcclxuXHRcdFx0XHRcdFx0XHRpbmRpY2VzW3RyaUluZGV4KytdID0gYztcclxuXHRcdFx0XHRcdFx0XHRpbmRpY2VzW3RyaUluZGV4KytdID0gZDtcclxuXHJcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoaiA9PSAxKSB7XHJcblx0XHRcdFx0XHRcdFx0aW5kaWNlc1t0cmlJbmRleCsrXSA9IGE7XHJcblx0XHRcdFx0XHRcdFx0aW5kaWNlc1t0cmlJbmRleCsrXSA9IGI7XHJcblx0XHRcdFx0XHRcdFx0aW5kaWNlc1t0cmlJbmRleCsrXSA9IGM7XHJcblxyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGluZGljZXNbdHJpSW5kZXgrK10gPSBhO1xyXG5cdFx0XHRcdFx0XHRcdGluZGljZXNbdHJpSW5kZXgrK10gPSBiO1xyXG5cdFx0XHRcdFx0XHRcdGluZGljZXNbdHJpSW5kZXgrK10gPSBjO1xyXG5cdFx0XHRcdFx0XHRcdGluZGljZXNbdHJpSW5kZXgrK10gPSBhO1xyXG5cdFx0XHRcdFx0XHRcdGluZGljZXNbdHJpSW5kZXgrK10gPSBjO1xyXG5cdFx0XHRcdFx0XHRcdGluZGljZXNbdHJpSW5kZXgrK10gPSBkO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aW5kZXggKz0gMztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGJ1aWxkIHJlYWwgZGF0YSBmcm9tIHJhdyBkYXRhXHJcblx0XHRcdHRyaWFuZ2xlR2VvbWV0cnkudXBkYXRlSW5kaWNlcyhpbmRpY2VzKTtcclxuXHJcblx0XHRcdHRyaWFuZ2xlR2VvbWV0cnkudXBkYXRlUG9zaXRpb25zKHBvc2l0aW9ucyk7XHJcblx0XHRcdHRyaWFuZ2xlR2VvbWV0cnkudXBkYXRlVmVydGV4Tm9ybWFscyhub3JtYWxzKTtcclxuXHRcdFx0dHJpYW5nbGVHZW9tZXRyeS51cGRhdGVWZXJ0ZXhUYW5nZW50cyh0YW5nZW50cyk7XHJcblxyXG5cdFx0fSBlbHNlIGlmIChnZW9tZXRyeVR5cGUgPT0gXCJsaW5lU3ViR2VvbWV0cnlcIikge1xyXG5cdFx0XHQvL1RPRE9cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBpbmhlcml0RG9jXHJcblx0ICovXHJcblx0cHVibGljIF9wQnVpbGRVVnModGFyZ2V0OlN1Ykdlb21ldHJ5QmFzZSwgZ2VvbWV0cnlUeXBlOnN0cmluZylcclxuXHR7XHJcblx0XHR2YXIgaTpudW1iZXIsIGo6bnVtYmVyO1xyXG5cdFx0dmFyIHV2czpBcnJheTxudW1iZXI+O1xyXG5cclxuXHJcblx0XHRpZiAoZ2VvbWV0cnlUeXBlID09IFwidHJpYW5nbGVTdWJHZW9tZXRyeVwiKSB7XHJcblxyXG5cdFx0XHR2YXIgdHJpYW5nbGVHZW9tZXRyeTpUcmlhbmdsZVN1Ykdlb21ldHJ5ID0gPFRyaWFuZ2xlU3ViR2VvbWV0cnk+IHRhcmdldDtcclxuXHJcblx0XHRcdC8vIG5lZWQgdG8gaW5pdGlhbGl6ZSByYXcgYXJyYXkgb3IgY2FuIGJlIHJldXNlZD9cclxuXHRcdFx0aWYgKHRyaWFuZ2xlR2VvbWV0cnkudXZzICYmIHRoaXMuX251bVZlcnRpY2VzID09IHRyaWFuZ2xlR2VvbWV0cnkubnVtVmVydGljZXMpIHtcclxuXHRcdFx0XHR1dnMgPSB0cmlhbmdsZUdlb21ldHJ5LnV2cztcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR1dnMgPSBuZXcgQXJyYXk8bnVtYmVyPih0aGlzLl9udW1WZXJ0aWNlcyoyKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gY3VycmVudCB1diBjb21wb25lbnQgaW5kZXhcclxuXHRcdFx0dmFyIGluZGV4Om51bWJlciA9IDA7XHJcblxyXG5cdFx0XHQvLyBzdXJmYWNlXHJcblx0XHRcdGZvciAoaiA9IDA7IGogPD0gdGhpcy5fc2VnbWVudHNIOyArK2opIHtcclxuXHRcdFx0XHRmb3IgKGkgPSAwOyBpIDw9IHRoaXMuX3NlZ21lbnRzVzsgKytpKSB7XHJcblx0XHRcdFx0XHQvLyByZXZvbHV0aW9uIHZlcnRleFxyXG5cdFx0XHRcdFx0dXZzW2luZGV4KytdID0gKCBpL3RoaXMuX3NlZ21lbnRzVyApKnRyaWFuZ2xlR2VvbWV0cnkuc2NhbGVVO1xyXG5cdFx0XHRcdFx0dXZzW2luZGV4KytdID0gKCBqL3RoaXMuX3NlZ21lbnRzSCApKnRyaWFuZ2xlR2VvbWV0cnkuc2NhbGVWO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gYnVpbGQgcmVhbCBkYXRhIGZyb20gcmF3IGRhdGFcclxuXHRcdFx0dHJpYW5nbGVHZW9tZXRyeS51cGRhdGVVVnModXZzKTtcclxuXHJcblx0XHR9IGVsc2UgaWYgKGdlb21ldHJ5VHlwZSA9PSBcImxpbmVTdWJHZW9tZXRyeVwiKSB7XHJcblx0XHRcdC8vbm90aGluZyB0byBkbyBoZXJlXHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgPSBQcmltaXRpdmVDYXBzdWxlUHJlZmFiOyJdfQ==