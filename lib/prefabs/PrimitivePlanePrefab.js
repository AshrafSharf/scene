var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var PrimitivePrefabBase = require("awayjs-display/lib/prefabs/PrimitivePrefabBase");
/**
 * A Plane primitive mesh.
 */
var PrimitivePlanePrefab = (function (_super) {
    __extends(PrimitivePlanePrefab, _super);
    /**
     * Creates a new Plane object.
     * @param width The width of the plane.
     * @param height The height of the plane.
     * @param segmentsW The number of segments that make up the plane along the X-axis.
     * @param segmentsH The number of segments that make up the plane along the Y or Z-axis.
     * @param yUp Defines whether the normal vector of the plane should point along the Y-axis (true) or Z-axis (false).
     * @param doubleSided Defines whether the plane will be visible from both sides, with correct vertex normals.
     */
    function PrimitivePlanePrefab(width, height, segmentsW, segmentsH, yUp, doubleSided) {
        if (width === void 0) { width = 100; }
        if (height === void 0) { height = 100; }
        if (segmentsW === void 0) { segmentsW = 1; }
        if (segmentsH === void 0) { segmentsH = 1; }
        if (yUp === void 0) { yUp = true; }
        if (doubleSided === void 0) { doubleSided = false; }
        _super.call(this);
        this._segmentsW = segmentsW;
        this._segmentsH = segmentsH;
        this._yUp = yUp;
        this._width = width;
        this._height = height;
        this._doubleSided = doubleSided;
    }
    Object.defineProperty(PrimitivePlanePrefab.prototype, "segmentsW", {
        /**
         * The number of segments that make up the plane along the X-axis. Defaults to 1.
         */
        get: function () {
            return this._segmentsW;
        },
        set: function (value) {
            this._segmentsW = value;
            this._pInvalidateGeometry();
            this._pInvalidateUVs();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrimitivePlanePrefab.prototype, "segmentsH", {
        /**
         * The number of segments that make up the plane along the Y or Z-axis, depending on whether yUp is true or
         * false, respectively. Defaults to 1.
         */
        get: function () {
            return this._segmentsH;
        },
        set: function (value) {
            this._segmentsH = value;
            this._pInvalidateGeometry();
            this._pInvalidateUVs();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrimitivePlanePrefab.prototype, "yUp", {
        /**
         *  Defines whether the normal vector of the plane should point along the Y-axis (true) or Z-axis (false). Defaults to true.
         */
        get: function () {
            return this._yUp;
        },
        set: function (value) {
            this._yUp = value;
            this._pInvalidateGeometry();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrimitivePlanePrefab.prototype, "doubleSided", {
        /**
         * Defines whether the plane will be visible from both sides, with correct vertex normals (as opposed to bothSides on Material). Defaults to false.
         */
        get: function () {
            return this._doubleSided;
        },
        set: function (value) {
            this._doubleSided = value;
            this._pInvalidateGeometry();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrimitivePlanePrefab.prototype, "width", {
        /**
         * The width of the plane.
         */
        get: function () {
            return this._width;
        },
        set: function (value) {
            this._width = value;
            this._pInvalidateGeometry();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrimitivePlanePrefab.prototype, "height", {
        /**
         * The height of the plane.
         */
        get: function () {
            return this._height;
        },
        set: function (value) {
            this._height = value;
            this._pInvalidateGeometry();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @inheritDoc
     */
    PrimitivePlanePrefab.prototype._pBuildGeometry = function (target, geometryType) {
        var indices /*uint*/;
        var x, y;
        var numIndices;
        var base;
        var tw = this._segmentsW + 1;
        var numVertices;
        var vidx, fidx; // indices
        var xi;
        var yi;
        if (geometryType == "triangleSubGeometry") {
            var triangleGeometry = target;
            var numVertices = (this._segmentsH + 1) * tw;
            var positions;
            var normals;
            var tangents;
            if (this._doubleSided)
                numVertices *= 2;
            numIndices = this._segmentsH * this._segmentsW * 6;
            if (this._doubleSided)
                numIndices *= 2;
            if (triangleGeometry.indices != null && numIndices == triangleGeometry.indices.length) {
                indices = triangleGeometry.indices;
            }
            else {
                indices = new Array(numIndices);
                this._pInvalidateUVs();
            }
            if (numVertices == triangleGeometry.numVertices) {
                positions = triangleGeometry.positions;
                normals = triangleGeometry.vertexNormals;
                tangents = triangleGeometry.vertexTangents;
            }
            else {
                positions = new Array(numVertices * 3);
                normals = new Array(numVertices * 3);
                tangents = new Array(numVertices * 3);
                this._pInvalidateUVs();
            }
            fidx = 0;
            vidx = 0;
            for (yi = 0; yi <= this._segmentsH; ++yi) {
                for (xi = 0; xi <= this._segmentsW; ++xi) {
                    x = (xi / this._segmentsW - .5) * this._width;
                    y = (yi / this._segmentsH - .5) * this._height;
                    positions[vidx] = x;
                    if (this._yUp) {
                        positions[vidx + 1] = 0;
                        positions[vidx + 2] = y;
                    }
                    else {
                        positions[vidx + 1] = y;
                        positions[vidx + 2] = 0;
                    }
                    normals[vidx] = 0;
                    if (this._yUp) {
                        normals[vidx + 1] = 1;
                        normals[vidx + 2] = 0;
                    }
                    else {
                        normals[vidx + 1] = 0;
                        normals[vidx + 2] = -1;
                    }
                    tangents[vidx] = 1;
                    tangents[vidx + 1] = 0;
                    tangents[vidx + 2] = 0;
                    vidx += 3;
                    // add vertex with same position, but with inverted normal & tangent
                    if (this._doubleSided) {
                        for (var i = vidx; i < vidx + 3; ++i) {
                            positions[i] = positions[i - 3];
                            normals[i] = -normals[i - 3];
                            tangents[i] = -tangents[i - 3];
                        }
                        vidx += 3;
                    }
                    if (xi != this._segmentsW && yi != this._segmentsH) {
                        base = xi + yi * tw;
                        var mult = this._doubleSided ? 2 : 1;
                        indices[fidx++] = base * mult;
                        indices[fidx++] = (base + tw) * mult;
                        indices[fidx++] = (base + tw + 1) * mult;
                        indices[fidx++] = base * mult;
                        indices[fidx++] = (base + tw + 1) * mult;
                        indices[fidx++] = (base + 1) * mult;
                        if (this._doubleSided) {
                            indices[fidx++] = (base + tw + 1) * mult + 1;
                            indices[fidx++] = (base + tw) * mult + 1;
                            indices[fidx++] = base * mult + 1;
                            indices[fidx++] = (base + 1) * mult + 1;
                            indices[fidx++] = (base + tw + 1) * mult + 1;
                            indices[fidx++] = base * mult + 1;
                        }
                    }
                }
            }
            triangleGeometry.updateIndices(indices);
            triangleGeometry.updatePositions(positions);
            triangleGeometry.updateVertexNormals(normals);
            triangleGeometry.updateVertexTangents(tangents);
        }
        else if (geometryType == "lineSubGeometry") {
            var lineGeometry = target;
            var numSegments = (this._segmentsH + 1) + tw;
            var startPositions;
            var endPositions;
            var thickness;
            var hw = this._width / 2;
            var hh = this._height / 2;
            if (lineGeometry.indices != null && numSegments == lineGeometry.numSegments) {
                startPositions = lineGeometry.startPositions;
                endPositions = lineGeometry.endPositions;
                thickness = lineGeometry.thickness;
            }
            else {
                startPositions = new Array(numSegments * 3);
                endPositions = new Array(numSegments * 3);
                thickness = new Array(numSegments);
            }
            fidx = 0;
            vidx = 0;
            for (yi = 0; yi <= this._segmentsH; ++yi) {
                startPositions[vidx] = -hw;
                startPositions[vidx + 1] = 0;
                startPositions[vidx + 2] = yi * this._height - hh;
                endPositions[vidx] = hw;
                endPositions[vidx + 1] = 0;
                endPositions[vidx + 2] = yi * this._height - hh;
                thickness[fidx++] = 1;
                vidx += 3;
            }
            for (xi = 0; xi <= this._segmentsW; ++xi) {
                startPositions[vidx] = xi * this._width - hw;
                startPositions[vidx + 1] = 0;
                startPositions[vidx + 2] = -hh;
                endPositions[vidx] = xi * this._width - hw;
                endPositions[vidx + 1] = 0;
                endPositions[vidx + 2] = hh;
                thickness[fidx++] = 1;
                vidx += 3;
            }
            // build real data from raw data
            lineGeometry.updatePositions(startPositions, endPositions);
            lineGeometry.updateThickness(thickness);
        }
    };
    /**
     * @inheritDoc
     */
    PrimitivePlanePrefab.prototype._pBuildUVs = function (target, geometryType) {
        var uvs;
        var numVertices;
        if (geometryType == "triangleSubGeometry") {
            numVertices = (this._segmentsH + 1) * (this._segmentsW + 1);
            if (this._doubleSided)
                numVertices *= 2;
            var triangleGeometry = target;
            if (triangleGeometry.uvs && numVertices == triangleGeometry.numVertices) {
                uvs = triangleGeometry.uvs;
            }
            else {
                uvs = new Array(numVertices * 2);
                this._pInvalidateGeometry();
            }
            var index = 0;
            for (var yi = 0; yi <= this._segmentsH; ++yi) {
                for (var xi = 0; xi <= this._segmentsW; ++xi) {
                    uvs[index] = (xi / this._segmentsW) * triangleGeometry.scaleU;
                    uvs[index + 1] = (1 - yi / this._segmentsH) * triangleGeometry.scaleV;
                    index += 2;
                    if (this._doubleSided) {
                        uvs[index] = (xi / this._segmentsW) * triangleGeometry.scaleU;
                        uvs[index + 1] = (1 - yi / this._segmentsH) * triangleGeometry.scaleV;
                        index += 2;
                    }
                }
            }
            triangleGeometry.updateUVs(uvs);
        }
        else if (geometryType == "lineSubGeometry") {
        }
    };
    return PrimitivePlanePrefab;
})(PrimitivePrefabBase);
module.exports = PrimitivePlanePrefab;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1kaXNwbGF5L2xpYi9wcmVmYWJzL1ByaW1pdGl2ZVBsYW5lUHJlZmFiLnRzIl0sIm5hbWVzIjpbIlByaW1pdGl2ZVBsYW5lUHJlZmFiIiwiUHJpbWl0aXZlUGxhbmVQcmVmYWIuY29uc3RydWN0b3IiLCJQcmltaXRpdmVQbGFuZVByZWZhYi5zZWdtZW50c1ciLCJQcmltaXRpdmVQbGFuZVByZWZhYi5zZWdtZW50c0giLCJQcmltaXRpdmVQbGFuZVByZWZhYi55VXAiLCJQcmltaXRpdmVQbGFuZVByZWZhYi5kb3VibGVTaWRlZCIsIlByaW1pdGl2ZVBsYW5lUHJlZmFiLndpZHRoIiwiUHJpbWl0aXZlUGxhbmVQcmVmYWIuaGVpZ2h0IiwiUHJpbWl0aXZlUGxhbmVQcmVmYWIuX3BCdWlsZEdlb21ldHJ5IiwiUHJpbWl0aXZlUGxhbmVQcmVmYWIuX3BCdWlsZFVWcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBS0EsSUFBTyxtQkFBbUIsV0FBWSxnREFBZ0QsQ0FBQyxDQUFDO0FBRXhGLEFBR0E7O0dBREc7SUFDRyxvQkFBb0I7SUFBU0EsVUFBN0JBLG9CQUFvQkEsVUFBNEJBO0lBU3JEQTs7Ozs7Ozs7T0FRR0E7SUFDSEEsU0FsQktBLG9CQUFvQkEsQ0FrQmJBLEtBQWtCQSxFQUFFQSxNQUFtQkEsRUFBRUEsU0FBb0JBLEVBQUVBLFNBQW9CQSxFQUFFQSxHQUFrQkEsRUFBRUEsV0FBMkJBO1FBQXBJQyxxQkFBa0JBLEdBQWxCQSxXQUFrQkE7UUFBRUEsc0JBQW1CQSxHQUFuQkEsWUFBbUJBO1FBQUVBLHlCQUFvQkEsR0FBcEJBLGFBQW9CQTtRQUFFQSx5QkFBb0JBLEdBQXBCQSxhQUFvQkE7UUFBRUEsbUJBQWtCQSxHQUFsQkEsVUFBa0JBO1FBQUVBLDJCQUEyQkEsR0FBM0JBLG1CQUEyQkE7UUFHL0lBLGlCQUFPQSxDQUFDQTtRQUVSQSxJQUFJQSxDQUFDQSxVQUFVQSxHQUFHQSxTQUFTQSxDQUFDQTtRQUM1QkEsSUFBSUEsQ0FBQ0EsVUFBVUEsR0FB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VUEsR0FBR0EsRUFBRUEsQ0FBQ0EsR0FBQ0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0E7b0JBQzFDQSxDQUFDQSxHQUFHQSxDQUFDQSxFQUFFQSxHQUFDQSxJQUFJQSxDQUFDQSxVQUFVQSxHQUFHQSxFQUFFQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQTtvQkFFM0NBLFNBQVNBLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO29CQUNwQkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7d0JBQ2ZBLFNBQVNBLENBQUNBLElBQUlBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO3dCQUN4QkEsU0FBU0EsQ0FBQ0EsSUFBSUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7b0JBQ3pCQSxDQUFDQTtvQkFBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7d0JBQ1BBLFNBQVNBLENBQUNBLElBQUlBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO3dCQUN4QkEsU0FBU0EsQ0FBQ0EsSUFBSUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7b0JBQ3pCQSxDQUFDQTtvQkFFREEsT0FBT0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7b0JBRWxCQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQTt3QkFDZkEsT0FBT0EsQ0FBQ0EsSUFBSUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7d0JBQ3RCQSxPQUFPQSxDQUFDQSxJQUFJQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtvQkFDdkJBLENBQUNBO29CQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTt3QkFDUEEsT0FBT0EsQ0FBQ0EsSUFBSUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7d0JBQ3RCQSxPQUFPQSxDQUFDQSxJQUFJQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQTtvQkFDeEJBLENBQUNBO29CQUVEQSxRQUFRQSxDQUFDQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtvQkFDbkJBLFFBQVFBLENBQUNBLElBQUlBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO29CQUN2QkEsUUFBUUEsQ0FBQ0EsSUFBSUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7b0JBRXZCQSxJQUFJQSxJQUFJQSxDQUFDQSxDQUFDQTtvQkFFVkEsQUFDQUEsb0VBRG9FQTtvQkFDcEVBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFlBQVlBLENBQUNBLENBQUNBLENBQUNBO3dCQUV2QkEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBVUEsSUFBSUEsRUFBRUEsQ0FBQ0EsR0FBR0EsSUFBSUEsR0FBR0EsQ0FBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsQ0FBQ0E7NEJBQzdDQSxTQUFTQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxTQUFTQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQTs0QkFDaENBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBOzRCQUM3QkEsUUFBUUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7d0JBQ2hDQSxDQUFDQTt3QkFFREEsSUFBSUEsSUFBSUEsQ0FBQ0EsQ0FBQ0E7b0JBRVhBLENBQUNBO29CQUVEQSxFQUFFQSxDQUFDQSxDQUFDQSxFQUFFQSxJQUFJQSxJQUFJQSxDQUFDQSxVQUFVQSxJQUFJQSxFQUFFQSxJQUFJQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQSxDQUFDQTt3QkFFcERBLElBQUlBLEdBQUdBLEVBQUVBLEdBQUdBLEVBQUVBLEdBQUNBLEVBQUVBLENBQUNBO3dCQUNsQkEsSUFBSUEsSUFBSUEsR0FBVUEsSUFBSUEsQ0FBQ0EsWUFBWUEsR0FBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7d0JBRTNDQSxPQUFPQSxDQUFDQSxJQUFJQSxFQUFFQSxDQUFDQSxHQUFHQSxJQUFJQSxHQUFDQSxJQUFJQSxDQUFDQTt3QkFDNUJBLE9BQU9BLENBQUNBLElBQUlBLEVBQUVBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLEdBQUdBLEVBQUVBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBO3dCQUNuQ0EsT0FBT0EsQ0FBQ0EsSUFBSUEsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsR0FBR0EsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBQ0EsSUFBSUEsQ0FBQ0E7d0JBQ3ZDQSxPQUFPQSxDQUFDQSxJQUFJQSxFQUFFQSxDQUFDQSxHQUFHQSxJQUFJQSxHQUFDQSxJQUFJQSxDQUFDQTt3QkFDNUJBLE9BQU9BLENBQUNBLElBQUlBLEVBQUVBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLEdBQUdBLEVBQUVBLEdBQUdBLENBQUNBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBO3dCQUN2Q0EsT0FBT0EsQ0FBQ0EsSUFBSUEsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBQ0EsSUFBSUEsQ0FBQ0E7d0JBRWxDQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxDQUFDQSxDQUFDQSxDQUFDQTs0QkFFdkJBLE9BQU9BLENBQUNBLElBQUlBLEVBQUVBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLEdBQUdBLEVBQUVBLEdBQUdBLENBQUNBLENBQUNBLEdBQUNBLElBQUlBLEdBQUdBLENBQUNBLENBQUNBOzRCQUMzQ0EsT0FBT0EsQ0FBQ0EsSUFBSUEsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFB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QWdCQSxDQUFDQSxHQUFHQSxDQUFDQTtZQUM1QkEsQ0FBQ0E7WUFBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7Z0JBQ1BBLEdBQUdBLEdBQUdBLElBQUlBLEtBQUtBLENBQVNBLFdBQVdBLEdBQUNBLENBQUNBLENBQUNBLENBQUNBO2dCQUN2Q0EsSUFBSUEsQ0FBQ0Esb0JBQW9CQSxFQUFFQSxDQUFBQTtZQUM1QkEsQ0FBQ0E7WUFFREEsSUFBSUEsS0FBS0EsR0FBVUEsQ0FBQ0EsQ0FBQ0E7WUFFckJBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLEVBQUVBLEdBQVVBLENBQUNBLEVBQUVBLEVBQUVBLElBQUlBLElBQUlBLENBQUNBLFVBQVVBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLENBQUNBO2dCQUVyREEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsRUFBRUEsR0FBVUEsQ0FBQ0EsRUFBRUEsRUFBRUEsSUFBSUEsSUFBSUEsQ0FBQ0EsVUFBVUEsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsQ0FBQ0E7b0JBQ3JEQSxHQUFHQSxDQUFDQSxLQUFLQSxDQUFDQSxHQUFHQSxDQUFDQSxFQUFFQSxHQUFDQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxHQUFDQSxnQkFBZ0JBLENBQUNBLE1BQU1BLENBQUNBO29CQUMxREEsR0FBR0EsQ0FBQ0EsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsRUFBRUEsR0FBQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsR0FBQ0EsZ0JBQWdCQSxDQUFDQSxNQUFNQSxDQUFDQTtvQkFDbEVBLEtBQUtBLElBQUlBLENBQUNBLENBQUNBO29CQUVYQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxDQUFDQSxDQUFDQSxDQUFDQTt3QkFDdkJBLEdBQUdBLENBQUNBLEtBQUtBLENBQUNBLEdBQUdBLENBQUNBLEVBQUVBLEdBQUNBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLEdBQUNBLGdCQUFnQkEsQ0FBQ0EsTUFBTUEsQ0FBQ0E7d0JBQzFEQSxHQUFHQSxDQUFDQSxLQUFLQSxHQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxFQUFFQSxHQUFDQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxHQUFDQSxnQkFBZ0JBLENBQUNBLE1BQU1BLENBQUNBO3dCQUNoRUEsS0FBS0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7b0JBQ1pBLENBQUNBO2dCQUNGQSxDQUFDQTtZQUNGQSxDQUFDQTtZQUVEQSxnQkFBZ0JBLENBQUNBLFNBQVNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO1FBR2pDQSxDQUFDQTtRQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxZQUFZQSxJQUFJQSxpQkFBaUJBLENBQUNBLENBQUNBLENBQUNBO1FBRS9DQSxDQUFDQTtJQUNGQSxDQUFDQTtJQUNGVCwyQkFBQ0E7QUFBREEsQ0FwWEEsQUFvWENBLEVBcFhrQyxtQkFBbUIsRUFvWHJEO0FBRUQsQUFBOEIsaUJBQXJCLG9CQUFvQixDQUFDIiwiZmlsZSI6InByZWZhYnMvUHJpbWl0aXZlUGxhbmVQcmVmYWIuanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IElBc3NldFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvbGlicmFyeS9JQXNzZXRcIik7XHJcblxyXG5pbXBvcnQgTGluZVN1Ykdlb21ldHJ5XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2Jhc2UvTGluZVN1Ykdlb21ldHJ5XCIpO1xyXG5pbXBvcnQgU3ViR2VvbWV0cnlCYXNlXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2Jhc2UvU3ViR2VvbWV0cnlCYXNlXCIpO1xyXG5pbXBvcnQgVHJpYW5nbGVTdWJHZW9tZXRyeVx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvYmFzZS9UcmlhbmdsZVN1Ykdlb21ldHJ5XCIpO1xyXG5pbXBvcnQgUHJpbWl0aXZlUHJlZmFiQmFzZVx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvcHJlZmFicy9QcmltaXRpdmVQcmVmYWJCYXNlXCIpO1xyXG5cclxuLyoqXHJcbiAqIEEgUGxhbmUgcHJpbWl0aXZlIG1lc2guXHJcbiAqL1xyXG5jbGFzcyBQcmltaXRpdmVQbGFuZVByZWZhYiBleHRlbmRzIFByaW1pdGl2ZVByZWZhYkJhc2UgaW1wbGVtZW50cyBJQXNzZXRcclxue1xyXG5cdHByaXZhdGUgX3NlZ21lbnRzVzpudW1iZXI7XHJcblx0cHJpdmF0ZSBfc2VnbWVudHNIOm51bWJlcjtcclxuXHRwcml2YXRlIF95VXA6Ym9vbGVhbjtcclxuXHRwcml2YXRlIF93aWR0aDpudW1iZXI7XHJcblx0cHJpdmF0ZSBfaGVpZ2h0Om51bWJlcjtcclxuXHRwcml2YXRlIF9kb3VibGVTaWRlZDpib29sZWFuO1xyXG5cclxuXHQvKipcclxuXHQgKiBDcmVhdGVzIGEgbmV3IFBsYW5lIG9iamVjdC5cclxuXHQgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSBwbGFuZS5cclxuXHQgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHBsYW5lLlxyXG5cdCAqIEBwYXJhbSBzZWdtZW50c1cgVGhlIG51bWJlciBvZiBzZWdtZW50cyB0aGF0IG1ha2UgdXAgdGhlIHBsYW5lIGFsb25nIHRoZSBYLWF4aXMuXHJcblx0ICogQHBhcmFtIHNlZ21lbnRzSCBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIHRoYXQgbWFrZSB1cCB0aGUgcGxhbmUgYWxvbmcgdGhlIFkgb3IgWi1heGlzLlxyXG5cdCAqIEBwYXJhbSB5VXAgRGVmaW5lcyB3aGV0aGVyIHRoZSBub3JtYWwgdmVjdG9yIG9mIHRoZSBwbGFuZSBzaG91bGQgcG9pbnQgYWxvbmcgdGhlIFktYXhpcyAodHJ1ZSkgb3IgWi1heGlzIChmYWxzZSkuXHJcblx0ICogQHBhcmFtIGRvdWJsZVNpZGVkIERlZmluZXMgd2hldGhlciB0aGUgcGxhbmUgd2lsbCBiZSB2aXNpYmxlIGZyb20gYm90aCBzaWRlcywgd2l0aCBjb3JyZWN0IHZlcnRleCBub3JtYWxzLlxyXG5cdCAqL1xyXG5cdGNvbnN0cnVjdG9yKHdpZHRoOm51bWJlciA9IDEwMCwgaGVpZ2h0Om51bWJlciA9IDEwMCwgc2VnbWVudHNXOm51bWJlciA9IDEsIHNlZ21lbnRzSDpudW1iZXIgPSAxLCB5VXA6Ym9vbGVhbiA9IHRydWUsIGRvdWJsZVNpZGVkOmJvb2xlYW4gPSBmYWxzZSlcclxuXHR7XHJcblxyXG5cdFx0c3VwZXIoKTtcclxuXHJcblx0XHR0aGlzLl9zZWdtZW50c1cgPSBzZWdtZW50c1c7XHJcblx0XHR0aGlzLl9zZWdtZW50c0ggPSBzZWdtZW50c0g7XHJcblx0XHR0aGlzLl95VXAgPSB5VXA7XHJcblx0XHR0aGlzLl93aWR0aCA9IHdpZHRoO1xyXG5cdFx0dGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xyXG5cdFx0dGhpcy5fZG91YmxlU2lkZWQgPSBkb3VibGVTaWRlZDtcclxuXHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIHRoYXQgbWFrZSB1cCB0aGUgcGxhbmUgYWxvbmcgdGhlIFgtYXhpcy4gRGVmYXVsdHMgdG8gMS5cclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0IHNlZ21lbnRzVygpOm51bWJlclxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9zZWdtZW50c1c7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IHNlZ21lbnRzVyh2YWx1ZTpudW1iZXIpXHJcblx0e1xyXG5cclxuXHRcdHRoaXMuX3NlZ21lbnRzVyA9IHZhbHVlO1xyXG5cclxuXHRcdHRoaXMuX3BJbnZhbGlkYXRlR2VvbWV0cnkoKTtcclxuXHRcdHRoaXMuX3BJbnZhbGlkYXRlVVZzKCk7XHJcblxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVGhlIG51bWJlciBvZiBzZWdtZW50cyB0aGF0IG1ha2UgdXAgdGhlIHBsYW5lIGFsb25nIHRoZSBZIG9yIFotYXhpcywgZGVwZW5kaW5nIG9uIHdoZXRoZXIgeVVwIGlzIHRydWUgb3JcclxuXHQgKiBmYWxzZSwgcmVzcGVjdGl2ZWx5LiBEZWZhdWx0cyB0byAxLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBnZXQgc2VnbWVudHNIKCk6bnVtYmVyXHJcblx0e1xyXG5cdFx0cmV0dXJuIHRoaXMuX3NlZ21lbnRzSDtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXQgc2VnbWVudHNIKHZhbHVlOm51bWJlcilcclxuXHR7XHJcblxyXG5cdFx0dGhpcy5fc2VnbWVudHNIID0gdmFsdWU7XHJcblxyXG5cdFx0dGhpcy5fcEludmFsaWRhdGVHZW9tZXRyeSgpO1xyXG5cdFx0dGhpcy5fcEludmFsaWRhdGVVVnMoKTtcclxuXHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiAgRGVmaW5lcyB3aGV0aGVyIHRoZSBub3JtYWwgdmVjdG9yIG9mIHRoZSBwbGFuZSBzaG91bGQgcG9pbnQgYWxvbmcgdGhlIFktYXhpcyAodHJ1ZSkgb3IgWi1heGlzIChmYWxzZSkuIERlZmF1bHRzIHRvIHRydWUuXHJcblx0ICovXHJcblx0cHVibGljIGdldCB5VXAoKTpib29sZWFuXHJcblx0e1xyXG5cdFx0cmV0dXJuIHRoaXMuX3lVcDtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXQgeVVwKHZhbHVlOmJvb2xlYW4pXHJcblx0e1xyXG5cdFx0dGhpcy5feVVwID0gdmFsdWU7XHJcblxyXG5cdFx0dGhpcy5fcEludmFsaWRhdGVHZW9tZXRyeSgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRGVmaW5lcyB3aGV0aGVyIHRoZSBwbGFuZSB3aWxsIGJlIHZpc2libGUgZnJvbSBib3RoIHNpZGVzLCB3aXRoIGNvcnJlY3QgdmVydGV4IG5vcm1hbHMgKGFzIG9wcG9zZWQgdG8gYm90aFNpZGVzIG9uIE1hdGVyaWFsKS4gRGVmYXVsdHMgdG8gZmFsc2UuXHJcblx0ICovXHJcblx0cHVibGljIGdldCBkb3VibGVTaWRlZCgpOmJvb2xlYW5cclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5fZG91YmxlU2lkZWQ7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IGRvdWJsZVNpZGVkKHZhbHVlOmJvb2xlYW4pXHJcblx0e1xyXG5cdFx0dGhpcy5fZG91YmxlU2lkZWQgPSB2YWx1ZTtcclxuXHJcblx0XHR0aGlzLl9wSW52YWxpZGF0ZUdlb21ldHJ5KCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUaGUgd2lkdGggb2YgdGhlIHBsYW5lLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBnZXQgd2lkdGgoKTpudW1iZXJcclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5fd2lkdGg7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IHdpZHRoKHZhbHVlOm51bWJlcilcclxuXHR7XHJcblx0XHR0aGlzLl93aWR0aCA9IHZhbHVlO1xyXG5cclxuXHRcdHRoaXMuX3BJbnZhbGlkYXRlR2VvbWV0cnkoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRoZSBoZWlnaHQgb2YgdGhlIHBsYW5lLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBnZXQgaGVpZ2h0KCk6bnVtYmVyXHJcblx0e1xyXG5cdFx0cmV0dXJuIHRoaXMuX2hlaWdodDtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXQgaGVpZ2h0KHZhbHVlOm51bWJlcilcclxuXHR7XHJcblx0XHR0aGlzLl9oZWlnaHQgPSB2YWx1ZTtcclxuXHJcblx0XHR0aGlzLl9wSW52YWxpZGF0ZUdlb21ldHJ5KCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBAaW5oZXJpdERvY1xyXG5cdCAqL1xyXG5cdHB1YmxpYyBfcEJ1aWxkR2VvbWV0cnkodGFyZ2V0OlN1Ykdlb21ldHJ5QmFzZSwgZ2VvbWV0cnlUeXBlOnN0cmluZylcclxuXHR7XHJcblx0XHR2YXIgaW5kaWNlczpBcnJheTxudW1iZXI+IC8qdWludCovO1xyXG5cdFx0dmFyIHg6bnVtYmVyLCB5Om51bWJlcjtcclxuXHRcdHZhciBudW1JbmRpY2VzOm51bWJlcjtcclxuXHRcdHZhciBiYXNlOm51bWJlcjtcclxuXHRcdHZhciB0dzpudW1iZXIgPSB0aGlzLl9zZWdtZW50c1cgKyAxO1xyXG5cdFx0dmFyIG51bVZlcnRpY2VzOm51bWJlcjtcclxuXHJcblx0XHR2YXIgdmlkeDpudW1iZXIsIGZpZHg6bnVtYmVyOyAvLyBpbmRpY2VzXHJcblxyXG5cdFx0dmFyIHhpOm51bWJlcjtcclxuXHRcdHZhciB5aTpudW1iZXI7XHJcblxyXG5cdFx0aWYgKGdlb21ldHJ5VHlwZSA9PSBcInRyaWFuZ2xlU3ViR2VvbWV0cnlcIikge1xyXG5cclxuXHRcdFx0dmFyIHRyaWFuZ2xlR2VvbWV0cnk6VHJpYW5nbGVTdWJHZW9tZXRyeSA9IDxUcmlhbmdsZVN1Ykdlb21ldHJ5PiB0YXJnZXQ7XHJcblxyXG5cdFx0XHR2YXIgbnVtVmVydGljZXM6bnVtYmVyID0gKHRoaXMuX3NlZ21lbnRzSCArIDEpKnR3O1xyXG5cdFx0XHR2YXIgcG9zaXRpb25zOkFycmF5PG51bWJlcj47XHJcblx0XHRcdHZhciBub3JtYWxzOkFycmF5PG51bWJlcj47XHJcblx0XHRcdHZhciB0YW5nZW50czpBcnJheTxudW1iZXI+O1xyXG5cclxuXHRcdFx0aWYgKHRoaXMuX2RvdWJsZVNpZGVkKVxyXG5cdFx0XHRcdG51bVZlcnRpY2VzICo9IDI7XHJcblxyXG5cdFx0XHRudW1JbmRpY2VzID0gdGhpcy5fc2VnbWVudHNIKnRoaXMuX3NlZ21lbnRzVyo2O1xyXG5cclxuXHRcdFx0aWYgKHRoaXMuX2RvdWJsZVNpZGVkKVxyXG5cdFx0XHRcdG51bUluZGljZXMgKj0gMjtcclxuXHJcblx0XHRcdGlmICh0cmlhbmdsZUdlb21ldHJ5LmluZGljZXMgIT0gbnVsbCAmJiBudW1JbmRpY2VzID09IHRyaWFuZ2xlR2VvbWV0cnkuaW5kaWNlcy5sZW5ndGgpIHtcclxuXHRcdFx0XHRpbmRpY2VzID0gdHJpYW5nbGVHZW9tZXRyeS5pbmRpY2VzO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGluZGljZXMgPSBuZXcgQXJyYXk8bnVtYmVyPihudW1JbmRpY2VzKTtcclxuXHJcblx0XHRcdFx0dGhpcy5fcEludmFsaWRhdGVVVnMoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKG51bVZlcnRpY2VzID09IHRyaWFuZ2xlR2VvbWV0cnkubnVtVmVydGljZXMpIHtcclxuXHRcdFx0XHRwb3NpdGlvbnMgPSB0cmlhbmdsZUdlb21ldHJ5LnBvc2l0aW9ucztcclxuXHRcdFx0XHRub3JtYWxzID0gdHJpYW5nbGVHZW9tZXRyeS52ZXJ0ZXhOb3JtYWxzO1xyXG5cdFx0XHRcdHRhbmdlbnRzID0gdHJpYW5nbGVHZW9tZXRyeS52ZXJ0ZXhUYW5nZW50cztcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRwb3NpdGlvbnMgPSBuZXcgQXJyYXk8bnVtYmVyPihudW1WZXJ0aWNlcyozKTtcclxuXHRcdFx0XHRub3JtYWxzID0gbmV3IEFycmF5PG51bWJlcj4obnVtVmVydGljZXMqMyk7XHJcblx0XHRcdFx0dGFuZ2VudHMgPSBuZXcgQXJyYXk8bnVtYmVyPihudW1WZXJ0aWNlcyozKTtcclxuXHJcblx0XHRcdFx0dGhpcy5fcEludmFsaWRhdGVVVnMoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZmlkeCA9IDA7XHJcblxyXG5cdFx0XHR2aWR4ID0gMDtcclxuXHJcblx0XHRcdGZvciAoeWkgPSAwOyB5aSA8PSB0aGlzLl9zZWdtZW50c0g7ICsreWkpIHtcclxuXHJcblx0XHRcdFx0Zm9yICh4aSA9IDA7IHhpIDw9IHRoaXMuX3NlZ21lbnRzVzsgKyt4aSkge1xyXG5cdFx0XHRcdFx0eCA9ICh4aS90aGlzLl9zZWdtZW50c1cgLSAuNSkqdGhpcy5fd2lkdGg7XHJcblx0XHRcdFx0XHR5ID0gKHlpL3RoaXMuX3NlZ21lbnRzSCAtIC41KSp0aGlzLl9oZWlnaHQ7XHJcblxyXG5cdFx0XHRcdFx0cG9zaXRpb25zW3ZpZHhdID0geDtcclxuXHRcdFx0XHRcdGlmICh0aGlzLl95VXApIHtcclxuXHRcdFx0XHRcdFx0cG9zaXRpb25zW3ZpZHggKyAxXSA9IDA7XHJcblx0XHRcdFx0XHRcdHBvc2l0aW9uc1t2aWR4ICsgMl0gPSB5O1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0cG9zaXRpb25zW3ZpZHggKyAxXSA9IHk7XHJcblx0XHRcdFx0XHRcdHBvc2l0aW9uc1t2aWR4ICsgMl0gPSAwO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdG5vcm1hbHNbdmlkeF0gPSAwO1xyXG5cclxuXHRcdFx0XHRcdGlmICh0aGlzLl95VXApIHtcclxuXHRcdFx0XHRcdFx0bm9ybWFsc1t2aWR4ICsgMV0gPSAxO1xyXG5cdFx0XHRcdFx0XHRub3JtYWxzW3ZpZHggKyAyXSA9IDA7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRub3JtYWxzW3ZpZHggKyAxXSA9IDA7XHJcblx0XHRcdFx0XHRcdG5vcm1hbHNbdmlkeCArIDJdID0gLTE7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0dGFuZ2VudHNbdmlkeF0gPSAxO1xyXG5cdFx0XHRcdFx0dGFuZ2VudHNbdmlkeCArIDFdID0gMDtcclxuXHRcdFx0XHRcdHRhbmdlbnRzW3ZpZHggKyAyXSA9IDA7XHJcblxyXG5cdFx0XHRcdFx0dmlkeCArPSAzO1xyXG5cclxuXHRcdFx0XHRcdC8vIGFkZCB2ZXJ0ZXggd2l0aCBzYW1lIHBvc2l0aW9uLCBidXQgd2l0aCBpbnZlcnRlZCBub3JtYWwgJiB0YW5nZW50XHJcblx0XHRcdFx0XHRpZiAodGhpcy5fZG91YmxlU2lkZWQpIHtcclxuXHJcblx0XHRcdFx0XHRcdGZvciAodmFyIGk6bnVtYmVyID0gdmlkeDsgaSA8IHZpZHggKyAzOyArK2kpIHtcclxuXHRcdFx0XHRcdFx0XHRwb3NpdGlvbnNbaV0gPSBwb3NpdGlvbnNbaSAtIDNdO1xyXG5cdFx0XHRcdFx0XHRcdG5vcm1hbHNbaV0gPSAtbm9ybWFsc1tpIC0gM107XHJcblx0XHRcdFx0XHRcdFx0dGFuZ2VudHNbaV0gPSAtdGFuZ2VudHNbaSAtIDNdO1xyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHR2aWR4ICs9IDM7XHJcblxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmICh4aSAhPSB0aGlzLl9zZWdtZW50c1cgJiYgeWkgIT0gdGhpcy5fc2VnbWVudHNIKSB7XHJcblxyXG5cdFx0XHRcdFx0XHRiYXNlID0geGkgKyB5aSp0dztcclxuXHRcdFx0XHRcdFx0dmFyIG11bHQ6bnVtYmVyID0gdGhpcy5fZG91YmxlU2lkZWQ/IDIgOiAxO1xyXG5cclxuXHRcdFx0XHRcdFx0aW5kaWNlc1tmaWR4KytdID0gYmFzZSptdWx0O1xyXG5cdFx0XHRcdFx0XHRpbmRpY2VzW2ZpZHgrK10gPSAoYmFzZSArIHR3KSptdWx0O1xyXG5cdFx0XHRcdFx0XHRpbmRpY2VzW2ZpZHgrK10gPSAoYmFzZSArIHR3ICsgMSkqbXVsdDtcclxuXHRcdFx0XHRcdFx0aW5kaWNlc1tmaWR4KytdID0gYmFzZSptdWx0O1xyXG5cdFx0XHRcdFx0XHRpbmRpY2VzW2ZpZHgrK10gPSAoYmFzZSArIHR3ICsgMSkqbXVsdDtcclxuXHRcdFx0XHRcdFx0aW5kaWNlc1tmaWR4KytdID0gKGJhc2UgKyAxKSptdWx0O1xyXG5cclxuXHRcdFx0XHRcdFx0aWYgKHRoaXMuX2RvdWJsZVNpZGVkKSB7XHJcblxyXG5cdFx0XHRcdFx0XHRcdGluZGljZXNbZmlkeCsrXSA9IChiYXNlICsgdHcgKyAxKSptdWx0ICsgMTtcclxuXHRcdFx0XHRcdFx0XHRpbmRpY2VzW2ZpZHgrK10gPSAoYmFzZSArIHR3KSptdWx0ICsgMTtcclxuXHRcdFx0XHRcdFx0XHRpbmRpY2VzW2ZpZHgrK10gPSBiYXNlKm11bHQgKyAxO1xyXG5cdFx0XHRcdFx0XHRcdGluZGljZXNbZmlkeCsrXSA9IChiYXNlICsgMSkqbXVsdCArIDE7XHJcblx0XHRcdFx0XHRcdFx0aW5kaWNlc1tmaWR4KytdID0gKGJhc2UgKyB0dyArIDEpKm11bHQgKyAxO1xyXG5cdFx0XHRcdFx0XHRcdGluZGljZXNbZmlkeCsrXSA9IGJhc2UqbXVsdCArIDE7XHJcblxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0cmlhbmdsZUdlb21ldHJ5LnVwZGF0ZUluZGljZXMoaW5kaWNlcyk7XHJcblxyXG5cdFx0XHR0cmlhbmdsZUdlb21ldHJ5LnVwZGF0ZVBvc2l0aW9ucyhwb3NpdGlvbnMpO1xyXG5cdFx0XHR0cmlhbmdsZUdlb21ldHJ5LnVwZGF0ZVZlcnRleE5vcm1hbHMobm9ybWFscyk7XHJcblx0XHRcdHRyaWFuZ2xlR2VvbWV0cnkudXBkYXRlVmVydGV4VGFuZ2VudHModGFuZ2VudHMpO1xyXG5cclxuXHRcdH0gZWxzZSBpZiAoZ2VvbWV0cnlUeXBlID09IFwibGluZVN1Ykdlb21ldHJ5XCIpIHtcclxuXHRcdFx0dmFyIGxpbmVHZW9tZXRyeTpMaW5lU3ViR2VvbWV0cnkgPSA8TGluZVN1Ykdlb21ldHJ5PiB0YXJnZXQ7XHJcblxyXG5cdFx0XHR2YXIgbnVtU2VnbWVudHM6bnVtYmVyID0gKHRoaXMuX3NlZ21lbnRzSCArIDEpICsgdHc7XHJcblx0XHRcdHZhciBzdGFydFBvc2l0aW9uczpBcnJheTxudW1iZXI+O1xyXG5cdFx0XHR2YXIgZW5kUG9zaXRpb25zOkFycmF5PG51bWJlcj47XHJcblx0XHRcdHZhciB0aGlja25lc3M6QXJyYXk8bnVtYmVyPjtcclxuXHJcblx0XHRcdHZhciBodzpudW1iZXIgPSB0aGlzLl93aWR0aC8yO1xyXG5cdFx0XHR2YXIgaGg6bnVtYmVyID0gdGhpcy5faGVpZ2h0LzI7XHJcblxyXG5cclxuXHRcdFx0aWYgKGxpbmVHZW9tZXRyeS5pbmRpY2VzICE9IG51bGwgJiYgbnVtU2VnbWVudHMgPT0gbGluZUdlb21ldHJ5Lm51bVNlZ21lbnRzKSB7XHJcblx0XHRcdFx0c3RhcnRQb3NpdGlvbnMgPSBsaW5lR2VvbWV0cnkuc3RhcnRQb3NpdGlvbnM7XHJcblx0XHRcdFx0ZW5kUG9zaXRpb25zID0gbGluZUdlb21ldHJ5LmVuZFBvc2l0aW9ucztcclxuXHRcdFx0XHR0aGlja25lc3MgPSBsaW5lR2VvbWV0cnkudGhpY2tuZXNzO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHN0YXJ0UG9zaXRpb25zID0gbmV3IEFycmF5PG51bWJlcj4obnVtU2VnbWVudHMqMyk7XHJcblx0XHRcdFx0ZW5kUG9zaXRpb25zID0gbmV3IEFycmF5PG51bWJlcj4obnVtU2VnbWVudHMqMyk7XHJcblx0XHRcdFx0dGhpY2tuZXNzID0gbmV3IEFycmF5PG51bWJlcj4obnVtU2VnbWVudHMpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRmaWR4ID0gMDtcclxuXHJcblx0XHRcdHZpZHggPSAwO1xyXG5cclxuXHRcdFx0Zm9yICh5aSA9IDA7IHlpIDw9IHRoaXMuX3NlZ21lbnRzSDsgKyt5aSkge1xyXG5cdFx0XHRcdHN0YXJ0UG9zaXRpb25zW3ZpZHhdID0gLWh3O1xyXG5cdFx0XHRcdHN0YXJ0UG9zaXRpb25zW3ZpZHggKyAxXSA9IDA7XHJcblx0XHRcdFx0c3RhcnRQb3NpdGlvbnNbdmlkeCArIDJdID0geWkqdGhpcy5faGVpZ2h0IC0gaGg7XHJcblxyXG5cdFx0XHRcdGVuZFBvc2l0aW9uc1t2aWR4XSA9IGh3O1xyXG5cdFx0XHRcdGVuZFBvc2l0aW9uc1t2aWR4ICsgMV0gPSAwO1xyXG5cdFx0XHRcdGVuZFBvc2l0aW9uc1t2aWR4ICsgMl0gPSB5aSp0aGlzLl9oZWlnaHQgLSBoaDtcclxuXHJcblx0XHRcdFx0dGhpY2tuZXNzW2ZpZHgrK10gPSAxO1xyXG5cclxuXHRcdFx0XHR2aWR4ICs9IDM7XHJcblx0XHRcdH1cclxuXHJcblxyXG5cdFx0XHRmb3IgKHhpID0gMDsgeGkgPD0gdGhpcy5fc2VnbWVudHNXOyArK3hpKSB7XHJcblx0XHRcdFx0c3RhcnRQb3NpdGlvbnNbdmlkeF0gPSB4aSp0aGlzLl93aWR0aCAtIGh3O1xyXG5cdFx0XHRcdHN0YXJ0UG9zaXRpb25zW3ZpZHggKyAxXSA9IDA7XHJcblx0XHRcdFx0c3RhcnRQb3NpdGlvbnNbdmlkeCArIDJdID0gLWhoO1xyXG5cclxuXHRcdFx0XHRlbmRQb3NpdGlvbnNbdmlkeF0gPSB4aSp0aGlzLl93aWR0aCAtIGh3O1xyXG5cdFx0XHRcdGVuZFBvc2l0aW9uc1t2aWR4ICsgMV0gPSAwO1xyXG5cdFx0XHRcdGVuZFBvc2l0aW9uc1t2aWR4ICsgMl0gPSBoaDtcclxuXHJcblx0XHRcdFx0dGhpY2tuZXNzW2ZpZHgrK10gPSAxO1xyXG5cclxuXHRcdFx0XHR2aWR4ICs9IDM7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGJ1aWxkIHJlYWwgZGF0YSBmcm9tIHJhdyBkYXRhXHJcblx0XHRcdGxpbmVHZW9tZXRyeS51cGRhdGVQb3NpdGlvbnMoc3RhcnRQb3NpdGlvbnMsIGVuZFBvc2l0aW9ucyk7XHJcblx0XHRcdGxpbmVHZW9tZXRyeS51cGRhdGVUaGlja25lc3ModGhpY2tuZXNzKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBpbmhlcml0RG9jXHJcblx0ICovXHJcblx0cHVibGljIF9wQnVpbGRVVnModGFyZ2V0OlN1Ykdlb21ldHJ5QmFzZSwgZ2VvbWV0cnlUeXBlOnN0cmluZylcclxuXHR7XHJcblx0XHR2YXIgdXZzOkFycmF5PG51bWJlcj47XHJcblx0XHR2YXIgbnVtVmVydGljZXM6bnVtYmVyO1xyXG5cclxuXHRcdGlmIChnZW9tZXRyeVR5cGUgPT0gXCJ0cmlhbmdsZVN1Ykdlb21ldHJ5XCIpIHtcclxuXHJcblx0XHRcdG51bVZlcnRpY2VzID0gKCB0aGlzLl9zZWdtZW50c0ggKyAxICkqKCB0aGlzLl9zZWdtZW50c1cgKyAxICk7XHJcblxyXG5cdFx0XHRpZiAodGhpcy5fZG91YmxlU2lkZWQpXHJcblx0XHRcdFx0bnVtVmVydGljZXMgKj0gMjtcclxuXHJcblx0XHRcdHZhciB0cmlhbmdsZUdlb21ldHJ5OlRyaWFuZ2xlU3ViR2VvbWV0cnkgPSA8VHJpYW5nbGVTdWJHZW9tZXRyeT4gdGFyZ2V0O1xyXG5cclxuXHRcdFx0aWYgKHRyaWFuZ2xlR2VvbWV0cnkudXZzICYmIG51bVZlcnRpY2VzID09IHRyaWFuZ2xlR2VvbWV0cnkubnVtVmVydGljZXMpIHtcclxuXHRcdFx0XHR1dnMgPSB0cmlhbmdsZUdlb21ldHJ5LnV2cztcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR1dnMgPSBuZXcgQXJyYXk8bnVtYmVyPihudW1WZXJ0aWNlcyoyKTtcclxuXHRcdFx0XHR0aGlzLl9wSW52YWxpZGF0ZUdlb21ldHJ5KClcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIGluZGV4Om51bWJlciA9IDA7XHJcblxyXG5cdFx0XHRmb3IgKHZhciB5aTpudW1iZXIgPSAwOyB5aSA8PSB0aGlzLl9zZWdtZW50c0g7ICsreWkpIHtcclxuXHJcblx0XHRcdFx0Zm9yICh2YXIgeGk6bnVtYmVyID0gMDsgeGkgPD0gdGhpcy5fc2VnbWVudHNXOyArK3hpKSB7XHJcblx0XHRcdFx0XHR1dnNbaW5kZXhdID0gKHhpL3RoaXMuX3NlZ21lbnRzVykqdHJpYW5nbGVHZW9tZXRyeS5zY2FsZVU7XHJcblx0XHRcdFx0XHR1dnNbaW5kZXggKyAxXSA9ICgxIC0geWkvdGhpcy5fc2VnbWVudHNIKSp0cmlhbmdsZUdlb21ldHJ5LnNjYWxlVjtcclxuXHRcdFx0XHRcdGluZGV4ICs9IDI7XHJcblxyXG5cdFx0XHRcdFx0aWYgKHRoaXMuX2RvdWJsZVNpZGVkKSB7XHJcblx0XHRcdFx0XHRcdHV2c1tpbmRleF0gPSAoeGkvdGhpcy5fc2VnbWVudHNXKSp0cmlhbmdsZUdlb21ldHJ5LnNjYWxlVTtcclxuXHRcdFx0XHRcdFx0dXZzW2luZGV4KzFdID0gKDEgLSB5aS90aGlzLl9zZWdtZW50c0gpKnRyaWFuZ2xlR2VvbWV0cnkuc2NhbGVWO1xyXG5cdFx0XHRcdFx0XHRpbmRleCArPSAyO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dHJpYW5nbGVHZW9tZXRyeS51cGRhdGVVVnModXZzKTtcclxuXHJcblxyXG5cdFx0fSBlbHNlIGlmIChnZW9tZXRyeVR5cGUgPT0gXCJsaW5lU3ViR2VvbWV0cnlcIikge1xyXG5cdFx0XHQvL25vdGhpbmcgdG8gZG8gaGVyZVxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0ID0gUHJpbWl0aXZlUGxhbmVQcmVmYWI7Il19