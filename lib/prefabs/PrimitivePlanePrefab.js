var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var PrimitivePrefabBase = require("awayjs-display/lib/prefabs/PrimitivePrefabBase");
/**
 * A Plane primitive mesh.
 */
var PrimitivePlanePrefab = (function (_super) {
    __extends(PrimitivePlanePrefab, _super);
    /**
     * Creates a new Plane object.
     * @param width The width of the plane.
     * @param height The height of the plane.
     * @param segmentsW The number of segments that make up the plane along the X-axis.
     * @param segmentsH The number of segments that make up the plane along the Y or Z-axis.
     * @param yUp Defines whether the normal vector of the plane should point along the Y-axis (true) or Z-axis (false).
     * @param doubleSided Defines whether the plane will be visible from both sides, with correct vertex normals.
     */
    function PrimitivePlanePrefab(width, height, segmentsW, segmentsH, yUp, doubleSided) {
        if (width === void 0) { width = 100; }
        if (height === void 0) { height = 100; }
        if (segmentsW === void 0) { segmentsW = 1; }
        if (segmentsH === void 0) { segmentsH = 1; }
        if (yUp === void 0) { yUp = true; }
        if (doubleSided === void 0) { doubleSided = false; }
        _super.call(this);
        this._segmentsW = segmentsW;
        this._segmentsH = segmentsH;
        this._yUp = yUp;
        this._width = width;
        this._height = height;
        this._doubleSided = doubleSided;
    }
    Object.defineProperty(PrimitivePlanePrefab.prototype, "segmentsW", {
        /**
         * The number of segments that make up the plane along the X-axis. Defaults to 1.
         */
        get: function () {
            return this._segmentsW;
        },
        set: function (value) {
            this._segmentsW = value;
            this._pInvalidateGeometry();
            this._pInvalidateUVs();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrimitivePlanePrefab.prototype, "segmentsH", {
        /**
         * The number of segments that make up the plane along the Y or Z-axis, depending on whether yUp is true or
         * false, respectively. Defaults to 1.
         */
        get: function () {
            return this._segmentsH;
        },
        set: function (value) {
            this._segmentsH = value;
            this._pInvalidateGeometry();
            this._pInvalidateUVs();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrimitivePlanePrefab.prototype, "yUp", {
        /**
         *  Defines whether the normal vector of the plane should point along the Y-axis (true) or Z-axis (false). Defaults to true.
         */
        get: function () {
            return this._yUp;
        },
        set: function (value) {
            this._yUp = value;
            this._pInvalidateGeometry();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrimitivePlanePrefab.prototype, "doubleSided", {
        /**
         * Defines whether the plane will be visible from both sides, with correct vertex normals (as opposed to bothSides on Material). Defaults to false.
         */
        get: function () {
            return this._doubleSided;
        },
        set: function (value) {
            this._doubleSided = value;
            this._pInvalidateGeometry();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrimitivePlanePrefab.prototype, "width", {
        /**
         * The width of the plane.
         */
        get: function () {
            return this._width;
        },
        set: function (value) {
            this._width = value;
            this._pInvalidateGeometry();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PrimitivePlanePrefab.prototype, "height", {
        /**
         * The height of the plane.
         */
        get: function () {
            return this._height;
        },
        set: function (value) {
            this._height = value;
            this._pInvalidateGeometry();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @inheritDoc
     */
    PrimitivePlanePrefab.prototype._pBuildGeometry = function (target, geometryType) {
        var indices /*uint*/;
        var x, y;
        var numIndices;
        var base;
        var tw = this._segmentsW + 1;
        var numVertices;
        var vidx, fidx; // indices
        var xi;
        var yi;
        if (geometryType == "triangleSubGeometry") {
            var triangleGeometry = target;
            var numVertices = (this._segmentsH + 1) * tw;
            var positions;
            var normals;
            var tangents;
            if (this._doubleSided)
                numVertices *= 2;
            numIndices = this._segmentsH * this._segmentsW * 6;
            if (this._doubleSided)
                numIndices *= 2;
            if (triangleGeometry.indices != null && numIndices == triangleGeometry.indices.length) {
                indices = triangleGeometry.indices;
            }
            else {
                indices = new Array(numIndices);
                this._pInvalidateUVs();
            }
            if (numVertices == triangleGeometry.numVertices) {
                positions = triangleGeometry.positions;
                normals = triangleGeometry.vertexNormals;
                tangents = triangleGeometry.vertexTangents;
            }
            else {
                positions = new Array(numVertices * 3);
                normals = new Array(numVertices * 3);
                tangents = new Array(numVertices * 3);
                this._pInvalidateUVs();
            }
            fidx = 0;
            vidx = 0;
            for (yi = 0; yi <= this._segmentsH; ++yi) {
                for (xi = 0; xi <= this._segmentsW; ++xi) {
                    x = (xi / this._segmentsW - .5) * this._width;
                    y = (yi / this._segmentsH - .5) * this._height;
                    positions[vidx] = x;
                    if (this._yUp) {
                        positions[vidx + 1] = 0;
                        positions[vidx + 2] = y;
                    }
                    else {
                        positions[vidx + 1] = y;
                        positions[vidx + 2] = 0;
                    }
                    normals[vidx] = 0;
                    if (this._yUp) {
                        normals[vidx + 1] = 1;
                        normals[vidx + 2] = 0;
                    }
                    else {
                        normals[vidx + 1] = 0;
                        normals[vidx + 2] = -1;
                    }
                    tangents[vidx] = 1;
                    tangents[vidx + 1] = 0;
                    tangents[vidx + 2] = 0;
                    vidx += 3;
                    // add vertex with same position, but with inverted normal & tangent
                    if (this._doubleSided) {
                        for (var i = vidx; i < vidx + 3; ++i) {
                            positions[i] = positions[i - 3];
                            normals[i] = -normals[i - 3];
                            tangents[i] = -tangents[i - 3];
                        }
                        vidx += 3;
                    }
                    if (xi != this._segmentsW && yi != this._segmentsH) {
                        base = xi + yi * tw;
                        var mult = this._doubleSided ? 2 : 1;
                        indices[fidx++] = base * mult;
                        indices[fidx++] = (base + tw) * mult;
                        indices[fidx++] = (base + tw + 1) * mult;
                        indices[fidx++] = base * mult;
                        indices[fidx++] = (base + tw + 1) * mult;
                        indices[fidx++] = (base + 1) * mult;
                        if (this._doubleSided) {
                            indices[fidx++] = (base + tw + 1) * mult + 1;
                            indices[fidx++] = (base + tw) * mult + 1;
                            indices[fidx++] = base * mult + 1;
                            indices[fidx++] = (base + 1) * mult + 1;
                            indices[fidx++] = (base + tw + 1) * mult + 1;
                            indices[fidx++] = base * mult + 1;
                        }
                    }
                }
            }
            triangleGeometry.updateIndices(indices);
            triangleGeometry.updatePositions(positions);
            triangleGeometry.updateVertexNormals(normals);
            triangleGeometry.updateVertexTangents(tangents);
        }
        else if (geometryType == "lineSubGeometry") {
            var lineGeometry = target;
            var numSegments = (this._segmentsH + 1) + tw;
            var startPositions;
            var endPositions;
            var thickness;
            var hw = this._width / 2;
            var hh = this._height / 2;
            if (lineGeometry.indices != null && numSegments == lineGeometry.numSegments) {
                startPositions = lineGeometry.startPositions;
                endPositions = lineGeometry.endPositions;
                thickness = lineGeometry.thickness;
            }
            else {
                startPositions = new Array(numSegments * 3);
                endPositions = new Array(numSegments * 3);
                thickness = new Array(numSegments);
            }
            fidx = 0;
            vidx = 0;
            for (yi = 0; yi <= this._segmentsH; ++yi) {
                startPositions[vidx] = -hw;
                startPositions[vidx + 1] = 0;
                startPositions[vidx + 2] = yi * this._height - hh;
                endPositions[vidx] = hw;
                endPositions[vidx + 1] = 0;
                endPositions[vidx + 2] = yi * this._height - hh;
                thickness[fidx++] = 1;
                vidx += 3;
            }
            for (xi = 0; xi <= this._segmentsW; ++xi) {
                startPositions[vidx] = xi * this._width - hw;
                startPositions[vidx + 1] = 0;
                startPositions[vidx + 2] = -hh;
                endPositions[vidx] = xi * this._width - hw;
                endPositions[vidx + 1] = 0;
                endPositions[vidx + 2] = hh;
                thickness[fidx++] = 1;
                vidx += 3;
            }
            // build real data from raw data
            lineGeometry.updatePositions(startPositions, endPositions);
            lineGeometry.updateThickness(thickness);
        }
    };
    /**
     * @inheritDoc
     */
    PrimitivePlanePrefab.prototype._pBuildUVs = function (target, geometryType) {
        var uvs;
        var numVertices;
        if (geometryType == "triangleSubGeometry") {
            numVertices = (this._segmentsH + 1) * (this._segmentsW + 1);
            if (this._doubleSided)
                numVertices *= 2;
            var triangleGeometry = target;
            if (triangleGeometry.uvs && numVertices == triangleGeometry.numVertices) {
                uvs = triangleGeometry.uvs;
            }
            else {
                uvs = new Array(numVertices * 2);
                this._pInvalidateGeometry();
            }
            var index = 0;
            for (var yi = 0; yi <= this._segmentsH; ++yi) {
                for (var xi = 0; xi <= this._segmentsW; ++xi) {
                    uvs[index] = (xi / this._segmentsW) * triangleGeometry.scaleU;
                    uvs[index + 1] = (1 - yi / this._segmentsH) * triangleGeometry.scaleV;
                    index += 2;
                    if (this._doubleSided) {
                        uvs[index] = (xi / this._segmentsW) * triangleGeometry.scaleU;
                        uvs[index + 1] = (1 - yi / this._segmentsH) * triangleGeometry.scaleV;
                        index += 2;
                    }
                }
            }
            triangleGeometry.updateUVs(uvs);
        }
        else if (geometryType == "lineSubGeometry") {
        }
    };
    return PrimitivePlanePrefab;
})(PrimitivePrefabBase);
module.exports = PrimitivePlanePrefab;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1kaXNwbGF5L2xpYi9wcmVmYWJzL3ByaW1pdGl2ZXBsYW5lcHJlZmFiLnRzIl0sIm5hbWVzIjpbIlByaW1pdGl2ZVBsYW5lUHJlZmFiIiwiUHJpbWl0aXZlUGxhbmVQcmVmYWIuY29uc3RydWN0b3IiLCJQcmltaXRpdmVQbGFuZVByZWZhYi5zZWdtZW50c1ciLCJQcmltaXRpdmVQbGFuZVByZWZhYi5zZWdtZW50c0giLCJQcmltaXRpdmVQbGFuZVByZWZhYi55VXAiLCJQcmltaXRpdmVQbGFuZVByZWZhYi5kb3VibGVTaWRlZCIsIlByaW1pdGl2ZVBsYW5lUHJlZmFiLndpZHRoIiwiUHJpbWl0aXZlUGxhbmVQcmVmYWIuaGVpZ2h0IiwiUHJpbWl0aXZlUGxhbmVQcmVmYWIuX3BCdWlsZEdlb21ldHJ5IiwiUHJpbWl0aXZlUGxhbmVQcmVmYWIuX3BCdWlsZFVWcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBS0EsSUFBTyxtQkFBbUIsV0FBWSxnREFBZ0QsQ0FBQyxDQUFDO0FBRXhGLEFBR0E7O0dBREc7SUFDRyxvQkFBb0I7SUFBU0EsVUFBN0JBLG9CQUFvQkEsVUFBNEJBO0lBU3JEQTs7Ozs7Ozs7T0FRR0E7SUFDSEEsU0FsQktBLG9CQUFvQkEsQ0FrQmJBLEtBQWtCQSxFQUFFQSxNQUFtQkEsRUFBRUEsU0FBb0JBLEVBQUVBLFNBQW9CQSxFQUFFQSxHQUFrQkEsRUFBRUEsV0FBMkJBO1FBQXBJQyxxQkFBa0JBLEdBQWxCQSxXQUFrQkE7UUFBRUEsc0JBQW1CQSxHQUFuQkEsWUFBbUJBO1FBQUVBLHlCQUFvQkEsR0FBcEJBLGFBQW9CQTtRQUFFQSx5QkFBb0JBLEdBQXBCQSxhQUFvQkE7UUFBRUEsbUJBQWtCQSxHQUFsQkEsVUFBa0JBO1FBQUVBLDJCQUEyQkEsR0FBM0JBLG1CQUEyQkE7UUFHL0lBLGlCQUFPQSxDQUFDQTtRQUVSQSxJQUFJQSxDQUFDQSxVQUFVQSxHQUFHQSxTQUFTQSxDQUFDQTtRQUM1QkEsSUFBSUEsQ0FBQ0EsVUFBVUEsR0FB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VUEsR0FBR0EsRUFBRUEsQ0FBQ0EsR0FBQ0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0E7b0JBQzFDQSxDQUFDQSxHQUFHQSxDQUFDQSxFQUFFQSxHQUFDQSxJQUFJQSxDQUFDQSxVQUFVQSxHQUFHQSxFQUFFQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQTtvQkFFM0NBLFNBQVNBLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO29CQUNwQkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7d0JBQ2ZBLFNBQVNBLENBQUNBLElBQUlBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO3dCQUN4QkEsU0FBU0EsQ0FBQ0EsSUFBSUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7b0JBQ3pCQSxDQUFDQTtvQkFBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7d0JBQ1BBLFNBQVNBLENBQUNBLElBQUlBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO3dCQUN4QkEsU0FBU0EsQ0FBQ0EsSUFBSUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7b0JBQ3pCQSxDQUFDQTtvQkFFREEsT0FBT0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7b0JBRWxCQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQTt3QkFDZkEsT0FBT0EsQ0FBQ0EsSUFBSUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7d0JBQ3RCQSxPQUFPQSxDQUFDQSxJQUFJQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtvQkFDdkJBLENBQUNBO29CQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTt3QkFDUEEsT0FBT0EsQ0FBQ0EsSUFBSUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7d0JBQ3RCQSxPQUFPQSxDQUFDQSxJQUFJQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQTtvQkFDeEJBLENBQUNBO29CQUVEQSxRQUFRQSxDQUFDQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtvQkFDbkJBLFFBQVFBLENBQUNBLElBQUlBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO29CQUN2QkEsUUFBUUEsQ0FBQ0EsSUFBSUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7b0JBRXZCQSxJQUFJQSxJQUFJQSxDQUFDQSxDQUFDQTtvQkFFVkEsQUFDQUEsb0VBRG9FQTtvQkFDcEVBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFlBQVlBLENBQUNBLENBQUNBLENBQUNBO3dCQUV2QkEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBVUEsSUFBSUEsRUFBRUEsQ0FBQ0EsR0FBR0EsSUFBSUEsR0FBR0EsQ0FBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsQ0FBQ0E7NEJBQzdDQSxTQUFTQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxTQUFTQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQTs0QkFDaENBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBOzRCQUM3QkEsUUFBUUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7d0JBQ2hDQSxDQUFDQTt3QkFFREEsSUFBSUEsSUFBSUEsQ0FBQ0EsQ0FBQ0E7b0JBRVhBLENBQUNBO29CQUVEQSxFQUFFQSxDQUFDQSxDQUFDQSxFQUFFQSxJQUFJQSxJQUFJQSxDQUFDQSxVQUFVQSxJQUFJQSxFQUFFQSxJQUFJQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQSxDQUFDQTt3QkFFcERBLElBQUlBLEdBQUdBLEVBQUVBLEdBQUdBLEVBQUVBLEdBQUNBLEVBQUVBLENBQUNBO3dCQUNsQkEsSUFBSUEsSUFBSUEsR0FBVUEsSUFBSUEsQ0FBQ0EsWUFBWUEsR0FBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7d0JBRTNDQSxPQUFPQSxDQUFDQSxJQUFJQSxFQUFFQSxDQUFDQSxHQUFHQSxJQUFJQSxHQUFDQSxJQUFJQSxDQUFDQTt3QkFDNUJBLE9BQU9BLENBQUNBLElBQUlBLEVBQUVBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLEdBQUdBLEVBQUVBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBO3dCQUNuQ0EsT0FBT0EsQ0FBQ0EsSUFBSUEsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsR0FBR0EsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBQ0EsSUFBSUEsQ0FBQ0E7d0JBQ3ZDQSxPQUFPQSxDQUFDQSxJQUFJQSxFQUFFQSxDQUFDQSxHQUFHQSxJQUFJQSxHQUFDQSxJQUFJQSxDQUFDQTt3QkFDNUJBLE9BQU9BLENBQUNBLElBQUlBLEVBQUVBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLEdBQUdBLEVBQUVBLEdBQUdBLENBQUNBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBO3dCQUN2Q0EsT0FBT0EsQ0FBQ0EsSUFBSUEsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBQ0EsSUFBSUEsQ0FBQ0E7d0JBRWxDQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxDQUFDQSxDQUFDQSxDQUFDQTs0QkFFdkJBLE9BQU9BLENBQUNBLElBQUlBLEVBQUVBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLEdBQUdBLEVBQUVBLEdBQUdBLENBQUNBLENBQUNBLEdBQUNBLElBQUlBLEdBQUdBLENBQUNBLENBQUNBOzRCQUMzQ0EsT0FBT0EsQ0FBQ0EsSUFBSUEsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFB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QWdCQSxDQUFDQSxHQUFHQSxDQUFDQTtZQUM1QkEsQ0FBQ0E7WUFBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7Z0JBQ1BBLEdBQUdBLEdBQUdBLElBQUlBLEtBQUtBLENBQVNBLFdBQVdBLEdBQUNBLENBQUNBLENBQUNBLENBQUNBO2dCQUN2Q0EsSUFBSUEsQ0FBQ0Esb0JBQW9CQSxFQUFFQSxDQUFBQTtZQUM1QkEsQ0FBQ0E7WUFFREEsSUFBSUEsS0FBS0EsR0FBVUEsQ0FBQ0EsQ0FBQ0E7WUFFckJBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLEVBQUVBLEdBQVVBLENBQUNBLEVBQUVBLEVBQUVBLElBQUlBLElBQUlBLENBQUNBLFVBQVVBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLENBQUNBO2dCQUVyREEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsRUFBRUEsR0FBVUEsQ0FBQ0EsRUFBRUEsRUFBRUEsSUFBSUEsSUFBSUEsQ0FBQ0EsVUFBVUEsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsQ0FBQ0E7b0JBQ3JEQSxHQUFHQSxDQUFDQSxLQUFLQSxDQUFDQSxHQUFHQSxDQUFDQSxFQUFFQSxHQUFDQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxHQUFDQSxnQkFBZ0JBLENBQUNBLE1BQU1BLENBQUNBO29CQUMxREEsR0FBR0EsQ0FBQ0EsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsRUFBRUEsR0FBQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsR0FBQ0EsZ0JBQWdCQSxDQUFDQSxNQUFNQSxDQUFDQTtvQkFDbEVBLEtBQUtBLElBQUlBLENBQUNBLENBQUNBO29CQUVYQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxDQUFDQSxDQUFDQSxDQUFDQTt3QkFDdkJBLEdBQUdBLENBQUNBLEtBQUtBLENBQUNBLEdBQUdBLENBQUNBLEVBQUVBLEdBQUNBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLEdBQUNBLGdCQUFnQkEsQ0FBQ0EsTUFBTUEsQ0FBQ0E7d0JBQzFEQSxHQUFHQSxDQUFDQSxLQUFLQSxHQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxFQUFFQSxHQUFDQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxHQUFDQSxnQkFBZ0JBLENBQUNBLE1BQU1BLENBQUNBO3dCQUNoRUEsS0FBS0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7b0JBQ1pBLENBQUNBO2dCQUNGQSxDQUFDQTtZQUNGQSxDQUFDQTtZQUVEQSxnQkFBZ0JBLENBQUNBLFNBQVNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO1FBR2pDQSxDQUFDQTtRQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxZQUFZQSxJQUFJQSxpQkFBaUJBLENBQUNBLENBQUNBLENBQUNBO1FBRS9DQSxDQUFDQTtJQUNGQSxDQUFDQTtJQUNGVCwyQkFBQ0E7QUFBREEsQ0FwWEEsQUFvWENBLEVBcFhrQyxtQkFBbUIsRUFvWHJEO0FBRUQsQUFBOEIsaUJBQXJCLG9CQUFvQixDQUFDIiwiZmlsZSI6InByZWZhYnMvUHJpbWl0aXZlUGxhbmVQcmVmYWIuanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IElBc3NldFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvbGlicmFyeS9JQXNzZXRcIik7XG5cbmltcG9ydCBMaW5lU3ViR2VvbWV0cnlcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvYmFzZS9MaW5lU3ViR2VvbWV0cnlcIik7XG5pbXBvcnQgU3ViR2VvbWV0cnlCYXNlXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2Jhc2UvU3ViR2VvbWV0cnlCYXNlXCIpO1xuaW1wb3J0IFRyaWFuZ2xlU3ViR2VvbWV0cnlcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2Jhc2UvVHJpYW5nbGVTdWJHZW9tZXRyeVwiKTtcbmltcG9ydCBQcmltaXRpdmVQcmVmYWJCYXNlXHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9wcmVmYWJzL1ByaW1pdGl2ZVByZWZhYkJhc2VcIik7XG5cbi8qKlxuICogQSBQbGFuZSBwcmltaXRpdmUgbWVzaC5cbiAqL1xuY2xhc3MgUHJpbWl0aXZlUGxhbmVQcmVmYWIgZXh0ZW5kcyBQcmltaXRpdmVQcmVmYWJCYXNlIGltcGxlbWVudHMgSUFzc2V0XG57XG5cdHByaXZhdGUgX3NlZ21lbnRzVzpudW1iZXI7XG5cdHByaXZhdGUgX3NlZ21lbnRzSDpudW1iZXI7XG5cdHByaXZhdGUgX3lVcDpib29sZWFuO1xuXHRwcml2YXRlIF93aWR0aDpudW1iZXI7XG5cdHByaXZhdGUgX2hlaWdodDpudW1iZXI7XG5cdHByaXZhdGUgX2RvdWJsZVNpZGVkOmJvb2xlYW47XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBuZXcgUGxhbmUgb2JqZWN0LlxuXHQgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSBwbGFuZS5cblx0ICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSBwbGFuZS5cblx0ICogQHBhcmFtIHNlZ21lbnRzVyBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIHRoYXQgbWFrZSB1cCB0aGUgcGxhbmUgYWxvbmcgdGhlIFgtYXhpcy5cblx0ICogQHBhcmFtIHNlZ21lbnRzSCBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIHRoYXQgbWFrZSB1cCB0aGUgcGxhbmUgYWxvbmcgdGhlIFkgb3IgWi1heGlzLlxuXHQgKiBAcGFyYW0geVVwIERlZmluZXMgd2hldGhlciB0aGUgbm9ybWFsIHZlY3RvciBvZiB0aGUgcGxhbmUgc2hvdWxkIHBvaW50IGFsb25nIHRoZSBZLWF4aXMgKHRydWUpIG9yIFotYXhpcyAoZmFsc2UpLlxuXHQgKiBAcGFyYW0gZG91YmxlU2lkZWQgRGVmaW5lcyB3aGV0aGVyIHRoZSBwbGFuZSB3aWxsIGJlIHZpc2libGUgZnJvbSBib3RoIHNpZGVzLCB3aXRoIGNvcnJlY3QgdmVydGV4IG5vcm1hbHMuXG5cdCAqL1xuXHRjb25zdHJ1Y3Rvcih3aWR0aDpudW1iZXIgPSAxMDAsIGhlaWdodDpudW1iZXIgPSAxMDAsIHNlZ21lbnRzVzpudW1iZXIgPSAxLCBzZWdtZW50c0g6bnVtYmVyID0gMSwgeVVwOmJvb2xlYW4gPSB0cnVlLCBkb3VibGVTaWRlZDpib29sZWFuID0gZmFsc2UpXG5cdHtcblxuXHRcdHN1cGVyKCk7XG5cblx0XHR0aGlzLl9zZWdtZW50c1cgPSBzZWdtZW50c1c7XG5cdFx0dGhpcy5fc2VnbWVudHNIID0gc2VnbWVudHNIO1xuXHRcdHRoaXMuX3lVcCA9IHlVcDtcblx0XHR0aGlzLl93aWR0aCA9IHdpZHRoO1xuXHRcdHRoaXMuX2hlaWdodCA9IGhlaWdodDtcblx0XHR0aGlzLl9kb3VibGVTaWRlZCA9IGRvdWJsZVNpZGVkO1xuXG5cdH1cblxuXHQvKipcblx0ICogVGhlIG51bWJlciBvZiBzZWdtZW50cyB0aGF0IG1ha2UgdXAgdGhlIHBsYW5lIGFsb25nIHRoZSBYLWF4aXMuIERlZmF1bHRzIHRvIDEuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IHNlZ21lbnRzVygpOm51bWJlclxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX3NlZ21lbnRzVztcblx0fVxuXG5cdHB1YmxpYyBzZXQgc2VnbWVudHNXKHZhbHVlOm51bWJlcilcblx0e1xuXG5cdFx0dGhpcy5fc2VnbWVudHNXID0gdmFsdWU7XG5cblx0XHR0aGlzLl9wSW52YWxpZGF0ZUdlb21ldHJ5KCk7XG5cdFx0dGhpcy5fcEludmFsaWRhdGVVVnMoKTtcblxuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSBudW1iZXIgb2Ygc2VnbWVudHMgdGhhdCBtYWtlIHVwIHRoZSBwbGFuZSBhbG9uZyB0aGUgWSBvciBaLWF4aXMsIGRlcGVuZGluZyBvbiB3aGV0aGVyIHlVcCBpcyB0cnVlIG9yXG5cdCAqIGZhbHNlLCByZXNwZWN0aXZlbHkuIERlZmF1bHRzIHRvIDEuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IHNlZ21lbnRzSCgpOm51bWJlclxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX3NlZ21lbnRzSDtcblx0fVxuXG5cdHB1YmxpYyBzZXQgc2VnbWVudHNIKHZhbHVlOm51bWJlcilcblx0e1xuXG5cdFx0dGhpcy5fc2VnbWVudHNIID0gdmFsdWU7XG5cblx0XHR0aGlzLl9wSW52YWxpZGF0ZUdlb21ldHJ5KCk7XG5cdFx0dGhpcy5fcEludmFsaWRhdGVVVnMoKTtcblxuXHR9XG5cblx0LyoqXG5cdCAqICBEZWZpbmVzIHdoZXRoZXIgdGhlIG5vcm1hbCB2ZWN0b3Igb2YgdGhlIHBsYW5lIHNob3VsZCBwb2ludCBhbG9uZyB0aGUgWS1heGlzICh0cnVlKSBvciBaLWF4aXMgKGZhbHNlKS4gRGVmYXVsdHMgdG8gdHJ1ZS5cblx0ICovXG5cdHB1YmxpYyBnZXQgeVVwKCk6Ym9vbGVhblxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX3lVcDtcblx0fVxuXG5cdHB1YmxpYyBzZXQgeVVwKHZhbHVlOmJvb2xlYW4pXG5cdHtcblx0XHR0aGlzLl95VXAgPSB2YWx1ZTtcblxuXHRcdHRoaXMuX3BJbnZhbGlkYXRlR2VvbWV0cnkoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBEZWZpbmVzIHdoZXRoZXIgdGhlIHBsYW5lIHdpbGwgYmUgdmlzaWJsZSBmcm9tIGJvdGggc2lkZXMsIHdpdGggY29ycmVjdCB2ZXJ0ZXggbm9ybWFscyAoYXMgb3Bwb3NlZCB0byBib3RoU2lkZXMgb24gTWF0ZXJpYWwpLiBEZWZhdWx0cyB0byBmYWxzZS5cblx0ICovXG5cdHB1YmxpYyBnZXQgZG91YmxlU2lkZWQoKTpib29sZWFuXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5fZG91YmxlU2lkZWQ7XG5cdH1cblxuXHRwdWJsaWMgc2V0IGRvdWJsZVNpZGVkKHZhbHVlOmJvb2xlYW4pXG5cdHtcblx0XHR0aGlzLl9kb3VibGVTaWRlZCA9IHZhbHVlO1xuXG5cdFx0dGhpcy5fcEludmFsaWRhdGVHZW9tZXRyeSgpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSB3aWR0aCBvZiB0aGUgcGxhbmUuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IHdpZHRoKCk6bnVtYmVyXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5fd2lkdGg7XG5cdH1cblxuXHRwdWJsaWMgc2V0IHdpZHRoKHZhbHVlOm51bWJlcilcblx0e1xuXHRcdHRoaXMuX3dpZHRoID0gdmFsdWU7XG5cblx0XHR0aGlzLl9wSW52YWxpZGF0ZUdlb21ldHJ5KCk7XG5cdH1cblxuXHQvKipcblx0ICogVGhlIGhlaWdodCBvZiB0aGUgcGxhbmUuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IGhlaWdodCgpOm51bWJlclxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX2hlaWdodDtcblx0fVxuXG5cdHB1YmxpYyBzZXQgaGVpZ2h0KHZhbHVlOm51bWJlcilcblx0e1xuXHRcdHRoaXMuX2hlaWdodCA9IHZhbHVlO1xuXG5cdFx0dGhpcy5fcEludmFsaWRhdGVHZW9tZXRyeSgpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBpbmhlcml0RG9jXG5cdCAqL1xuXHRwdWJsaWMgX3BCdWlsZEdlb21ldHJ5KHRhcmdldDpTdWJHZW9tZXRyeUJhc2UsIGdlb21ldHJ5VHlwZTpzdHJpbmcpXG5cdHtcblx0XHR2YXIgaW5kaWNlczpBcnJheTxudW1iZXI+IC8qdWludCovO1xuXHRcdHZhciB4Om51bWJlciwgeTpudW1iZXI7XG5cdFx0dmFyIG51bUluZGljZXM6bnVtYmVyO1xuXHRcdHZhciBiYXNlOm51bWJlcjtcblx0XHR2YXIgdHc6bnVtYmVyID0gdGhpcy5fc2VnbWVudHNXICsgMTtcblx0XHR2YXIgbnVtVmVydGljZXM6bnVtYmVyO1xuXG5cdFx0dmFyIHZpZHg6bnVtYmVyLCBmaWR4Om51bWJlcjsgLy8gaW5kaWNlc1xuXG5cdFx0dmFyIHhpOm51bWJlcjtcblx0XHR2YXIgeWk6bnVtYmVyO1xuXG5cdFx0aWYgKGdlb21ldHJ5VHlwZSA9PSBcInRyaWFuZ2xlU3ViR2VvbWV0cnlcIikge1xuXG5cdFx0XHR2YXIgdHJpYW5nbGVHZW9tZXRyeTpUcmlhbmdsZVN1Ykdlb21ldHJ5ID0gPFRyaWFuZ2xlU3ViR2VvbWV0cnk+IHRhcmdldDtcblxuXHRcdFx0dmFyIG51bVZlcnRpY2VzOm51bWJlciA9ICh0aGlzLl9zZWdtZW50c0ggKyAxKSp0dztcblx0XHRcdHZhciBwb3NpdGlvbnM6QXJyYXk8bnVtYmVyPjtcblx0XHRcdHZhciBub3JtYWxzOkFycmF5PG51bWJlcj47XG5cdFx0XHR2YXIgdGFuZ2VudHM6QXJyYXk8bnVtYmVyPjtcblxuXHRcdFx0aWYgKHRoaXMuX2RvdWJsZVNpZGVkKVxuXHRcdFx0XHRudW1WZXJ0aWNlcyAqPSAyO1xuXG5cdFx0XHRudW1JbmRpY2VzID0gdGhpcy5fc2VnbWVudHNIKnRoaXMuX3NlZ21lbnRzVyo2O1xuXG5cdFx0XHRpZiAodGhpcy5fZG91YmxlU2lkZWQpXG5cdFx0XHRcdG51bUluZGljZXMgKj0gMjtcblxuXHRcdFx0aWYgKHRyaWFuZ2xlR2VvbWV0cnkuaW5kaWNlcyAhPSBudWxsICYmIG51bUluZGljZXMgPT0gdHJpYW5nbGVHZW9tZXRyeS5pbmRpY2VzLmxlbmd0aCkge1xuXHRcdFx0XHRpbmRpY2VzID0gdHJpYW5nbGVHZW9tZXRyeS5pbmRpY2VzO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aW5kaWNlcyA9IG5ldyBBcnJheTxudW1iZXI+KG51bUluZGljZXMpO1xuXG5cdFx0XHRcdHRoaXMuX3BJbnZhbGlkYXRlVVZzKCk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChudW1WZXJ0aWNlcyA9PSB0cmlhbmdsZUdlb21ldHJ5Lm51bVZlcnRpY2VzKSB7XG5cdFx0XHRcdHBvc2l0aW9ucyA9IHRyaWFuZ2xlR2VvbWV0cnkucG9zaXRpb25zO1xuXHRcdFx0XHRub3JtYWxzID0gdHJpYW5nbGVHZW9tZXRyeS52ZXJ0ZXhOb3JtYWxzO1xuXHRcdFx0XHR0YW5nZW50cyA9IHRyaWFuZ2xlR2VvbWV0cnkudmVydGV4VGFuZ2VudHM7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRwb3NpdGlvbnMgPSBuZXcgQXJyYXk8bnVtYmVyPihudW1WZXJ0aWNlcyozKTtcblx0XHRcdFx0bm9ybWFscyA9IG5ldyBBcnJheTxudW1iZXI+KG51bVZlcnRpY2VzKjMpO1xuXHRcdFx0XHR0YW5nZW50cyA9IG5ldyBBcnJheTxudW1iZXI+KG51bVZlcnRpY2VzKjMpO1xuXG5cdFx0XHRcdHRoaXMuX3BJbnZhbGlkYXRlVVZzKCk7XG5cdFx0XHR9XG5cblx0XHRcdGZpZHggPSAwO1xuXG5cdFx0XHR2aWR4ID0gMDtcblxuXHRcdFx0Zm9yICh5aSA9IDA7IHlpIDw9IHRoaXMuX3NlZ21lbnRzSDsgKyt5aSkge1xuXG5cdFx0XHRcdGZvciAoeGkgPSAwOyB4aSA8PSB0aGlzLl9zZWdtZW50c1c7ICsreGkpIHtcblx0XHRcdFx0XHR4ID0gKHhpL3RoaXMuX3NlZ21lbnRzVyAtIC41KSp0aGlzLl93aWR0aDtcblx0XHRcdFx0XHR5ID0gKHlpL3RoaXMuX3NlZ21lbnRzSCAtIC41KSp0aGlzLl9oZWlnaHQ7XG5cblx0XHRcdFx0XHRwb3NpdGlvbnNbdmlkeF0gPSB4O1xuXHRcdFx0XHRcdGlmICh0aGlzLl95VXApIHtcblx0XHRcdFx0XHRcdHBvc2l0aW9uc1t2aWR4ICsgMV0gPSAwO1xuXHRcdFx0XHRcdFx0cG9zaXRpb25zW3ZpZHggKyAyXSA9IHk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHBvc2l0aW9uc1t2aWR4ICsgMV0gPSB5O1xuXHRcdFx0XHRcdFx0cG9zaXRpb25zW3ZpZHggKyAyXSA9IDA7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0bm9ybWFsc1t2aWR4XSA9IDA7XG5cblx0XHRcdFx0XHRpZiAodGhpcy5feVVwKSB7XG5cdFx0XHRcdFx0XHRub3JtYWxzW3ZpZHggKyAxXSA9IDE7XG5cdFx0XHRcdFx0XHRub3JtYWxzW3ZpZHggKyAyXSA9IDA7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdG5vcm1hbHNbdmlkeCArIDFdID0gMDtcblx0XHRcdFx0XHRcdG5vcm1hbHNbdmlkeCArIDJdID0gLTE7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dGFuZ2VudHNbdmlkeF0gPSAxO1xuXHRcdFx0XHRcdHRhbmdlbnRzW3ZpZHggKyAxXSA9IDA7XG5cdFx0XHRcdFx0dGFuZ2VudHNbdmlkeCArIDJdID0gMDtcblxuXHRcdFx0XHRcdHZpZHggKz0gMztcblxuXHRcdFx0XHRcdC8vIGFkZCB2ZXJ0ZXggd2l0aCBzYW1lIHBvc2l0aW9uLCBidXQgd2l0aCBpbnZlcnRlZCBub3JtYWwgJiB0YW5nZW50XG5cdFx0XHRcdFx0aWYgKHRoaXMuX2RvdWJsZVNpZGVkKSB7XG5cblx0XHRcdFx0XHRcdGZvciAodmFyIGk6bnVtYmVyID0gdmlkeDsgaSA8IHZpZHggKyAzOyArK2kpIHtcblx0XHRcdFx0XHRcdFx0cG9zaXRpb25zW2ldID0gcG9zaXRpb25zW2kgLSAzXTtcblx0XHRcdFx0XHRcdFx0bm9ybWFsc1tpXSA9IC1ub3JtYWxzW2kgLSAzXTtcblx0XHRcdFx0XHRcdFx0dGFuZ2VudHNbaV0gPSAtdGFuZ2VudHNbaSAtIDNdO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR2aWR4ICs9IDM7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoeGkgIT0gdGhpcy5fc2VnbWVudHNXICYmIHlpICE9IHRoaXMuX3NlZ21lbnRzSCkge1xuXG5cdFx0XHRcdFx0XHRiYXNlID0geGkgKyB5aSp0dztcblx0XHRcdFx0XHRcdHZhciBtdWx0Om51bWJlciA9IHRoaXMuX2RvdWJsZVNpZGVkPyAyIDogMTtcblxuXHRcdFx0XHRcdFx0aW5kaWNlc1tmaWR4KytdID0gYmFzZSptdWx0O1xuXHRcdFx0XHRcdFx0aW5kaWNlc1tmaWR4KytdID0gKGJhc2UgKyB0dykqbXVsdDtcblx0XHRcdFx0XHRcdGluZGljZXNbZmlkeCsrXSA9IChiYXNlICsgdHcgKyAxKSptdWx0O1xuXHRcdFx0XHRcdFx0aW5kaWNlc1tmaWR4KytdID0gYmFzZSptdWx0O1xuXHRcdFx0XHRcdFx0aW5kaWNlc1tmaWR4KytdID0gKGJhc2UgKyB0dyArIDEpKm11bHQ7XG5cdFx0XHRcdFx0XHRpbmRpY2VzW2ZpZHgrK10gPSAoYmFzZSArIDEpKm11bHQ7XG5cblx0XHRcdFx0XHRcdGlmICh0aGlzLl9kb3VibGVTaWRlZCkge1xuXG5cdFx0XHRcdFx0XHRcdGluZGljZXNbZmlkeCsrXSA9IChiYXNlICsgdHcgKyAxKSptdWx0ICsgMTtcblx0XHRcdFx0XHRcdFx0aW5kaWNlc1tmaWR4KytdID0gKGJhc2UgKyB0dykqbXVsdCArIDE7XG5cdFx0XHRcdFx0XHRcdGluZGljZXNbZmlkeCsrXSA9IGJhc2UqbXVsdCArIDE7XG5cdFx0XHRcdFx0XHRcdGluZGljZXNbZmlkeCsrXSA9IChiYXNlICsgMSkqbXVsdCArIDE7XG5cdFx0XHRcdFx0XHRcdGluZGljZXNbZmlkeCsrXSA9IChiYXNlICsgdHcgKyAxKSptdWx0ICsgMTtcblx0XHRcdFx0XHRcdFx0aW5kaWNlc1tmaWR4KytdID0gYmFzZSptdWx0ICsgMTtcblxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHR0cmlhbmdsZUdlb21ldHJ5LnVwZGF0ZUluZGljZXMoaW5kaWNlcyk7XG5cblx0XHRcdHRyaWFuZ2xlR2VvbWV0cnkudXBkYXRlUG9zaXRpb25zKHBvc2l0aW9ucyk7XG5cdFx0XHR0cmlhbmdsZUdlb21ldHJ5LnVwZGF0ZVZlcnRleE5vcm1hbHMobm9ybWFscyk7XG5cdFx0XHR0cmlhbmdsZUdlb21ldHJ5LnVwZGF0ZVZlcnRleFRhbmdlbnRzKHRhbmdlbnRzKTtcblxuXHRcdH0gZWxzZSBpZiAoZ2VvbWV0cnlUeXBlID09IFwibGluZVN1Ykdlb21ldHJ5XCIpIHtcblx0XHRcdHZhciBsaW5lR2VvbWV0cnk6TGluZVN1Ykdlb21ldHJ5ID0gPExpbmVTdWJHZW9tZXRyeT4gdGFyZ2V0O1xuXG5cdFx0XHR2YXIgbnVtU2VnbWVudHM6bnVtYmVyID0gKHRoaXMuX3NlZ21lbnRzSCArIDEpICsgdHc7XG5cdFx0XHR2YXIgc3RhcnRQb3NpdGlvbnM6QXJyYXk8bnVtYmVyPjtcblx0XHRcdHZhciBlbmRQb3NpdGlvbnM6QXJyYXk8bnVtYmVyPjtcblx0XHRcdHZhciB0aGlja25lc3M6QXJyYXk8bnVtYmVyPjtcblxuXHRcdFx0dmFyIGh3Om51bWJlciA9IHRoaXMuX3dpZHRoLzI7XG5cdFx0XHR2YXIgaGg6bnVtYmVyID0gdGhpcy5faGVpZ2h0LzI7XG5cblxuXHRcdFx0aWYgKGxpbmVHZW9tZXRyeS5pbmRpY2VzICE9IG51bGwgJiYgbnVtU2VnbWVudHMgPT0gbGluZUdlb21ldHJ5Lm51bVNlZ21lbnRzKSB7XG5cdFx0XHRcdHN0YXJ0UG9zaXRpb25zID0gbGluZUdlb21ldHJ5LnN0YXJ0UG9zaXRpb25zO1xuXHRcdFx0XHRlbmRQb3NpdGlvbnMgPSBsaW5lR2VvbWV0cnkuZW5kUG9zaXRpb25zO1xuXHRcdFx0XHR0aGlja25lc3MgPSBsaW5lR2VvbWV0cnkudGhpY2tuZXNzO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c3RhcnRQb3NpdGlvbnMgPSBuZXcgQXJyYXk8bnVtYmVyPihudW1TZWdtZW50cyozKTtcblx0XHRcdFx0ZW5kUG9zaXRpb25zID0gbmV3IEFycmF5PG51bWJlcj4obnVtU2VnbWVudHMqMyk7XG5cdFx0XHRcdHRoaWNrbmVzcyA9IG5ldyBBcnJheTxudW1iZXI+KG51bVNlZ21lbnRzKTtcblx0XHRcdH1cblxuXHRcdFx0ZmlkeCA9IDA7XG5cblx0XHRcdHZpZHggPSAwO1xuXG5cdFx0XHRmb3IgKHlpID0gMDsgeWkgPD0gdGhpcy5fc2VnbWVudHNIOyArK3lpKSB7XG5cdFx0XHRcdHN0YXJ0UG9zaXRpb25zW3ZpZHhdID0gLWh3O1xuXHRcdFx0XHRzdGFydFBvc2l0aW9uc1t2aWR4ICsgMV0gPSAwO1xuXHRcdFx0XHRzdGFydFBvc2l0aW9uc1t2aWR4ICsgMl0gPSB5aSp0aGlzLl9oZWlnaHQgLSBoaDtcblxuXHRcdFx0XHRlbmRQb3NpdGlvbnNbdmlkeF0gPSBodztcblx0XHRcdFx0ZW5kUG9zaXRpb25zW3ZpZHggKyAxXSA9IDA7XG5cdFx0XHRcdGVuZFBvc2l0aW9uc1t2aWR4ICsgMl0gPSB5aSp0aGlzLl9oZWlnaHQgLSBoaDtcblxuXHRcdFx0XHR0aGlja25lc3NbZmlkeCsrXSA9IDE7XG5cblx0XHRcdFx0dmlkeCArPSAzO1xuXHRcdFx0fVxuXG5cblx0XHRcdGZvciAoeGkgPSAwOyB4aSA8PSB0aGlzLl9zZWdtZW50c1c7ICsreGkpIHtcblx0XHRcdFx0c3RhcnRQb3NpdGlvbnNbdmlkeF0gPSB4aSp0aGlzLl93aWR0aCAtIGh3O1xuXHRcdFx0XHRzdGFydFBvc2l0aW9uc1t2aWR4ICsgMV0gPSAwO1xuXHRcdFx0XHRzdGFydFBvc2l0aW9uc1t2aWR4ICsgMl0gPSAtaGg7XG5cblx0XHRcdFx0ZW5kUG9zaXRpb25zW3ZpZHhdID0geGkqdGhpcy5fd2lkdGggLSBodztcblx0XHRcdFx0ZW5kUG9zaXRpb25zW3ZpZHggKyAxXSA9IDA7XG5cdFx0XHRcdGVuZFBvc2l0aW9uc1t2aWR4ICsgMl0gPSBoaDtcblxuXHRcdFx0XHR0aGlja25lc3NbZmlkeCsrXSA9IDE7XG5cblx0XHRcdFx0dmlkeCArPSAzO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBidWlsZCByZWFsIGRhdGEgZnJvbSByYXcgZGF0YVxuXHRcdFx0bGluZUdlb21ldHJ5LnVwZGF0ZVBvc2l0aW9ucyhzdGFydFBvc2l0aW9ucywgZW5kUG9zaXRpb25zKTtcblx0XHRcdGxpbmVHZW9tZXRyeS51cGRhdGVUaGlja25lc3ModGhpY2tuZXNzKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQGluaGVyaXREb2Ncblx0ICovXG5cdHB1YmxpYyBfcEJ1aWxkVVZzKHRhcmdldDpTdWJHZW9tZXRyeUJhc2UsIGdlb21ldHJ5VHlwZTpzdHJpbmcpXG5cdHtcblx0XHR2YXIgdXZzOkFycmF5PG51bWJlcj47XG5cdFx0dmFyIG51bVZlcnRpY2VzOm51bWJlcjtcblxuXHRcdGlmIChnZW9tZXRyeVR5cGUgPT0gXCJ0cmlhbmdsZVN1Ykdlb21ldHJ5XCIpIHtcblxuXHRcdFx0bnVtVmVydGljZXMgPSAoIHRoaXMuX3NlZ21lbnRzSCArIDEgKSooIHRoaXMuX3NlZ21lbnRzVyArIDEgKTtcblxuXHRcdFx0aWYgKHRoaXMuX2RvdWJsZVNpZGVkKVxuXHRcdFx0XHRudW1WZXJ0aWNlcyAqPSAyO1xuXG5cdFx0XHR2YXIgdHJpYW5nbGVHZW9tZXRyeTpUcmlhbmdsZVN1Ykdlb21ldHJ5ID0gPFRyaWFuZ2xlU3ViR2VvbWV0cnk+IHRhcmdldDtcblxuXHRcdFx0aWYgKHRyaWFuZ2xlR2VvbWV0cnkudXZzICYmIG51bVZlcnRpY2VzID09IHRyaWFuZ2xlR2VvbWV0cnkubnVtVmVydGljZXMpIHtcblx0XHRcdFx0dXZzID0gdHJpYW5nbGVHZW9tZXRyeS51dnM7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR1dnMgPSBuZXcgQXJyYXk8bnVtYmVyPihudW1WZXJ0aWNlcyoyKTtcblx0XHRcdFx0dGhpcy5fcEludmFsaWRhdGVHZW9tZXRyeSgpXG5cdFx0XHR9XG5cblx0XHRcdHZhciBpbmRleDpudW1iZXIgPSAwO1xuXG5cdFx0XHRmb3IgKHZhciB5aTpudW1iZXIgPSAwOyB5aSA8PSB0aGlzLl9zZWdtZW50c0g7ICsreWkpIHtcblxuXHRcdFx0XHRmb3IgKHZhciB4aTpudW1iZXIgPSAwOyB4aSA8PSB0aGlzLl9zZWdtZW50c1c7ICsreGkpIHtcblx0XHRcdFx0XHR1dnNbaW5kZXhdID0gKHhpL3RoaXMuX3NlZ21lbnRzVykqdHJpYW5nbGVHZW9tZXRyeS5zY2FsZVU7XG5cdFx0XHRcdFx0dXZzW2luZGV4ICsgMV0gPSAoMSAtIHlpL3RoaXMuX3NlZ21lbnRzSCkqdHJpYW5nbGVHZW9tZXRyeS5zY2FsZVY7XG5cdFx0XHRcdFx0aW5kZXggKz0gMjtcblxuXHRcdFx0XHRcdGlmICh0aGlzLl9kb3VibGVTaWRlZCkge1xuXHRcdFx0XHRcdFx0dXZzW2luZGV4XSA9ICh4aS90aGlzLl9zZWdtZW50c1cpKnRyaWFuZ2xlR2VvbWV0cnkuc2NhbGVVO1xuXHRcdFx0XHRcdFx0dXZzW2luZGV4KzFdID0gKDEgLSB5aS90aGlzLl9zZWdtZW50c0gpKnRyaWFuZ2xlR2VvbWV0cnkuc2NhbGVWO1xuXHRcdFx0XHRcdFx0aW5kZXggKz0gMjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0dHJpYW5nbGVHZW9tZXRyeS51cGRhdGVVVnModXZzKTtcblxuXG5cdFx0fSBlbHNlIGlmIChnZW9tZXRyeVR5cGUgPT0gXCJsaW5lU3ViR2VvbWV0cnlcIikge1xuXHRcdFx0Ly9ub3RoaW5nIHRvIGRvIGhlcmVcblx0XHR9XG5cdH1cbn1cblxuZXhwb3J0ID0gUHJpbWl0aXZlUGxhbmVQcmVmYWI7Il19