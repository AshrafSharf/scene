var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var Matrix3DUtils = require("awayjs-core/lib/geom/Matrix3DUtils");
var Rectangle = require("awayjs-core/lib/geom/Rectangle");
var Event = require("awayjs-core/lib/events/Event");
var EventDispatcher = require("awayjs-core/lib/events/EventDispatcher");
var FreeMatrixProjection = require("awayjs-core/lib/projections/FreeMatrixProjection");
var Camera = require("awayjs-display/lib/entities/Camera");
var DirectionalShadowMapper = require("awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper");
var CascadeShadowMapper = (function (_super) {
    __extends(CascadeShadowMapper, _super);
    function CascadeShadowMapper(numCascades) {
        if (numCascades === void 0) { numCascades = 3; }
        _super.call(this);
        this._pScissorRectsInvalid = true;
        if (numCascades < 1 || numCascades > 4)
            throw new Error("numCascades must be an integer between 1 and 4");
        this._numCascades = numCascades;
        this._changeDispatcher = new EventDispatcher(this);
        this.init();
    }
    CascadeShadowMapper.prototype.getSplitRatio = function (index /*uint*/) {
        return this._splitRatios[index];
    };
    CascadeShadowMapper.prototype.setSplitRatio = function (index /*uint*/, value) {
        if (value < 0)
            value = 0;
        else if (value > 1)
            value = 1;
        if (index >= this._numCascades)
            throw new Error("index must be smaller than the number of cascades!");
        this._splitRatios[index] = value;
    };
    CascadeShadowMapper.prototype.getDepthProjections = function (partition /*uint*/) {
        return this._depthCameras[partition].viewProjection;
    };
    CascadeShadowMapper.prototype.init = function () {
        this._splitRatios = new Array(this._numCascades);
        this._nearPlaneDistances = new Array(this._numCascades);
        var s = 1;
        for (var i = this._numCascades - 1; i >= 0; --i) {
            this._splitRatios[i] = s;
            s *= .4;
        }
        this._texOffsetsX = Array(-1, 1, -1, 1);
        this._texOffsetsY = Array(1, 1, -1, -1);
        this._pScissorRects = new Array(4);
        this._depthLenses = new Array();
        this._depthCameras = new Array();
        for (i = 0; i < this._numCascades; ++i) {
            this._depthLenses[i] = new FreeMatrixProjection();
            this._depthCameras[i] = new Camera(this._depthLenses[i]);
        }
    };
    CascadeShadowMapper.prototype._pSetDepthMapSize = function (value /*uint*/) {
        _super.prototype._pSetDepthMapSize.call(this, value);
        this.invalidateScissorRects();
    };
    CascadeShadowMapper.prototype.invalidateScissorRects = function () {
        this._pScissorRectsInvalid = true;
    };
    Object.defineProperty(CascadeShadowMapper.prototype, "numCascades", {
        get: function () {
            return this._numCascades;
        },
        set: function (value /*int*/) {
            if (value == this._numCascades)
                return;
            if (value < 1 || value > 4)
                throw new Error("numCascades must be an integer between 1 and 4");
            this._numCascades = value;
            this.invalidateScissorRects();
            this.init();
            this.dispatchEvent(new Event(Event.CHANGE));
        },
        enumerable: true,
        configurable: true
    });
    CascadeShadowMapper.prototype.pDrawDepthMap = function (target, scene, renderer) {
        if (this._pScissorRectsInvalid)
            this.updateScissorRects();
        this._pCasterCollector.cullPlanes = this._pCullPlanes;
        this._pCasterCollector.camera = this._pOverallDepthCamera;
        this._pCasterCollector.clear();
        scene.traversePartitions(this._pCasterCollector);
        renderer._iRenderCascades(this._pCasterCollector, target, this._numCascades, this._pScissorRects, this._depthCameras);
    };
    CascadeShadowMapper.prototype.updateScissorRects = function () {
        var half = this._pDepthMapSize * .5;
        this._pScissorRects[0] = new Rectangle(0, 0, half, half);
        this._pScissorRects[1] = new Rectangle(half, 0, half, half);
        this._pScissorRects[2] = new Rectangle(0, half, half, half);
        this._pScissorRects[3] = new Rectangle(half, half, half, half);
        this._pScissorRectsInvalid = false;
    };
    CascadeShadowMapper.prototype.pUpdateDepthProjection = function (viewCamera) {
        var matrix;
        var projection = viewCamera.projection;
        var projectionNear = projection.near;
        var projectionRange = projection.far - projectionNear;
        this.pUpdateProjectionFromFrustumCorners(viewCamera, viewCamera.projection.frustumCorners, this._pMatrix);
        this._pMatrix.appendScale(.96, .96, 1);
        this._pOverallDepthProjection.matrix = this._pMatrix;
        this.pUpdateCullPlanes(viewCamera);
        for (var i = 0; i < this._numCascades; ++i) {
            matrix = this._depthLenses[i].matrix;
            this._nearPlaneDistances[i] = projectionNear + this._splitRatios[i] * projectionRange;
            this._depthCameras[i].transform.matrix3D = this._pOverallDepthCamera.transform.matrix3D;
            this.updateProjectionPartition(matrix, this._splitRatios[i], this._texOffsetsX[i], this._texOffsetsY[i]);
            this._depthLenses[i].matrix = matrix;
        }
    };
    CascadeShadowMapper.prototype.updateProjectionPartition = function (matrix, splitRatio, texOffsetX, texOffsetY) {
        var raw = Matrix3DUtils.RAW_DATA_CONTAINER;
        var xN, yN, zN;
        var xF, yF, zF;
        var minX = Number.POSITIVE_INFINITY, minY = Number.POSITIVE_INFINITY, minZ;
        var maxX = Number.NEGATIVE_INFINITY, maxY = Number.NEGATIVE_INFINITY, maxZ = Number.NEGATIVE_INFINITY;
        var i = 0;
        while (i < 12) {
            xN = this._pLocalFrustum[i];
            yN = this._pLocalFrustum[i + 1];
            zN = this._pLocalFrustum[i + 2];
            xF = xN + (this._pLocalFrustum[i + 12] - xN) * splitRatio;
            yF = yN + (this._pLocalFrustum[i + 13] - yN) * splitRatio;
            zF = zN + (this._pLocalFrustum[i + 14] - zN) * splitRatio;
            if (xN < minX)
                minX = xN;
            if (xN > maxX)
                maxX = xN;
            if (yN < minY)
                minY = yN;
            if (yN > maxY)
                maxY = yN;
            if (zN > maxZ)
                maxZ = zN;
            if (xF < minX)
                minX = xF;
            if (xF > maxX)
                maxX = xF;
            if (yF < minY)
                minY = yF;
            if (yF > maxY)
                maxY = yF;
            if (zF > maxZ)
                maxZ = zF;
            i += 3;
        }
        minZ = 1;
        var w = (maxX - minX);
        var h = (maxY - minY);
        var d = 1 / (maxZ - minZ);
        if (minX < 0)
            minX -= this._pSnap; // because int() rounds up for < 0
        if (minY < 0)
            minY -= this._pSnap;
        minX = Math.floor(minX / this._pSnap) * this._pSnap;
        minY = Math.floor(minY / this._pSnap) * this._pSnap;
        var snap2 = 2 * this._pSnap;
        w = Math.floor(w / snap2 + 1) * snap2;
        h = Math.floor(h / snap2 + 1) * snap2;
        maxX = minX + w;
        maxY = minY + h;
        w = 1 / w;
        h = 1 / h;
        raw[0] = 2 * w;
        raw[5] = 2 * h;
        raw[10] = d;
        raw[12] = -(maxX + minX) * w;
        raw[13] = -(maxY + minY) * h;
        raw[14] = -minZ * d;
        raw[15] = 1;
        raw[1] = raw[2] = raw[3] = raw[4] = raw[6] = raw[7] = raw[8] = raw[9] = raw[11] = 0;
        matrix.copyRawDataFrom(raw);
        matrix.appendScale(.96, .96, 1);
        matrix.appendTranslation(texOffsetX, texOffsetY, 0);
        matrix.appendScale(.5, .5, 1);
    };
    CascadeShadowMapper.prototype.addEventListener = function (type, listener) {
        this._changeDispatcher.addEventListener(type, listener);
    };
    CascadeShadowMapper.prototype.removeEventListener = function (type, listener) {
        this._changeDispatcher.removeEventListener(type, listener);
    };
    CascadeShadowMapper.prototype.dispatchEvent = function (event) {
        return this._changeDispatcher.dispatchEvent(event);
    };
    CascadeShadowMapper.prototype.hasEventListener = function (type) {
        return this._changeDispatcher.hasEventListener(type);
    };
    Object.defineProperty(CascadeShadowMapper.prototype, "_iNearPlaneDistances", {
        get: function () {
            return this._nearPlaneDistances;
        },
        enumerable: true,
        configurable: true
    });
    return CascadeShadowMapper;
})(DirectionalShadowMapper);
module.exports = CascadeShadowMapper;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1kaXNwbGF5L2xpYi9tYXRlcmlhbHMvc2hhZG93bWFwcGVycy9DYXNjYWRlU2hhZG93TWFwcGVyLnRzIl0sIm5hbWVzIjpbIkNhc2NhZGVTaGFkb3dNYXBwZXIiLCJDYXNjYWRlU2hhZG93TWFwcGVyLmNvbnN0cnVjdG9yIiwiQ2FzY2FkZVNoYWRvd01hcHBlci5nZXRTcGxpdFJhdGlvIiwiQ2FzY2FkZVNoYWRvd01hcHBlci5zZXRTcGxpdFJhdGlvIiwiQ2FzY2FkZVNoYWRvd01hcHBlci5nZXREZXB0aFByb2plY3Rpb25zIiwiQ2FzY2FkZVNoYWRvd01hcHBlci5pbml0IiwiQ2FzY2FkZVNoYWRvd01hcHBlci5fcFNldERlcHRoTWFwU2l6ZSIsIkNhc2NhZGVTaGFkb3dNYXBwZXIuaW52YWxpZGF0ZVNjaXNzb3JSZWN0cyIsIkNhc2NhZGVTaGFkb3dNYXBwZXIubnVtQ2FzY2FkZXMiLCJDYXNjYWRlU2hhZG93TWFwcGVyLnBEcmF3RGVwdGhNYXAiLCJDYXNjYWRlU2hhZG93TWFwcGVyLnVwZGF0ZVNjaXNzb3JSZWN0cyIsIkNhc2NhZGVTaGFkb3dNYXBwZXIucFVwZGF0ZURlcHRoUHJvamVjdGlvbiIsIkNhc2NhZGVTaGFkb3dNYXBwZXIudXBkYXRlUHJvamVjdGlvblBhcnRpdGlvbiIsIkNhc2NhZGVTaGFkb3dNYXBwZXIuYWRkRXZlbnRMaXN0ZW5lciIsIkNhc2NhZGVTaGFkb3dNYXBwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lciIsIkNhc2NhZGVTaGFkb3dNYXBwZXIuZGlzcGF0Y2hFdmVudCIsIkNhc2NhZGVTaGFkb3dNYXBwZXIuaGFzRXZlbnRMaXN0ZW5lciIsIkNhc2NhZGVTaGFkb3dNYXBwZXIuX2lOZWFyUGxhbmVEaXN0YW5jZXMiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUNBLElBQU8sYUFBYSxXQUFjLG9DQUFvQyxDQUFDLENBQUM7QUFDeEUsSUFBTyxTQUFTLFdBQWUsZ0NBQWdDLENBQUMsQ0FBQztBQUNqRSxJQUFPLEtBQUssV0FB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RUEsR0FBR0EsSUFBSUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDaENBLEVBQUVBLEdBQUdBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBO1lBQ2hDQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxHQUFHQSxFQUFFQSxDQUFDQSxHQUFHQSxFQUFFQSxDQUFDQSxHQUFDQSxVQUFVQSxDQUFDQTtZQUN4REEsRUFBRUEsR0FBR0EsRUFBRUEsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsRUFBRUEsQ0FBQ0EsR0FBR0EsRUFBRUEsQ0FBQ0EsR0FBQ0EsVUFBVUEsQ0FBQ0E7WUFDeERBLEVBQUVBLEdBQUdBLEVBQUVBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLEdBQUdBLEVBQUVBLENBQUNBLEdBQUdBLEVBQUVBLENBQUNBLEdBQUNBLFVBQVVBLENBQUNBO1lBQ3hEQSxFQUFFQSxDQUFDQSxDQUFDQSxFQUFFQSxHQUFHQSxJQUFJQSxDQUFDQTtnQkFDYkEsSUFBSUEsR0FBR0EsRUFBRUEsQ0FBQ0E7WUFDWEEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsRUFBRUEsR0FBR0EsSUFBSUEsQ0FBQ0E7Z0JBQ2JBLElBQUlBLEdBQUdBLEVBQUVBLENBQUNBO1lBQ1hBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLEdBQUdBLElBQUlBLENBQUNBO2dCQUNiQSxJQUFJQSxHQUFHQSxFQUFFQSxDQUFDQTtZQUNYQSxFQUFFQSxDQUFDQSxDQUFDQSxFQUFFQSxHQUFHQSxJQUFJQSxDQUFDQTtnQkFDYkEsSUFBSUEsR0FBR0EsRUFBRUEsQ0FBQ0E7WUFDWEEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsRUFBRUEsR0FBR0EsSUFBSUEsQ0FBQ0E7Z0JBQ2JBLElBQUlBLEdBQUdBLEVBQUVBLENBQUNBO1lBQ1hBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLEdBQUdBLElBQUlBLENBQUNBO2dCQUNiQSxJQUFJQSxHQUFHQSxFQUFFQSxDQUFDQTtZQUNYQSxFQUFFQSxDQUFDQSxDQUFDQSxFQUFFQSxHQUFHQSxJQUFJQSxDQUFDQTtnQkFDYkEsSUFBSUEsR0FBR0EsRUFBRUEsQ0FBQ0E7WUFDWEEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsRUFBRUEsR0FBR0EsSUFBSUEsQ0FBQ0E7Z0JBQ2JBLElBQUlBLEdBQUdBLEVBQUVBLENBQUNBO1lBQ1hBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLEdBQUdBLElBQUlBLENBQUNBO2dCQUNiQSxJQUFJQSxHQUFHQSxFQUFFQSxDQUFDQTtZQUNYQSxFQUFFQSxDQUFDQSxDQUFDQSxFQUFFQSxHQUFHQSxJQUFJQSxDQUFDQTtnQkFDYkEsSUFBSUEsR0FBR0EsRUFBRUEsQ0FBQ0E7WUFDWEEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7UUFDUkEsQ0FBQ0E7UUFFREEsSUFBSUEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFFVEEsSUFBSUEsQ0FBQ0EsR0FBVUEsQ0FBQ0EsSUFBSUEsR0FBR0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7UUFDN0JBLElBQUlBLENBQUNBLEdBQVVBLENBQUNBLElBQUlBLEdBQUdBLElBQUlBLENBQUNBLENBQUNBO1FBQzdCQSxJQUFJQSxDQUFDQSxHQUFVQSxDQUFDQSxHQUFDQSxDQUFDQSxJQUFJQSxHQUFHQSxJQUFJQSxDQUFDQSxDQUFDQTtRQUUvQkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7WUFDWkEsSUFBSUEsSUFBSUEsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0Esa0NBQWtDQTtRQUN4REEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7WUFDWkEsSUFBSUEsSUFBSUEsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0E7UUFDckJBLElBQUlBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLElBQUlBLEdBQUNBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBO1FBQ2hEQSxJQUFJQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxJQUFJQSxHQUFDQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQTtRQUVoREEsSUFBSUEsS0FBS0EsR0FBVUEsQ0FBQ0EsR0FBQ0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0E7UUFDakNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLEdBQUNBLEtBQUtBLEdBQUdBLENBQUNBLENBQUNBLEdBQUNBLEtBQUtBLENBQUNBO1FBQ2xDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxHQUFDQSxLQUFLQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFDQSxLQUFLQSxDQUFDQTtRQUVsQ0EsSUFBSUEsR0FBR0EsSUFBSUEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFDaEJBLElBQUlBLEdBQUdBLElBQUlBLEdBQUdBLENBQUNBLENBQUNBO1FBRWhCQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFDQSxDQUFDQSxDQUFDQTtRQUNSQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFDQSxDQUFDQSxDQUFDQTtRQUVSQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFDQSxDQUFDQSxDQUFDQTtRQUNiQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFDQSxDQUFDQSxDQUFDQTtRQUNiQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUNaQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxJQUFJQSxHQUFHQSxJQUFJQSxDQUFDQSxHQUFDQSxDQUFDQSxDQUFDQTtRQUMzQkEsR0FBR0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsR0FBR0EsSUFBSUEsQ0FBQ0EsR0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDM0JBLEdBQUdBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLEdBQUNBLENBQUNBLENBQUNBO1FBQ2xCQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUNaQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUVwRkEsTUFBTUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFDNUJBLE1BQU1BLENBQUNBLFdBQVdBLENBQUNBLEdBQUdBLEVBQUVBLEdBQUdBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1FBQ2hDQSxNQUFNQSxDQUFDQSxpQkFBaUJBLENBQUNBLFVBQVVBLEVBQUVBLFVBQVVBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1FBQ3BEQSxNQUFNQSxDQUFDQSxXQUFXQSxDQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQTtJQUMvQkEsQ0FBQ0E7SUFFTVosOENBQWdCQSxHQUF2QkEsVUFBd0JBLElBQVdBLEVBQUVBLFFBQWlCQTtRQUVyRGEsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxnQkFBZ0JBLENBQUNBLElBQUlBLEVBQUVBLFFBQVFBLENBQUNBLENBQUNBO0lBQ3pEQSxDQUFDQTtJQUVNYixpREFBbUJBLEdBQTFCQSxVQUEyQkEsSUFBV0EsRUFBRUEsUUFBaUJBO1FBRXhEYyxJQUFJQSxDQUFDQSxpQkFBaUJBLENBQUNBLG1CQUFtQkEsQ0FBQ0EsSUFBSUEsRUFBRUEsUUFBUUEsQ0FBQ0EsQ0FBQ0E7SUFDNURBLENBQUNBO0lBRU1kLDJDQUFhQSxHQUFwQkEsVUFBcUJBLEtBQVdBO1FBRS9CZSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxpQkFBaUJBLENBQUNBLGFBQWFBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBO0lBQ3BEQSxDQUFDQTtJQUVNZiw4Q0FBZ0JBLEdBQXZCQSxVQUF3QkEsSUFBV0E7UUFFbENnQixNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxpQkFBaUJBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7SUFDdERBLENBQUNBO0lBRURoQixzQkFBSUEscURBQW9CQTthQUF4QkE7WUFFQ2lCLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLG1CQUFtQkEsQ0FBQ0E7UUFDakNBLENBQUNBOzs7T0FBQWpCO0lBQ0ZBLDBCQUFDQTtBQUFEQSxDQS9QQSxBQStQQ0EsRUEvUGlDLHVCQUF1QixFQStQeEQ7QUFFRCxBQUE2QixpQkFBcEIsbUJBQW1CLENBQUMiLCJmaWxlIjoibWF0ZXJpYWxzL3NoYWRvd21hcHBlcnMvQ2FzY2FkZVNoYWRvd01hcHBlci5qcyIsInNvdXJjZVJvb3QiOiIuLi8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTWF0cml4M0RcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZ2VvbS9NYXRyaXgzRFwiKTtcclxuaW1wb3J0IE1hdHJpeDNEVXRpbHNcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9nZW9tL01hdHJpeDNEVXRpbHNcIik7XHJcbmltcG9ydCBSZWN0YW5nbGVcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2dlb20vUmVjdGFuZ2xlXCIpO1xyXG5pbXBvcnQgRXZlbnRcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZXZlbnRzL0V2ZW50XCIpO1xyXG5pbXBvcnQgRXZlbnREaXNwYXRjaGVyXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZXZlbnRzL0V2ZW50RGlzcGF0Y2hlclwiKTtcclxuaW1wb3J0IElFdmVudERpc3BhdGNoZXJcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9ldmVudHMvSUV2ZW50RGlzcGF0Y2hlclwiKTtcclxuaW1wb3J0IEZyZWVNYXRyaXhQcm9qZWN0aW9uXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL3Byb2plY3Rpb25zL0ZyZWVNYXRyaXhQcm9qZWN0aW9uXCIpO1xyXG5pbXBvcnQgSVByb2plY3Rpb25cdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL3Byb2plY3Rpb25zL0lQcm9qZWN0aW9uXCIpO1xyXG5cclxuaW1wb3J0IFNjZW5lXHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2NvbnRhaW5lcnMvU2NlbmVcIik7XHJcbmltcG9ydCBJUmVuZGVyZXJcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL3JlbmRlci9JUmVuZGVyZXJcIik7XHJcbmltcG9ydCBDYW1lcmFcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvZW50aXRpZXMvQ2FtZXJhXCIpO1xyXG5pbXBvcnQgRGlyZWN0aW9uYWxTaGFkb3dNYXBwZXJcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL21hdGVyaWFscy9zaGFkb3dtYXBwZXJzL0RpcmVjdGlvbmFsU2hhZG93TWFwcGVyXCIpO1xyXG5pbXBvcnQgUmVuZGVyVGV4dHVyZVx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL3RleHR1cmVzL1JlbmRlclRleHR1cmVcIik7XHJcbmltcG9ydCBUZXh0dXJlQmFzZVx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvdGV4dHVyZXMvVGV4dHVyZUJhc2VcIik7XHJcblxyXG5jbGFzcyBDYXNjYWRlU2hhZG93TWFwcGVyIGV4dGVuZHMgRGlyZWN0aW9uYWxTaGFkb3dNYXBwZXIgaW1wbGVtZW50cyBJRXZlbnREaXNwYXRjaGVyXHJcbntcclxuXHRwdWJsaWMgX3BTY2lzc29yUmVjdHM6UmVjdGFuZ2xlW107XHJcblx0cHJpdmF0ZSBfcFNjaXNzb3JSZWN0c0ludmFsaWQ6Ym9vbGVhbiA9IHRydWU7XHJcblx0cHJpdmF0ZSBfc3BsaXRSYXRpb3M6bnVtYmVyW107XHJcblxyXG5cdHByaXZhdGUgX251bUNhc2NhZGVzOm51bWJlciAvKmludCovO1xyXG5cdHByaXZhdGUgX2RlcHRoQ2FtZXJhczpBcnJheTxDYW1lcmE+O1xyXG5cdHByaXZhdGUgX2RlcHRoTGVuc2VzOkFycmF5PEZyZWVNYXRyaXhQcm9qZWN0aW9uPjtcclxuXHJcblx0cHJpdmF0ZSBfdGV4T2Zmc2V0c1g6QXJyYXk8bnVtYmVyPjtcclxuXHRwcml2YXRlIF90ZXhPZmZzZXRzWTpBcnJheTxudW1iZXI+O1xyXG5cclxuXHRwcml2YXRlIF9jaGFuZ2VEaXNwYXRjaGVyOkV2ZW50RGlzcGF0Y2hlcjtcclxuXHRwcml2YXRlIF9uZWFyUGxhbmVEaXN0YW5jZXM6bnVtYmVyW107XHJcblxyXG5cdGNvbnN0cnVjdG9yKG51bUNhc2NhZGVzOm51bWJlciAvKnVpbnQqLyA9IDMpXHJcblx0e1xyXG5cdFx0c3VwZXIoKTtcclxuXHJcblx0XHRpZiAobnVtQ2FzY2FkZXMgPCAxIHx8IG51bUNhc2NhZGVzID4gNClcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibnVtQ2FzY2FkZXMgbXVzdCBiZSBhbiBpbnRlZ2VyIGJldHdlZW4gMSBhbmQgNFwiKTtcclxuXHJcblx0XHR0aGlzLl9udW1DYXNjYWRlcyA9IG51bUNhc2NhZGVzO1xyXG5cdFx0dGhpcy5fY2hhbmdlRGlzcGF0Y2hlciA9IG5ldyBFdmVudERpc3BhdGNoZXIodGhpcyk7XHJcblx0XHR0aGlzLmluaXQoKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXRTcGxpdFJhdGlvKGluZGV4Om51bWJlciAvKnVpbnQqLyk6bnVtYmVyXHJcblx0e1xyXG5cdFx0cmV0dXJuIHRoaXMuX3NwbGl0UmF0aW9zW2luZGV4XTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXRTcGxpdFJhdGlvKGluZGV4Om51bWJlciAvKnVpbnQqLywgdmFsdWU6bnVtYmVyKVxyXG5cdHtcclxuXHRcdGlmICh2YWx1ZSA8IDApXHJcblx0XHRcdHZhbHVlID0gMDtcclxuXHRcdGVsc2UgaWYgKHZhbHVlID4gMSlcclxuXHRcdFx0dmFsdWUgPSAxO1xyXG5cclxuXHRcdGlmIChpbmRleCA+PSB0aGlzLl9udW1DYXNjYWRlcylcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiaW5kZXggbXVzdCBiZSBzbWFsbGVyIHRoYW4gdGhlIG51bWJlciBvZiBjYXNjYWRlcyFcIik7XHJcblxyXG5cdFx0dGhpcy5fc3BsaXRSYXRpb3NbaW5kZXhdID0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0RGVwdGhQcm9qZWN0aW9ucyhwYXJ0aXRpb246bnVtYmVyIC8qdWludCovKTpNYXRyaXgzRFxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9kZXB0aENhbWVyYXNbcGFydGl0aW9uXS52aWV3UHJvamVjdGlvbjtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgaW5pdCgpXHJcblx0e1xyXG5cdFx0dGhpcy5fc3BsaXRSYXRpb3MgPSBuZXcgQXJyYXk8bnVtYmVyPih0aGlzLl9udW1DYXNjYWRlcyk7XHJcblx0XHR0aGlzLl9uZWFyUGxhbmVEaXN0YW5jZXMgPSBuZXcgQXJyYXk8bnVtYmVyPih0aGlzLl9udW1DYXNjYWRlcyk7XHJcblxyXG5cdFx0dmFyIHM6bnVtYmVyID0gMTtcclxuXHRcdGZvciAodmFyIGk6bnVtYmVyIC8qaW50Ki8gPSB0aGlzLl9udW1DYXNjYWRlcyAtIDE7IGkgPj0gMDsgLS1pKSB7XHJcblx0XHRcdHRoaXMuX3NwbGl0UmF0aW9zW2ldID0gcztcclxuXHRcdFx0cyAqPSAuNDtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl90ZXhPZmZzZXRzWCA9IEFycmF5PG51bWJlcj4oLTEsIDEsIC0xLCAxKTtcclxuXHRcdHRoaXMuX3RleE9mZnNldHNZID0gQXJyYXk8bnVtYmVyPigxLCAxLCAtMSwgLTEpO1xyXG5cdFx0dGhpcy5fcFNjaXNzb3JSZWN0cyA9IG5ldyBBcnJheTxSZWN0YW5nbGU+KDQpO1xyXG5cdFx0dGhpcy5fZGVwdGhMZW5zZXMgPSBuZXcgQXJyYXk8RnJlZU1hdHJpeFByb2plY3Rpb24+KCk7XHJcblx0XHR0aGlzLl9kZXB0aENhbWVyYXMgPSBuZXcgQXJyYXk8Q2FtZXJhPigpO1xyXG5cclxuXHRcdGZvciAoaSA9IDA7IGkgPCB0aGlzLl9udW1DYXNjYWRlczsgKytpKSB7XHJcblx0XHRcdHRoaXMuX2RlcHRoTGVuc2VzW2ldID0gbmV3IEZyZWVNYXRyaXhQcm9qZWN0aW9uKCk7XHJcblx0XHRcdHRoaXMuX2RlcHRoQ2FtZXJhc1tpXSA9IG5ldyBDYW1lcmEodGhpcy5fZGVwdGhMZW5zZXNbaV0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHVibGljIF9wU2V0RGVwdGhNYXBTaXplKHZhbHVlOm51bWJlciAvKnVpbnQqLylcclxuXHR7XHJcblx0XHRzdXBlci5fcFNldERlcHRoTWFwU2l6ZSh2YWx1ZSk7XHJcblxyXG5cdFx0dGhpcy5pbnZhbGlkYXRlU2Npc3NvclJlY3RzKCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGludmFsaWRhdGVTY2lzc29yUmVjdHMoKVxyXG5cdHtcclxuXHRcdHRoaXMuX3BTY2lzc29yUmVjdHNJbnZhbGlkID0gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXQgbnVtQ2FzY2FkZXMoKTpudW1iZXIgLyppbnQqL1xyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9udW1DYXNjYWRlcztcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXQgbnVtQ2FzY2FkZXModmFsdWU6bnVtYmVyIC8qaW50Ki8pXHJcblx0e1xyXG5cdFx0aWYgKHZhbHVlID09IHRoaXMuX251bUNhc2NhZGVzKVxyXG5cdFx0XHRyZXR1cm47XHJcblxyXG5cdFx0aWYgKHZhbHVlIDwgMSB8fCB2YWx1ZSA+IDQpXHJcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm51bUNhc2NhZGVzIG11c3QgYmUgYW4gaW50ZWdlciBiZXR3ZWVuIDEgYW5kIDRcIik7XHJcblxyXG5cdFx0dGhpcy5fbnVtQ2FzY2FkZXMgPSB2YWx1ZTtcclxuXHRcdHRoaXMuaW52YWxpZGF0ZVNjaXNzb3JSZWN0cygpO1xyXG5cdFx0dGhpcy5pbml0KCk7XHJcblx0XHR0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KEV2ZW50LkNIQU5HRSkpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHBEcmF3RGVwdGhNYXAodGFyZ2V0OlJlbmRlclRleHR1cmUsIHNjZW5lOlNjZW5lLCByZW5kZXJlcjpJUmVuZGVyZXIpXHJcblx0e1xyXG5cdFx0aWYgKHRoaXMuX3BTY2lzc29yUmVjdHNJbnZhbGlkKVxyXG5cdFx0XHR0aGlzLnVwZGF0ZVNjaXNzb3JSZWN0cygpO1xyXG5cclxuXHRcdHRoaXMuX3BDYXN0ZXJDb2xsZWN0b3IuY3VsbFBsYW5lcyA9IHRoaXMuX3BDdWxsUGxhbmVzO1xyXG5cdFx0dGhpcy5fcENhc3RlckNvbGxlY3Rvci5jYW1lcmEgPSB0aGlzLl9wT3ZlcmFsbERlcHRoQ2FtZXJhO1xyXG5cdFx0dGhpcy5fcENhc3RlckNvbGxlY3Rvci5jbGVhcigpO1xyXG5cdFx0c2NlbmUudHJhdmVyc2VQYXJ0aXRpb25zKHRoaXMuX3BDYXN0ZXJDb2xsZWN0b3IpO1xyXG5cclxuXHRcdHJlbmRlcmVyLl9pUmVuZGVyQ2FzY2FkZXModGhpcy5fcENhc3RlckNvbGxlY3RvciwgdGFyZ2V0LCB0aGlzLl9udW1DYXNjYWRlcywgdGhpcy5fcFNjaXNzb3JSZWN0cywgdGhpcy5fZGVwdGhDYW1lcmFzKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgdXBkYXRlU2Npc3NvclJlY3RzKClcclxuXHR7XHJcblx0XHR2YXIgaGFsZjpudW1iZXIgPSB0aGlzLl9wRGVwdGhNYXBTaXplKi41O1xyXG5cclxuXHRcdHRoaXMuX3BTY2lzc29yUmVjdHNbMF0gPSBuZXcgUmVjdGFuZ2xlKDAsIDAsIGhhbGYsIGhhbGYpO1xyXG5cdFx0dGhpcy5fcFNjaXNzb3JSZWN0c1sxXSA9IG5ldyBSZWN0YW5nbGUoaGFsZiwgMCwgaGFsZiwgaGFsZik7XHJcblx0XHR0aGlzLl9wU2Npc3NvclJlY3RzWzJdID0gbmV3IFJlY3RhbmdsZSgwLCBoYWxmLCBoYWxmLCBoYWxmKTtcclxuXHRcdHRoaXMuX3BTY2lzc29yUmVjdHNbM10gPSBuZXcgUmVjdGFuZ2xlKGhhbGYsIGhhbGYsIGhhbGYsIGhhbGYpO1xyXG5cclxuXHRcdHRoaXMuX3BTY2lzc29yUmVjdHNJbnZhbGlkID0gZmFsc2U7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgcFVwZGF0ZURlcHRoUHJvamVjdGlvbih2aWV3Q2FtZXJhOkNhbWVyYSlcclxuXHR7XHJcblx0XHR2YXIgbWF0cml4Ok1hdHJpeDNEO1xyXG5cdFx0dmFyIHByb2plY3Rpb246SVByb2plY3Rpb24gPSB2aWV3Q2FtZXJhLnByb2plY3Rpb247XHJcblx0XHR2YXIgcHJvamVjdGlvbk5lYXI6bnVtYmVyID0gcHJvamVjdGlvbi5uZWFyO1xyXG5cdFx0dmFyIHByb2plY3Rpb25SYW5nZTpudW1iZXIgPSBwcm9qZWN0aW9uLmZhciAtIHByb2plY3Rpb25OZWFyO1xyXG5cclxuXHRcdHRoaXMucFVwZGF0ZVByb2plY3Rpb25Gcm9tRnJ1c3R1bUNvcm5lcnModmlld0NhbWVyYSwgdmlld0NhbWVyYS5wcm9qZWN0aW9uLmZydXN0dW1Db3JuZXJzLCB0aGlzLl9wTWF0cml4KTtcclxuXHRcdHRoaXMuX3BNYXRyaXguYXBwZW5kU2NhbGUoLjk2LCAuOTYsIDEpO1xyXG5cdFx0dGhpcy5fcE92ZXJhbGxEZXB0aFByb2plY3Rpb24ubWF0cml4ID0gdGhpcy5fcE1hdHJpeDtcclxuXHRcdHRoaXMucFVwZGF0ZUN1bGxQbGFuZXModmlld0NhbWVyYSk7XHJcblxyXG5cdFx0Zm9yICh2YXIgaTpudW1iZXIgLyppbnQqLyA9IDA7IGkgPCB0aGlzLl9udW1DYXNjYWRlczsgKytpKSB7XHJcblx0XHRcdG1hdHJpeCA9IHRoaXMuX2RlcHRoTGVuc2VzW2ldLm1hdHJpeDtcclxuXHJcblx0XHRcdHRoaXMuX25lYXJQbGFuZURpc3RhbmNlc1tpXSA9IHByb2plY3Rpb25OZWFyICsgdGhpcy5fc3BsaXRSYXRpb3NbaV0qcHJvamVjdGlvblJhbmdlO1xyXG5cdFx0XHR0aGlzLl9kZXB0aENhbWVyYXNbaV0udHJhbnNmb3JtLm1hdHJpeDNEID0gdGhpcy5fcE92ZXJhbGxEZXB0aENhbWVyYS50cmFuc2Zvcm0ubWF0cml4M0Q7XHJcblxyXG5cdFx0XHR0aGlzLnVwZGF0ZVByb2plY3Rpb25QYXJ0aXRpb24obWF0cml4LCB0aGlzLl9zcGxpdFJhdGlvc1tpXSwgdGhpcy5fdGV4T2Zmc2V0c1hbaV0sIHRoaXMuX3RleE9mZnNldHNZW2ldKTtcclxuXHJcblx0XHRcdHRoaXMuX2RlcHRoTGVuc2VzW2ldLm1hdHJpeCA9IG1hdHJpeDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgdXBkYXRlUHJvamVjdGlvblBhcnRpdGlvbihtYXRyaXg6TWF0cml4M0QsIHNwbGl0UmF0aW86bnVtYmVyLCB0ZXhPZmZzZXRYOm51bWJlciwgdGV4T2Zmc2V0WTpudW1iZXIpXHJcblx0e1xyXG5cdFx0dmFyIHJhdzpBcnJheTxudW1iZXI+ID0gTWF0cml4M0RVdGlscy5SQVdfREFUQV9DT05UQUlORVI7XHJcblx0XHR2YXIgeE46bnVtYmVyLCB5TjpudW1iZXIsIHpOOm51bWJlcjtcclxuXHRcdHZhciB4RjpudW1iZXIsIHlGOm51bWJlciwgekY6bnVtYmVyO1xyXG5cdFx0dmFyIG1pblg6bnVtYmVyID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLCBtaW5ZOm51bWJlciA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSwgbWluWjpudW1iZXI7XHJcblx0XHR2YXIgbWF4WDpudW1iZXIgPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksIG1heFk6bnVtYmVyID0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLCBtYXhaOm51bWJlciA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWTtcclxuXHRcdHZhciBpOm51bWJlciAvKnVpbnQqLyA9IDA7XHJcblxyXG5cdFx0d2hpbGUgKGkgPCAxMikge1xyXG5cdFx0XHR4TiA9IHRoaXMuX3BMb2NhbEZydXN0dW1baV07XHJcblx0XHRcdHlOID0gdGhpcy5fcExvY2FsRnJ1c3R1bVtpICsgMV07XHJcblx0XHRcdHpOID0gdGhpcy5fcExvY2FsRnJ1c3R1bVtpICsgMl07XHJcblx0XHRcdHhGID0geE4gKyAodGhpcy5fcExvY2FsRnJ1c3R1bVtpICsgMTJdIC0geE4pKnNwbGl0UmF0aW87XHJcblx0XHRcdHlGID0geU4gKyAodGhpcy5fcExvY2FsRnJ1c3R1bVtpICsgMTNdIC0geU4pKnNwbGl0UmF0aW87XHJcblx0XHRcdHpGID0gek4gKyAodGhpcy5fcExvY2FsRnJ1c3R1bVtpICsgMTRdIC0gek4pKnNwbGl0UmF0aW87XHJcblx0XHRcdGlmICh4TiA8IG1pblgpXHJcblx0XHRcdFx0bWluWCA9IHhOO1xyXG5cdFx0XHRpZiAoeE4gPiBtYXhYKVxyXG5cdFx0XHRcdG1heFggPSB4TjtcclxuXHRcdFx0aWYgKHlOIDwgbWluWSlcclxuXHRcdFx0XHRtaW5ZID0geU47XHJcblx0XHRcdGlmICh5TiA+IG1heFkpXHJcblx0XHRcdFx0bWF4WSA9IHlOO1xyXG5cdFx0XHRpZiAoek4gPiBtYXhaKVxyXG5cdFx0XHRcdG1heFogPSB6TjtcclxuXHRcdFx0aWYgKHhGIDwgbWluWClcclxuXHRcdFx0XHRtaW5YID0geEY7XHJcblx0XHRcdGlmICh4RiA+IG1heFgpXHJcblx0XHRcdFx0bWF4WCA9IHhGO1xyXG5cdFx0XHRpZiAoeUYgPCBtaW5ZKVxyXG5cdFx0XHRcdG1pblkgPSB5RjtcclxuXHRcdFx0aWYgKHlGID4gbWF4WSlcclxuXHRcdFx0XHRtYXhZID0geUY7XHJcblx0XHRcdGlmICh6RiA+IG1heFopXHJcblx0XHRcdFx0bWF4WiA9IHpGO1xyXG5cdFx0XHRpICs9IDM7XHJcblx0XHR9XHJcblxyXG5cdFx0bWluWiA9IDE7XHJcblxyXG5cdFx0dmFyIHc6bnVtYmVyID0gKG1heFggLSBtaW5YKTtcclxuXHRcdHZhciBoOm51bWJlciA9IChtYXhZIC0gbWluWSk7XHJcblx0XHR2YXIgZDpudW1iZXIgPSAxLyhtYXhaIC0gbWluWik7XHJcblxyXG5cdFx0aWYgKG1pblggPCAwKVxyXG5cdFx0XHRtaW5YIC09IHRoaXMuX3BTbmFwOyAvLyBiZWNhdXNlIGludCgpIHJvdW5kcyB1cCBmb3IgPCAwXHJcblx0XHRpZiAobWluWSA8IDApXHJcblx0XHRcdG1pblkgLT0gdGhpcy5fcFNuYXA7XHJcblx0XHRtaW5YID0gTWF0aC5mbG9vcihtaW5YL3RoaXMuX3BTbmFwKSp0aGlzLl9wU25hcDtcclxuXHRcdG1pblkgPSBNYXRoLmZsb29yKG1pblkvdGhpcy5fcFNuYXApKnRoaXMuX3BTbmFwO1xyXG5cclxuXHRcdHZhciBzbmFwMjpudW1iZXIgPSAyKnRoaXMuX3BTbmFwO1xyXG5cdFx0dyA9IE1hdGguZmxvb3Iody9zbmFwMiArIDEpKnNuYXAyO1xyXG5cdFx0aCA9IE1hdGguZmxvb3IoaC9zbmFwMiArIDEpKnNuYXAyO1xyXG5cclxuXHRcdG1heFggPSBtaW5YICsgdztcclxuXHRcdG1heFkgPSBtaW5ZICsgaDtcclxuXHJcblx0XHR3ID0gMS93O1xyXG5cdFx0aCA9IDEvaDtcclxuXHJcblx0XHRyYXdbMF0gPSAyKnc7XHJcblx0XHRyYXdbNV0gPSAyKmg7XHJcblx0XHRyYXdbMTBdID0gZDtcclxuXHRcdHJhd1sxMl0gPSAtKG1heFggKyBtaW5YKSp3O1xyXG5cdFx0cmF3WzEzXSA9IC0obWF4WSArIG1pblkpKmg7XHJcblx0XHRyYXdbMTRdID0gLW1pbloqZDtcclxuXHRcdHJhd1sxNV0gPSAxO1xyXG5cdFx0cmF3WzFdID0gcmF3WzJdID0gcmF3WzNdID0gcmF3WzRdID0gcmF3WzZdID0gcmF3WzddID0gcmF3WzhdID0gcmF3WzldID0gcmF3WzExXSA9IDA7XHJcblxyXG5cdFx0bWF0cml4LmNvcHlSYXdEYXRhRnJvbShyYXcpO1xyXG5cdFx0bWF0cml4LmFwcGVuZFNjYWxlKC45NiwgLjk2LCAxKTtcclxuXHRcdG1hdHJpeC5hcHBlbmRUcmFuc2xhdGlvbih0ZXhPZmZzZXRYLCB0ZXhPZmZzZXRZLCAwKTtcclxuXHRcdG1hdHJpeC5hcHBlbmRTY2FsZSguNSwgLjUsIDEpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGFkZEV2ZW50TGlzdGVuZXIodHlwZTpzdHJpbmcsIGxpc3RlbmVyOkZ1bmN0aW9uKVxyXG5cdHtcclxuXHRcdHRoaXMuX2NoYW5nZURpc3BhdGNoZXIuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcik7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlOnN0cmluZywgbGlzdGVuZXI6RnVuY3Rpb24pXHJcblx0e1xyXG5cdFx0dGhpcy5fY2hhbmdlRGlzcGF0Y2hlci5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBkaXNwYXRjaEV2ZW50KGV2ZW50OkV2ZW50KVxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9jaGFuZ2VEaXNwYXRjaGVyLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGhhc0V2ZW50TGlzdGVuZXIodHlwZTpzdHJpbmcpOmJvb2xlYW5cclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5fY2hhbmdlRGlzcGF0Y2hlci5oYXNFdmVudExpc3RlbmVyKHR5cGUpO1xyXG5cdH1cclxuXHJcblx0Z2V0IF9pTmVhclBsYW5lRGlzdGFuY2VzKCk6QXJyYXk8bnVtYmVyPlxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9uZWFyUGxhbmVEaXN0YW5jZXM7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgPSBDYXNjYWRlU2hhZG93TWFwcGVyOyJdfQ==