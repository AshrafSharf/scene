var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var MathConsts = require("awayjs-core/lib/geom/MathConsts");
var Vector3D = require("awayjs-core/lib/geom/Vector3D");
var LookAtController = require("awayjs-display/lib/controllers/LookAtController");
/**
 * Extended camera used to hover round a specified target object.
 *
 * @see    away.containers.View
 */
var HoverController = (function (_super) {
    __extends(HoverController, _super);
    /**
     * Creates a new <code>HoverController</code> object.
     */
    function HoverController(targetObject, lookAtObject, panAngle, tiltAngle, distance, minTiltAngle, maxTiltAngle, minPanAngle, maxPanAngle, steps, yFactor, wrapPanAngle) {
        if (targetObject === void 0) { targetObject = null; }
        if (lookAtObject === void 0) { lookAtObject = null; }
        if (panAngle === void 0) { panAngle = 0; }
        if (tiltAngle === void 0) { tiltAngle = 90; }
        if (distance === void 0) { distance = 1000; }
        if (minTiltAngle === void 0) { minTiltAngle = -90; }
        if (maxTiltAngle === void 0) { maxTiltAngle = 90; }
        if (minPanAngle === void 0) { minPanAngle = null; }
        if (maxPanAngle === void 0) { maxPanAngle = null; }
        if (steps === void 0) { steps = 8; }
        if (yFactor === void 0) { yFactor = 2; }
        if (wrapPanAngle === void 0) { wrapPanAngle = false; }
        _super.call(this, targetObject, lookAtObject);
        this._iCurrentPanAngle = 0;
        this._iCurrentTiltAngle = 90;
        this._panAngle = 0;
        this._tiltAngle = 90;
        this._distance = 1000;
        this._minPanAngle = -Infinity;
        this._maxPanAngle = Infinity;
        this._minTiltAngle = -90;
        this._maxTiltAngle = 90;
        this._steps = 8;
        this._yFactor = 2;
        this._wrapPanAngle = false;
        this._upAxis = new Vector3D();
        this.distance = distance;
        this.panAngle = panAngle;
        this.tiltAngle = tiltAngle;
        this.minPanAngle = (minPanAngle != null) ? minPanAngle : -Infinity;
        this.maxPanAngle = (maxPanAngle != null) ? maxPanAngle : Infinity;
        this.minTiltAngle = minTiltAngle;
        this.maxTiltAngle = maxTiltAngle;
        this.steps = steps;
        this.yFactor = yFactor;
        this.wrapPanAngle = wrapPanAngle;
        //values passed in contrustor are applied immediately
        this._iCurrentPanAngle = this._panAngle;
        this._iCurrentTiltAngle = this._tiltAngle;
    }
    Object.defineProperty(HoverController.prototype, "steps", {
        /**
         * Fractional step taken each time the <code>hover()</code> method is called. Defaults to 8.
         *
         * Affects the speed at which the <code>tiltAngle</code> and <code>panAngle</code> resolve to their targets.
         *
         * @see    #tiltAngle
         * @see    #panAngle
         */
        get: function () {
            return this._steps;
        },
        set: function (val) {
            val = (val < 1) ? 1 : val;
            if (this._steps == val)
                return;
            this._steps = val;
            this.pNotifyUpdate();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HoverController.prototype, "panAngle", {
        /**
         * Rotation of the camera in degrees around the y axis. Defaults to 0.
         */
        get: function () {
            return this._panAngle;
        },
        set: function (val) {
            val = Math.max(this._minPanAngle, Math.min(this._maxPanAngle, val));
            if (this._panAngle == val)
                return;
            this._panAngle = val;
            this.pNotifyUpdate();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HoverController.prototype, "tiltAngle", {
        /**
         * Elevation angle of the camera in degrees. Defaults to 90.
         */
        get: function () {
            return this._tiltAngle;
        },
        set: function (val) {
            val = Math.max(this._minTiltAngle, Math.min(this._maxTiltAngle, val));
            if (this._tiltAngle == val)
                return;
            this._tiltAngle = val;
            this.pNotifyUpdate();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HoverController.prototype, "distance", {
        /**
         * Distance between the camera and the specified target. Defaults to 1000.
         */
        get: function () {
            return this._distance;
        },
        set: function (val) {
            if (this._distance == val)
                return;
            this._distance = val;
            this.pNotifyUpdate();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HoverController.prototype, "minPanAngle", {
        /**
         * Minimum bounds for the <code>panAngle</code>. Defaults to -Infinity.
         *
         * @see    #panAngle
         */
        get: function () {
            return this._minPanAngle;
        },
        set: function (val) {
            if (this._minPanAngle == val)
                return;
            this._minPanAngle = val;
            this.panAngle = Math.max(this._minPanAngle, Math.min(this._maxPanAngle, this._panAngle));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HoverController.prototype, "maxPanAngle", {
        /**
         * Maximum bounds for the <code>panAngle</code>. Defaults to Infinity.
         *
         * @see    #panAngle
         */
        get: function () {
            return this._maxPanAngle;
        },
        set: function (val) {
            if (this._maxPanAngle == val)
                return;
            this._maxPanAngle = val;
            this.panAngle = Math.max(this._minPanAngle, Math.min(this._maxPanAngle, this._panAngle));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HoverController.prototype, "minTiltAngle", {
        /**
         * Minimum bounds for the <code>tiltAngle</code>. Defaults to -90.
         *
         * @see    #tiltAngle
         */
        get: function () {
            return this._minTiltAngle;
        },
        set: function (val) {
            if (this._minTiltAngle == val)
                return;
            this._minTiltAngle = val;
            this.tiltAngle = Math.max(this._minTiltAngle, Math.min(this._maxTiltAngle, this._tiltAngle));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HoverController.prototype, "maxTiltAngle", {
        /**
         * Maximum bounds for the <code>tiltAngle</code>. Defaults to 90.
         *
         * @see    #tiltAngle
         */
        get: function () {
            return this._maxTiltAngle;
        },
        set: function (val) {
            if (this._maxTiltAngle == val)
                return;
            this._maxTiltAngle = val;
            this.tiltAngle = Math.max(this._minTiltAngle, Math.min(this._maxTiltAngle, this._tiltAngle));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HoverController.prototype, "yFactor", {
        /**
         * Fractional difference in distance between the horizontal camera orientation and vertical camera orientation. Defaults to 2.
         *
         * @see    #distance
         */
        get: function () {
            return this._yFactor;
        },
        set: function (val) {
            if (this._yFactor == val)
                return;
            this._yFactor = val;
            this.pNotifyUpdate();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HoverController.prototype, "wrapPanAngle", {
        /**
         * Defines whether the value of the pan angle wraps when over 360 degrees or under 0 degrees. Defaults to false.
         */
        get: function () {
            return this._wrapPanAngle;
        },
        set: function (val) {
            if (this._wrapPanAngle == val)
                return;
            this._wrapPanAngle = val;
            this.pNotifyUpdate();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Updates the current tilt angle and pan angle values.
     *
     * Values are calculated using the defined <code>tiltAngle</code>, <code>panAngle</code> and <code>steps</code> variables.
     *
     * @param interpolate   If the update to a target pan- or tiltAngle is interpolated. Default is true.
     *
     * @see    #tiltAngle
     * @see    #panAngle
     * @see    #steps
     */
    HoverController.prototype.update = function (interpolate) {
        if (interpolate === void 0) { interpolate = true; }
        if (this._tiltAngle != this._iCurrentTiltAngle || this._panAngle != this._iCurrentPanAngle) {
            this.pNotifyUpdate();
            if (this._wrapPanAngle) {
                if (this._panAngle < 0) {
                    this._iCurrentPanAngle += this._panAngle % 360 + 360 - this._panAngle;
                    this._panAngle = this._panAngle % 360 + 360;
                }
                else {
                    this._iCurrentPanAngle += this._panAngle % 360 - this._panAngle;
                    this._panAngle = this._panAngle % 360;
                }
                while (this._panAngle - this._iCurrentPanAngle < -180)
                    this._iCurrentPanAngle -= 360;
                while (this._panAngle - this._iCurrentPanAngle > 180)
                    this._iCurrentPanAngle += 360;
            }
            if (interpolate) {
                this._iCurrentTiltAngle += (this._tiltAngle - this._iCurrentTiltAngle) / (this.steps + 1);
                this._iCurrentPanAngle += (this._panAngle - this._iCurrentPanAngle) / (this.steps + 1);
            }
            else {
                this._iCurrentPanAngle = this._panAngle;
                this._iCurrentTiltAngle = this._tiltAngle;
            }
            //snap coords if angle differences are close
            if ((Math.abs(this.tiltAngle - this._iCurrentTiltAngle) < 0.01) && (Math.abs(this._panAngle - this._iCurrentPanAngle) < 0.01)) {
                this._iCurrentTiltAngle = this._tiltAngle;
                this._iCurrentPanAngle = this._panAngle;
            }
        }
        var pos = (this.lookAtObject) ? this.lookAtObject.transform.position : (this.lookAtPosition) ? this.lookAtPosition : this._pOrigin;
        this.targetObject.x = pos.x + this.distance * Math.sin(this._iCurrentPanAngle * MathConsts.DEGREES_TO_RADIANS) * Math.cos(this._iCurrentTiltAngle * MathConsts.DEGREES_TO_RADIANS);
        this.targetObject.y = pos.y + this.distance * Math.sin(this._iCurrentTiltAngle * MathConsts.DEGREES_TO_RADIANS) * this.yFactor;
        this.targetObject.z = pos.z + this.distance * Math.cos(this._iCurrentPanAngle * MathConsts.DEGREES_TO_RADIANS) * Math.cos(this._iCurrentTiltAngle * MathConsts.DEGREES_TO_RADIANS);
        this._upAxis.x = -Math.sin(this._iCurrentPanAngle * MathConsts.DEGREES_TO_RADIANS) * Math.sin(this._iCurrentTiltAngle * MathConsts.DEGREES_TO_RADIANS);
        this._upAxis.y = Math.cos(this._iCurrentTiltAngle * MathConsts.DEGREES_TO_RADIANS);
        this._upAxis.z = -Math.cos(this._iCurrentPanAngle * MathConsts.DEGREES_TO_RADIANS) * Math.sin(this._iCurrentTiltAngle * MathConsts.DEGREES_TO_RADIANS);
        if (this._pTargetObject) {
            if (this._pLookAtPosition)
                this._pTargetObject.lookAt(this._pLookAtPosition, this._upAxis);
            else if (this._pLookAtObject)
                this._pTargetObject.lookAt(this._pLookAtObject.scene ? this._pLookAtObject.scenePosition : this._pLookAtObject.transform.position, this._upAxis);
        }
    };
    return HoverController;
})(LookAtController);
module.exports = HoverController;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1kaXNwbGF5L2xpYi9jb250cm9sbGVycy9Ib3ZlckNvbnRyb2xsZXIudHMiXSwibmFtZXMiOlsiSG92ZXJDb250cm9sbGVyIiwiSG92ZXJDb250cm9sbGVyLmNvbnN0cnVjdG9yIiwiSG92ZXJDb250cm9sbGVyLnN0ZXBzIiwiSG92ZXJDb250cm9sbGVyLnBhbkFuZ2xlIiwiSG92ZXJDb250cm9sbGVyLnRpbHRBbmdsZSIsIkhvdmVyQ29udHJvbGxlci5kaXN0YW5jZSIsIkhvdmVyQ29udHJvbGxlci5taW5QYW5BbmdsZSIsIkhvdmVyQ29udHJvbGxlci5tYXhQYW5BbmdsZSIsIkhvdmVyQ29udHJvbGxlci5taW5UaWx0QW5nbGUiLCJIb3ZlckNvbnRyb2xsZXIubWF4VGlsdEFuZ2xlIiwiSG92ZXJDb250cm9sbGVyLnlGYWN0b3IiLCJIb3ZlckNvbnRyb2xsZXIud3JhcFBhbkFuZ2xlIiwiSG92ZXJDb250cm9sbGVyLnVwZGF0ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBTyxVQUFVLFdBQWMsaUNBQWlDLENBQUMsQ0FBQztBQUNsRSxJQUFPLFFBQVEsV0FBZSwrQkFBK0IsQ0FBQyxDQUFDO0FBRy9ELElBQU8sZ0JBQWdCLFdBQWEsaURBQWlELENBQUMsQ0FBQztBQUV2RixBQUtBOzs7O0dBREc7SUFDRyxlQUFlO0lBQVNBLFVBQXhCQSxlQUFlQSxVQUF5QkE7SUEwTjdDQTs7T0FFR0E7SUFDSEEsU0E3TktBLGVBQWVBLENBNk5SQSxZQUFpQ0EsRUFBRUEsWUFBaUNBLEVBQUVBLFFBQW1CQSxFQUFFQSxTQUFxQkEsRUFBRUEsUUFBc0JBLEVBQUVBLFlBQXlCQSxFQUFFQSxZQUF3QkEsRUFBRUEsV0FBeUJBLEVBQUVBLFdBQXlCQSxFQUFFQSxLQUFnQkEsRUFBRUEsT0FBa0JBLEVBQUVBLFlBQTRCQTtRQUF2VEMsNEJBQWlDQSxHQUFqQ0EsbUJBQWlDQTtRQUFFQSw0QkFBaUNBLEdBQWpDQSxtQkFBaUNBO1FBQUVBLHdCQUFtQkEsR0FBbkJBLFlBQW1CQTtRQUFFQSx5QkFBcUJBLEdBQXJCQSxjQUFxQkE7UUFBRUEsd0JBQXNCQSxHQUF0QkEsZUFBc0JBO1FBQUVBLDRCQUF5QkEsR0FBekJBLGdCQUF1QkEsRUFBRUE7UUFBRUEsNEJBQXdCQSxHQUF4QkEsaUJBQXdCQTtRQUFFQSwyQkFBeUJBLEdBQXpCQSxrQkFBeUJBO1FBQUVBLDJCQUF5QkEsR0FBekJBLGtCQUF5QkE7UUFBRUEscUJBQWdCQSxHQUFoQkEsU0FBZ0JBO1FBQUVBLHVCQUFrQkEsR0FBbEJBLFdBQWtCQTtRQUFFQSw0QkFBNEJBLEdBQTVCQSxvQkFBNEJBO1FBRWxVQSxrQkFBTUEsWUFBWUEsRUFBRUEsWUFBWUEsQ0FBQ0EsQ0FBQ0E7UUE3TjVCQSxzQkFBaUJBLEdBQVVBLENBQUNBLENBQUNBO1FBQzdCQSx1QkFBa0JBLEdBQVVBLEVBQUVBLENBQUNBO1FBRTlCQSxjQUFTQSxHQUFVQSxDQUFDQSxDQUFDQTtRQUNyQkEsZUFBVUEsR0FBVUEsRUFBRUEsQ0FBQ0E7UUFDdkJBLGNBQVNBLEdBQVVBLElBQUlBLENBQUNBO1FBQ3hCQSxpQkFBWUEsR0FBVUEsQ0FBQ0EsUUFBUUEsQ0FBQ0E7UUFDaENBLGlCQUFZQSxHQUFVQSxRQUFRQSxDQUFDQTtRQUMvQkEsa0JBQWFBLEdBQVVBLENBQUNBLEVBQUVBLENBQUNBO1FBQzNCQSxrQkFBYUEsR0FBVUEsRUFBRUEsQ0FBQ0E7UUFDMUJBLFdBQU1BLEdBQVVBLENBQUNBLENBQUNBO1FBQ2xCQSxhQUFRQSxHQUFVQSxDQUFDQSxDQUFDQTtRQUNwQkEsa0JBQWFBLEdBQVdBLEtBQUtBLENBQUNBO1FBQzlCQSxZQUFPQSxHQUFZQSxJQUFJQSxRQUFRQSxFQUFFQSxDQUFDQTtRQWtOekNBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLFFBQVFBLENBQUNBO1FBQ3pCQSxJQUFJQSxDQUFDQSxRQUFRQSxHQUFHQSxRQUFRQSxDQUFDQTtRQUN6QkEsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBR0EsU0FBU0EsQ0FBQ0E7UUFDM0JBLElBQUlBLENBQUNBLFdBQVdBLEdBQUdBLENBQUVBLFdBQVdBLElBQUlBLElBQUlBLENBQUVBLEdBQUVBLFdBQVdBLEdBQUdBLENBQUNBLFFBQVFBLENBQUNBO1FBQ3BFQSxJQUFJQSxDQUFDQSxXQUFXQSxHQUFHQSxDQUFFQSxXQUFXQSxJQUFJQSxJQUFJQSxDQUFFQSxHQUFFQSxXQUFXQSxHQUFHQSxRQUFRQSxDQUFDQTtRQUNuRUEsSUFBSUEsQ0FBQ0EsWUFBWUEsR0FBR0EsWUFBWUEsQ0FBQ0E7UUFDakNBLElBQUlBLENBQUNBLFlBQVlBLEdBQUdBLFlBQVlBLENBQUNBO1FBQ2pDQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxLQUFLQSxDQUFDQTtRQUNuQkEsSUFBSUEsQ0FBQ0EsT0FBT0EsR0FBR0EsT0FBT0EsQ0FBQ0E7UUFDdkJBLElBQUlBLENBQUNBLFlBQVlBLEdBQUdBLFlBQVlBLENBQUNBO1FBRWpDQSxBQUNBQSxxREFEcURBO1FBQ3JEQSxJQUFJQSxDQUFDQSxpQkFBaUJBLEdBQUdBLElBQUlBLENBQUNBLFNBQVNBLENBQUNBO1FBQ3hDQSxJQUFJQSxDQUFDQSxrQkFBa0JBLEdBQUdBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBO0lBQzNDQSxDQUFDQTtJQXROREQsc0JBQVdBLGtDQUFLQTtRQVJoQkE7Ozs7Ozs7V0FPR0E7YUFDSEE7WUFFQ0UsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0E7UUFDcEJBLENBQUNBO2FBRURGLFVBQWlCQSxHQUFVQTtZQUUxQkUsR0FBR0EsR0FBR0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBRUEsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0E7WUFFekJBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLE1BQU1BLElBQUlBLEdBQUdBLENBQUNBO2dCQUN0QkEsTUFBTUEsQ0FBQ0E7WUFFUkEsSUFBSUEsQ0FBQ0EsTUFBTUEsR0FBR0EsR0FBR0EsQ0FBQ0E7WUFFbEJBLElBQUlBLENBQUNBLGFBQWFBLEVBQUVBLENBQUNBO1FBQ3RCQSxDQUFDQTs7O09BWkFGO0lBaUJEQSxzQkFBV0EscUNBQVFBO1FBSG5CQTs7V0FFR0E7YUFDSEE7WUFFQ0csTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0E7UUFDdkJBLENBQUNBO2FBRURILFVBQW9CQSxHQUFVQTtZQUU3QkcsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsWUFBWUEsRUFBRUEsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsWUFBWUEsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFFcEVBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFNBQVNBLElBQUlBLEdBQUdBLENBQUNBO2dCQUN6QkEsTUFBTUEsQ0FBQ0E7WUFFUkEsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBR0EsR0FBR0EsQ0FBQ0E7WUFFckJBLElBQUlBLENBQUNBLGFBQWFBLEVBQUVBLENBQUNBO1FBQ3RCQSxDQUFDQTs7O09BWkFIO0lBaUJEQSxzQkFBV0Esc0NBQVNBO1FBSHBCQTs7V0FFR0E7YUFDSEE7WUFFQ0ksTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0E7UUFDeEJBLENBQUNBO2FBRURKLFVBQXFCQSxHQUFVQTtZQUU5QkksR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsRUFBRUEsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFFdEVBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFVBQVVBLElBQUlBLEdBQUdBLENBQUNBO2dCQUMxQkEsTUFBTUEsQ0FBQ0E7WUFFUkEsSUFBSUEsQ0FBQ0EsVUFBVUEsR0FBR0EsR0FBR0EsQ0FBQ0E7WUFFdEJBLElBQUlBLENBQUNBLGFBQWFBLEVBQUVBLENBQUNBO1FBQ3RCQSxDQUFDQTs7O09BWkFKO0lBaUJEQSxzQkFBV0EscUNBQVFBO1FBSG5CQTs7V0FFR0E7YUFDSEE7WUFFQ0ssTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0E7UUFDdkJBLENBQUNBO2FBRURMLFVBQW9CQSxHQUFVQTtZQUU3QkssRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsSUFBSUEsR0FBR0EsQ0FBQ0E7Z0JBQ3pCQSxNQUFNQSxDQUFDQTtZQUVSQSxJQUFJQSxDQUFDQSxTQUFTQSxHQUFHQSxHQUFHQSxDQUFDQTtZQUVyQkEsSUFBSUEsQ0FBQ0EsYUFBYUEsRUFBRUEsQ0FBQ0E7UUFDdEJBLENBQUNBOzs7T0FWQUw7SUFpQkRBLHNCQUFXQSx3Q0FBV0E7UUFMdEJBOzs7O1dBSUdBO2FBQ0hBO1lBRUNNLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLFlBQVlBLENBQUNBO1FBQzFCQSxDQUFDQTthQUVETixVQUF1QkEsR0FBVUE7WUFFaENNLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFlBQVlBLElBQUlBLEdBQUdBLENBQUNBO2dCQUM1QkEsTUFBTUEsQ0FBQ0E7WUFFUkEsSUFBSUEsQ0FBQ0EsWUFBWUEsR0FBR0EsR0FBR0EsQ0FBQ0E7WUFFeEJBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLFlBQVlBLEVBQUVBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLFlBQVlBLEVBQUVBLElBQUlBLENBQUNBLFNBQVNBLENBQUNBLENBQUNBLENBQUNBO1FBQzFGQSxDQUFDQTs7O09BVkFOO0lBaUJEQSxzQkFBV0Esd0NBQVdBO1FBTHRCQTs7OztXQUlHQTthQUNIQTtZQUVDTyxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxDQUFDQTtRQUMxQkEsQ0FBQ0E7YUFFRFAsVUFBdUJBLEdBQVVBO1lBRWhDTyxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxJQUFJQSxHQUFHQSxDQUFDQTtnQkFDNUJBLE1BQU1BLENBQUNBO1lBRVJBLElBQUlBLENBQUNBLFlBQVlBLEdBQUdBLEdBQUdBLENBQUNBO1lBRXhCQSxJQUFJQSxDQUFDQSxRQUFRQSxHQUFHQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxFQUFFQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxFQUFFQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMxRkEsQ0FBQ0E7OztPQVZBUDtJQWlCREEsc0JBQVdBLHlDQUFZQTtRQUx2QkE7Ozs7V0FJR0E7YUFDSEE7WUFFQ1EsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsQ0FBQ0E7UUFDM0JBLENBQUNBO2FBRURSLFVBQXdCQSxHQUFVQTtZQUVqQ1EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsSUFBSUEsR0FBR0EsQ0FBQ0E7Z0JBQzdCQSxNQUFNQSxDQUFDQTtZQUVSQSxJQUFJQSxDQUFDQSxhQUFhQSxHQUFHQSxHQUFHQSxDQUFDQTtZQUV6QkEsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBR0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsRUFBRUEsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsRUFBRUEsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDOUZBLENBQUNBOzs7T0FWQVI7SUFpQkRBLHNCQUFXQSx5Q0FBWUE7UUFMdkJBOzs7O1dBSUdBO2FBQ0hBO1lBRUNTLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBO1FBQzNCQSxDQUFDQTthQUVEVCxVQUF3QkEsR0FBVUE7WUFFakNTLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLGFBQWFBLElBQUlBLEdBQUdBLENBQUNBO2dCQUM3QkEsTUFBTUEsQ0FBQ0E7WUFFUkEsSUFBSUEsQ0FBQ0EsYUFBYUEsR0FBR0EsR0FBR0EsQ0FBQ0E7WUFFekJBLElBQUlBLENBQUNBLFNBQVNBLEdBQUdBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLGFBQWFBLEVBQUVBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLGFBQWFBLEVBQUVBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLENBQUNBLENBQUNBO1FBQzlGQSxDQUFDQTs7O09BVkFUO0lBaUJEQSxzQkFBV0Esb0NBQU9BO1FBTGxCQTs7OztXQUlHQTthQUNIQTtZQUVDVSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQTtRQUN0QkEsQ0FBQ0E7YUFFRFYsVUFBbUJBLEdBQVVBO1lBRTVCVSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxRQUFRQSxJQUFJQSxHQUFHQSxDQUFDQTtnQkFDeEJBLE1BQU1BLENBQUNBO1lBRVJBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLEdBQUdBLENBQUNBO1lBRXBCQSxJQUFJQSxDQUFDQSxhQUFhQSxFQUFFQSxDQUFDQTtRQUN0QkEsQ0FBQ0E7OztPQVZBVjtJQWVEQSxzQkFBV0EseUNBQVlBO1FBSHZCQTs7V0FFR0E7YUFDSEE7WUFFQ1csTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsQ0FBQ0E7UUFDM0JBLENBQUNBO2FBRURYLFVBQXdCQSxHQUFXQTtZQUVsQ1csRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsSUFBSUEsR0FBR0EsQ0FBQ0E7Z0JBQzdCQSxNQUFNQSxDQUFDQTtZQUVSQSxJQUFJQSxDQUFDQSxhQUFhQSxHQUFHQSxHQUFHQSxDQUFDQTtZQUV6QkEsSUFBSUEsQ0FBQ0EsYUFBYUEsRUFBRUEsQ0FBQ0E7UUFDdEJBLENBQUNBOzs7T0FWQVg7SUFtQ0RBOzs7Ozs7Ozs7O09BVUdBO0lBQ0lBLGdDQUFNQSxHQUFiQSxVQUFjQSxXQUEwQkE7UUFBMUJZLDJCQUEwQkEsR0FBMUJBLGtCQUEwQkE7UUFFdkNBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFVBQVVBLElBQUlBLElBQUlBLENBQUNBLGtCQUFrQkEsSUFBSUEsSUFBSUEsQ0FBQ0EsU0FBU0EsSUFBSUEsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUU1RkEsSUFBSUEsQ0FBQ0EsYUFBYUEsRUFBRUEsQ0FBQ0E7WUFFckJBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBO2dCQUN4QkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7b0JBQ3hCQSxJQUFJQSxDQUFDQSxpQkFBaUJBLElBQUlBLElBQUlBLENBQUNBLFNBQVNBLEdBQUNBLEdBQUdBLEdBQUdBLEdBQUdBLEdBQUdBLElBQUlBLENBQUNBLFNBQVNBLENBQUNBO29CQUNwRUEsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBR0EsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBQ0EsR0FBR0EsR0FBR0EsR0FBR0EsQ0FBQ0E7Z0JBQzNDQSxDQUFDQTtnQkFBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7b0JBQ1BBLElBQUlBLENBQUNBLGlCQUFpQkEsSUFBSUEsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBQ0EsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0E7b0JBQzlEQSxJQUFJQSxDQUFDQSxTQUFTQSxHQUFHQSxJQUFJQSxDQUFDQSxTQUFTQSxHQUFDQSxHQUFHQSxDQUFDQTtnQkFDckNBLENBQUNBO2dCQUVEQSxPQUFPQSxJQUFJQSxDQUFDQSxTQUFTQSxHQUFHQSxJQUFJQSxDQUFDQSxpQkFBaUJBLEdBQUdBLENBQUNBLEdBQUdBO29CQUNwREEsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxJQUFJQSxHQUFHQSxDQUFDQTtnQkFFL0JBLE9BQU9BLElBQUlBLENBQUNBLFNBQVNBLEdBQUdBLElBQUlBLENBQUNBLGlCQUFpQkEsR0FBR0EsR0FBR0E7b0JBQ25EQSxJQUFJQSxDQUFDQSxpQkFBaUJBLElBQUlBLEdBQUdBLENBQUNBO1lBQ2hDQSxDQUFDQTtZQUVEQSxFQUFFQSxDQUFDQSxDQUFDQSxXQUFXQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFDakJBLElBQUlBLENBQUNBLGtCQUFrQkEsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsR0FBR0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxHQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFDeEZBLElBQUlBLENBQUNBLGlCQUFpQkEsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBR0EsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxHQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUN0RkEsQ0FBQ0E7WUFBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7Z0JBQ1BBLElBQUlBLENBQUNBLGlCQUFpQkEsR0FBR0EsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0E7Z0JBQ3hDQSxJQUFJQSxDQUFDQSxrQkFBa0JBLEdBQUdBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBO1lBQzNDQSxDQUFDQTtZQUVEQSxBQUNBQSw0Q0FENENBO1lBQzVDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxTQUFTQSxHQUFHQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLFNBQVNBLEdBQUdBLElBQUlBLENBQUNBLGlCQUFpQkEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQy9IQSxJQUFJQSxDQUFDQSxrQkFBa0JBLEdBQUdBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBO2dCQUMxQ0EsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxHQUFHQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQTtZQUN6Q0EsQ0FBQ0E7UUFDRkEsQ0FBQ0E7UUFFREEsSUFBSUEsR0FBR0EsR0FBWUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsR0FBRUEsSUFBSUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsUUFBUUEsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsR0FBRUEsSUFBSUEsQ0FBQ0EsY0FBY0EsR0FBR0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0E7UUFDMUlBLElBQUlBLENBQUNBLFlBQVlBLENBQUNBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLFFBQVFBLEdBQUNBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLGlCQUFpQkEsR0FBQ0EsVUFBVUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxrQkFBa0JBLEdBQUNBLFVBQVVBLENBQUNBLGtCQUFrQkEsQ0FBQ0EsQ0FBQ0E7UUFDM0tBLElBQUlBLENBQUNBLFlBQVlBLENBQUNBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLFFBQVFBLEdBQUNBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLGtCQUFrQkEsR0FBQ0EsVUFBVUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQTtRQUN6SEEsSUFBSUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxHQUFDQSxVQUFVQSxDQUFDQSxrQkFBa0JBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLGtCQUFrQkEsR0FBQ0EsVUFBVUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxDQUFDQTtRQUUzS0EsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxHQUFDQSxVQUFVQSxDQUFDQSxrQkFBa0JBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLGtCQUFrQkEsR0FBQ0EsVUFBVUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxDQUFDQTtRQUNqSkEsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxHQUFDQSxVQUFVQSxDQUFDQSxrQkFBa0JBLENBQUNBLENBQUNBO1FBQ2pGQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxpQkFBaUJBLEdBQUNBLFVBQVVBLENBQUNBLGtCQUFrQkEsQ0FBQ0EsR0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxHQUFDQSxVQUFVQSxDQUFDQSxrQkFBa0JBLENBQUNBLENBQUNBO1FBRWpKQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUN6QkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsZ0JBQWdCQSxDQUFDQTtnQkFDekJBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLGdCQUFnQkEsRUFBRUEsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0E7WUFDakVBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBO2dCQUM1QkEsSUFBSUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsS0FBS0EsR0FBRUEsSUFBSUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsYUFBYUEsR0FBR0EsSUFBSUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsU0FBU0EsQ0FBQ0EsUUFBUUEsRUFBRUEsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0E7UUFDbEpBLENBQUNBO0lBQ0ZBLENBQUNBO0lBQ0ZaLHNCQUFDQTtBQUFEQSxDQWpUQSxBQWlUQ0EsRUFqVDZCLGdCQUFnQixFQWlUN0M7QUFFRCxBQUF5QixpQkFBaEIsZUFBZSxDQUFDIiwiZmlsZSI6ImNvbnRyb2xsZXJzL0hvdmVyQ29udHJvbGxlci5qcyIsInNvdXJjZVJvb3QiOiIuLi8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTWF0aENvbnN0c1x0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2dlb20vTWF0aENvbnN0c1wiKTtcclxuaW1wb3J0IFZlY3RvcjNEXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9nZW9tL1ZlY3RvcjNEXCIpO1xyXG5cclxuaW1wb3J0IERpc3BsYXlPYmplY3RcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvYmFzZS9EaXNwbGF5T2JqZWN0XCIpO1xyXG5pbXBvcnQgTG9va0F0Q29udHJvbGxlclx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9jb250cm9sbGVycy9Mb29rQXRDb250cm9sbGVyXCIpO1xyXG5cclxuLyoqXHJcbiAqIEV4dGVuZGVkIGNhbWVyYSB1c2VkIHRvIGhvdmVyIHJvdW5kIGEgc3BlY2lmaWVkIHRhcmdldCBvYmplY3QuXHJcbiAqXHJcbiAqIEBzZWUgICAgYXdheS5jb250YWluZXJzLlZpZXdcclxuICovXHJcbmNsYXNzIEhvdmVyQ29udHJvbGxlciBleHRlbmRzIExvb2tBdENvbnRyb2xsZXJcclxue1xyXG5cdHB1YmxpYyBfaUN1cnJlbnRQYW5BbmdsZTpudW1iZXIgPSAwO1xyXG5cdHB1YmxpYyBfaUN1cnJlbnRUaWx0QW5nbGU6bnVtYmVyID0gOTA7XHJcblxyXG5cdHByaXZhdGUgX3BhbkFuZ2xlOm51bWJlciA9IDA7XHJcblx0cHJpdmF0ZSBfdGlsdEFuZ2xlOm51bWJlciA9IDkwO1xyXG5cdHByaXZhdGUgX2Rpc3RhbmNlOm51bWJlciA9IDEwMDA7XHJcblx0cHJpdmF0ZSBfbWluUGFuQW5nbGU6bnVtYmVyID0gLUluZmluaXR5O1xyXG5cdHByaXZhdGUgX21heFBhbkFuZ2xlOm51bWJlciA9IEluZmluaXR5O1xyXG5cdHByaXZhdGUgX21pblRpbHRBbmdsZTpudW1iZXIgPSAtOTA7XHJcblx0cHJpdmF0ZSBfbWF4VGlsdEFuZ2xlOm51bWJlciA9IDkwO1xyXG5cdHByaXZhdGUgX3N0ZXBzOm51bWJlciA9IDg7XHJcblx0cHJpdmF0ZSBfeUZhY3RvcjpudW1iZXIgPSAyO1xyXG5cdHByaXZhdGUgX3dyYXBQYW5BbmdsZTpib29sZWFuID0gZmFsc2U7XHJcblx0cHJpdmF0ZSBfdXBBeGlzOlZlY3RvcjNEID0gbmV3IFZlY3RvcjNEKCk7XHJcblxyXG5cdC8qKlxyXG5cdCAqIEZyYWN0aW9uYWwgc3RlcCB0YWtlbiBlYWNoIHRpbWUgdGhlIDxjb2RlPmhvdmVyKCk8L2NvZGU+IG1ldGhvZCBpcyBjYWxsZWQuIERlZmF1bHRzIHRvIDguXHJcblx0ICpcclxuXHQgKiBBZmZlY3RzIHRoZSBzcGVlZCBhdCB3aGljaCB0aGUgPGNvZGU+dGlsdEFuZ2xlPC9jb2RlPiBhbmQgPGNvZGU+cGFuQW5nbGU8L2NvZGU+IHJlc29sdmUgdG8gdGhlaXIgdGFyZ2V0cy5cclxuXHQgKlxyXG5cdCAqIEBzZWUgICAgI3RpbHRBbmdsZVxyXG5cdCAqIEBzZWUgICAgI3BhbkFuZ2xlXHJcblx0ICovXHJcblx0cHVibGljIGdldCBzdGVwcygpOm51bWJlclxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9zdGVwcztcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXQgc3RlcHModmFsOm51bWJlcilcclxuXHR7XHJcblx0XHR2YWwgPSAodmFsIDwgMSk/IDEgOiB2YWw7XHJcblxyXG5cdFx0aWYgKHRoaXMuX3N0ZXBzID09IHZhbClcclxuXHRcdFx0cmV0dXJuO1xyXG5cclxuXHRcdHRoaXMuX3N0ZXBzID0gdmFsO1xyXG5cclxuXHRcdHRoaXMucE5vdGlmeVVwZGF0ZSgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUm90YXRpb24gb2YgdGhlIGNhbWVyYSBpbiBkZWdyZWVzIGFyb3VuZCB0aGUgeSBheGlzLiBEZWZhdWx0cyB0byAwLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBnZXQgcGFuQW5nbGUoKTpudW1iZXJcclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5fcGFuQW5nbGU7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IHBhbkFuZ2xlKHZhbDpudW1iZXIpXHJcblx0e1xyXG5cdFx0dmFsID0gTWF0aC5tYXgodGhpcy5fbWluUGFuQW5nbGUsIE1hdGgubWluKHRoaXMuX21heFBhbkFuZ2xlLCB2YWwpKTtcclxuXHJcblx0XHRpZiAodGhpcy5fcGFuQW5nbGUgPT0gdmFsKVxyXG5cdFx0XHRyZXR1cm47XHJcblxyXG5cdFx0dGhpcy5fcGFuQW5nbGUgPSB2YWw7XHJcblxyXG5cdFx0dGhpcy5wTm90aWZ5VXBkYXRlKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBFbGV2YXRpb24gYW5nbGUgb2YgdGhlIGNhbWVyYSBpbiBkZWdyZWVzLiBEZWZhdWx0cyB0byA5MC5cclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0IHRpbHRBbmdsZSgpOm51bWJlclxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl90aWx0QW5nbGU7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IHRpbHRBbmdsZSh2YWw6bnVtYmVyKVxyXG5cdHtcclxuXHRcdHZhbCA9IE1hdGgubWF4KHRoaXMuX21pblRpbHRBbmdsZSwgTWF0aC5taW4odGhpcy5fbWF4VGlsdEFuZ2xlLCB2YWwpKTtcclxuXHJcblx0XHRpZiAodGhpcy5fdGlsdEFuZ2xlID09IHZhbClcclxuXHRcdFx0cmV0dXJuO1xyXG5cclxuXHRcdHRoaXMuX3RpbHRBbmdsZSA9IHZhbDtcclxuXHJcblx0XHR0aGlzLnBOb3RpZnlVcGRhdGUoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIERpc3RhbmNlIGJldHdlZW4gdGhlIGNhbWVyYSBhbmQgdGhlIHNwZWNpZmllZCB0YXJnZXQuIERlZmF1bHRzIHRvIDEwMDAuXHJcblx0ICovXHJcblx0cHVibGljIGdldCBkaXN0YW5jZSgpOm51bWJlclxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9kaXN0YW5jZTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXQgZGlzdGFuY2UodmFsOm51bWJlcilcclxuXHR7XHJcblx0XHRpZiAodGhpcy5fZGlzdGFuY2UgPT0gdmFsKVxyXG5cdFx0XHRyZXR1cm47XHJcblxyXG5cdFx0dGhpcy5fZGlzdGFuY2UgPSB2YWw7XHJcblxyXG5cdFx0dGhpcy5wTm90aWZ5VXBkYXRlKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBNaW5pbXVtIGJvdW5kcyBmb3IgdGhlIDxjb2RlPnBhbkFuZ2xlPC9jb2RlPi4gRGVmYXVsdHMgdG8gLUluZmluaXR5LlxyXG5cdCAqXHJcblx0ICogQHNlZSAgICAjcGFuQW5nbGVcclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0IG1pblBhbkFuZ2xlKCk6bnVtYmVyXHJcblx0e1xyXG5cdFx0cmV0dXJuIHRoaXMuX21pblBhbkFuZ2xlO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldCBtaW5QYW5BbmdsZSh2YWw6bnVtYmVyKVxyXG5cdHtcclxuXHRcdGlmICh0aGlzLl9taW5QYW5BbmdsZSA9PSB2YWwpXHJcblx0XHRcdHJldHVybjtcclxuXHJcblx0XHR0aGlzLl9taW5QYW5BbmdsZSA9IHZhbDtcclxuXHJcblx0XHR0aGlzLnBhbkFuZ2xlID0gTWF0aC5tYXgodGhpcy5fbWluUGFuQW5nbGUsIE1hdGgubWluKHRoaXMuX21heFBhbkFuZ2xlLCB0aGlzLl9wYW5BbmdsZSkpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogTWF4aW11bSBib3VuZHMgZm9yIHRoZSA8Y29kZT5wYW5BbmdsZTwvY29kZT4uIERlZmF1bHRzIHRvIEluZmluaXR5LlxyXG5cdCAqXHJcblx0ICogQHNlZSAgICAjcGFuQW5nbGVcclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0IG1heFBhbkFuZ2xlKCk6bnVtYmVyXHJcblx0e1xyXG5cdFx0cmV0dXJuIHRoaXMuX21heFBhbkFuZ2xlO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldCBtYXhQYW5BbmdsZSh2YWw6bnVtYmVyKVxyXG5cdHtcclxuXHRcdGlmICh0aGlzLl9tYXhQYW5BbmdsZSA9PSB2YWwpXHJcblx0XHRcdHJldHVybjtcclxuXHJcblx0XHR0aGlzLl9tYXhQYW5BbmdsZSA9IHZhbDtcclxuXHJcblx0XHR0aGlzLnBhbkFuZ2xlID0gTWF0aC5tYXgodGhpcy5fbWluUGFuQW5nbGUsIE1hdGgubWluKHRoaXMuX21heFBhbkFuZ2xlLCB0aGlzLl9wYW5BbmdsZSkpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogTWluaW11bSBib3VuZHMgZm9yIHRoZSA8Y29kZT50aWx0QW5nbGU8L2NvZGU+LiBEZWZhdWx0cyB0byAtOTAuXHJcblx0ICpcclxuXHQgKiBAc2VlICAgICN0aWx0QW5nbGVcclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0IG1pblRpbHRBbmdsZSgpOm51bWJlclxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9taW5UaWx0QW5nbGU7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IG1pblRpbHRBbmdsZSh2YWw6bnVtYmVyKVxyXG5cdHtcclxuXHRcdGlmICh0aGlzLl9taW5UaWx0QW5nbGUgPT0gdmFsKVxyXG5cdFx0XHRyZXR1cm47XHJcblxyXG5cdFx0dGhpcy5fbWluVGlsdEFuZ2xlID0gdmFsO1xyXG5cclxuXHRcdHRoaXMudGlsdEFuZ2xlID0gTWF0aC5tYXgodGhpcy5fbWluVGlsdEFuZ2xlLCBNYXRoLm1pbih0aGlzLl9tYXhUaWx0QW5nbGUsIHRoaXMuX3RpbHRBbmdsZSkpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogTWF4aW11bSBib3VuZHMgZm9yIHRoZSA8Y29kZT50aWx0QW5nbGU8L2NvZGU+LiBEZWZhdWx0cyB0byA5MC5cclxuXHQgKlxyXG5cdCAqIEBzZWUgICAgI3RpbHRBbmdsZVxyXG5cdCAqL1xyXG5cdHB1YmxpYyBnZXQgbWF4VGlsdEFuZ2xlKCk6bnVtYmVyXHJcblx0e1xyXG5cdFx0cmV0dXJuIHRoaXMuX21heFRpbHRBbmdsZTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXQgbWF4VGlsdEFuZ2xlKHZhbDpudW1iZXIpXHJcblx0e1xyXG5cdFx0aWYgKHRoaXMuX21heFRpbHRBbmdsZSA9PSB2YWwpXHJcblx0XHRcdHJldHVybjtcclxuXHJcblx0XHR0aGlzLl9tYXhUaWx0QW5nbGUgPSB2YWw7XHJcblxyXG5cdFx0dGhpcy50aWx0QW5nbGUgPSBNYXRoLm1heCh0aGlzLl9taW5UaWx0QW5nbGUsIE1hdGgubWluKHRoaXMuX21heFRpbHRBbmdsZSwgdGhpcy5fdGlsdEFuZ2xlKSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBGcmFjdGlvbmFsIGRpZmZlcmVuY2UgaW4gZGlzdGFuY2UgYmV0d2VlbiB0aGUgaG9yaXpvbnRhbCBjYW1lcmEgb3JpZW50YXRpb24gYW5kIHZlcnRpY2FsIGNhbWVyYSBvcmllbnRhdGlvbi4gRGVmYXVsdHMgdG8gMi5cclxuXHQgKlxyXG5cdCAqIEBzZWUgICAgI2Rpc3RhbmNlXHJcblx0ICovXHJcblx0cHVibGljIGdldCB5RmFjdG9yKCk6bnVtYmVyXHJcblx0e1xyXG5cdFx0cmV0dXJuIHRoaXMuX3lGYWN0b3I7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IHlGYWN0b3IodmFsOm51bWJlcilcclxuXHR7XHJcblx0XHRpZiAodGhpcy5feUZhY3RvciA9PSB2YWwpXHJcblx0XHRcdHJldHVybjtcclxuXHJcblx0XHR0aGlzLl95RmFjdG9yID0gdmFsO1xyXG5cclxuXHRcdHRoaXMucE5vdGlmeVVwZGF0ZSgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRGVmaW5lcyB3aGV0aGVyIHRoZSB2YWx1ZSBvZiB0aGUgcGFuIGFuZ2xlIHdyYXBzIHdoZW4gb3ZlciAzNjAgZGVncmVlcyBvciB1bmRlciAwIGRlZ3JlZXMuIERlZmF1bHRzIHRvIGZhbHNlLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBnZXQgd3JhcFBhbkFuZ2xlKCk6Ym9vbGVhblxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl93cmFwUGFuQW5nbGU7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IHdyYXBQYW5BbmdsZSh2YWw6Ym9vbGVhbilcclxuXHR7XHJcblx0XHRpZiAodGhpcy5fd3JhcFBhbkFuZ2xlID09IHZhbClcclxuXHRcdFx0cmV0dXJuO1xyXG5cclxuXHRcdHRoaXMuX3dyYXBQYW5BbmdsZSA9IHZhbDtcclxuXHJcblx0XHR0aGlzLnBOb3RpZnlVcGRhdGUoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENyZWF0ZXMgYSBuZXcgPGNvZGU+SG92ZXJDb250cm9sbGVyPC9jb2RlPiBvYmplY3QuXHJcblx0ICovXHJcblx0Y29uc3RydWN0b3IodGFyZ2V0T2JqZWN0OkRpc3BsYXlPYmplY3QgPSBudWxsLCBsb29rQXRPYmplY3Q6RGlzcGxheU9iamVjdCA9IG51bGwsIHBhbkFuZ2xlOm51bWJlciA9IDAsIHRpbHRBbmdsZTpudW1iZXIgPSA5MCwgZGlzdGFuY2U6bnVtYmVyID0gMTAwMCwgbWluVGlsdEFuZ2xlOm51bWJlciA9IC05MCwgbWF4VGlsdEFuZ2xlOm51bWJlciA9IDkwLCBtaW5QYW5BbmdsZTpudW1iZXIgPSBudWxsLCBtYXhQYW5BbmdsZTpudW1iZXIgPSBudWxsLCBzdGVwczpudW1iZXIgPSA4LCB5RmFjdG9yOm51bWJlciA9IDIsIHdyYXBQYW5BbmdsZTpib29sZWFuID0gZmFsc2UpXHJcblx0e1xyXG5cdFx0c3VwZXIodGFyZ2V0T2JqZWN0LCBsb29rQXRPYmplY3QpO1xyXG5cclxuXHRcdHRoaXMuZGlzdGFuY2UgPSBkaXN0YW5jZTtcclxuXHRcdHRoaXMucGFuQW5nbGUgPSBwYW5BbmdsZTtcclxuXHRcdHRoaXMudGlsdEFuZ2xlID0gdGlsdEFuZ2xlO1xyXG5cdFx0dGhpcy5taW5QYW5BbmdsZSA9ICggbWluUGFuQW5nbGUgIT0gbnVsbCApPyBtaW5QYW5BbmdsZSA6IC1JbmZpbml0eTtcclxuXHRcdHRoaXMubWF4UGFuQW5nbGUgPSAoIG1heFBhbkFuZ2xlICE9IG51bGwgKT8gbWF4UGFuQW5nbGUgOiBJbmZpbml0eTtcclxuXHRcdHRoaXMubWluVGlsdEFuZ2xlID0gbWluVGlsdEFuZ2xlO1xyXG5cdFx0dGhpcy5tYXhUaWx0QW5nbGUgPSBtYXhUaWx0QW5nbGU7XHJcblx0XHR0aGlzLnN0ZXBzID0gc3RlcHM7XHJcblx0XHR0aGlzLnlGYWN0b3IgPSB5RmFjdG9yO1xyXG5cdFx0dGhpcy53cmFwUGFuQW5nbGUgPSB3cmFwUGFuQW5nbGU7XHJcblxyXG5cdFx0Ly92YWx1ZXMgcGFzc2VkIGluIGNvbnRydXN0b3IgYXJlIGFwcGxpZWQgaW1tZWRpYXRlbHlcclxuXHRcdHRoaXMuX2lDdXJyZW50UGFuQW5nbGUgPSB0aGlzLl9wYW5BbmdsZTtcclxuXHRcdHRoaXMuX2lDdXJyZW50VGlsdEFuZ2xlID0gdGhpcy5fdGlsdEFuZ2xlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlcyB0aGUgY3VycmVudCB0aWx0IGFuZ2xlIGFuZCBwYW4gYW5nbGUgdmFsdWVzLlxyXG5cdCAqXHJcblx0ICogVmFsdWVzIGFyZSBjYWxjdWxhdGVkIHVzaW5nIHRoZSBkZWZpbmVkIDxjb2RlPnRpbHRBbmdsZTwvY29kZT4sIDxjb2RlPnBhbkFuZ2xlPC9jb2RlPiBhbmQgPGNvZGU+c3RlcHM8L2NvZGU+IHZhcmlhYmxlcy5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBpbnRlcnBvbGF0ZSAgIElmIHRoZSB1cGRhdGUgdG8gYSB0YXJnZXQgcGFuLSBvciB0aWx0QW5nbGUgaXMgaW50ZXJwb2xhdGVkLiBEZWZhdWx0IGlzIHRydWUuXHJcblx0ICpcclxuXHQgKiBAc2VlICAgICN0aWx0QW5nbGVcclxuXHQgKiBAc2VlICAgICNwYW5BbmdsZVxyXG5cdCAqIEBzZWUgICAgI3N0ZXBzXHJcblx0ICovXHJcblx0cHVibGljIHVwZGF0ZShpbnRlcnBvbGF0ZTpib29sZWFuID0gdHJ1ZSlcclxuXHR7XHJcblx0XHRpZiAodGhpcy5fdGlsdEFuZ2xlICE9IHRoaXMuX2lDdXJyZW50VGlsdEFuZ2xlIHx8IHRoaXMuX3BhbkFuZ2xlICE9IHRoaXMuX2lDdXJyZW50UGFuQW5nbGUpIHtcclxuXHJcblx0XHRcdHRoaXMucE5vdGlmeVVwZGF0ZSgpO1xyXG5cclxuXHRcdFx0aWYgKHRoaXMuX3dyYXBQYW5BbmdsZSkge1xyXG5cdFx0XHRcdGlmICh0aGlzLl9wYW5BbmdsZSA8IDApIHtcclxuXHRcdFx0XHRcdHRoaXMuX2lDdXJyZW50UGFuQW5nbGUgKz0gdGhpcy5fcGFuQW5nbGUlMzYwICsgMzYwIC0gdGhpcy5fcGFuQW5nbGU7XHJcblx0XHRcdFx0XHR0aGlzLl9wYW5BbmdsZSA9IHRoaXMuX3BhbkFuZ2xlJTM2MCArIDM2MDtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dGhpcy5faUN1cnJlbnRQYW5BbmdsZSArPSB0aGlzLl9wYW5BbmdsZSUzNjAgLSB0aGlzLl9wYW5BbmdsZTtcclxuXHRcdFx0XHRcdHRoaXMuX3BhbkFuZ2xlID0gdGhpcy5fcGFuQW5nbGUlMzYwO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0d2hpbGUgKHRoaXMuX3BhbkFuZ2xlIC0gdGhpcy5faUN1cnJlbnRQYW5BbmdsZSA8IC0xODApXHJcblx0XHRcdFx0XHR0aGlzLl9pQ3VycmVudFBhbkFuZ2xlIC09IDM2MDtcclxuXHJcblx0XHRcdFx0d2hpbGUgKHRoaXMuX3BhbkFuZ2xlIC0gdGhpcy5faUN1cnJlbnRQYW5BbmdsZSA+IDE4MClcclxuXHRcdFx0XHRcdHRoaXMuX2lDdXJyZW50UGFuQW5nbGUgKz0gMzYwO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoaW50ZXJwb2xhdGUpIHtcclxuXHRcdFx0XHR0aGlzLl9pQ3VycmVudFRpbHRBbmdsZSArPSAodGhpcy5fdGlsdEFuZ2xlIC0gdGhpcy5faUN1cnJlbnRUaWx0QW5nbGUpLyh0aGlzLnN0ZXBzICsgMSk7XHJcblx0XHRcdFx0dGhpcy5faUN1cnJlbnRQYW5BbmdsZSArPSAodGhpcy5fcGFuQW5nbGUgLSB0aGlzLl9pQ3VycmVudFBhbkFuZ2xlKS8odGhpcy5zdGVwcyArIDEpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuX2lDdXJyZW50UGFuQW5nbGUgPSB0aGlzLl9wYW5BbmdsZTtcclxuXHRcdFx0XHR0aGlzLl9pQ3VycmVudFRpbHRBbmdsZSA9IHRoaXMuX3RpbHRBbmdsZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly9zbmFwIGNvb3JkcyBpZiBhbmdsZSBkaWZmZXJlbmNlcyBhcmUgY2xvc2VcclxuXHRcdFx0aWYgKChNYXRoLmFicyh0aGlzLnRpbHRBbmdsZSAtIHRoaXMuX2lDdXJyZW50VGlsdEFuZ2xlKSA8IDAuMDEpICYmIChNYXRoLmFicyh0aGlzLl9wYW5BbmdsZSAtIHRoaXMuX2lDdXJyZW50UGFuQW5nbGUpIDwgMC4wMSkpIHtcclxuXHRcdFx0XHR0aGlzLl9pQ3VycmVudFRpbHRBbmdsZSA9IHRoaXMuX3RpbHRBbmdsZTtcclxuXHRcdFx0XHR0aGlzLl9pQ3VycmVudFBhbkFuZ2xlID0gdGhpcy5fcGFuQW5nbGU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR2YXIgcG9zOlZlY3RvcjNEID0gKHRoaXMubG9va0F0T2JqZWN0KT8gdGhpcy5sb29rQXRPYmplY3QudHJhbnNmb3JtLnBvc2l0aW9uIDogKHRoaXMubG9va0F0UG9zaXRpb24pPyB0aGlzLmxvb2tBdFBvc2l0aW9uIDogdGhpcy5fcE9yaWdpbjtcclxuXHRcdHRoaXMudGFyZ2V0T2JqZWN0LnggPSBwb3MueCArIHRoaXMuZGlzdGFuY2UqTWF0aC5zaW4odGhpcy5faUN1cnJlbnRQYW5BbmdsZSpNYXRoQ29uc3RzLkRFR1JFRVNfVE9fUkFESUFOUykqTWF0aC5jb3ModGhpcy5faUN1cnJlbnRUaWx0QW5nbGUqTWF0aENvbnN0cy5ERUdSRUVTX1RPX1JBRElBTlMpO1xyXG5cdFx0dGhpcy50YXJnZXRPYmplY3QueSA9IHBvcy55ICsgdGhpcy5kaXN0YW5jZSpNYXRoLnNpbih0aGlzLl9pQ3VycmVudFRpbHRBbmdsZSpNYXRoQ29uc3RzLkRFR1JFRVNfVE9fUkFESUFOUykqdGhpcy55RmFjdG9yO1xyXG5cdFx0dGhpcy50YXJnZXRPYmplY3QueiA9IHBvcy56ICsgdGhpcy5kaXN0YW5jZSpNYXRoLmNvcyh0aGlzLl9pQ3VycmVudFBhbkFuZ2xlKk1hdGhDb25zdHMuREVHUkVFU19UT19SQURJQU5TKSpNYXRoLmNvcyh0aGlzLl9pQ3VycmVudFRpbHRBbmdsZSpNYXRoQ29uc3RzLkRFR1JFRVNfVE9fUkFESUFOUyk7XHJcblxyXG5cdFx0dGhpcy5fdXBBeGlzLnggPSAtTWF0aC5zaW4odGhpcy5faUN1cnJlbnRQYW5BbmdsZSpNYXRoQ29uc3RzLkRFR1JFRVNfVE9fUkFESUFOUykqTWF0aC5zaW4odGhpcy5faUN1cnJlbnRUaWx0QW5nbGUqTWF0aENvbnN0cy5ERUdSRUVTX1RPX1JBRElBTlMpO1xyXG5cdFx0dGhpcy5fdXBBeGlzLnkgPSBNYXRoLmNvcyh0aGlzLl9pQ3VycmVudFRpbHRBbmdsZSpNYXRoQ29uc3RzLkRFR1JFRVNfVE9fUkFESUFOUyk7XHJcblx0XHR0aGlzLl91cEF4aXMueiA9IC1NYXRoLmNvcyh0aGlzLl9pQ3VycmVudFBhbkFuZ2xlKk1hdGhDb25zdHMuREVHUkVFU19UT19SQURJQU5TKSpNYXRoLnNpbih0aGlzLl9pQ3VycmVudFRpbHRBbmdsZSpNYXRoQ29uc3RzLkRFR1JFRVNfVE9fUkFESUFOUyk7XHJcblxyXG5cdFx0aWYgKHRoaXMuX3BUYXJnZXRPYmplY3QpIHtcclxuXHRcdFx0aWYgKHRoaXMuX3BMb29rQXRQb3NpdGlvbilcclxuXHRcdFx0XHR0aGlzLl9wVGFyZ2V0T2JqZWN0Lmxvb2tBdCh0aGlzLl9wTG9va0F0UG9zaXRpb24sIHRoaXMuX3VwQXhpcyk7XHJcblx0XHRcdGVsc2UgaWYgKHRoaXMuX3BMb29rQXRPYmplY3QpXHJcblx0XHRcdFx0dGhpcy5fcFRhcmdldE9iamVjdC5sb29rQXQodGhpcy5fcExvb2tBdE9iamVjdC5zY2VuZT8gdGhpcy5fcExvb2tBdE9iamVjdC5zY2VuZVBvc2l0aW9uIDogdGhpcy5fcExvb2tBdE9iamVjdC50cmFuc2Zvcm0ucG9zaXRpb24sIHRoaXMuX3VwQXhpcyk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgPSBIb3ZlckNvbnRyb2xsZXI7Il19